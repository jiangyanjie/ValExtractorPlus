339e8a51b2a02a69bc8983d69ecda2566a1f4200###/MyCATApache_Mycat-Server/src/main/java/io/mycat/catlets/ShareJoin.java###/ShareJoin.java###io.mycat.catlets.ShareJoin###createQryJob:int ###batchRows.put(theId,rows.remove(theId));###rowbyte###rows.remove(theId)###212:4:212:45
4c7de67cc0714f7503a70df30382fd009ea374f3###/MyCATApache_Mycat-Server/src/main/java/io/mycat/migrate/BinlogIdleCheck.java###/BinlogIdleCheck.java###io.mycat.migrate.BinlogIdleCheck###run:###TaskNodetaskNode=JSON.parseObject(ZKUtils.getConnection().getData().forPath(taskPath),TaskNode.class);###taskNodeStr###ZKUtils.getConnection().getData().forPath(taskPath)###69:13:69:118
3192cb6d1a044982aa74518e30c7d1c7360b59cb###/MyCATApache_Mycat-Server/src/main/java/io/mycat/config/loader/zkprocess/zktoxml/ZktoXmlMain.java###/ZktoXmlMain.java###io.mycat.config.loader.zkprocess.zktoxml.ZktoXmlMain###runWatch:CuratorFramework String ZookeeperProcessListen ###cache.getListenable().addListener(newNodeCacheListener(){@OverridepublicvoidnodeChanged()throwsException{LOGGER.info("ZktoxmlMainrunWatchprocesspatheventstart");LOGGER.info("NodeCachechanged,pathis:"+cache.getCurrentData().getPath());StringnotPath=cache.getCurrentData().getPath();zkListen.notifly(notPath);LOGGER.info("ZktoxmlMainrunWatchprocesspatheventover");}});###listen###newNodeCacheListener(){@OverridepublicvoidnodeChanged()throwsException{LOGGER.info("ZktoxmlMainrunWatchprocesspatheventstart");LOGGER.info("NodeCachechanged,pathis:"+cache.getCurrentData().getPath());StringnotPath=cache.getCurrentData().getPath();zkListen.notifly(notPath);LOGGER.info("ZktoxmlMainrunWatchprocesspatheventover");}}###158:9:168:12
3f4d6bc0ecca01ae639b066cf097f304b1f3f62b###/MyCATApache_Mycat-Server/src/main/java/io/mycat/migrate/BinlogStream.java###/BinlogStream.java###io.mycat.migrate.BinlogStream.DelegatingEventListener###handleUpdateRowsEvent:Event ###StringBuildersb=newStringBuilder("update");###sba###newStringBuilder("update")###459:13:459:59
cfc4a2cd1ada7fd3ccfea5abc9ddb1103f622e04###/MyCATApache_Mycat-Server/src/main/java/io/mycat/backend/jdbc/JDBCConnection.java###/JDBCConnection.java###io.mycat.backend.jdbc.JDBCConnection###ouputResultSet:ServerConnection String ###ResultSetUtil.resultSetToFieldPacket(sc.getCharset(),fieldPks,rs,this.isSpark);###tempRS###rs###629:4:630:20
3768454de67650bcbf8c0c0c2cdeed0305351d26###/MyCATApache_Mycat-Server/src/main/java/io/mycat/backend/mysql/nio/handler/MultiNodeCoordinator.java###/MultiNodeCoordinator.java###io.mycat.backend.mysql.nio.handler.MultiNodeCoordinator###errorResponse:byte[] BackendConnection ###this.setFail(newString(errorPacket.message));###msg###newString(errorPacket.message)###170:3:170:49
b3c9b99e1ff419a1f9f591724c670bdf21e618c1###/MyCATApache_Mycat-Server/src/main/java/io/mycat/backend/jdbc/JDBCConnection.java###/JDBCConnection.java###io.mycat.backend.jdbc.JDBCConnection###ouputCallStatement:RouteResultsetNode ServerConnection String ###rs=(ResultSet)stmt.getObject(paramter.getIndex());###object###stmt.getObject(paramter.getIndex())###436:23:436:75
46ecc53c5c50979e48c10a816759133c8ea05bdc###/MyCATApache_Mycat-Server/src/main/java/io/mycat/route/parser/druid/impl/DruidDeleteParser.java###/DruidDeleteParser.java###io.mycat.route.parser.druid.impl.DruidDeleteParser###statementParse:SchemaConfig RouteResultset SQLStatement ###tableID2DataNodeCache.clearCache(schema.getName().toLowerCase()+"_"+tableName.toUpperCase());###cacheName###schema.getName().toLowerCase()+"_"+tableName.toUpperCase()###24:3:24:96
263a075afec4526ccaae9561620cedbfd56bc016###/MyCATApache_Mycat-Server/src/main/java/io/mycat/migrate/BinlogStream.java###/BinlogStream.java###io.mycat.migrate.BinlogStream.DelegatingEventListener###handleUpdateRowsEvent:Event ###StringBuildersb=newStringBuilder("update");###sba###newStringBuilder("update")###431:13:431:59
b406c3a54f5ff80461832bbdb11abba8f84428b6###/MyCATApache_Mycat-Server/src/main/java/io/mycat/backend/heartbeat/MySQLConsistencyCheckerHandler.java###/MySQLConsistencyCheckerHandler.java###io.mycat.backend.heartbeat.MySQLConsistencyCheckerHandler###setResult:SQLQueryResult<Map<String,String>> ###LOGGER.warn(sql+"executefailedindb:"+result.getDataNode()+"duringglobaltableconsistencychecktask.");###errMsg###sql+"executefailedindb:"+result.getDataNode()+"duringglobaltableconsistencychecktask."###144:6:145:60
6e0a4511f90972a1c2206de0c8c48807ec5cd856###/MyCATApache_Mycat-Server/src/main/java/io/mycat/route/util/RouterUtil.java###/RouterUtil.java###io.mycat.route.util.RouterUtil###processSQL:ServerConnection SchemaConfig String int ###MycatServer.getInstance().getSequnceProcessor().addNewSql(newSessionSQLPair(sc.getSession2(),schema,sql,sqlType));###sessionSQLPair###newSessionSQLPair(sc.getSession2(),schema,sql,sqlType)###459:3:459:121
cac065952e31c7635a19b8fa12c1e1c546696980###/MyCATApache_Mycat-Server/src/main/java/io/mycat/backend/mysql/nio/handler/MultiNodeQueryHandler.java###/MultiNodeQueryHandler.java###io.mycat.backend.mysql.nio.handler.MultiNodeQueryHandler###outputMergeResult:ServerConnection byte[] Iterator<UnsafeRow> ###source.write(source.writeToBuffer(eof,buffer));###byteBuffer###source.writeToBuffer(eof,buffer)###451:4:451:52
0132aea74f9c29db8d90a8bfd834f8a566844c25###/MyCATApache_Mycat-Server/src/main/java/io/mycat/config/loader/xml/XMLSchemaLoader.java###/XMLSchemaLoader.java###io.mycat.config.loader.xml.XMLSchemaLoader###loadTables:Element ###tableRuleConfig.getRule().getRuleAlgorithm().init();###newRuleAlgorithm###tableRuleConfig.getRule().getRuleAlgorithm()###382:9:382:61
419cdae3f64bbe3a9d6858fb064000022bd23fc3###/MyCATApache_Mycat-Server/src/main/java/io/mycat/route/util/RouterUtil.java###/RouterUtil.java###io.mycat.route.util.RouterUtil###findRouteWithcConditionsForTables:SchemaConfig RouteResultset Map<String,Map<String,Set<ColumnRoutePair>>> Map<String,Set<String>> String LayerCachePool boolean ###Stringnode=tableConfig.getDataNodes().get(nodeIndex);###dataNodes###tableConfig.getDataNodes()###1120:9:1120:65
0e608c84c2324b9442e53019269d8b5a65a2cef4###/MyCATApache_Mycat-Server/src/main/java/io/mycat/backend/datasource/PhysicalDBPool.java###/PhysicalDBPool.java###io.mycat.backend.datasource.PhysicalDBPool###canSelectAsReadNode:PhysicalDatasource ###if(theSource.getHeartbeat().getSlaveBehindMaster()==null||theSource.getHeartbeat().getDbSynStatus()==DBHeartbeat.DB_SYN_ERROR)###dbSynStatus###theSource.getHeartbeat().getDbSynStatus()###525:9:528:10
447329b29fc804aa4a38d9daf395cea4a0c2a042###/MyCATApache_Mycat-Server/src/main/java/io/mycat/route/impl/DruidMycatRouteStrategy.java###/DruidMycatRouteStrategy.java###io.mycat.route.impl.DruidMycatRouteStrategy###routeNormalSqlWithAST:SchemaConfig String RouteResultset String LayerCachePool int ServerConnection ###thrownewUnsupportedOperationException("Incaseofslicetable,sqlhavedifferentrules,therelationshipconditionisnotsupported.");###err###"Incaseofslicetable,sqlhavedifferentrules,therelationshipconditionisnotsupported."###188:6:188:142
f2a1a85319fceccfc9f87232262486cb9eccf1f7###/MyCATApache_Mycat-Server/src/main/java/io/mycat/server/interceptor/impl/GlobalTableUtil.java###/GlobalTableUtil.java###io.mycat.server.interceptor.impl.GlobalTableUtil###hasGlobalColumn:SQLStatement ###StringsimpleName=((SQLColumnDefinition)tableElement).getName().getSimpleName();###sqlName###((SQLColumnDefinition)tableElement).getName()###176:4:176:86
c6a2e290ece4767541a975cff6f03d7f1b7385ef###/MyCATApache_Mycat-Server/src/main/java/io/mycat/backend/mysql/nio/handler/MultiNodeQueryHandler.java###/MultiNodeQueryHandler.java###io.mycat.backend.mysql.nio.handler.MultiNodeQueryHandler###fieldEofResponse:byte[] List<byte[]> byte[] BackendConnection ###columToIndx.put(fieldName,newColMeta(i,fieldPkg.type));###colMeta###newColMeta(i,fieldPkg.type)###623:7:624:40
7c715e968ec006dc48a670ea3163926f0158a329###/MyCATApache_Mycat-Server/src/main/java/io/mycat/config/loader/xml/XMLSchemaLoader.java###/XMLSchemaLoader.java###io.mycat.config.loader.xml.XMLSchemaLoader###loadTables:Element ###TableConfigtable=newTableConfig(tableName,primaryKey,autoIncrement,needAddLimit,tableType,dataNode,getDbType(dataNode),(tableRule!=null)?tableRule.getRule():null,ruleRequired,null,false,null,null,subTables);###tableRuleConfig###tableRule###362:5:366:56
0132aea74f9c29db8d90a8bfd834f8a566844c25###/MyCATApache_Mycat-Server/src/main/java/io/mycat/catlets/ShareJoin.java###/ShareJoin.java###io.mycat.catlets.ShareRowOutPutDataHandler###getRow:Map<String,byte[]> String int ###Stringid=ByteUtil.getString(rowDataPkg.fieldValues.get(index));###columnValue###rowDataPkg.fieldValues.get(index)###363:4:363:70
1b451360cdcc2f56dd00976b555fa10dd87dc686###/MyCATApache_Mycat-Server/src/main/java/io/mycat/sqlengine/mpp/DataNodeMergeManager.java###/DataNodeMergeManager.java###io.mycat.sqlengine.mpp.DataNodeMergeManager###onRowMetaData:Map<String,ColMeta> int ###unsafeRowGrouper=newUnsafeRowGrouper(columToIndx,rrs.getGroupByCols(),mergCols.toArray(newMergeCol[mergCols.size()]),rrs.getHavingCols());###mergColsArrays###mergCols.toArray(newMergeCol[mergCols.size()])###185:13:187:42
88172a79c8ad73cf0b10040eb7f1d9bb371fddc9###/MyCATApache_Mycat-Server/src/main/java/io/mycat/backend/jdbc/JDBCConnection.java###/JDBCConnection.java###io.mycat.backend.jdbc.JDBCConnection###ouputResultSet:ServerConnection String ###ResultSetUtil.resultSetToFieldPacket(sc.getCharset(),fieldPks,rs,this.isSpark);###tempRS###rs###595:4:596:20
0589d365800ed7c59d449cdcd118b6197d98adc0###/MyCATApache_Mycat-Server/src/main/java/io/mycat/route/util/RouterUtil.java###/RouterUtil.java###io.mycat.route.util.RouterUtil###findRouteWithcConditionsForTables:SchemaConfig RouteResultset Map<String,Map<String,Set<ColumnRoutePair>>> Map<String,Set<String>> String LayerCachePool boolean ###IntegernodeIndex=tableConfig.getRule().getRuleAlgorithm().calculate(pair.colValue);###algorithm###tableConfig.getRule().getRuleAlgorithm()###1188:9:1188:95
ebc06f5ff8ec3484027c2770af4ea61db421b036###/MyCATApache_Mycat-Server/src/main/java/io/mycat/migrate/MigrateDumpRunner.java###/MigrateDumpRunner.java###io.mycat.migrate.MigrateDumpRunner###exeCreateTableToDn:String String String ###con=DriverManager.getConnection("jdbc:mysql://"+config.getUrl()+"/"+dbNode.getDatabase(),config.getUser(),config.getPassword());###url###"jdbc:mysql://"+config.getUrl()+"/"+dbNode.getDatabase()###149:13:149:151
b4219d02eed61d533cc28dd8d651ee97655c43b4###/MyCATApache_Mycat-Server/src/main/java/io/mycat/route/util/RouterUtil.java###/RouterUtil.java###io.mycat.route.util.RouterUtil###tryRouteForOneTable:SchemaConfig DruidShardingParseInfo RouteCalculateUnit String RouteResultset boolean LayerCachePool ###returnrouteToDistTableNode(schema,rrs,ctx.getSql(),routeUnit.getTablesAndConditions(),cachePool,isSelect);###tablesAndConditions###routeUnit.getTablesAndConditions()###1369:4:1369:113
8b47535a8d556489c21f820b4ed9e32fb4a97695###/MyCATApache_Mycat-Server/src/main/java/io/mycat/server/handler/MigrateHandler.java###/MigrateHandler.java###io.mycat.server.handler.MigrateHandler###handle:String ServerConnection ###StringtaskPath=ZKUtils.getZKBasePath()+"migrate/"+c.getSchema()+"/"+table+"/"+taskID;###taskBase###ZKUtils.getZKBasePath()+"migrate/"+c.getSchema()###96:13:96:109
3c261a242ac59c8c519661c8f8f3f0bb6f560d59###/MyCATApache_Mycat-Server/src/main/java/io/mycat/route/sequence/handler/IncrSequenceMySQLHandler.java###/IncrSequenceMySQLHandler.java###io.mycat.route.sequence.handler.IncrSequenceMySQLHandler###getSeqValueFromDB:SequenceVal ###if(seqVal.fetching.compareAndSet(false,true))###isLock###seqVal.fetching.compareAndSet(false,true)###116:3:121:4
ebc06f5ff8ec3484027c2770af4ea61db421b036###/MyCATApache_Mycat-Server/src/main/java/io/mycat/migrate/MigrateUtils.java###/MigrateUtils.java###io.mycat.migrate.MigrateUtils###execulteCount:String String ###con=DriverManager.getConnection("jdbc:mysql://"+config.getUrl()+"/"+dbNode.getDatabase(),config.getUser(),config.getPassword());###url###"jdbc:mysql://"+config.getUrl()+"/"+dbNode.getDatabase()###271:13:271:151
59de2f2cbc29fea43f9fae91c7894f2882b68779###/MyCATApache_Mycat-Server/src/main/java/io/mycat/migrate/MigrateTaskWatch.java###/MigrateTaskWatch.java###io.mycat.migrate.MigrateTaskWatch.TaskPathChildrenCacheListener###addOrUpdate:PathChildrenCacheEvent ###Stringdata=newString(ZKUtils.getConnection().getData().forPath(event.getData().getPath()+"/"+s),"UTF-8");###zkpath###event.getData().getPath()+"/"+s###115:23:115:134
b406c3a54f5ff80461832bbdb11abba8f84428b6###/MyCATApache_Mycat-Server/src/main/java/io/mycat/backend/heartbeat/ConsistenCollectHandler.java###/ConsistenCollectHandler.java###io.mycat.backend.heartbeat.ConsistenCollectHandler###onSuccess:SQLQueryResult<Map<String,String>> ###if(md1.get(GlobalTableUtil.COUNT_COLUMN).equals(md2.get(GlobalTableUtil.COUNT_COLUMN))&&md1.get(GlobalTableUtil.MAX_COLUMN).equals(md2.get(GlobalTableUtil.MAX_COLUMN))&&md1.get(GlobalTableUtil.INNER_COLUMN).equals(md2.get(GlobalTableUtil.INNER_COLUMN)))###md2_max_column###md2.get(GlobalTableUtil.MAX_COLUMN)###86:7:92:8
cb9e3e22e1d640a2327c48353374fe002743f1b5###/MyCATApache_Mycat-Server/src/main/java/io/mycat/route/util/RouterUtil.java###/RouterUtil.java###io.mycat.route.util.RouterUtil###findRouteWithcConditionsForTables:SchemaConfig RouteResultset Map<String,Map<String,Set<ColumnRoutePair>>> Map<String,Set<String>> String LayerCachePool boolean ###IntegernodeIndex=tableConfig.getRule().getRuleAlgorithm().calculate(pair.colValue);###algorithm###tableConfig.getRule().getRuleAlgorithm()###982:33:982:119
bc417938c011b2a07e2732274b394c58a0dd3a80###/MyCATApache_Mycat-Server/src/main/java/io/mycat/backend/datasource/PhysicalDBNode.java###/PhysicalDBNode.java###io.mycat.backend.datasource.PhysicalDBNode###getConnection:String boolean RouteResultsetNode ResponseHandler Object ###dbPool.getSource().getConnection(schema,autoCommit,handler,attachment);###writeSource###dbPool.getSource()###109:8:109:82
5dc44acdc968f82537775381dbef0c71c144a974###/MyCATApache_Mycat-Server/src/main/java/io/mycat/config/loader/xml/XMLSchemaLoader.java###/XMLSchemaLoader.java###io.mycat.config.loader.xml.XMLSchemaLoader###loadTables:Element ###tableRuleConfig.getRule().getRuleAlgorithm().init();###newRuleAlgorithm###tableRuleConfig.getRule().getRuleAlgorithm()###378:25:378:77
3865f3bf03966f71e7f59b71d23da6ab0fd46290###/MyCATApache_Mycat-Server/src/main/java/io/mycat/route/util/RouterUtil.java###/RouterUtil.java###io.mycat.route.util.RouterUtil###routeToDistTableNode:String SchemaConfig RouteResultset String Map<String,Map<String,Set<ColumnRoutePair>>> LayerCachePool boolean ###IntegertableIndex=tableConfig.getRule().getRuleAlgorithm().calculate(pair.colValue);###algorithm###tableConfig.getRule().getRuleAlgorithm()###1013:7:1013:94
f1697b6f2c50fdd6d5653647149b6e2a3f511893###/MyCATApache_Mycat-Server/src/main/java/io/mycat/backend/ConQueue.java###/ConQueue.java###io.mycat.backend.ConQueue###removeCon:BackendConnection ###if(!autoCommitCons.remove(con))###removed###autoCommitCons.remove(con)###41:3:43:4
4fe229c426fcfc7346fc6bfdcb7dc75360afbab0###/MyCATApache_Mycat-Server/src/main/java/io/mycat/migrate/BinlogStream.java###/BinlogStream.java###io.mycat.migrate.BinlogStream.DelegatingEventListener###handleUpdateRowsEvent:Event ###StringBuildersb=newStringBuilder("update");###sba###newStringBuilder("update")###430:13:430:59
14297c92648be85e50a7d455963142512349be75###/MyCATApache_Mycat-Server/src/main/java/io/mycat/backend/mysql/nio/handler/FetchStoreNodeOfChildTableHandler.java###/FetchStoreNodeOfChildTableHandler.java###io.mycat.backend.mysql.nio.handler.FetchStoreNodeOfChildTableHandler###execute:String String ArrayList<String> ###mysqlDN.getConnection(mysqlDN.getDatabase(),true,newRouteResultsetNode(dn,ServerParse.SELECT,sql),this,dn);###node###newRouteResultsetNode(dn,ServerParse.SELECT,sql)###84:5:86:17
9759f99a13185117cee1a8f8787ef5fa0600438d###/MyCATApache_Mycat-Server/src/main/java/org/opencloudb/jdbc/JDBCConnection.java###/JDBCConnection.java###org.opencloudb.jdbc.JDBCConnection###ouputCallStatement:RouteResultsetNode ServerConnection String ###rs=(ResultSet)stmt.getObject(paramter.getIndex());###object###stmt.getObject(paramter.getIndex())###436:23:436:75
3865f3bf03966f71e7f59b71d23da6ab0fd46290###/MyCATApache_Mycat-Server/src/main/java/demo/catlets/ShareJoin.java###/ShareJoin.java###demo.catlets.ShareRowOutPutDataHandler###getRow:Map<String,byte[]> String int ###Stringid=ByteUtil.getString(rowDataPkg.fieldValues.get(index));###columnValue###rowDataPkg.fieldValues.get(index)###365:4:365:70
0589d365800ed7c59d449cdcd118b6197d98adc0###/MyCATApache_Mycat-Server/src/main/java/io/mycat/route/util/RouterUtil.java###/RouterUtil.java###io.mycat.route.util.RouterUtil###routeToDistTableNode:String SchemaConfig RouteResultset String Map<String,Map<String,Set<ColumnRoutePair>>> LayerCachePool boolean ###IntegertableIndex=tableConfig.getRule().getRuleAlgorithm().calculate(pair.colValue);###algorithm###tableConfig.getRule().getRuleAlgorithm()###1060:7:1060:94
80d995b775e67da3d1ca692c601646a8e7881cb0###/MyCATApache_Mycat-Server/src/main/java/io/mycat/route/sequence/handler/IncrSequenceTimeHandler.java###/IncrSequenceTimeHandler.java###io.mycat.route.sequence.handler.IncrSequenceTimeHandler.IdWorker###nextId:###thrownewException("Clockmovedbackwards.Refusingtogenerateidfor"+(lastTimestamp-timestamp)+"milliseconds");###errorMessage###"Clockmovedbackwards.Refusingtogenerateidfor"+(lastTimestamp-timestamp)+"milliseconds"###101:5:101:128
ebc06f5ff8ec3484027c2770af4ea61db421b036###/MyCATApache_Mycat-Server/src/main/java/io/mycat/backend/jdbc/JDBCDatasource.java###/JDBCDatasource.java###io.mycat.backend.jdbc.JDBCDatasource###getConnection:###Connectionconnection=DriverManager.getConnection(cfg.getUrl(),cfg.getUser(),cfg.getPassword());###url###cfg.getUrl()###108:3:108:103
70467f16c6c99fc8b3ae1c35c44b34ac94a8c3f9###/MyCATApache_Mycat-Server/src/main/java/io/mycat/migrate/MigrateTaskWatch.java###/MigrateTaskWatch.java###io.mycat.migrate.MigrateTaskWatch.TaskPathChildrenCacheListener###addOrUpdate:PathChildrenCacheEvent ###Stringdata=newString(ZKUtils.getConnection().getData().forPath(event.getData().getPath()+"/"+s),"UTF-8");###zkpath###event.getData().getPath()+"/"+s###118:23:118:134
ec4a3572446bf8666e81adf67c9da0314fa37466###/MyCATApache_Mycat-Server/src/main/java/io/mycat/config/loader/xml/XMLSchemaLoader.java###/XMLSchemaLoader.java###io.mycat.config.loader.xml.XMLSchemaLoader###loadTables:Element ###tableRuleConfig.getRule().getRuleAlgorithm().init();###newRuleAlgorithm###tableRuleConfig.getRule().getRuleAlgorithm()###383:9:383:61
7a94dddb76f79317c62603df580ad068137db1b2###/MyCATApache_Mycat-Server/src/main/java/org/opencloudb/mysql/nio/handler/MultiNodeQueryHandler.java###/MultiNodeQueryHandler.java###org.opencloudb.mysql.nio.handler.MultiNodeQueryHandler###fieldEofResponse:byte[] List<byte[]> byte[] BackendConnection ###columToIndx.put(fieldName,newColMeta(i,fieldPkg.type));###colMeta###newColMeta(i,fieldPkg.type)###442:7:443:40
263a075afec4526ccaae9561620cedbfd56bc016###/MyCATApache_Mycat-Server/src/main/java/io/mycat/migrate/BinlogStream.java###/BinlogStream.java###io.mycat.migrate.BinlogStream.DelegatingEventListener###handleDeleteRowsEvent:Event ###StringBuildersb=newStringBuilder("deletefrom");###sba###newStringBuilder("deletefrom")###482:13:482:64
da4021cfa6746b150b37197534cbe06fb3a030fa###/MyCATApache_Mycat-Server/src/main/java/io/mycat/server/handler/MigrateHandler.java###/MigrateHandler.java###io.mycat.server.handler.MigrateHandler###handle:String ServerConnection ###StringtaskPath=ZKUtils.getZKBasePath()+"migrate/"+c.getSchema()+"/"+taskID;###taskBase###ZKUtils.getZKBasePath()+"migrate/"+c.getSchema()###117:13:117:98
781446eeb29fcd1487f3a4b1138f281d6bc22843###/MyCATApache_Mycat-Server/src/main/java/io/mycat/config/loader/zkprocess/zktoxml/listen/RuleDataPathChildrenCacheListener.java###/RuleDataPathChildrenCacheListener.java###io.mycat.config.loader.zkprocess.zktoxml.listen.RuleDataPathChildrenCacheListener###add:String byte[] ###Filefile=newFile(SystemConfig.getHomePath()+File.separator+"conf"+File.separator+"ruledata",name);###parentPath###SystemConfig.getHomePath()+File.separator+"conf"+File.separator+"ruledata"###61:9:63:23
c905aaef988d1c58a0ad176fbf9706ff0107a932###/MyCATApache_Mycat-Server/src/main/java/io/mycat/backend/datasource/PhysicalDatasource.java###/PhysicalDatasource.java###io.mycat.backend.datasource.PhysicalDatasource###createByIdleLitte:int int ###this.createNewConnection(simpleHandler,null,schemas[i%schemas.length]);###schema###schemas[i%schemas.length]###314:5:315:26
aa6f541387c7454aff0a516a44122a9e93f19990###/MyCATApache_Mycat-Server/src/main/java/io/mycat/manager/response/ShowConnectionSQL.java###/ShowConnectionSQL.java###io.mycat.manager.response.ShowConnectionSQL###getRow:FrontendConnection String ###row.add(StringUtil.encode(c.getExecuteSql(),charset));###executeSql###c.getExecuteSql()###126:9:126:66
4fe229c426fcfc7346fc6bfdcb7dc75360afbab0###/MyCATApache_Mycat-Server/src/main/java/io/mycat/migrate/BinlogStream.java###/BinlogStream.java###io.mycat.migrate.BinlogStream.DelegatingEventListener###handleDeleteRowsEvent:Event ###StringBuildersb=newStringBuilder("deletefrom");###sba###newStringBuilder("deletefrom")###481:13:481:64
fca9645bc5bf3209cc8d7a18403c1768528f7d8d###/MyCATApache_Mycat-Server/src/main/java/io/mycat/backend/datasource/PhysicalDatasource.java###/PhysicalDatasource.java###io.mycat.backend.datasource.PhysicalDatasource###createByIdleLitte:int int ###this.createNewConnection(simpleHandler,null,schemas[i%schemas.length]);###schema###schemas[i%schemas.length]###379:5:380:26
c08a811c622625ef1ebe20b0d93c95ac2644c209###/MyCATApache_Mycat-Server/src/main/java/io/mycat/backend/mysql/nio/handler/MultiNodeQueryHandler.java###/MultiNodeQueryHandler.java###io.mycat.backend.mysql.nio.handler.MultiNodeQueryHandler###fieldEofResponse:byte[] List<byte[]> byte[] BackendConnection ###columToIndx.put(fieldName,newColMeta(i,fieldPkg.type));###colMeta###newColMeta(i,fieldPkg.type)###588:7:589:40
8bf9c794615f5757aef10d616a384728475fcf01###/MyCATApache_Mycat-Server/src/main/java/io/mycat/route/RouteResultsetNode.java###/RouteResultsetNode.java###io.mycat.route.RouteResultsetNode###compareTo:RouteResultsetNode ###returnthis.subTableName.compareTo(obj.subTableName);###subTableName###obj.subTableName###290:5:290:58
cb9e3e22e1d640a2327c48353374fe002743f1b5###/MyCATApache_Mycat-Server/src/main/java/io/mycat/route/factory/RouteStrategyFactory.java###/RouteStrategyFactory.java###io.mycat.route.factory.RouteStrategyFactory###init:###StringdefaultSqlParser=MycatServer.getInstance().getConfig().getSystem().getDefaultSqlParser();###config###MycatServer.getInstance().getConfig().getSystem()###25:3:25:101
d817b710d0df7c452d137036e7bd5fbcc1ba2df3###/MyCATApache_Mycat-Server/src/main/java/io/mycat/route/sequence/handler/IncrSequenceMySQLHandler.java###/IncrSequenceMySQLHandler.java###io.mycat.route.sequence.handler.IncrSequenceMySQLHandler###getSeqValueFromDB:SequenceVal ###if(seqVal.fetching.compareAndSet(false,true))###isLock###seqVal.fetching.compareAndSet(false,true)###114:3:119:4
589b0c981f847238cdd81fa245a5f7c776e28024###/MyCATApache_Mycat-Server/src/main/java/io/mycat/backend/jdbc/JDBCConnection.java###/JDBCConnection.java###io.mycat.backend.jdbc.JDBCConnection###ouputCallStatement:RouteResultsetNode ServerConnection String ###curRow.add(StringUtil.encode(String.valueOf(stmt.getObject(procedureParameter.getIndex())),sc.getCharset()));###object###stmt.getObject(procedureParameter.getIndex())###477:21:478:47
cb9e3e22e1d640a2327c48353374fe002743f1b5###/MyCATApache_Mycat-Server/src/main/java/io/mycat/route/util/RouterUtil.java###/RouterUtil.java###io.mycat.route.util.RouterUtil###findRouteWithcConditionsForTables:SchemaConfig RouteResultset Map<String,Map<String,Set<ColumnRoutePair>>> Map<String,Set<String>> String LayerCachePool boolean ###Stringnode=tableConfig.getDataNodes().get(nodeIndex);###dataNodes###tableConfig.getDataNodes()###989:33:989:89
cb0bc2e3eec179e46c121592c1dd0587ae6b307a###/MyCATApache_Mycat-Server/src/main/java/io/mycat/sqlengine/mpp/DataNodeMergeManager.java###/DataNodeMergeManager.java###io.mycat.sqlengine.mpp.DataNodeMergeManager###onRowMetaData:Map<String,ColMeta> int ###unsafeRowGrouper=newUnsafeRowGrouper(columToIndx,rrs.getGroupByCols(),mergCols.toArray(newMergeCol[mergCols.size()]),rrs.getHavingCols());###mergColsArrays###mergCols.toArray(newMergeCol[mergCols.size()])###169:13:171:42
cb9e3e22e1d640a2327c48353374fe002743f1b5###/MyCATApache_Mycat-Server/src/main/java/io/mycat/route/util/RouterUtil.java###/RouterUtil.java###io.mycat.route.util.RouterUtil###findRouteWithcConditionsForTables:SchemaConfig RouteResultset Map<String,Map<String,Set<ColumnRoutePair>>> Map<String,Set<String>> String LayerCachePool boolean ###Stringnode=tableConfig.getDataNodes().get(idx);###dataNodes###tableConfig.getDataNodes()###1001:37:1001:87
cfc4a2cd1ada7fd3ccfea5abc9ddb1103f622e04###/MyCATApache_Mycat-Server/src/main/java/io/mycat/route/parser/druid/MycatSchemaStatVisitor.java###/MycatSchemaStatVisitor.java###io.mycat.route.parser.druid.MycatSchemaStatVisitor###visit:SQLBinaryOpExpr ###switch(x.getOperator())###op###x.getOperator()###740:9:780:10
3f4d6bc0ecca01ae639b066cf097f304b1f3f62b###/MyCATApache_Mycat-Server/src/main/java/io/mycat/migrate/BinlogStream.java###/BinlogStream.java###io.mycat.migrate.BinlogStream.DelegatingEventListener###handleDeleteRowsEvent:Event ###StringBuildersb=newStringBuilder("deletefrom");###sba###newStringBuilder("deletefrom")###510:13:510:64
b406c3a54f5ff80461832bbdb11abba8f84428b6###/MyCATApache_Mycat-Server/src/main/java/io/mycat/backend/heartbeat/ConsistenCollectHandler.java###/ConsistenCollectHandler.java###io.mycat.backend.heartbeat.ConsistenCollectHandler###onSuccess:SQLQueryResult<Map<String,String>> ###if(md1.get(GlobalTableUtil.COUNT_COLUMN).equals(md2.get(GlobalTableUtil.COUNT_COLUMN))&&md1.get(GlobalTableUtil.MAX_COLUMN).equals(md2.get(GlobalTableUtil.MAX_COLUMN))&&md1.get(GlobalTableUtil.INNER_COLUMN).equals(md2.get(GlobalTableUtil.INNER_COLUMN)))###md1_max_column###md1.get(GlobalTableUtil.MAX_COLUMN)###86:7:92:8
cfc4a2cd1ada7fd3ccfea5abc9ddb1103f622e04###/MyCATApache_Mycat-Server/src/main/java/io/mycat/config/loader/zkprocess/xmltozk/listen/OthermsgTozkLoader.java###/OthermsgTozkLoader.java###io.mycat.config.loader.zkprocess.xmltozk.listen.OthermsgTozkLoader###notiflyProcess:###StringseqLine=currZkPath+ZookeeperPath.ZK_SEPARATOR.getKey()+ZookeeperPath.FLOW_ZK_PATH_SEQUENCE.getKey();###sequences###currZkPath+ZookeeperPath.ZK_SEPARATOR.getKey()+ZookeeperPath.FLOW_ZK_PATH_SEQUENCE.getKey()###61:9:62:64
781446eeb29fcd1487f3a4b1138f281d6bc22843###/MyCATApache_Mycat-Server/src/main/java/io/mycat/config/loader/zkprocess/zktoxml/listen/RuleDataPathChildrenCacheListener.java###/RuleDataPathChildrenCacheListener.java###io.mycat.config.loader.zkprocess.zktoxml.listen.RuleDataPathChildrenCacheListener###delete:String byte[] ###Filefile=newFile(SystemConfig.getHomePath()+File.separator+"conf"+File.separator+"ruledata",name);###parentPath###SystemConfig.getHomePath()+File.separator+"conf"+File.separator+"ruledata"###69:9:71:23
22d0a6c779cace910b9e7363c7eab22fe16dfd41###/MyCATApache_Mycat-Server/src/main/java/io/mycat/migrate/MigrateTaskWatch.java###/MigrateTaskWatch.java###io.mycat.migrate.MigrateTaskWatch###start:###ZKUtils.addChildPathCache(ZKUtils.getZKBasePath()+"migrate",newPathChildrenCacheListener(){@OverridepublicvoidchildEvent(CuratorFrameworkcuratorFramework,PathChildrenCacheEventfevent)throwsException{switch(fevent.getType()){caseCHILD_ADDED:LOGGER.info("tableCHILD_ADDED:"+fevent.getData().getPath());ZKUtils.addChildPathCache(fevent.getData().getPath(),newTaskPathChildrenCacheListener());break;default:break;}}});###migratePath###ZKUtils.getZKBasePath()+"migrate"###32:9:45:16
f13af9d1fe31512416baf85a74202ff0ba74bd08###/MyCATApache_Mycat-Server/src/main/java/org/opencloudb/config/loader/zookeeper/ZookeeperSaver.java###/ZookeeperSaver.java###org.opencloudb.config.loader.zookeeper.ZookeeperSaver###saveServer:JSONObject ###putProperty(user.getJSONObject(key),serverUser);###userObject###user.getJSONObject(key)###61:17:61:66
8bc45d3dba0e15bbf94f6da3ca6e50bf2f6a9811###/MyCATApache_Mycat-Server/src/main/java/io/mycat/route/factory/RouteStrategyFactory.java###/RouteStrategyFactory.java###io.mycat.route.factory.RouteStrategyFactory###init:###StringdefaultSqlParser=MycatServer.getInstance().getConfig().getSystem().getDefaultSqlParser();###config###MycatServer.getInstance().getConfig().getSystem()###27:3:27:101
cfc4a2cd1ada7fd3ccfea5abc9ddb1103f622e04###/MyCATApache_Mycat-Server/src/main/java/io/mycat/migrate/MigrateDumpRunner.java###/MigrateDumpRunner.java###io.mycat.migrate.MigrateDumpRunner###loaddataToDn:File String String ###con=DriverManager.getConnection("jdbc:mysql://"+config.getUrl()+"/"+dbNode.getDatabase(),config.getUser(),config.getPassword());###url###"jdbc:mysql://"+config.getUrl()+"/"+dbNode.getDatabase()###181:13:181:151
e2583396e1e0d6824d25c537c38381c8717927b7###/MyCATApache_Mycat-Server/src/main/java/io/mycat/route/sequence/handler/IncrSequenceTimeHandler.java###/IncrSequenceTimeHandler.java###io.mycat.route.sequence.handler.IncrSequenceTimeHandler.IdWorker###nextId:###thrownewException("Clockmovedbackwards.Refusingtogenerateidfor"+(lastTimestamp-timestamp)+"milliseconds");###errorMessage###"Clockmovedbackwards.Refusingtogenerateidfor"+(lastTimestamp-timestamp)+"milliseconds"###100:5:100:128
419cdae3f64bbe3a9d6858fb064000022bd23fc3###/MyCATApache_Mycat-Server/src/main/java/io/mycat/route/util/RouterUtil.java###/RouterUtil.java###io.mycat.route.util.RouterUtil###findRouteWithcConditionsForTables:SchemaConfig RouteResultset Map<String,Map<String,Set<ColumnRoutePair>>> Map<String,Set<String>> String LayerCachePool boolean ###Stringnode=tableConfig.getDataNodes().get(idx);###dataNodes###tableConfig.getDataNodes()###1132:10:1132:60
c43ce98459f4bbb7507e876cd0274a1ec47071ac###/MyCATApache_Mycat-Server/src/main/java/io/mycat/statistic/stat/UserStat.java###/UserStat.java###io.mycat.statistic.stat.UserStat###UserStat:String ###this.sqlRecorder=newSQLRecorder(MycatServer.getInstance().getConfig().getSystem().getSqlRecordCount());###size###MycatServer.getInstance().getConfig().getSystem().getSqlRecordCount()###43:3:43:110
cfc4a2cd1ada7fd3ccfea5abc9ddb1103f622e04###/MyCATApache_Mycat-Server/src/main/java/io/mycat/backend/jdbc/JDBCConnection.java###/JDBCConnection.java###io.mycat.backend.jdbc.JDBCConnection###ouputResultSet:ServerConnection String ###ResultSetUtil.resultSetToFieldPacket(sc.getCharset(),fieldPks,rs,this.isSpark);###charset###sc.getCharset()###629:4:630:20
1019d0cb78282b94a88465208156034229b21e53###/MyCATApache_Mycat-Server/src/main/java/io/mycat/migrate/BinlogStream.java###/BinlogStream.java###io.mycat.migrate.BinlogStream.DelegatingEventListener###handleDeleteRowsEvent:Event ###slot=value[i]instanceofBigInteger?((BigInteger)value[i]).intValue():((Integer)value[i]);###value1###value[i]###536:25:536:119
88172a79c8ad73cf0b10040eb7f1d9bb371fddc9###/MyCATApache_Mycat-Server/src/main/java/io/mycat/backend/jdbc/JDBCConnection.java###/JDBCConnection.java###io.mycat.backend.jdbc.JDBCConnection###ouputResultSet:ServerConnection String ###ResultSetUtil.resultSetToFieldPacket(sc.getCharset(),fieldPks,rs,this.isSpark);###charset###sc.getCharset()###595:4:596:20
ebc06f5ff8ec3484027c2770af4ea61db421b036###/MyCATApache_Mycat-Server/src/main/java/io/mycat/route/parser/druid/MycatSchemaStatVisitor.java###/MycatSchemaStatVisitor.java###io.mycat.route.parser.druid.MycatSchemaStatVisitor###visit:SQLBinaryOpExpr ###switch(x.getOperator())###op###x.getOperator()###736:9:776:10
447329b29fc804aa4a38d9daf395cea4a0c2a042###/MyCATApache_Mycat-Server/src/main/java/io/mycat/route/impl/DruidMycatRouteStrategy.java###/DruidMycatRouteStrategy.java###io.mycat.route.impl.DruidMycatRouteStrategy###routeNormalSqlWithAST:SchemaConfig String RouteResultset String LayerCachePool int ServerConnection ###thrownewUnsupportedOperationException("Incaseofslicetable,sqlhasdifferentrules,currentlyonlyonesubQueryissupported.");###err###"Incaseofslicetable,sqlhasdifferentrules,currentlyonlyonesubQueryissupported."###197:5:197:137
0e608c84c2324b9442e53019269d8b5a65a2cef4###/MyCATApache_Mycat-Server/src/main/java/io/mycat/backend/heartbeat/MySQLDetector.java###/MySQLDetector.java###io.mycat.backend.heartbeat.MySQLDetector###onResult:SQLQueryResult<Map<String,String>> ###heartbeat.setSlaveBehindMaster(Integer.valueOf(Seconds_Behind_Master));###Behind_Master###Integer.valueOf(Seconds_Behind_Master)###135:7:135:78
0e608c84c2324b9442e53019269d8b5a65a2cef4###/MyCATApache_Mycat-Server/src/main/java/io/mycat/backend/datasource/PhysicalDBPool.java###/PhysicalDBPool.java###io.mycat.backend.datasource.PhysicalDBPool###canSelectAsReadNode:PhysicalDatasource ###if(theSource.getHeartbeat().getSlaveBehindMaster()==null||theSource.getHeartbeat().getDbSynStatus()==DBHeartbeat.DB_SYN_ERROR)###slaveBehindMaster###theSource.getHeartbeat().getSlaveBehindMaster()###525:9:528:10
cfc4a2cd1ada7fd3ccfea5abc9ddb1103f622e04###/MyCATApache_Mycat-Server/src/main/java/io/mycat/backend/jdbc/JDBCDatasource.java###/JDBCDatasource.java###io.mycat.backend.jdbc.JDBCDatasource###getConnection:###Connectionconnection=DriverManager.getConnection(cfg.getUrl(),cfg.getUser(),cfg.getPassword());###url###cfg.getUrl()###109:3:109:103
ebc06f5ff8ec3484027c2770af4ea61db421b036###/MyCATApache_Mycat-Server/src/main/java/io/mycat/migrate/MigrateDumpRunner.java###/MigrateDumpRunner.java###io.mycat.migrate.MigrateDumpRunner###loaddataToDn:File String String ###con=DriverManager.getConnection("jdbc:mysql://"+config.getUrl()+"/"+dbNode.getDatabase(),config.getUser(),config.getPassword());###url###"jdbc:mysql://"+config.getUrl()+"/"+dbNode.getDatabase()###180:13:180:151
4a9932f9ed96f00352364afa29bab442e68d482e###/MyCATApache_Mycat-Server/src/main/java/io/mycat/config/loader/zkprocess/zktoxml/ZktoXmlMain.java###/ZktoXmlMain.java###io.mycat.config.loader.zkprocess.zktoxml.ZktoXmlMain###runWatch:CuratorFramework String ZookeeperProcessListen ###cache.getListenable().addListener(newNodeCacheListener(){@OverridepublicvoidnodeChanged()throwsException{LOGGER.info("ZktoxmlMainrunWatchprocesspatheventstart");LOGGER.info("NodeCachechanged,pathis:"+cache.getCurrentData().getPath());StringnotPath=cache.getCurrentData().getPath();zkListen.notifly(notPath);LOGGER.info("ZktoxmlMainrunWatchprocesspatheventover");}});###listen###newNodeCacheListener(){@OverridepublicvoidnodeChanged()throwsException{LOGGER.info("ZktoxmlMainrunWatchprocesspatheventstart");LOGGER.info("NodeCachechanged,pathis:"+cache.getCurrentData().getPath());StringnotPath=cache.getCurrentData().getPath();zkListen.notifly(notPath);LOGGER.info("ZktoxmlMainrunWatchprocesspatheventover");}}###180:9:190:12
a5f8bea777328f3249d0afe85345725342245438###/MyCATApache_Mycat-Server/src/main/java/io/mycat/catlets/ShareJoin.java###/ShareJoin.java###io.mycat.catlets.ShareRowOutPutDataHandler###getRow:Map<String,byte[]> String int ###Stringid=ByteUtil.getString(rowDataPkg.fieldValues.get(index));###columnValue###rowDataPkg.fieldValues.get(index)###396:4:396:70
1019d0cb78282b94a88465208156034229b21e53###/MyCATApache_Mycat-Server/src/main/java/io/mycat/migrate/BinlogStream.java###/BinlogStream.java###io.mycat.migrate.BinlogStream.DelegatingEventListener###handleUpdateRowsEvent:Event ###slot=key[i]instanceofBigInteger?((BigInteger)key[i]).intValue():((Integer)key[i]);###value1###key[i]###495:25:495:113
f7bfcc043f68ca046d3081cea781c058ec175b24###/MyCATApache_Mycat-Server/src/main/java/org/opencloudb/route/util/RouterUtil.java###/RouterUtil.java###org.opencloudb.route.util.RouterUtil###findRouteWithcConditionsForTables:SchemaConfig RouteResultset Map<String,Map<String,Set<ColumnRoutePair>>> Map<String,Set<String>> String LayerCachePool boolean ###Stringnode=tableConfig.getDataNodes().get(idx);###dataNodes###tableConfig.getDataNodes()###1006:10:1006:60
17197b8b2e165d018d73c682346d84a7ea214f7d###/MyCATApache_Mycat-Server/src/main/java/io/mycat/server/ServerConnection.java###/ServerConnection.java###io.mycat.server.ServerConnection###routeEndExecuteSQL:String int SchemaConfig ###rrs=MycatServer.getInstance().getRouterservice().route(MycatServer.getInstance().getConfig().getSystem(),schema,type,sql,this.charset,this);###original###sql###273:4:277:47
38fa32e5d90940af468111fc0cc9b7eb1f06cbfb###/MyCATApache_Mycat-Server/src/main/java/io/mycat/server/handler/MigrateHandler.java###/MigrateHandler.java###io.mycat.server.handler.MigrateHandler###handle:String ServerConnection ###StringtaskPath=ZKUtils.getZKBasePath()+"migrate/"+c.getSchema()+"/"+table+"/"+taskID;###taskBase###ZKUtils.getZKBasePath()+"migrate/"+c.getSchema()###117:13:117:109
e92f2c0abf2a7ed331669bd32e3cf8244bdf2bbc###/MyCATApache_Mycat-Server/src/main/java/io/mycat/server/handler/MigrateHandler.java###/MigrateHandler.java###io.mycat.server.handler.MigrateHandler###handle:String ServerConnection ###SchemaConfigschemaConfig=MycatServer.getInstance().getConfig().getSchemas().get(c.getSchema());###schema###c.getSchema()###100:13:100:111
e9f4fbf85774a5901ac111200383f8baf2772e44###/MyCATApache_Mycat-Server/src/main/java/io/mycat/statistic/DataSourceSyncRecorder.java###/DataSourceSyncRecorder.java###io.mycat.statistic.DataSourceSyncRecorder###set:Map<String,String> int ###doublecountTransactionsRetries=Double.valueOf(resultResult.get("COUNT_TRANSACTIONS_RETRIES"));###countTransactionsRetries###resultResult.get("COUNT_TRANSACTIONS_RETRIES")###86:18:86:115
0a2de0fe4dca26f1c1f59af69477e8c1c77104b2###/MyCATApache_Mycat-Server/src/main/java/io/mycat/migrate/MigrateDumpRunner.java###/MigrateDumpRunner.java###io.mycat.migrate.MigrateDumpRunner###run:###Stringxxx=Files.toString(newFile(file,task.table+".txt"),Charset.forName("UTF-8"));###dataFile###newFile(file,task.table+".txt")###70:11:70:100
67698647b852a792611d3005e129a425152af646###/MyCATApache_Mycat-Server/src/main/java/io/mycat/backend/datasource/PhysicalDBPool.java###/PhysicalDBPool.java###io.mycat.backend.datasource.PhysicalDBPool###switchSource:int boolean String ###LOGGER.warn(switchMessage(current,newIndex,false,reason));###msg###switchMessage(current,newIndex,false,reason)###276:5:276:66
290bfd452f0a189950fdde53a100e3521617f2f4###/MyCATApache_Mycat-Server/src/main/java/io/mycat/backend/mysql/nio/handler/MultiNodeQueryHandler.java###/MultiNodeQueryHandler.java###io.mycat.backend.mysql.nio.handler.MultiNodeQueryHandler###fieldEofResponse:byte[] List<byte[]> byte[] BackendConnection ###columToIndx.put(fieldName,newColMeta(i,fieldPkg.type));###colMeta###newColMeta(i,fieldPkg.type)###619:7:620:40
3865f3bf03966f71e7f59b71d23da6ab0fd46290###/MyCATApache_Mycat-Server/src/main/java/demo/catlets/ShareJoin.java###/ShareJoin.java###demo.catlets.ShareJoin###createQryJob:int ###batchRows.put(theId,rows.remove(theId));###rowbyte###rows.remove(theId)###200:4:200:45
3865f3bf03966f71e7f59b71d23da6ab0fd46290###/MyCATApache_Mycat-Server/src/main/java/io/mycat/sqlengine/mpp/DataNodeMergeManager.java###/DataNodeMergeManager.java###io.mycat.sqlengine.mpp.DataNodeMergeManager###onRowMetaData:Map<String,ColMeta> int ###unsafeRowGrouper=newUnsafeRowGrouper(columToIndx,rrs.getGroupByCols(),mergCols.toArray(newMergeCol[mergCols.size()]),rrs.getHavingCols());###mergColsArrays###mergCols.toArray(newMergeCol[mergCols.size()])###167:13:169:42
3865f3bf03966f71e7f59b71d23da6ab0fd46290###/MyCATApache_Mycat-Server/src/main/java/io/mycat/backend/mysql/nio/handler/MultiNodeQueryHandler.java###/MultiNodeQueryHandler.java###io.mycat.backend.mysql.nio.handler.MultiNodeQueryHandler###outputMergeResult:ServerConnection byte[] Iterator<UnsafeRow> ###source.write(source.writeToBuffer(eof,buffer));###byteBuffer###source.writeToBuffer(eof,buffer)###430:4:430:52
d4c37c1b9c16dc96f18154c6b54f9b6b0a9249ef###/MyCATApache_Mycat-Server/src/main/java/io/mycat/backend/datasource/PhysicalDBNode.java###/PhysicalDBNode.java###io.mycat.backend.datasource.PhysicalDBNode###getConnection:String boolean RouteResultsetNode ResponseHandler Object ###dbPool.getSource().getConnection(schema,autoCommit,handler,attachment);###writeSource###dbPool.getSource()###107:8:107:82
a506a0aea2d9e070853957f87d0e3fec277de4b8###/MyCATApache_Mycat-Server/src/main/java/io/mycat/migrate/MigrateTaskWatch.java###/MigrateTaskWatch.java###io.mycat.migrate.MigrateTaskWatch.addChildPathCacheForTask.addListener.new PathChildrenCacheListener###childEvent:CuratorFramework PathChildrenCacheEvent ###TaskNodetaskNode=JSON.parseObject(newString(event.getData().getData(),"UTF-8"),TaskNode.class);###text###newString(event.getData().getData(),"UTF-8")###73:33:73:140
0e608c84c2324b9442e53019269d8b5a65a2cef4###/MyCATApache_Mycat-Server/src/main/java/io/mycat/backend/datasource/PhysicalDBPool.java###/PhysicalDBPool.java###io.mycat.backend.datasource.PhysicalDBPool###getAllActiveRWSources:boolean boolean boolean ###if(canSelectAsReadNode(theSource))###selected###canSelectAsReadNode(theSource)###558:7:562:8
87fcb255b9c94305ef85b84ead310c115b1611ea###/MyCATApache_Mycat-Server/src/main/java/io/mycat/route/util/RouterUtil.java###/RouterUtil.java###io.mycat.route.util.RouterUtil###processERChildTable:SchemaConfig String ServerConnection ###RouteResultsettheRrs=RouterUtil.routeByERParentKey(sc,schema,ServerParse.INSERT,sql,rrs,tc,joinKeyVal);###realVal###joinKeyVal###1347:4:1347:116
3865f3bf03966f71e7f59b71d23da6ab0fd46290###/MyCATApache_Mycat-Server/src/main/java/io/mycat/route/util/RouterUtil.java###/RouterUtil.java###io.mycat.route.util.RouterUtil###findRouteWithcConditionsForTables:SchemaConfig RouteResultset Map<String,Map<String,Set<ColumnRoutePair>>> Map<String,Set<String>> String LayerCachePool boolean ###IntegernodeIndex=tableConfig.getRule().getRuleAlgorithm().calculate(pair.colValue);###algorithm###tableConfig.getRule().getRuleAlgorithm()###1141:9:1141:95
ebc06f5ff8ec3484027c2770af4ea61db421b036###/MyCATApache_Mycat-Server/src/main/java/io/mycat/migrate/MigrateDumpRunner.java###/MigrateDumpRunner.java###io.mycat.migrate.MigrateDumpRunner###querySecurePath:DBHostConfig ###con=DriverManager.getConnection("jdbc:mysql://"+config.getUrl(),config.getUser(),config.getPassword());###url###"jdbc:mysql://"+config.getUrl()###207:13:207:122
8087b3eaa11752922395e41f3c2ad8432f5cc2e1###/MyCATApache_Mycat-Server/src/main/java/io/mycat/backend/mysql/nio/handler/MultiNodeQueryHandler.java###/MultiNodeQueryHandler.java###io.mycat.backend.mysql.nio.handler.MultiNodeQueryHandler###outputMergeResult:ServerConnection byte[] Iterator<UnsafeRow> ###source.write(source.writeToBuffer(eof,buffer));###byteBuffer###source.writeToBuffer(eof,buffer)###473:4:473:52
f13af9d1fe31512416baf85a74202ff0ba74bd08###/MyCATApache_Mycat-Server/src/main/java/org/opencloudb/net/NIOReactorPool.java###/NIOReactorPool.java###org.opencloudb.net.NIOReactorPool###getNextReactor:###if(++nextReactor==reactors.length)###i###++nextReactor###19:3:21:4
c882c30b0234246751a60ff836adeb5f933f298f###/MyCATApache_Mycat-Server/src/main/java/io/mycat/config/loader/zkprocess/zktoxml/ZktoXmlMain.java###/ZktoXmlMain.java###io.mycat.config.loader.zkprocess.zktoxml.ZktoXmlMain###runWatch:CuratorFramework String ZookeeperProcessListen ###cache.getListenable().addListener(newNodeCacheListener(){@OverridepublicvoidnodeChanged()throwsException{LOGGER.info("ZktoxmlMainrunWatchprocesspatheventstart");LOGGER.info("NodeCachechanged,pathis:"+cache.getCurrentData().getPath());StringnotPath=cache.getCurrentData().getPath();zkListen.notifly(notPath);LOGGER.info("ZktoxmlMainrunWatchprocesspatheventover");}});###listen###newNodeCacheListener(){@OverridepublicvoidnodeChanged()throwsException{LOGGER.info("ZktoxmlMainrunWatchprocesspatheventstart");LOGGER.info("NodeCachechanged,pathis:"+cache.getCurrentData().getPath());StringnotPath=cache.getCurrentData().getPath();zkListen.notifly(notPath);LOGGER.info("ZktoxmlMainrunWatchprocesspatheventover");}}###155:9:165:12
f7bfcc043f68ca046d3081cea781c058ec175b24###/MyCATApache_Mycat-Server/src/main/java/org/opencloudb/route/util/RouterUtil.java###/RouterUtil.java###org.opencloudb.route.util.RouterUtil###findRouteWithcConditionsForTables:SchemaConfig RouteResultset Map<String,Map<String,Set<ColumnRoutePair>>> Map<String,Set<String>> String LayerCachePool boolean ###Stringnode=tableConfig.getDataNodes().get(nodeIndex);###dataNodes###tableConfig.getDataNodes()###994:9:994:65
10be0bd9b4b1fe75f66a8a03dad8f680a51d656b###/MyCATApache_Mycat-Server/src/main/java/io/mycat/util/dataMigrator/MigratorConditonFilesMaker.java###/MigratorConditonFilesMaker.java###io.mycat.util.dataMigrator.MigratorConditonFilesMaker###run:###StringfiledVal=sf.get(column).toString();###objFieldVal###sf.get(column)###81:9:81:53
3800d9d11e080a069130b4a881294c3da0abf0a6###/MyCATApache_Mycat-Server/src/main/java/io/mycat/catlets/ShareJoin.java###/ShareJoin.java###io.mycat.catlets.ShareJoin###createQryJob:int ###batchRows.put(theId,rows.remove(theId));###rowbyte###rows.remove(theId)###198:4:198:45
3192cb6d1a044982aa74518e30c7d1c7360b59cb###/MyCATApache_Mycat-Server/src/main/java/io/mycat/server/handler/MigrateHandler.java###/MigrateHandler.java###io.mycat.server.handler.MigrateHandler###handle:String ServerConnection ###StringtaskPath=ZKUtils.getZKBasePath()+"migrate/"+c.getSchema()+"/"+table+"/"+taskID;###taskBase###ZKUtils.getZKBasePath()+"migrate/"+c.getSchema()###98:13:98:109
4f296dc89895c57df7b192f037b45839e0d0d704###/MyCATApache_Mycat-Server/src/main/java/io/mycat/config/loader/xml/XMLSchemaLoader.java###/XMLSchemaLoader.java###io.mycat.config.loader.xml.XMLSchemaLoader###loadTables:Element ###TableConfigtable=newTableConfig(tableName,primaryKey,autoIncrement,needAddLimit,tableType,dataNode,getDbType(dataNode),(tableRule!=null)?tableRule.getRule():null,ruleRequired,null,false,null,null,subTables);###tableRuleConfig###tableRule###367:5:371:56
0132aea74f9c29db8d90a8bfd834f8a566844c25###/MyCATApache_Mycat-Server/src/main/java/io/mycat/migrate/MigrateTaskWatch.java###/MigrateTaskWatch.java###io.mycat.migrate.MigrateTaskWatch###start:###ZKUtils.addChildPathCache(ZKUtils.getZKBasePath()+"migrate",newPathChildrenCacheListener(){@OverridepublicvoidchildEvent(CuratorFrameworkcuratorFramework,PathChildrenCacheEventfevent)throwsException{switch(fevent.getType()){caseCHILD_ADDED:LOGGER.info("tableCHILD_ADDED:"+fevent.getData().getPath());ZKUtils.addChildPathCache(fevent.getData().getPath(),newTaskPathChildrenCacheListener());break;default:break;}}});###migratePath###ZKUtils.getZKBasePath()+"migrate"###31:9:44:16
36303fdf5cef7e0bad9509f8532ca5344db34afd###/MyCATApache_Mycat-Server/src/main/java/io/mycat/migrate/BinlogStream.java###/BinlogStream.java###io.mycat.migrate.BinlogStream.DelegatingEventListener###exeSql:MigrateTask String ###OneRawSQLQueryResultHandlerresultHandler=newOneRawSQLQueryResultHandler(newString[0],newSqlExecuteListener(task,sql,BinlogStream.this));###listener###newSqlExecuteListener(task,sql,BinlogStream.this)###257:13:257:156
ebc06f5ff8ec3484027c2770af4ea61db421b036###/MyCATApache_Mycat-Server/src/main/java/io/mycat/migrate/MigrateUtils.java###/MigrateUtils.java###io.mycat.migrate.MigrateUtils###execulteSql:String String ###con=DriverManager.getConnection("jdbc:mysql://"+config.getUrl()+"/"+dbNode.getDatabase(),config.getUser(),config.getPassword());###url###"jdbc:mysql://"+config.getUrl()+"/"+dbNode.getDatabase()###253:13:254:140
3800d9d11e080a069130b4a881294c3da0abf0a6###/MyCATApache_Mycat-Server/src/main/java/io/mycat/sqlengine/mpp/DataNodeMergeManager.java###/DataNodeMergeManager.java###io.mycat.sqlengine.mpp.DataNodeMergeManager###onRowMetaData:Map<String,ColMeta> int ###unsafeRowGrouper=newUnsafeRowGrouper(columToIndx,rrs.getGroupByCols(),mergCols.toArray(newMergeCol[mergCols.size()]),rrs.getHavingCols());###mergColsArrays###mergCols.toArray(newMergeCol[mergCols.size()])###166:13:168:42
80d995b775e67da3d1ca692c601646a8e7881cb0###/MyCATApache_Mycat-Server/src/main/java/io/mycat/config/loader/xml/XMLSchemaLoader.java###/XMLSchemaLoader.java###io.mycat.config.loader.xml.XMLSchemaLoader###loadTables:Element ###tableRuleConfig.getRule().getRuleAlgorithm().init();###newRuleAlgorithm###tableRuleConfig.getRule().getRuleAlgorithm()###381:9:381:61
cfc4a2cd1ada7fd3ccfea5abc9ddb1103f622e04###/MyCATApache_Mycat-Server/src/main/java/io/mycat/migrate/MigrateDumpRunner.java###/MigrateDumpRunner.java###io.mycat.migrate.MigrateDumpRunner###querySecurePath:DBHostConfig ###con=DriverManager.getConnection("jdbc:mysql://"+config.getUrl(),config.getUser(),config.getPassword());###url###"jdbc:mysql://"+config.getUrl()###215:13:215:122
46ecc53c5c50979e48c10a816759133c8ea05bdc###/MyCATApache_Mycat-Server/src/main/java/io/mycat/route/parser/druid/impl/DruidUpdateParser.java###/DruidUpdateParser.java###io.mycat.route.parser.druid.impl.DruidUpdateParser###statementParse:SchemaConfig RouteResultset SQLStatement ###tableID2DataNodeCache.clearCache(schema.getName().toLowerCase()+"_"+tableName.toUpperCase());###cacheName###schema.getName().toLowerCase()+"_"+tableName.toUpperCase()###77:9:77:102
e6e6934381caac838fc236336e6a0e87e3c626b2###/MyCATApache_Mycat-Server/src/main/java/io/mycat/route/parser/druid/impl/DruidSelectParser.java###/DruidSelectParser.java###io.mycat.route.parser.druid.impl.DruidSelectParser###changeSql:SchemaConfig RouteResultset SQLStatement LayerCachePool ###StringnativeSql=PageSQLUtil.convertLimitToNativePageSql(getCurentDbType(),node.getStatement(),0,((SQLIntegerExpr)mysqlSelectQuery.getLimit().getRowCount()).getNumber().intValue());###_limit###mysqlSelectQuery.getLimit()###440:7:442:98
d53aa10b88719f60853d77f0f8fc09c78c2758c2###/MyCATApache_Mycat-Server/src/main/java/io/mycat/route/RouteResultsetNode.java###/RouteResultsetNode.java###io.mycat.route.RouteResultsetNode###compareTo:RouteResultsetNode ###returnthis.subTableName.compareTo(obj.subTableName);###subTableName###obj.subTableName###305:5:305:58
c3b1dd6f7229e1e444836d9a4b85745b28753476###/MyCATApache_Mycat-Server/src/main/java/io/mycat/route/util/RouterUtil.java###/RouterUtil.java###io.mycat.route.util.RouterUtil###processERChildTable:SchemaConfig String ServerConnection ###RouteResultsettheRrs=RouterUtil.routeByERParentKey(sc,schema,ServerParse.INSERT,sql,rrs,tc,joinKeyVal);###realVal###joinKeyVal###1344:4:1344:116
34b57d67180bcc9d77797f7ed0b0b5135f97a47b###/MyCATApache_Mycat-Server/src/main/java/io/mycat/route/parser/druid/impl/DefaultDruidParser.java###/DefaultDruidParser.java###io.mycat.route.parser.druid.impl.DefaultDruidParser###visitorParse:SchemaConfig RouteResultset SQLStatement MycatSchemaStatVisitor ###tableAliasMap.put(key.toUpperCase(),value);###upperkey###key.toUpperCase()###165:6:165:50
9cee591dfaa5c3227f9fe0ad26b4a88a41a98346###/MyCATApache_Mycat-Server/src/main/java/io/mycat/route/parser/druid/impl/DefaultDruidParser.java###/DefaultDruidParser.java###io.mycat.route.parser.druid.impl.DefaultDruidParser###visitorParse:RouteResultset SQLStatement MycatSchemaStatVisitor ###tableAliasMap.put(key.toUpperCase(),value);###upperkey###key.toUpperCase()###158:6:158:50
038e28c01891c9a9501d5afc884bb7525981671a###/MyCATApache_Mycat-Server/src/main/java/io/mycat/server/ServerConnection.java###/ServerConnection.java###io.mycat.server.ServerConnection###execute:String int ###schema=MycatServer.getInstance().getConfig().getSchemas().get(schemaInfo.schema);###schemaConfig###MycatServer.getInstance().getConfig().getSchemas().get(schemaInfo.schema)###195:5:195:88
2e1d09f8060303d6e0adb10fee61c45e37ef6bb3###/MyCATApache_Mycat-Server/src/main/java/io/mycat/route/sequence/handler/DistributedSequenceHandler.java###/DistributedSequenceHandler.java###io.mycat.route.sequence.handler.DistributedSequenceHandler###nextId:String ###return((System.currentTimeMillis()&timestampMask)<<timestampShift)|(((thread.getId()%maxThreadId)<<threadIdShift))|(instanceId<<instanceIdShift)|(clusterId<<clusterIdShift)|a;###time###System.currentTimeMillis()###246:9:246:205
ebc06f5ff8ec3484027c2770af4ea61db421b036###/MyCATApache_Mycat-Server/src/main/java/io/mycat/config/loader/zkprocess/xmltozk/listen/OthermsgTozkLoader.java###/OthermsgTozkLoader.java###io.mycat.config.loader.zkprocess.xmltozk.listen.OthermsgTozkLoader###notiflyProcess:###StringseqLine=currZkPath+ZookeeperPath.ZK_SEPARATOR.getKey()+ZookeeperPath.FLOW_ZK_PATH_SEQUENCE.getKey();###sequences###currZkPath+ZookeeperPath.ZK_SEPARATOR.getKey()+ZookeeperPath.FLOW_ZK_PATH_SEQUENCE.getKey()###65:9:66:64
