731f0396f6c26377a875f306091d4f3ab58560b2###/redisson_redisson/redisson/src/main/java/org/redisson/RedissonMapCache.java###/RedissonMapCache.java###org.redisson.RedissonMapCache###fastPutOperationAsync:K V long TimeUnit long TimeUnit ###RFuture<Boolean>future=commandExecutor.evalWriteAsync(getName(key),codec,RedisCommands.EVAL_BOOLEAN,"localinsertable=false;"+"localvalue=redis.call('hget',KEYS[1],ARGV[5]);"+"localt,val;"+"ifvalue==falsethen"+"insertable=true;"+"else"+"t,val=struct.unpack('dLc0',value);"+"localexpireDate=92233720368547758;"+"localexpireDateScore=redis.call('zscore',KEYS[2],ARGV[5]);"+"ifexpireDateScore~=falsethen"+"expireDate=tonumber(expireDateScore)"+"end;"+"ift~=0then"+"localexpireIdle=redis.call('zscore',KEYS[3],ARGV[5]);"+"ifexpireIdle~=falsethen"+"expireDate=math.min(expireDate,tonumber(expireIdle))"+"end;"+"end;"+"ifexpireDate<=tonumber(ARGV[1])then"+"insertable=true;"+"end;"+"end;"+"iftonumber(ARGV[2])>0then"+"redis.call('zadd',KEYS[2],ARGV[2],ARGV[5]);"+"else"+"redis.call('zrem',KEYS[2],ARGV[5]);"+"end;"+"iftonumber(ARGV[3])>0then"+"redis.call('zadd',KEYS[3],ARGV[3],ARGV[5]);"+"else"+"redis.call('zrem',KEYS[3],ARGV[5]);"+"end;"+"localmaxSize=tonumber(redis.call('hget',KEYS[8],'max-size'));"+"ifmaxSize~=nilandmaxSize~=0then"+"localcurrentTime=tonumber(ARGV[1]);"+"locallastAccessTimeSetName=KEYS[6];"+"redis.call('zadd',lastAccessTimeSetName,currentTime,ARGV[5]);"+"localcacheSize=tonumber(redis.call('hlen',KEYS[1]));"+"ifcacheSize>=maxSizethen"+"locallruItems=redis.call('zrange',lastAccessTimeSetName,0,cacheSize-maxSize);"+"forindex,lruIteminipairs(lruItems)do"+"iflruItemandlruItem~=ARGV[5]then"+"locallruItemValue=redis.call('hget',KEYS[1],lruItem);"+"redis.call('hdel',KEYS[1],lruItem);"+"redis.call('zrem',KEYS[2],lruItem);"+"redis.call('zrem',KEYS[3],lruItem);"+"redis.call('zrem',lastAccessTimeSetName,lruItem);"+"iflruItemValue~=falsethen"+"localremovedChannelName=KEYS[7];"+"localttl,obj=struct.unpack('dLc0',lruItemValue);"+"localmsg=struct.pack('Lc0Lc0',string.len(lruItem),lruItem,string.len(obj),obj);"+"redis.call('publish',removedChannelName,msg);"+"end;"+"end;"+"end;"+"end;"+"end;"+"localvalue=struct.pack('dLc0',ARGV[4],string.len(ARGV[6]),ARGV[6]);"+"redis.call('hset',KEYS[1],ARGV[5],value);"+"ifinsertable==truethen"+"localmsg=struct.pack('Lc0Lc0',string.len(ARGV[5]),ARGV[5],string.len(ARGV[6]),ARGV[6]);"+"redis.call('publish',KEYS[4],msg);"+"return1;"+"else"+"localmsg=struct.pack('Lc0Lc0Lc0',string.len(ARGV[5]),ARGV[5],string.len(ARGV[6]),ARGV[6],string.len(val),val);"+"redis.call('publish',KEYS[5],msg);"+"return0;"+"end;",Arrays.<Object>asList(getName(key),getTimeoutSetNameByKey(key),getIdleSetNameByKey(key),getCreatedChannelNameByKey(key),getUpdatedChannelNameByKey(key),getLastAccessTimeSetNameByKey(key),getRemovedChannelNameByKey(key),getOptionsNameByKey(key)),System.currentTimeMillis(),ttlTimeout,maxIdleTimeout,maxIdleDelta,encodeMapKey(key),encodeMapValue(value));###name###getName(key)###773:9:848:129
f7b5aa8a93aebacf3e2bd8948982f0ed10602430###/redisson_redisson/redisson/src/main/java/org/redisson/client/protocol/decoder/ObjectMapReplayDecoder.java###/ObjectMapReplayDecoder.java###org.redisson.client.protocol.decoder.ObjectMapReplayDecoder###getDecoder:Codec int State ###returnOptional.ofNullable(this.codec).orElse(codec).getMapValueDecoder();###c###Optional.ofNullable(this.codec).orElse(codec)###47:13:47:87
731f0396f6c26377a875f306091d4f3ab58560b2###/redisson_redisson/redisson/src/main/java/org/redisson/RedissonMapCache.java###/RedissonMapCache.java###org.redisson.RedissonMapCache###fastPutIfAbsentAsync:K V long TimeUnit long TimeUnit ###RFuture<Boolean>future=commandExecutor.evalWriteAsync(getName(key),codec,RedisCommands.EVAL_BOOLEAN,"localinsertable=false;"+"localvalue=redis.call('hget',KEYS[1],ARGV[5]);"+"ifvalue==falsethen"+"insertable=true;"+"else"+"ifinsertable==falsethen"+"localt,val=struct.unpack('dLc0',value);"+"localexpireDate=92233720368547758;"+"localexpireDateScore=redis.call('zscore',KEYS[2],ARGV[5]);"+"ifexpireDateScore~=falsethen"+"expireDate=tonumber(expireDateScore)"+"end;"+"ift~=0then"+"localexpireIdle=redis.call('zscore',KEYS[3],ARGV[5]);"+"ifexpireIdle~=falsethen"+"expireDate=math.min(expireDate,tonumber(expireIdle))"+"end;"+"end;"+"ifexpireDate<=tonumber(ARGV[1])then"+"insertable=true;"+"end;"+"end;"+"end;"+"ifinsertable==truethen"+"iftonumber(ARGV[2])>0then"+"redis.call('zadd',KEYS[2],ARGV[2],ARGV[5]);"+"else"+"redis.call('zrem',KEYS[2],ARGV[5]);"+"end;"+"iftonumber(ARGV[3])>0then"+"redis.call('zadd',KEYS[3],ARGV[3],ARGV[5]);"+"else"+"redis.call('zrem',KEYS[3],ARGV[5]);"+"end;"+"localmaxSize=tonumber(redis.call('hget',KEYS[7],'max-size'));"+"ifmaxSize~=nilandmaxSize~=0then"+"localcurrentTime=tonumber(ARGV[1]);"+"locallastAccessTimeSetName=KEYS[5];"+"redis.call('zadd',lastAccessTimeSetName,currentTime,ARGV[5]);"+"localcacheSize=tonumber(redis.call('hlen',KEYS[1]));"+"ifcacheSize>=maxSizethen"+"locallruItems=redis.call('zrange',lastAccessTimeSetName,0,cacheSize-maxSize);"+"forindex,lruIteminipairs(lruItems)do"+"iflruItemandlruItem~=ARGV[5]then"+"locallruItemValue=redis.call('hget',KEYS[1],lruItem);"+"redis.call('hdel',KEYS[1],lruItem);"+"redis.call('zrem',KEYS[2],lruItem);"+"redis.call('zrem',KEYS[3],lruItem);"+"redis.call('zrem',lastAccessTimeSetName,lruItem);"+"iflruItemValue~=falsethen"+"localremovedChannelName=KEYS[6];"+"localttl,obj=struct.unpack('dLc0',lruItemValue);"+"localmsg=struct.pack('Lc0Lc0',string.len(lruItem),lruItem,string.len(obj),obj);"+"redis.call('publish',removedChannelName,msg);"+"end;"+"end;"+"end;"+"end;"+"end;"+"localval=struct.pack('dLc0',ARGV[4],string.len(ARGV[6]),ARGV[6]);"+"redis.call('hset',KEYS[1],ARGV[5],val);"+"localmsg=struct.pack('Lc0Lc0',string.len(ARGV[5]),ARGV[5],string.len(ARGV[6]),ARGV[6]);"+"redis.call('publish',KEYS[4],msg);"+"return1;"+"else"+"return0;"+"end;",Arrays.<Object>asList(getName(key),getTimeoutSetNameByKey(key),getIdleSetNameByKey(key),getCreatedChannelNameByKey(key),getLastAccessTimeSetNameByKey(key),getRemovedChannelNameByKey(key),getOptionsNameByKey(key)),System.currentTimeMillis(),ttlTimeout,maxIdleTimeout,maxIdleDelta,encodeMapKey(key),encodeMapValue(value));###name###getName(key)###1510:9:1584:129
731f0396f6c26377a875f306091d4f3ab58560b2###/redisson_redisson/redisson/src/main/java/org/redisson/RedissonMapCache.java###/RedissonMapCache.java###org.redisson.RedissonMapCache###getOperationAsync:K ###returncommandExecutor.evalWriteAsync(getName(key),codec,RedisCommands.EVAL_MAP_VALUE,"localvalue=redis.call('hget',KEYS[1],ARGV[2]);"+"ifvalue==falsethen"+"returnnil;"+"end;"+"localt,val=struct.unpack('dLc0',value);"+"localexpireDate=92233720368547758;"+"localexpireDateScore=redis.call('zscore',KEYS[2],ARGV[2]);"+"ifexpireDateScore~=falsethen"+"expireDate=tonumber(expireDateScore)"+"end;"+"ift~=0then"+"localexpireIdle=redis.call('zscore',KEYS[3],ARGV[2]);"+"ifexpireIdle~=falsethen"+"iftonumber(expireIdle)>tonumber(ARGV[1])then"+"redis.call('zadd',KEYS[3],t+tonumber(ARGV[1]),ARGV[2]);"+"end;"+"expireDate=math.min(expireDate,tonumber(expireIdle))"+"end;"+"end;"+"ifexpireDate<=tonumber(ARGV[1])then"+"returnnil;"+"end;"+"localmaxSize=tonumber(redis.call('hget',KEYS[5],'max-size'));"+"ifmaxSize~=nilandmaxSize~=0then"+"redis.call('zadd',KEYS[4],tonumber(ARGV[1]),ARGV[2]);"+"end;"+"returnval;",Arrays.<Object>asList(getName(key),getTimeoutSetNameByKey(key),getIdleSetNameByKey(key),getLastAccessTimeSetNameByKey(key),getOptionsNameByKey(key)),System.currentTimeMillis(),encodeMapKey(key));###name###getName(key)###446:9:475:64
731f0396f6c26377a875f306091d4f3ab58560b2###/redisson_redisson/redisson/src/main/java/org/redisson/RedissonMapCache.java###/RedissonMapCache.java###org.redisson.RedissonMapCache###replaceOperationAsync:K V ###returncommandExecutor.evalWriteAsync(getName(key),codec,RedisCommands.EVAL_MAP_VALUE,"localvalue=redis.call('hget',KEYS[1],ARGV[2]);"+"ifvalue==falsethen"+"returnnil;"+"end;"+"localt,val=struct.unpack('dLc0',value);"+"localexpireDate=92233720368547758;"+"localexpireDateScore=redis.call('zscore',KEYS[2],ARGV[2]);"+"ifexpireDateScore~=falsethen"+"expireDate=tonumber(expireDateScore)"+"end;"+"ift~=0then"+"localexpireIdle=redis.call('zscore',KEYS[3],ARGV[2]);"+"iftonumber(expireIdle)>tonumber(ARGV[1])then"+"redis.call('zadd',KEYS[3],t+tonumber(ARGV[1]),ARGV[2]);"+"end;"+"ifexpireIdle~=falsethen"+"expireDate=math.min(expireDate,tonumber(expireIdle))"+"end;"+"end;"+"ifexpireDate<=tonumber(ARGV[1])then"+"returnnil;"+"end;"+"localvalue=struct.pack('dLc0',t,string.len(ARGV[3]),ARGV[3]);"+"redis.call('hset',KEYS[1],ARGV[2],value);"+"localmsg=struct.pack('Lc0Lc0Lc0',string.len(ARGV[2]),ARGV[2],string.len(ARGV[3]),ARGV[3],string.len(val),val);"+"redis.call('publish',KEYS[4],msg);"+"returnval;",Arrays.<Object>asList(getName(key),getTimeoutSetNameByKey(key),getIdleSetNameByKey(key),getUpdatedChannelNameByKey(key)),System.currentTimeMillis(),encodeMapKey(key),encodeMapValue(value));###name###getName(key)###1665:9:1694:87
39415583387819af84403cd7c8f68aed95752d7f###/redisson_redisson/redisson/src/main/java/org/redisson/RedissonReactive.java###/RedissonReactive.java###org.redisson.RedissonReactive###getReliableTopic:String ###returnReactiveProxyBuilder.create(commandExecutor,newRedissonReliableTopic(commandExecutor,name),RReliableTopicReactive.class);###topic###newRedissonReliableTopic(commandExecutor,name)###308:10:308:142
731f0396f6c26377a875f306091d4f3ab58560b2###/redisson_redisson/redisson/src/main/java/org/redisson/RedissonLocalCachedMap.java###/RedissonLocalCachedMap.java###org.redisson.RedissonLocalCachedMap###fastReplaceOperationAsync:K V ###returncommandExecutor.evalWriteAsync(getName(key),codec,RedisCommands.EVAL_BOOLEAN,"ifredis.call('hexists',KEYS[1],ARGV[1])==1then"+"redis.call('hset',KEYS[1],ARGV[1],ARGV[2]);"+"ifARGV[3]=='1'then"+"redis.call('publish',KEYS[2],ARGV[4]);"+"end;"+"ifARGV[3]=='2'then"+"redis.call('zadd',KEYS[3],ARGV[5],ARGV[6]);"+"redis.call('publish',KEYS[2],ARGV[4]);"+"end;"+"return1;"+"else"+"return0;"+"end",Arrays.<Object>asList(getName(key),listener.getInvalidationTopicName(),listener.getUpdatesLogName()),keyState,valueState,invalidateEntryOnChange,msg,System.currentTimeMillis(),entryId);###name###getName(key)###948:9:965:106
731f0396f6c26377a875f306091d4f3ab58560b2###/redisson_redisson/redisson/src/main/java/org/redisson/RedissonMapCache.java###/RedissonMapCache.java###org.redisson.RedissonMapCache###putIfAbsentOperationAsync:K V ###returncommandExecutor.evalWriteAsync(getName(key),codec,RedisCommands.EVAL_MAP_VALUE,"localvalue=redis.call('hget',KEYS[1],ARGV[2]);"+"localmaxSize=tonumber(redis.call('hget',KEYS[7],'max-size'));"+"locallastAccessTimeSetName=KEYS[5];"+"localcurrentTime=tonumber(ARGV[1]);"+"ifvalue~=falsethen"+"localt,val=struct.unpack('dLc0',value);"+"localexpireDate=92233720368547758;"+"localexpireDateScore=redis.call('zscore',KEYS[2],ARGV[2]);"+"ifexpireDateScore~=falsethen"+"expireDate=tonumber(expireDateScore)"+"end;"+"ift~=0then"+"localexpireIdle=redis.call('zscore',KEYS[3],ARGV[2]);"+"ifexpireIdle~=falsethen"+"expireDate=math.min(expireDate,tonumber(expireIdle))"+"end;"+"end;"+"ifexpireDate>tonumber(ARGV[1])then"+"ifmaxSize~=nilandmaxSize~=0then"+"redis.call('zadd',lastAccessTimeSetName,currentTime,ARGV[2]);"+"end;"+"returnval;"+"end;"+"end;"+"localvalue=struct.pack('dLc0',0,string.len(ARGV[3]),ARGV[3]);"+"redis.call('hset',KEYS[1],ARGV[2],value);"+"ifmaxSize~=nilandmaxSize~=0then"+"redis.call('zadd',lastAccessTimeSetName,currentTime,ARGV[2]);"+"localcacheSize=tonumber(redis.call('hlen',KEYS[1]));"+"ifcacheSize>maxSizethen"+"locallruItems=redis.call('zrange',lastAccessTimeSetName,0,cacheSize-maxSize-1);"+"forindex,lruIteminipairs(lruItems)do"+"iflruItemandlruItem~=ARGV[2]then"+"locallruItemValue=redis.call('hget',KEYS[1],lruItem);"+"redis.call('hdel',KEYS[1],lruItem);"+"redis.call('zrem',KEYS[2],lruItem);"+"redis.call('zrem',KEYS[3],lruItem);"+"redis.call('zrem',lastAccessTimeSetName,lruItem);"+"iflruItemValue~=falsethen"+"localremovedChannelName=KEYS[6];"+"localttl,obj=struct.unpack('dLc0',lruItemValue);"+"localmsg=struct.pack('Lc0Lc0',string.len(lruItem),lruItem,string.len(obj),obj);"+"redis.call('publish',removedChannelName,msg);"+"end;"+"end;"+"end;"+"end;"+"end;"+"localmsg=struct.pack('Lc0Lc0',string.len(ARGV[2]),ARGV[2],string.len(ARGV[3]),ARGV[3]);"+"redis.call('publish',KEYS[4],msg);"+"returnnil;",Arrays.<Object>asList(getName(key),getTimeoutSetNameByKey(key),getIdleSetNameByKey(key),getCreatedChannelNameByKey(key),getLastAccessTimeSetNameByKey(key),getRemovedChannelNameByKey(key),getOptionsNameByKey(key)),System.currentTimeMillis(),encodeMapKey(key),encodeMapValue(value));###name###getName(key)###554:9:612:87
731f0396f6c26377a875f306091d4f3ab58560b2###/redisson_redisson/redisson/src/main/java/org/redisson/RedissonSet.java###/RedissonSet.java###org.redisson.RedissonSet###containsAsync:Object ###returncommandExecutor.readAsync(getName(o),codec,RedisCommands.SISMEMBER,getName(o),encode(o));###name###getName(o)###94:9:94:109
62b5e68c05b7475e1e0f98b4161aacb35d376b97###/redisson_redisson/redisson/src/main/java/org/redisson/RedissonMap.java###/RedissonMap.java###org.redisson.RedissonMap###valueSizeAsync:K ###returncommandExecutor.readAsync(getName(),codec,RedisCommands.HSTRLEN,getName(key),encodeMapKey(key));###name###getName(key)###169:9:169:116
db65315d60c83b90b18e47a0382f8e0fc3aaa03a###/redisson_redisson/redisson/src/main/java/org/redisson/client/handler/CommandsQueue.java###/CommandsQueue.java###org.redisson.client.handler.CommandsQueue###write:ChannelHandlerContext Object ChannelPromise ###queue.add(newQueueCommandHolder(data,promise));###holder###newQueueCommandHolder(data,promise)###90:17:90:66
70496c5617a1201bc5bd0108bd79197413db032f###/redisson_redisson/redisson/src/main/java/org/redisson/connection/MasterSlaveConnectionManager.java###/MasterSlaveConnectionManager.java###org.redisson.connection.MasterSlaveConnectionManager###connectToNode:BaseConfig<?> RedisURI String ###nodeConnections.put(addr,connection);###address###addr###265:17:265:55
14e475d8afb7a6986d5b38e9129945b69832e466###/redisson_redisson/redisson/src/main/java/org/redisson/RedissonScript.java###/RedissonScript.java###org.redisson.RedissonScript###evalAsync:Mode String ReturnType List<Object> Object[] ###returnevalAsync(null,mode,luaScript,returnType,keys,values);###key###null###90:9:90:75
62b5e68c05b7475e1e0f98b4161aacb35d376b97###/redisson_redisson/redisson/src/main/java/org/redisson/RedissonMap.java###/RedissonMap.java###org.redisson.RedissonMap###putOperationAsync:K V ###returncommandExecutor.evalWriteAsync(getName(key),codec,RedisCommands.EVAL_MAP_VALUE,"localv=redis.call('hget',KEYS[1],ARGV[1]);"+"redis.call('hset',KEYS[1],ARGV[1],ARGV[2]);"+"returnv",Collections.singletonList(getName(key)),encodeMapKey(key),encodeMapValue(value));###name###getName(key)###890:9:894:100
de82f44101c48e0a45ccf9896c9800a1fdf752f8###/redisson_redisson/redisson/src/main/java/org/redisson/liveobject/core/AccessorInterceptor.java###/AccessorInterceptor.java###org.redisson.liveobject.core.AccessorInterceptor###removeIndex:RMap<String,Object> Object Field ###map.removeAsync(((RLiveObject)value).getLiveObjectId(),((RLiveObject)me).getLiveObjectId());###k###value###200:17:200:112
62b5e68c05b7475e1e0f98b4161aacb35d376b97###/redisson_redisson/redisson/src/main/java/org/redisson/RedissonMap.java###/RedissonMap.java###org.redisson.RedissonMap###putIfAbsentOperationAsync:K V ###returncommandExecutor.evalWriteAsync(getName(key),codec,RedisCommands.EVAL_MAP_VALUE,"ifredis.call('hsetnx',KEYS[1],ARGV[1],ARGV[2])==1then"+"returnnil"+"else"+"returnredis.call('hget',KEYS[1],ARGV[1])"+"end",Collections.singletonList(getName(key)),encodeMapKey(key),encodeMapValue(value));###name###getName(key)###541:9:547:100
731f0396f6c26377a875f306091d4f3ab58560b2###/redisson_redisson/redisson/src/main/java/org/redisson/RedissonMapCache.java###/RedissonMapCache.java###org.redisson.RedissonMapCache###putOperationAsync:K V long long long long ###RFuture<V>future=commandExecutor.evalWriteAsync(getName(key),codec,RedisCommands.EVAL_MAP_VALUE,"localinsertable=false;"+"localv=redis.call('hget',KEYS[1],ARGV[5]);"+"ifv==falsethen"+"insertable=true;"+"else"+"localt,val=struct.unpack('dLc0',v);"+"localexpireDate=92233720368547758;"+"localexpireDateScore=redis.call('zscore',KEYS[2],ARGV[5]);"+"ifexpireDateScore~=falsethen"+"expireDate=tonumber(expireDateScore)"+"end;"+"ift~=0then"+"localexpireIdle=redis.call('zscore',KEYS[3],ARGV[5]);"+"ifexpireIdle~=falsethen"+"expireDate=math.min(expireDate,tonumber(expireIdle))"+"end;"+"end;"+"ifexpireDate<=tonumber(ARGV[1])then"+"insertable=true;"+"end;"+"end;"+"iftonumber(ARGV[2])>0then"+"redis.call('zadd',KEYS[2],ARGV[2],ARGV[5]);"+"else"+"redis.call('zrem',KEYS[2],ARGV[5]);"+"end;"+"iftonumber(ARGV[3])>0then"+"redis.call('zadd',KEYS[3],ARGV[3],ARGV[5]);"+"else"+"redis.call('zrem',KEYS[3],ARGV[5]);"+"end;"+"localmaxSize=tonumber(redis.call('hget',KEYS[8],'max-size'));"+"ifmaxSize~=nilandmaxSize~=0then"+"localcurrentTime=tonumber(ARGV[1]);"+"locallastAccessTimeSetName=KEYS[6];"+"redis.call('zadd',lastAccessTimeSetName,currentTime,ARGV[5]);"+"localcacheSize=tonumber(redis.call('hlen',KEYS[1]));"+"ifcacheSize>=maxSizethen"+"locallruItems=redis.call('zrange',lastAccessTimeSetName,0,cacheSize-maxSize);"+"forindex,lruIteminipairs(lruItems)do"+"iflruItemandlruItem~=ARGV[5]then"+"locallruItemValue=redis.call('hget',KEYS[1],lruItem);"+"redis.call('hdel',KEYS[1],lruItem);"+"redis.call('zrem',KEYS[2],lruItem);"+"redis.call('zrem',KEYS[3],lruItem);"+"redis.call('zrem',lastAccessTimeSetName,lruItem);"+"iflruItemValue~=falsethen"+"localremovedChannelName=KEYS[7];"+"localttl,obj=struct.unpack('dLc0',lruItemValue);"+"localmsg=struct.pack('Lc0Lc0',string.len(lruItem),lruItem,string.len(obj),obj);"+"redis.call('publish',removedChannelName,msg);"+"end;"+"end;"+"end;"+"end;"+"end;"+"localvalue=struct.pack('dLc0',ARGV[4],string.len(ARGV[6]),ARGV[6]);"+"redis.call('hset',KEYS[1],ARGV[5],value);"+"ifinsertable==truethen"+"localmsg=struct.pack('Lc0Lc0',string.len(ARGV[5]),ARGV[5],string.len(ARGV[6]),ARGV[6]);"+"redis.call('publish',KEYS[4],msg);"+"returnnil;"+"end;"+"localt,val=struct.unpack('dLc0',v);"+"localmsg=struct.pack('Lc0Lc0Lc0',string.len(ARGV[5]),ARGV[5],string.len(ARGV[6]),ARGV[6],string.len(val),val);"+"redis.call('publish',KEYS[5],msg);"+"returnval",Arrays.<Object>asList(getName(key),getTimeoutSetNameByKey(key),getIdleSetNameByKey(key),getCreatedChannelNameByKey(key),getUpdatedChannelNameByKey(key),getLastAccessTimeSetNameByKey(key),getRemovedChannelNameByKey(key),getOptionsNameByKey(key)),System.currentTimeMillis(),ttlTimeout,maxIdleTimeout,maxIdleDelta,encodeMapKey(key),encodeMapValue(value));###name###getName(key)###910:9:988:129
731f0396f6c26377a875f306091d4f3ab58560b2###/redisson_redisson/redisson/src/main/java/org/redisson/RedissonSet.java###/RedissonSet.java###org.redisson.RedissonSet###addAsync:V ###returncommandExecutor.writeAsync(getName(e),codec,RedisCommands.SADD_SINGLE,getName(e),encode(e));###name###getName(e)###163:9:163:112
731f0396f6c26377a875f306091d4f3ab58560b2###/redisson_redisson/redisson/src/main/java/org/redisson/RedissonMapCache.java###/RedissonMapCache.java###org.redisson.RedissonMapCache###putIfAbsentAsync:K V long TimeUnit long TimeUnit ###RFuture<V>future=commandExecutor.evalWriteAsync(getName(key),codec,RedisCommands.EVAL_MAP_VALUE,"localinsertable=false;"+"localvalue=redis.call('hget',KEYS[1],ARGV[5]);"+"ifvalue==falsethen"+"insertable=true;"+"else"+"localt,val=struct.unpack('dLc0',value);"+"localexpireDate=92233720368547758;"+"localexpireDateScore=redis.call('zscore',KEYS[2],ARGV[5]);"+"ifexpireDateScore~=falsethen"+"expireDate=tonumber(expireDateScore)"+"end;"+"ift~=0then"+"localexpireIdle=redis.call('zscore',KEYS[3],ARGV[5]);"+"ifexpireIdle~=falsethen"+"expireDate=math.min(expireDate,tonumber(expireIdle))"+"end;"+"end;"+"ifexpireDate<=tonumber(ARGV[1])then"+"insertable=true;"+"end;"+"end;"+"ifinsertable==truethen"+"iftonumber(ARGV[2])>0then"+"redis.call('zadd',KEYS[2],ARGV[2],ARGV[5]);"+"else"+"redis.call('zrem',KEYS[2],ARGV[5]);"+"end;"+"iftonumber(ARGV[3])>0then"+"redis.call('zadd',KEYS[3],ARGV[3],ARGV[5]);"+"else"+"redis.call('zrem',KEYS[3],ARGV[5]);"+"end;"+"localmaxSize=tonumber(redis.call('hget',KEYS[7],'max-size'));"+"ifmaxSize~=nilandmaxSize~=0then"+"localcurrentTime=tonumber(ARGV[1]);"+"locallastAccessTimeSetName=KEYS[5];"+"redis.call('zadd',lastAccessTimeSetName,currentTime,ARGV[5]);"+"localcacheSize=tonumber(redis.call('hlen',KEYS[1]));"+"ifcacheSize>=maxSizethen"+"locallruItems=redis.call('zrange',lastAccessTimeSetName,0,cacheSize-maxSize);"+"forindex,lruIteminipairs(lruItems)do"+"iflruItemandlruItem~=ARGV[5]then"+"locallruItemValue=redis.call('hget',KEYS[1],lruItem);"+"redis.call('hdel',KEYS[1],lruItem);"+"redis.call('zrem',KEYS[2],lruItem);"+"redis.call('zrem',KEYS[3],lruItem);"+"redis.call('zrem',lastAccessTimeSetName,lruItem);"+"iflruItemValue~=falsethen"+"localremovedChannelName=KEYS[6];"+"localttl,obj=struct.unpack('dLc0',lruItemValue);"+"localmsg=struct.pack('Lc0Lc0',string.len(lruItem),lruItem,string.len(obj),obj);"+"redis.call('publish',removedChannelName,msg);"+"end;"+"end;"+"end;"+"end;"+"end;"+"localval=struct.pack('dLc0',tonumber(ARGV[4]),string.len(ARGV[6]),ARGV[6]);"+"redis.call('hset',KEYS[1],ARGV[5],val);"+"localmsg=struct.pack('Lc0Lc0',string.len(ARGV[5]),ARGV[5],string.len(ARGV[6]),ARGV[6]);"+"redis.call('publish',KEYS[4],msg);"+"returnnil;"+"else"+"localt,val=struct.unpack('dLc0',value);"+"redis.call('zadd',KEYS[3],t+ARGV[1],ARGV[5]);"+"returnval;"+"end;",Arrays.<Object>asList(getName(key),getTimeoutSetNameByKey(key),getIdleSetNameByKey(key),getCreatedChannelNameByKey(key),getLastAccessTimeSetNameByKey(key),getRemovedChannelNameByKey(key),getOptionsNameByKey(key)),System.currentTimeMillis(),ttlTimeout,maxIdleTimeout,maxIdleDelta,encodeMapKey(key),encodeMapValue(value));###name###getName(key)###313:9:393:129
731f0396f6c26377a875f306091d4f3ab58560b2###/redisson_redisson/redisson/src/main/java/org/redisson/RedissonSet.java###/RedissonSet.java###org.redisson.RedissonSet###removeAsync:Object ###returncommandExecutor.writeAsync(getName(o),codec,RedisCommands.SREM_SINGLE,getName(o),encode(o));###name###getName(o)###208:9:208:112
62b5e68c05b7475e1e0f98b4161aacb35d376b97###/redisson_redisson/redisson/src/main/java/org/redisson/RedissonMap.java###/RedissonMap.java###org.redisson.RedissonMap###fastPutIfAbsentOperationAsync:K V ###returncommandExecutor.writeAsync(getName(key),codec,RedisCommands.HSETNX,getName(key),encodeMapKey(key),encodeMapValue(value));###name###getName(key)###570:9:570:142
731f0396f6c26377a875f306091d4f3ab58560b2###/redisson_redisson/redisson/src/main/java/org/redisson/RedissonMapCache.java###/RedissonMapCache.java###org.redisson.RedissonMapCache###fastPutIfAbsentOperationAsync:K V ###returncommandExecutor.evalWriteAsync(getName(key),codec,RedisCommands.EVAL_BOOLEAN,"localvalue=redis.call('hget',KEYS[1],ARGV[2]);"+"locallastAccessTimeSetName=KEYS[5];"+"localmaxSize=tonumber(redis.call('hget',KEYS[7],'max-size'));"+"localcurrentTime=tonumber(ARGV[1]);"+"ifvalue==falsethen"+"localval=struct.pack('dLc0',0,string.len(ARGV[3]),ARGV[3]);"+"redis.call('hset',KEYS[1],ARGV[2],val);"+"localmsg=struct.pack('Lc0Lc0',string.len(ARGV[2]),ARGV[2],string.len(ARGV[3]),ARGV[3]);"+"redis.call('publish',KEYS[4],msg);"+"ifmaxSize~=nilandmaxSize~=0then"+"redis.call('zadd',lastAccessTimeSetName,currentTime,ARGV[2]);"+"localcacheSize=tonumber(redis.call('hlen',KEYS[1]));"+"ifcacheSize>maxSizethen"+"locallruItems=redis.call('zrange',lastAccessTimeSetName,0,cacheSize-maxSize-1);"+"forindex,lruIteminipairs(lruItems)do"+"iflruItemandlruItem~=ARGV[2]then"+"locallruItemValue=redis.call('hget',KEYS[1],lruItem);"+"redis.call('hdel',KEYS[1],lruItem);"+"redis.call('zrem',KEYS[2],lruItem);"+"redis.call('zrem',KEYS[3],lruItem);"+"redis.call('zrem',lastAccessTimeSetName,lruItem);"+"iflruItemValue~=falsethen"+"localremovedChannelName=KEYS[6];"+"localttl,obj=struct.unpack('dLc0',lruItemValue);"+"localmsg=struct.pack('Lc0Lc0',string.len(lruItem),lruItem,string.len(obj),obj);"+"redis.call('publish',removedChannelName,msg);"+"end;"+"end;"+"end;"+"end;"+"end;"+"return1;"+"end;"+"ifmaxSize~=nilandmaxSize~=0then"+"redis.call('zadd',lastAccessTimeSetName,currentTime,ARGV[2]);"+"end;"+"localt,val=struct.unpack('dLc0',value);"+"localexpireDate=92233720368547758;"+"localexpireDateScore=redis.call('zscore',KEYS[2],ARGV[2]);"+"ifexpireDateScore~=falsethen"+"expireDate=tonumber(expireDateScore)"+"end;"+"ift~=0then"+"localexpireIdle=redis.call('zscore',KEYS[3],ARGV[2]);"+"ifexpireIdle~=falsethen"+"iftonumber(expireIdle)>tonumber(ARGV[1])then"+"redis.call('zadd',KEYS[3],t+tonumber(ARGV[1]),ARGV[2]);"+"end;"+"expireDate=math.min(expireDate,tonumber(expireIdle))"+"end;"+"end;"+"ifexpireDate>tonumber(ARGV[1])then"+"return0;"+"end;"+"redis.call('zrem',KEYS[2],ARGV[2]);"+"redis.call('zrem',KEYS[3],ARGV[2]);"+"localval=struct.pack('dLc0',0,string.len(ARGV[3]),ARGV[3]);"+"redis.call('hset',KEYS[1],ARGV[2],val);"+"localmsg=struct.pack('Lc0Lc0',string.len(ARGV[2]),ARGV[2],string.len(ARGV[3]),ARGV[3]);"+"redis.call('publish',KEYS[4],msg);"+"return1;",Arrays.<Object>asList(getName(key),getTimeoutSetNameByKey(key),getIdleSetNameByKey(key),getCreatedChannelNameByKey(key),getLastAccessTimeSetNameByKey(key),getRemovedChannelNameByKey(key),getOptionsNameByKey(key)),System.currentTimeMillis(),encodeMapKey(key),encodeMapValue(value));###name###getName(key)###1391:9:1462:87
731f0396f6c26377a875f306091d4f3ab58560b2###/redisson_redisson/redisson/src/main/java/org/redisson/RedissonMapCache.java###/RedissonMapCache.java###org.redisson.RedissonMapCache###removeOperationAsync:Object Object ###returncommandExecutor.evalWriteAsync(getName(key),codec,RedisCommands.EVAL_BOOLEAN,"localvalue=redis.call('hget',KEYS[1],ARGV[2]);"+"ifvalue==falsethen"+"return0;"+"end;"+"localt,val=struct.unpack('dLc0',value);"+"localexpireDate=92233720368547758;"+"localexpireDateScore=redis.call('zscore',KEYS[2],ARGV[2]);"+"ifexpireDateScore~=falsethen"+"expireDate=tonumber(expireDateScore)"+"end;"+"ift~=0then"+"localexpireIdle=redis.call('zscore',KEYS[3],ARGV[2]);"+"ifexpireIdle~=falsethen"+"expireDate=math.min(expireDate,tonumber(expireIdle))"+"end;"+"end;"+"ifexpireDate<=tonumber(ARGV[1])then"+"return0;"+"end;"+"ifval==ARGV[3]then"+"redis.call('zrem',KEYS[2],ARGV[2]);"+"redis.call('zrem',KEYS[3],ARGV[2]);"+"localmaxSize=tonumber(redis.call('hget',KEYS[6],'max-size'));"+"ifmaxSize~=nilandmaxSize~=0then"+"redis.call('zrem',KEYS[5],ARGV[2]);"+"end;"+"redis.call('hdel',KEYS[1],ARGV[2]);"+"localmsg=struct.pack('Lc0Lc0',string.len(ARGV[2]),ARGV[2],string.len(val),val);"+"redis.call('publish',KEYS[4],msg);"+"return1;"+"else"+"return0;"+"end",Arrays.<Object>asList(getName(key),getTimeoutSetNameByKey(key),getIdleSetNameByKey(key),getRemovedChannelNameByKey(key),getLastAccessTimeSetNameByKey(key),getOptionsNameByKey(key)),System.currentTimeMillis(),encodeMapKey(key),encodeMapValue(value));###name###getName(key)###404:9:441:87
731f0396f6c26377a875f306091d4f3ab58560b2###/redisson_redisson/redisson/src/main/java/org/redisson/RedissonSetCache.java###/RedissonSetCache.java###org.redisson.RedissonSetCache###containsAsync:Object ###returncommandExecutor.evalReadAsync(getName(o),codec,RedisCommands.EVAL_BOOLEAN,"localexpireDateScore=redis.call('zscore',KEYS[1],ARGV[2]);"+"ifexpireDateScore~=falsethen"+"iftonumber(expireDateScore)<=tonumber(ARGV[1])then"+"return0;"+"else"+"return1;"+"end;"+"else"+"return0;"+"end;",Arrays.<Object>asList(getName(o)),System.currentTimeMillis(),encode(o));###name###getName(o)###117:9:128:90
62b5e68c05b7475e1e0f98b4161aacb35d376b97###/redisson_redisson/redisson/src/main/java/org/redisson/RedissonMap.java###/RedissonMap.java###org.redisson.RedissonMap###addAndGetOperationAsync:K Number ###RFuture<V>future=commandExecutor.writeAsync(getName(key),StringCodec.INSTANCE,newRedisCommand<>("HINCRBYFLOAT",newNumberConvertor(value.getClass())),getName(key),keyState,newBigDecimal(value.toString()).toPlainString());###name###getName(key)###1061:9:1063:91
5b938edd2f016c3df3db3d7d8ac8520e2d810301###/redisson_redisson/redisson/src/main/java/org/redisson/RedisNodes.java###/RedisNodes.java###org.redisson.RedisNodes###pingAll:long TimeUnit ###if(!"PONG".equals(f.getNow()))###pong###f.getNow()###152:13:154:14
731f0396f6c26377a875f306091d4f3ab58560b2###/redisson_redisson/redisson/src/main/java/org/redisson/RedissonMapCache.java###/RedissonMapCache.java###org.redisson.RedissonMapCache###removeOperationAsync:K ###returncommandExecutor.evalWriteAsync(getName(key),codec,RedisCommands.EVAL_MAP_VALUE,"localvalue=redis.call('hget',KEYS[1],ARGV[2]);"+"ifvalue==falsethen"+"returnnil;"+"end;"+"localt,val=struct.unpack('dLc0',value);"+"localexpireDate=92233720368547758;"+"localexpireDateScore=redis.call('zscore',KEYS[2],ARGV[2]);"+"ifexpireDateScore~=falsethen"+"expireDate=tonumber(expireDateScore)"+"end;"+"ift~=0then"+"localexpireIdle=redis.call('zscore',KEYS[3],ARGV[2]);"+"ifexpireIdle~=falsethen"+"expireDate=math.min(expireDate,tonumber(expireIdle))"+"end;"+"end;"+"ifexpireDate<=tonumber(ARGV[1])then"+"returnnil;"+"end;"+"redis.call('zrem',KEYS[2],ARGV[2]);"+"redis.call('zrem',KEYS[3],ARGV[2]);"+"redis.call('zrem',KEYS[5],ARGV[2]);"+"redis.call('hdel',KEYS[1],ARGV[2]);"+"localmsg=struct.pack('Lc0Lc0',string.len(ARGV[2]),ARGV[2],string.len(val),val);"+"redis.call('publish',KEYS[4],msg);"+"returnval;",Arrays.<Object>asList(getName(key),getTimeoutSetNameByKey(key),getIdleSetNameByKey(key),getRemovedChannelNameByKey(key),getLastAccessTimeSetNameByKey(key)),System.currentTimeMillis(),encodeMapKey(key));###name###getName(key)###1128:9:1160:64
731f0396f6c26377a875f306091d4f3ab58560b2###/redisson_redisson/redisson/src/main/java/org/redisson/RedissonMapCache.java###/RedissonMapCache.java###org.redisson.RedissonMapCache###fastReplaceOperationAsync:K V ###returncommandExecutor.evalWriteAsync(getName(key),codec,RedisCommands.EVAL_BOOLEAN,"localvalue=redis.call('hget',KEYS[1],ARGV[2]);"+"ifvalue==falsethen"+"return0;"+"end;"+"localt,val=struct.unpack('dLc0',value);"+"localexpireDate=92233720368547758;"+"localexpireDateScore=redis.call('zscore',KEYS[2],ARGV[2]);"+"ifexpireDateScore~=falsethen"+"expireDate=tonumber(expireDateScore)"+"end;"+"ift~=0then"+"localexpireIdle=redis.call('zscore',KEYS[3],ARGV[2]);"+"iftonumber(expireIdle)>tonumber(ARGV[1])then"+"redis.call('zadd',KEYS[3],t+tonumber(ARGV[1]),ARGV[2]);"+"end;"+"ifexpireIdle~=falsethen"+"expireDate=math.min(expireDate,tonumber(expireIdle))"+"end;"+"end;"+"ifexpireDate<=tonumber(ARGV[1])then"+"return0;"+"end;"+"localvalue=struct.pack('dLc0',t,string.len(ARGV[3]),ARGV[3]);"+"redis.call('hset',KEYS[1],ARGV[2],value);"+"localmsg=struct.pack('Lc0Lc0Lc0',string.len(ARGV[2]),ARGV[2],string.len(ARGV[3]),ARGV[3],string.len(val),val);"+"redis.call('publish',KEYS[4],msg);"+"return1;",Arrays.<Object>asList(getName(key),getTimeoutSetNameByKey(key),getIdleSetNameByKey(key),getUpdatedChannelNameByKey(key)),System.currentTimeMillis(),encodeMapKey(key),encodeMapValue(value));###name###getName(key)###1631:9:1660:87
39415583387819af84403cd7c8f68aed95752d7f###/redisson_redisson/redisson/src/main/java/org/redisson/RedissonReactive.java###/RedissonReactive.java###org.redisson.RedissonReactive###getReliableTopic:String Codec ###returnReactiveProxyBuilder.create(commandExecutor,newRedissonReliableTopic(codec,commandExecutor,name),RReliableTopicReactive.class);###topic###newRedissonReliableTopic(codec,commandExecutor,name)###313:10:313:149
731f0396f6c26377a875f306091d4f3ab58560b2###/redisson_redisson/redisson/src/main/java/org/redisson/RedissonSet.java###/RedissonSet.java###org.redisson.RedissonSet###moveAsync:String V ###returncommandExecutor.writeAsync(getName(member),codec,RedisCommands.SMOVE,getName(member),destination,encode(member));###name###getName(member)###218:9:218:134
731f0396f6c26377a875f306091d4f3ab58560b2###/redisson_redisson/redisson/src/main/java/org/redisson/RedissonMapCache.java###/RedissonMapCache.java###org.redisson.RedissonMapCache###putOperationAsync:K V ###returncommandExecutor.evalWriteAsync(getName(key),codec,RedisCommands.EVAL_MAP_VALUE,"localv=redis.call('hget',KEYS[1],ARGV[2]);"+"localexists=false;"+"ifv~=falsethen"+"localt,val=struct.unpack('dLc0',v);"+"localexpireDate=92233720368547758;"+"localexpireDateScore=redis.call('zscore',KEYS[2],ARGV[2]);"+"ifexpireDateScore~=falsethen"+"expireDate=tonumber(expireDateScore)"+"end;"+"ift~=0then"+"localexpireIdle=redis.call('zscore',KEYS[3],ARGV[2]);"+"ifexpireIdle~=falsethen"+"expireDate=math.min(expireDate,tonumber(expireIdle))"+"end;"+"end;"+"ifexpireDate>tonumber(ARGV[1])then"+"exists=true;"+"end;"+"end;"+""+"localvalue=struct.pack('dLc0',0,string.len(ARGV[3]),ARGV[3]);"+"redis.call('hset',KEYS[1],ARGV[2],value);"+"localcurrentTime=tonumber(ARGV[1]);"+"locallastAccessTimeSetName=KEYS[6];"+"localmaxSize=tonumber(redis.call('hget',KEYS[8],'max-size'));"+"ifexists==falsethen"+"ifmaxSize~=nilandmaxSize~=0then"+"redis.call('zadd',lastAccessTimeSetName,currentTime,ARGV[2]);"+"localcacheSize=tonumber(redis.call('hlen',KEYS[1]));"+"ifcacheSize>maxSizethen"+"locallruItems=redis.call('zrange',lastAccessTimeSetName,0,cacheSize-maxSize-1);"+"forindex,lruIteminipairs(lruItems)do"+"iflruItemandlruItem~=ARGV[2]then"+"locallruItemValue=redis.call('hget',KEYS[1],lruItem);"+"redis.call('hdel',KEYS[1],lruItem);"+"redis.call('zrem',KEYS[2],lruItem);"+"redis.call('zrem',KEYS[3],lruItem);"+"redis.call('zrem',lastAccessTimeSetName,lruItem);"+"iflruItemValue~=falsethen"+"localremovedChannelName=KEYS[7];"+"localttl,obj=struct.unpack('dLc0',lruItemValue);"+"localmsg=struct.pack('Lc0Lc0',string.len(lruItem),lruItem,string.len(obj),obj);"+"redis.call('publish',removedChannelName,msg);"+"end;"+"end;"+"end"+"end;"+"end;"+"localmsg=struct.pack('Lc0Lc0',string.len(ARGV[2]),ARGV[2],string.len(ARGV[3]),ARGV[3]);"+"redis.call('publish',KEYS[4],msg);"+"returnnil;"+"else"+"ifmaxSize~=nilandmaxSize~=0then"+"redis.call('zadd',lastAccessTimeSetName,currentTime,ARGV[2]);"+"end;"+"end;"+""+"localt,val=struct.unpack('dLc0',v);"+"localmsg=struct.pack('Lc0Lc0Lc0',string.len(ARGV[2]),ARGV[2],string.len(ARGV[3]),ARGV[3],string.len(val),val);"+"redis.call('publish',KEYS[5],msg);"+"returnval;",Arrays.<Object>asList(getName(key),getTimeoutSetNameByKey(key),getIdleSetNameByKey(key),getCreatedChannelNameByKey(key),getUpdatedChannelNameByKey(key),getLastAccessTimeSetNameByKey(key),getRemovedChannelNameByKey(key),getOptionsNameByKey(key)),System.currentTimeMillis(),encodeMapKey(key),encodeMapValue(value));###name###getName(key)###485:9:549:87
731f0396f6c26377a875f306091d4f3ab58560b2###/redisson_redisson/redisson/src/main/java/org/redisson/RedissonMapCache.java###/RedissonMapCache.java###org.redisson.RedissonMapCache###remainTimeToLiveAsync:K ###returncommandExecutor.evalWriteAsync(getName(key),codec,RedisCommands.EVAL_LONG,"localvalue=redis.call('hget',KEYS[1],ARGV[2]);"+"ifvalue==falsethen"+"return-2;"+"end;"+"localt,val=struct.unpack('dLc0',value);"+"localexpireDate=92233720368547758;"+"localexpireDateScore=redis.call('zscore',KEYS[2],ARGV[2]);"+"ifexpireDateScore~=falsethen"+"expireDate=tonumber(expireDateScore)"+"end;"+"ift~=0then"+"localexpireIdle=redis.call('zscore',KEYS[3],ARGV[2]);"+"ifexpireIdle~=falsethen"+"expireDate=math.min(expireDate,tonumber(expireIdle))"+"end;"+"end;"+"ifexpireDate==92233720368547758then"+"return-1;"+"end;"+"ifexpireDate>tonumber(ARGV[1])then"+"returnexpireDate-ARGV[1];"+"else"+"return-2;"+"end;"+"returnval;",Arrays.<Object>asList(getName(key),getTimeoutSetNameByKey(key),getIdleSetNameByKey(key)),System.currentTimeMillis(),encodeMapKey(key));###name###getName(key)###1001:9:1029:64
62b5e68c05b7475e1e0f98b4161aacb35d376b97###/redisson_redisson/redisson/src/main/java/org/redisson/RedissonMap.java###/RedissonMap.java###org.redisson.RedissonMap###containsKeyAsync:Object ###returncommandExecutor.readAsync(getName(key),codec,RedisCommands.HEXISTS,getName(key),encodeMapKey(key));###name###getName(key)###192:9:192:119
62b5e68c05b7475e1e0f98b4161aacb35d376b97###/redisson_redisson/redisson/src/main/java/org/redisson/RedissonMap.java###/RedissonMap.java###org.redisson.RedissonMap###fastPutOperationAsync:K V ###returncommandExecutor.writeAsync(getName(key),codec,RedisCommands.HSET,getName(key),encodeMapKey(key),encodeMapValue(value));###name###getName(key)###931:9:931:140
62b5e68c05b7475e1e0f98b4161aacb35d376b97###/redisson_redisson/redisson/src/main/java/org/redisson/RedissonMap.java###/RedissonMap.java###org.redisson.RedissonMap###removeOperationAsync:Object Object ###RFuture<Boolean>future=commandExecutor.evalWriteAsync(getName(key),codec,RedisCommands.EVAL_BOOLEAN,"ifredis.call('hget',KEYS[1],ARGV[1])==ARGV[2]then"+"returnredis.call('hdel',KEYS[1],ARGV[1])"+"else"+"return0"+"end",Collections.singletonList(getName(key)),encodeMapKey(key),encodeMapValue(value));###name###getName(key)###593:9:599:96
62b5e68c05b7475e1e0f98b4161aacb35d376b97###/redisson_redisson/redisson/src/main/java/org/redisson/RedissonMap.java###/RedissonMap.java###org.redisson.RedissonMap###removeOperationAsync:K ###returncommandExecutor.evalWriteAsync(getName(key),codec,RedisCommands.EVAL_MAP_VALUE,"localv=redis.call('hget',KEYS[1],ARGV[1]);"+"redis.call('hdel',KEYS[1],ARGV[1]);"+"returnv",Collections.singletonList(getName(key)),encodeMapKey(key));###name###getName(key)###910:9:914:77
731f0396f6c26377a875f306091d4f3ab58560b2###/redisson_redisson/redisson/src/main/java/org/redisson/RedissonLocalCachedMap.java###/RedissonLocalCachedMap.java###org.redisson.RedissonLocalCachedMap###replaceOperationAsync:K V V ###returncommandExecutor.evalWriteAsync(getName(key),LongCodec.INSTANCE,RedisCommands.EVAL_BOOLEAN,"ifredis.call('hget',KEYS[1],ARGV[1])==ARGV[2]then"+"redis.call('hset',KEYS[1],ARGV[1],ARGV[3]);"+"ifARGV[4]=='1'then"+"redis.call('publish',KEYS[2],ARGV[5]);"+"end;"+"ifARGV[4]=='2'then"+"redis.call('zadd',KEYS[3],ARGV[6],ARGV[7]);"+"redis.call('publish',KEYS[2],ARGV[5]);"+"end;"+"return1;"+"else"+"return0;"+"end",Arrays.<Object>asList(getName(key),listener.getInvalidationTopicName(),listener.getUpdatesLogName()),keyState,oldValueState,newValueState,invalidateEntryOnChange,msg,System.currentTimeMillis(),entryId);###name###getName(key)###1034:9:1049:124
731f0396f6c26377a875f306091d4f3ab58560b2###/redisson_redisson/redisson/src/main/java/org/redisson/RedissonMapCache.java###/RedissonMapCache.java###org.redisson.RedissonMapCache###replaceOperationAsync:K V V ###returncommandExecutor.evalWriteAsync(getName(key),codec,RedisCommands.EVAL_BOOLEAN,"localv=redis.call('hget',KEYS[1],ARGV[2]);"+"ifv==falsethen"+"return0;"+"end;"+"localexpireDate=92233720368547758;"+"localexpireDateScore=redis.call('zscore',KEYS[2],ARGV[2]);"+"ifexpireDateScore~=falsethen"+"expireDate=tonumber(expireDateScore)"+"end;"+""+"localt,val=struct.unpack('dLc0',v);"+"ift~=0then"+"localexpireIdle=redis.call('zscore',KEYS[3],ARGV[2]);"+"iftonumber(expireIdle)>tonumber(ARGV[1])then"+"redis.call('zadd',KEYS[3],t+tonumber(ARGV[1]),ARGV[2]);"+"end;"+"ifexpireIdle~=falsethen"+"expireDate=math.min(expireDate,tonumber(expireIdle))"+"end;"+"end;"+"ifexpireDate>tonumber(ARGV[1])andval==ARGV[3]then"+"localmsg=struct.pack('Lc0Lc0Lc0',string.len(ARGV[2]),ARGV[2],string.len(ARGV[4]),ARGV[4],string.len(ARGV[3]),ARGV[3]);"+"redis.call('publish',KEYS[4],msg);"+""+"localvalue=struct.pack('dLc0',t,string.len(ARGV[4]),ARGV[4]);"+"redis.call('hset',KEYS[1],ARGV[2],value);"+"return1;"+"end;"+"return0;",Arrays.<Object>asList(getName(key),getTimeoutSetNameByKey(key),getIdleSetNameByKey(key),getUpdatedChannelNameByKey(key)),System.currentTimeMillis(),encodeMapKey(key),encodeMapValue(oldValue),encodeMapValue(newValue));###name###getName(key)###1595:9:1626:112
731f0396f6c26377a875f306091d4f3ab58560b2###/redisson_redisson/redisson/src/main/java/org/redisson/RedissonSetCache.java###/RedissonSetCache.java###org.redisson.RedissonSetCache###addAsync:V long TimeUnit ###returncommandExecutor.evalWriteAsync(getName(value),codec,RedisCommands.EVAL_BOOLEAN,"localexpireDateScore=redis.call('zscore',KEYS[1],ARGV[3]);"+"redis.call('zadd',KEYS[1],ARGV[2],ARGV[3]);"+"ifexpireDateScore~=falseandtonumber(expireDateScore)>tonumber(ARGV[1])then"+"return0;"+"end;"+"return1;",Arrays.<Object>asList(getName(value)),System.currentTimeMillis(),timeoutDate,objectState);###name###getName(value)###246:9:253:110
62b5e68c05b7475e1e0f98b4161aacb35d376b97###/redisson_redisson/redisson/src/main/java/org/redisson/RedissonMap.java###/RedissonMap.java###org.redisson.RedissonMap###fastReplaceOperationAsync:K V ###returncommandExecutor.evalWriteAsync(getName(key),codec,RedisCommands.EVAL_BOOLEAN,"ifredis.call('hexists',KEYS[1],ARGV[1])==1then"+"redis.call('hset',KEYS[1],ARGV[1],ARGV[2]);"+"return1;"+"else"+"return0;"+"end",Collections.singletonList(getName(key)),encodeMapKey(key),encodeMapValue(value));###name###getName(key)###695:9:702:96
14e475d8afb7a6986d5b38e9129945b69832e466###/redisson_redisson/redisson/src/main/java/org/redisson/RedissonScript.java###/RedissonScript.java###org.redisson.RedissonScript###eval:Mode String ReturnType List<Object> Object[] ###returneval(null,mode,luaScript,returnType,keys,values);###key###null###85:9:85:70
52e42c5f15fa76500f940029b94c54032dadf7c3###/redisson_redisson/redisson/src/main/java/org/redisson/cluster/ClusterConnectionManager.java###/ClusterConnectionManager.java###org.redisson.cluster.ClusterConnectionManager###checkSlotsMigration:Collection<ClusterPartition> ###for(currentPartition:getLastPartitions())###clusterLastPartitions###getLastPartitions()###662:9:697:10
b36cd766e19ffcf0a2ff4ceb6bb0c6260a00dc79###/redisson_redisson/redisson/src/main/java/org/redisson/connection/SentinelConnectionManager.java###/SentinelConnectionManager.java###org.redisson.connection.SentinelConnectionManager###updateState:SentinelServersConfig RedisConnection Iterator<RedisClient> ###flags.contains("s_down")||flags.contains("disconnected")###baseStatus###flags.contains("s_down")||flags.contains("disconnected")###413:25:413:83
731f0396f6c26377a875f306091d4f3ab58560b2###/redisson_redisson/redisson/src/main/java/org/redisson/RedissonSetCache.java###/RedissonSetCache.java###org.redisson.RedissonSetCache###removeAsync:Object ###returncommandExecutor.writeAsync(getName(o),codec,RedisCommands.ZREM,getName(o),encode(o));###name###getName(o)###263:9:263:105
62b5e68c05b7475e1e0f98b4161aacb35d376b97###/redisson_redisson/redisson/src/main/java/org/redisson/RedissonMap.java###/RedissonMap.java###org.redisson.RedissonMap###replaceOperationAsync:K V ###returncommandExecutor.evalWriteAsync(getName(key),codec,RedisCommands.EVAL_MAP_VALUE,"ifredis.call('hexists',KEYS[1],ARGV[1])==1then"+"localv=redis.call('hget',KEYS[1],ARGV[1]);"+"redis.call('hset',KEYS[1],ARGV[1],ARGV[2]);"+"returnv;"+"else"+"returnnil;"+"end",Collections.singletonList(getName(key)),encodeMapKey(key),encodeMapValue(value));###name###getName(key)###664:9:672:96
731f0396f6c26377a875f306091d4f3ab58560b2###/redisson_redisson/redisson/src/main/java/org/redisson/RedissonMapCache.java###/RedissonMapCache.java###org.redisson.RedissonMapCache###containsKeyAsync:Object ###returncommandExecutor.evalWriteAsync(getName(key),codec,RedisCommands.EVAL_BOOLEAN,"localvalue=redis.call('hget',KEYS[1],ARGV[2]);"+"localexpireDate=92233720368547758;"+"ifvalue~=falsethen"+""+"localmaxSize=tonumber(redis.call('hget',KEYS[5],'max-size'));"+"ifmaxSize~=nilandmaxSize~=0then"+"redis.call('zadd',KEYS[4],tonumber(ARGV[1]),ARGV[2]);"+"end;"+""+"localexpireDateScore=redis.call('zscore',KEYS[2],ARGV[2]);"+"ifexpireDateScore~=falsethen"+"expireDate=tonumber(expireDateScore)"+"end;"+"localt,val=struct.unpack('dLc0',value);"+"ift~=0then"+"localexpireIdle=redis.call('zscore',KEYS[3],ARGV[2]);"+"ifexpireIdle~=falsethen"+"iftonumber(expireIdle)>tonumber(ARGV[1])then"+"redis.call('zadd',KEYS[3],t+tonumber(ARGV[1]),ARGV[2]);"+"end;"+"expireDate=math.min(expireDate,tonumber(expireIdle))"+"end;"+"end;"+"ifexpireDate<=tonumber(ARGV[1])then"+"return0;"+"end;"+"return1;"+"end;"+"return0;",Arrays.<Object>asList(getName(key),getTimeoutSetNameByKey(key),getIdleSetNameByKey(key),getLastAccessTimeSetNameByKey(key),getOptionsNameByKey(key)),System.currentTimeMillis(),encodeMapKey(key));###name###getName(key)###136:9:167:64
731f0396f6c26377a875f306091d4f3ab58560b2###/redisson_redisson/redisson/src/main/java/org/redisson/RedissonLocalCachedMap.java###/RedissonLocalCachedMap.java###org.redisson.RedissonLocalCachedMap###replaceOperationAsync:K V ###returncommandExecutor.evalWriteAsync(getName(key),codec,RedisCommands.EVAL_MAP_VALUE,"ifredis.call('hexists',KEYS[1],ARGV[1])==1then"+"localv=redis.call('hget',KEYS[1],ARGV[1]);"+"redis.call('hset',KEYS[1],ARGV[1],ARGV[2]);"+"ifARGV[3]=='1'then"+"redis.call('publish',KEYS[2],ARGV[4]);"+"end;"+"ifARGV[3]=='2'then"+"redis.call('zadd',KEYS[3],ARGV[5],ARGV[6]);"+"redis.call('publish',KEYS[2],ARGV[4]);"+"end;"+"returnv;"+"else"+"returnnil;"+"end",Arrays.<Object>asList(getName(key),listener.getInvalidationTopicName(),listener.getUpdatesLogName()),keyState,valueState,invalidateEntryOnChange,msg,System.currentTimeMillis(),entryId);###name###getName(key)###975:9:993:106
62b5e68c05b7475e1e0f98b4161aacb35d376b97###/redisson_redisson/redisson/src/main/java/org/redisson/RedissonMap.java###/RedissonMap.java###org.redisson.RedissonMap###replaceOperationAsync:K V V ###returncommandExecutor.evalWriteAsync(getName(key),codec,RedisCommands.EVAL_BOOLEAN,"ifredis.call('hget',KEYS[1],ARGV[1])==ARGV[2]then"+"redis.call('hset',KEYS[1],ARGV[1],ARGV[3]);"+"return1;"+"else"+"return0;"+"end",Collections.singletonList(getName(key)),encodeMapKey(key),encodeMapValue(oldValue),encodeMapValue(newValue));###name###getName(key)###634:9:641:129
52e42c5f15fa76500f940029b94c54032dadf7c3###/redisson_redisson/redisson/src/main/java/org/redisson/cluster/ClusterConnectionManager.java###/ClusterConnectionManager.java###org.redisson.cluster.ClusterConnectionManager###checkSlotsMigration:Collection<ClusterPartition> ###if(!Objects.equals(currentPartition.getNodeId(),newPartition.getNodeId()))###nodeId###currentPartition.getNodeId()###664:17:666:18
731f0396f6c26377a875f306091d4f3ab58560b2###/redisson_redisson/redisson/src/main/java/org/redisson/RedissonLocalCachedMap.java###/RedissonLocalCachedMap.java###org.redisson.RedissonLocalCachedMap###removeOperationAsync:Object Object ###returncommandExecutor.evalWriteAsync(getName(key),LongCodec.INSTANCE,RedisCommands.EVAL_BOOLEAN,"ifredis.call('hget',KEYS[1],ARGV[1])==ARGV[2]then"+"ifARGV[3]=='1'then"+"redis.call('publish',KEYS[2],ARGV[4]);"+"end;"+"ifARGV[3]=='2'then"+"redis.call('zadd',KEYS[3],ARGV[5],ARGV[6]);"+"redis.call('publish',KEYS[2],ARGV[4]);"+"end;"+"returnredis.call('hdel',KEYS[1],ARGV[1])"+"else"+"return0"+"end",Arrays.<Object>asList(getName(key),listener.getInvalidationTopicName(),listener.getUpdatesLogName()),keyState,valueState,invalidateEntryOnChange,msg,System.currentTimeMillis(),entryId);###name###getName(key)###1089:9:1103:102
f7593876b4bb3814382d9e6277fcd034a505ed5c###/redisson_redisson/redisson/src/main/java/org/redisson/RedissonMapCache.java###/RedissonMapCache.java###org.redisson.RedissonMapCache###fastPutOperationAsync:K V ###returncommandExecutor.evalWriteAsync(getName(key),codec,RedisCommands.EVAL_BOOLEAN,"localinsertable=false;"+"localv=redis.call('hget',KEYS[1],ARGV[2]);"+"ifv==falsethen"+"insertable=true;"+"else"+"localt,val=struct.unpack('dLc0',v);"+"localexpireDate=92233720368547758;"+"localexpireDateScore=redis.call('zscore',KEYS[2],ARGV[2]);"+"ifexpireDateScore~=falsethen"+"expireDate=tonumber(expireDateScore)"+"end;"+"ift~=0then"+"localexpireIdle=redis.call('zscore',KEYS[3],ARGV[2]);"+"ifexpireIdle~=falsethen"+"expireDate=math.min(expireDate,tonumber(expireIdle))"+"end;"+"end;"+"ifexpireDate<=tonumber(ARGV[1])then"+"insertable=true;"+"end;"+"end;"+"localval=struct.pack('dLc0',0,string.len(ARGV[3]),ARGV[3]);"+"redis.call('hset',KEYS[1],ARGV[2],val);"+"localmaxSize=tonumber(redis.call('hget',KEYS[8],'max-size'));"+"ifmaxSize~=nilandmaxSize~=0then"+"localcurrentTime=tonumber(ARGV[1]);"+"locallastAccessTimeSetName=KEYS[6];"+"localmode=redis.call('hget',KEYS[8],'mode');"+"ifmode==falseormode=='LRU'then"+"redis.call('zadd',lastAccessTimeSetName,currentTime,ARGV[2]);"+"end;"+"localcacheSize=tonumber(redis.call('hlen',KEYS[1]));"+"ifcacheSize>maxSizethen"+"locallruItems=redis.call('zrange',lastAccessTimeSetName,0,cacheSize-maxSize-1);"+"forindex,lruIteminipairs(lruItems)do"+"iflruItemandlruItem~=ARGV[2]then"+"locallruItemValue=redis.call('hget',KEYS[1],lruItem);"+"redis.call('hdel',KEYS[1],lruItem);"+"redis.call('zrem',KEYS[2],lruItem);"+"redis.call('zrem',KEYS[3],lruItem);"+"redis.call('zrem',lastAccessTimeSetName,lruItem);"+"iflruItemValue~=falsethen"+"localremovedChannelName=KEYS[7];"+"localttl,obj=struct.unpack('dLc0',lruItemValue);"+"localmsg=struct.pack('Lc0Lc0',string.len(lruItem),lruItem,string.len(obj),obj);"+"redis.call('publish',removedChannelName,msg);"+"end;"+"end;"+"end;"+"end;"+"ifmode=='LFU'then"+"redis.call('zincrby',lastAccessTimeSetName,1,ARGV[2]);"+"end;"+"end;"+"ifinsertable==truethen"+"localmsg=struct.pack('Lc0Lc0',string.len(ARGV[2]),ARGV[2],string.len(ARGV[3]),ARGV[3]);"+"redis.call('publish',KEYS[4],msg);"+"return1;"+"else"+"localt,val=struct.unpack('dLc0',v);"+"localmsg=struct.pack('Lc0Lc0Lc0',string.len(ARGV[2]),ARGV[2],string.len(ARGV[3]),ARGV[3],string.len(val),val);"+"redis.call('publish',KEYS[5],msg);"+"return0;"+"end;",Arrays.asList(getName(key),getTimeoutSetName(name),getIdleSetName(name),getCreatedChannelName(name),getUpdatedChannelName(name),getLastAccessTimeSetName(name),getRemovedChannelName(name),getOptionsName(name)),System.currentTimeMillis(),encodeMapKey(key),encodeMapValue(value));###name###getName(key)###1407:9:1480:87
62b5e68c05b7475e1e0f98b4161aacb35d376b97###/redisson_redisson/redisson/src/main/java/org/redisson/RedissonMap.java###/RedissonMap.java###org.redisson.RedissonMap###getOperationAsync:K ###returncommandExecutor.readAsync(getName(key),codec,RedisCommands.HGET,getName(key),encodeMapKey(key));###name###getName(key)###707:9:707:116
731f0396f6c26377a875f306091d4f3ab58560b2###/redisson_redisson/redisson/src/main/java/org/redisson/RedissonMapCache.java###/RedissonMapCache.java###org.redisson.RedissonMapCache###addAndGetOperationAsync:K Number ###returncommandExecutor.evalWriteAsync(getName(key),StringCodec.INSTANCE,newRedisCommand<Object>("EVAL",newNumberConvertor(value.getClass())),"localvalue=redis.call('hget',KEYS[1],ARGV[2]);"+"localexpireDate=92233720368547758;"+"localt=0;"+"localval=0;"+"ifvalue~=falsethen"+"t,val=struct.unpack('dLc0',value);"+"localexpireDateScore=redis.call('zscore',KEYS[2],ARGV[2]);"+"ifexpireDateScore~=falsethen"+"expireDate=tonumber(expireDateScore)"+"end;"+"ift~=0then"+"localexpireIdle=redis.call('zscore',KEYS[3],ARGV[2]);"+"ifexpireIdle~=falsethen"+"iftonumber(expireIdle)>tonumber(ARGV[1])then"+"redis.call('zadd',KEYS[3],t+tonumber(ARGV[1]),ARGV[2]);"+"end;"+"expireDate=math.min(expireDate,tonumber(expireIdle))"+"end;"+"end;"+"end;"+"localnewValue=tonumber(ARGV[3]);"+"ifvalue~=falseandexpireDate>tonumber(ARGV[1])then"+"newValue=tonumber(val)+newValue;"+"localmsg=struct.pack('Lc0Lc0Lc0',string.len(ARGV[2]),ARGV[2],string.len(newValue),newValue,string.len(val),val);"+"redis.call('publish',KEYS[5],msg);"+"else"+"localmsg=struct.pack('Lc0Lc0',string.len(ARGV[2]),ARGV[2],string.len(ARGV[3]),ARGV[3]);"+"redis.call('publish',KEYS[4],msg);"+"end;"+"localnewValuePack=struct.pack('dLc0',t,string.len(newValue),newValue);"+"redis.call('hset',KEYS[1],ARGV[2],newValuePack);"+"localmaxSize=tonumber(redis.call('hget',KEYS[8],'max-size'));"+"ifmaxSize~=nilandmaxSize~=0then"+"localcurrentTime=tonumber(ARGV[1]);"+"locallastAccessTimeSetName=KEYS[6];"+"redis.call('zadd',lastAccessTimeSetName,currentTime,ARGV[2]);"+"localcacheSize=tonumber(redis.call('hlen',KEYS[1]));"+"ifcacheSize>maxSizethen"+"locallruItems=redis.call('zrange',lastAccessTimeSetName,0,cacheSize-maxSize-1);"+"forindex,lruIteminipairs(lruItems)do"+"iflruItemandlruItem~=ARGV[2]then"+"locallruItemValue=redis.call('hget',KEYS[1],lruItem);"+"redis.call('hdel',KEYS[1],lruItem);"+"redis.call('zrem',KEYS[2],lruItem);"+"redis.call('zrem',KEYS[3],lruItem);"+"redis.call('zrem',lastAccessTimeSetName,lruItem);"+"iflruItemValue~=falsethen"+"localremovedChannelName=KEYS[7];"+"localttl,obj=struct.unpack('dLc0',lruItemValue);"+"localmsg=struct.pack('Lc0Lc0',string.len(lruItem),lruItem,string.len(obj),obj);"+"redis.call('publish',removedChannelName,msg);"+"end;"+"end;"+"end;"+"end;"+"end;"+"returntostring(newValue);",Arrays.<Object>asList(getName(key),getTimeoutSetNameByKey(key),getIdleSetNameByKey(key),getCreatedChannelNameByKey(key),getUpdatedChannelNameByKey(key),getLastAccessTimeSetNameByKey(key),getRemovedChannelNameByKey(key),getOptionsNameByKey(key)),System.currentTimeMillis(),keyState,newBigDecimal(value.toString()).toPlainString());###name###getName(key)###643:9:709:105
