{
    "id": 1435,
    "expression": "pr",
    "projectName": "jackrabbit-oak",
    "commitID": "2b32e7a4caca999ae8fa1bb4f6e58abcf1cc61b0",
    "filePath": "oak-solr-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/solr/query/SolrQueryIndex.java",
    "occurrences": 31,
    "isArithmeticExpression": 0,
    "isGetTypeMethod": 0,
    "expressionList": [
        {
            "nodeContext": "pr",
            "nodeType": "SimpleName",
            "nodePosition": {
                "charLength": 2,
                "startLineNumber": 124,
                "startColumnNumber": 45,
                "endLineNumber": 124,
                "endColumnNumber": 47
            },
            "astNodeNumber": 1,
            "astHeight": 1,
            "parentDataList": [
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.MethodInvocation,arguments]",
                    "nodePosition": {
                        "charLength": 15,
                        "startLineNumber": 124,
                        "startColumnNumber": 45,
                        "endLineNumber": 124,
                        "endColumnNumber": 60
                    },
                    "nodeContext": "pr.propertyName",
                    "nodeType": "QualifiedName",
                    "astNodeNumber": 3,
                    "astHeight": 2
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.InfixExpression,leftOperand]",
                    "nodePosition": {
                        "charLength": 41,
                        "startLineNumber": 124,
                        "startColumnNumber": 20,
                        "endLineNumber": 124,
                        "endColumnNumber": 61
                    },
                    "nodeContext": "NATIVE_SOLR_QUERY.equals(pr.propertyName)",
                    "nodeType": "MethodInvocation",
                    "astNodeNumber": 6,
                    "astHeight": 3
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,expression]",
                    "nodePosition": {
                        "charLength": 88,
                        "startLineNumber": 124,
                        "startColumnNumber": 20,
                        "endLineNumber": 124,
                        "endColumnNumber": 108
                    },
                    "nodeContext": "NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)",
                    "nodeType": "InfixExpression",
                    "astNodeNumber": 13,
                    "astHeight": 4
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5508,
                        "startLineNumber": 124,
                        "startColumnNumber": 16,
                        "endLineNumber": 211,
                        "endColumnNumber": 17
                    },
                    "nodeContext": "if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n  String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n  if (isSupportedHttpRequest(nativeQueryString)) {\n    String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n    if (!\"select\".equals(requestHandlerString)) {\n      if (requestHandlerString.charAt(0) != '/') {\n        requestHandlerString=\"/\" + requestHandlerString;\n      }\n      solrQuery.setRequestHandler(requestHandlerString);\n    }\n    String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n    for (    String param : parameterString.split(\"&\")) {\n      String[] kv=param.split(\"=\");\n      if (kv.length != 2) {\n        throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n      }\n else {\n        if (\"stream.body\".equals(kv[0])) {\n          kv[0]=\"q\";\n          String mltFlString=\"mlt.fl=\";\n          int mltFlIndex=parameterString.indexOf(mltFlString);\n          if (mltFlIndex > -1) {\n            int beginIndex=mltFlIndex + mltFlString.length();\n            int endIndex=parameterString.indexOf('&',beginIndex);\n            String fields;\n            if (endIndex > beginIndex) {\n              fields=parameterString.substring(beginIndex,endIndex);\n            }\n else {\n              fields=parameterString.substring(beginIndex);\n            }\n            kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n          }\n        }\n        solrQuery.setParam(kv[0],kv[1]);\n      }\n    }\n    return solrQuery;\n  }\n else {\n    queryBuilder.append(nativeQueryString);\n  }\n}\n else {\n  if (pr.propertyName.contains(\"/\")) {\n    continue;\n  }\n  if (\"rep:excerpt\".equals(pr.propertyName)) {\n    continue;\n  }\n  String first=null;\n  if (pr.first != null) {\n    first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n  }\n  String last=null;\n  if (pr.last != null) {\n    last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n  }\n  String prField=configuration.getFieldForPropertyRestriction(pr);\n  CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n  if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n    queryBuilder.append(configuration.getPathField());\n    queryBuilder.append(':');\n    queryBuilder.append(first);\n  }\n else {\n    if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(first);\n    }\n else     if (pr.first == null && pr.last == null) {\n      if (!queryBuilder.toString().contains(fieldName + \":\")) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append('*');\n      }\n    }\n else     if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n    }\n else     if (pr.isLike) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n    }\n else {\n      throw new RuntimeException(\"[unexpected!] not handled case\");\n    }\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 546,
                    "astHeight": 19
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.EnhancedForStatement,body]",
                    "nodePosition": {
                        "charLength": 5622,
                        "startLineNumber": 122,
                        "startColumnNumber": 71,
                        "endLineNumber": 213,
                        "endColumnNumber": 13
                    },
                    "nodeContext": "{\n  if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n    String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n    if (isSupportedHttpRequest(nativeQueryString)) {\n      String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n      if (!\"select\".equals(requestHandlerString)) {\n        if (requestHandlerString.charAt(0) != '/') {\n          requestHandlerString=\"/\" + requestHandlerString;\n        }\n        solrQuery.setRequestHandler(requestHandlerString);\n      }\n      String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n      for (      String param : parameterString.split(\"&\")) {\n        String[] kv=param.split(\"=\");\n        if (kv.length != 2) {\n          throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n        }\n else {\n          if (\"stream.body\".equals(kv[0])) {\n            kv[0]=\"q\";\n            String mltFlString=\"mlt.fl=\";\n            int mltFlIndex=parameterString.indexOf(mltFlString);\n            if (mltFlIndex > -1) {\n              int beginIndex=mltFlIndex + mltFlString.length();\n              int endIndex=parameterString.indexOf('&',beginIndex);\n              String fields;\n              if (endIndex > beginIndex) {\n                fields=parameterString.substring(beginIndex,endIndex);\n              }\n else {\n                fields=parameterString.substring(beginIndex);\n              }\n              kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n            }\n          }\n          solrQuery.setParam(kv[0],kv[1]);\n        }\n      }\n      return solrQuery;\n    }\n else {\n      queryBuilder.append(nativeQueryString);\n    }\n  }\n else {\n    if (pr.propertyName.contains(\"/\")) {\n      continue;\n    }\n    if (\"rep:excerpt\".equals(pr.propertyName)) {\n      continue;\n    }\n    String first=null;\n    if (pr.first != null) {\n      first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n    }\n    String last=null;\n    if (pr.last != null) {\n      last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n    }\n    String prField=configuration.getFieldForPropertyRestriction(pr);\n    CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n    if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n      queryBuilder.append(configuration.getPathField());\n      queryBuilder.append(':');\n      queryBuilder.append(first);\n    }\n else {\n      if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(first);\n      }\n else       if (pr.first == null && pr.last == null) {\n        if (!queryBuilder.toString().contains(fieldName + \":\")) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append('*');\n        }\n      }\n else       if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n      }\n else       if (pr.isLike) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n      }\n else {\n        throw new RuntimeException(\"[unexpected!] not handled case\");\n      }\n    }\n  }\n  queryBuilder.append(\" \");\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 552,
                    "astHeight": 20
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5681,
                        "startLineNumber": 122,
                        "startColumnNumber": 12,
                        "endLineNumber": 213,
                        "endColumnNumber": 13
                    },
                    "nodeContext": "for (Filter.PropertyRestriction pr : propertyRestrictions) {\n  if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n    String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n    if (isSupportedHttpRequest(nativeQueryString)) {\n      String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n      if (!\"select\".equals(requestHandlerString)) {\n        if (requestHandlerString.charAt(0) != '/') {\n          requestHandlerString=\"/\" + requestHandlerString;\n        }\n        solrQuery.setRequestHandler(requestHandlerString);\n      }\n      String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n      for (      String param : parameterString.split(\"&\")) {\n        String[] kv=param.split(\"=\");\n        if (kv.length != 2) {\n          throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n        }\n else {\n          if (\"stream.body\".equals(kv[0])) {\n            kv[0]=\"q\";\n            String mltFlString=\"mlt.fl=\";\n            int mltFlIndex=parameterString.indexOf(mltFlString);\n            if (mltFlIndex > -1) {\n              int beginIndex=mltFlIndex + mltFlString.length();\n              int endIndex=parameterString.indexOf('&',beginIndex);\n              String fields;\n              if (endIndex > beginIndex) {\n                fields=parameterString.substring(beginIndex,endIndex);\n              }\n else {\n                fields=parameterString.substring(beginIndex);\n              }\n              kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n            }\n          }\n          solrQuery.setParam(kv[0],kv[1]);\n        }\n      }\n      return solrQuery;\n    }\n else {\n      queryBuilder.append(nativeQueryString);\n    }\n  }\n else {\n    if (pr.propertyName.contains(\"/\")) {\n      continue;\n    }\n    if (\"rep:excerpt\".equals(pr.propertyName)) {\n      continue;\n    }\n    String first=null;\n    if (pr.first != null) {\n      first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n    }\n    String last=null;\n    if (pr.last != null) {\n      last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n    }\n    String prField=configuration.getFieldForPropertyRestriction(pr);\n    CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n    if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n      queryBuilder.append(configuration.getPathField());\n      queryBuilder.append(':');\n      queryBuilder.append(first);\n    }\n else {\n      if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(first);\n      }\n else       if (pr.first == null && pr.last == null) {\n        if (!queryBuilder.toString().contains(fieldName + \":\")) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append('*');\n        }\n      }\n else       if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n      }\n else       if (pr.isLike) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n      }\n else {\n        throw new RuntimeException(\"[unexpected!] not handled case\");\n      }\n    }\n  }\n  queryBuilder.append(\" \");\n}\n",
                    "nodeType": "EnhancedForStatement",
                    "astNodeNumber": 560,
                    "astHeight": 21
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,thenStatement]",
                    "nodePosition": {
                        "charLength": 5705,
                        "startLineNumber": 121,
                        "startColumnNumber": 77,
                        "endLineNumber": 214,
                        "endColumnNumber": 9
                    },
                    "nodeContext": "{\n  for (  Filter.PropertyRestriction pr : propertyRestrictions) {\n    if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n      String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n      if (isSupportedHttpRequest(nativeQueryString)) {\n        String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n        if (!\"select\".equals(requestHandlerString)) {\n          if (requestHandlerString.charAt(0) != '/') {\n            requestHandlerString=\"/\" + requestHandlerString;\n          }\n          solrQuery.setRequestHandler(requestHandlerString);\n        }\n        String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n        for (        String param : parameterString.split(\"&\")) {\n          String[] kv=param.split(\"=\");\n          if (kv.length != 2) {\n            throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n          }\n else {\n            if (\"stream.body\".equals(kv[0])) {\n              kv[0]=\"q\";\n              String mltFlString=\"mlt.fl=\";\n              int mltFlIndex=parameterString.indexOf(mltFlString);\n              if (mltFlIndex > -1) {\n                int beginIndex=mltFlIndex + mltFlString.length();\n                int endIndex=parameterString.indexOf('&',beginIndex);\n                String fields;\n                if (endIndex > beginIndex) {\n                  fields=parameterString.substring(beginIndex,endIndex);\n                }\n else {\n                  fields=parameterString.substring(beginIndex);\n                }\n                kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n              }\n            }\n            solrQuery.setParam(kv[0],kv[1]);\n          }\n        }\n        return solrQuery;\n      }\n else {\n        queryBuilder.append(nativeQueryString);\n      }\n    }\n else {\n      if (pr.propertyName.contains(\"/\")) {\n        continue;\n      }\n      if (\"rep:excerpt\".equals(pr.propertyName)) {\n        continue;\n      }\n      String first=null;\n      if (pr.first != null) {\n        first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n      }\n      String last=null;\n      if (pr.last != null) {\n        last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n      }\n      String prField=configuration.getFieldForPropertyRestriction(pr);\n      CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n      if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n        queryBuilder.append(configuration.getPathField());\n        queryBuilder.append(':');\n        queryBuilder.append(first);\n      }\n else {\n        if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(first);\n        }\n else         if (pr.first == null && pr.last == null) {\n          if (!queryBuilder.toString().contains(fieldName + \":\")) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append('*');\n          }\n        }\n else         if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n        }\n else         if (pr.isLike) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n        }\n else {\n          throw new RuntimeException(\"[unexpected!] not handled case\");\n        }\n      }\n    }\n    queryBuilder.append(\" \");\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 561,
                    "astHeight": 22
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5774,
                        "startLineNumber": 121,
                        "startColumnNumber": 8,
                        "endLineNumber": 214,
                        "endColumnNumber": 9
                    },
                    "nodeContext": "if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n  for (  Filter.PropertyRestriction pr : propertyRestrictions) {\n    if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n      String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n      if (isSupportedHttpRequest(nativeQueryString)) {\n        String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n        if (!\"select\".equals(requestHandlerString)) {\n          if (requestHandlerString.charAt(0) != '/') {\n            requestHandlerString=\"/\" + requestHandlerString;\n          }\n          solrQuery.setRequestHandler(requestHandlerString);\n        }\n        String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n        for (        String param : parameterString.split(\"&\")) {\n          String[] kv=param.split(\"=\");\n          if (kv.length != 2) {\n            throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n          }\n else {\n            if (\"stream.body\".equals(kv[0])) {\n              kv[0]=\"q\";\n              String mltFlString=\"mlt.fl=\";\n              int mltFlIndex=parameterString.indexOf(mltFlString);\n              if (mltFlIndex > -1) {\n                int beginIndex=mltFlIndex + mltFlString.length();\n                int endIndex=parameterString.indexOf('&',beginIndex);\n                String fields;\n                if (endIndex > beginIndex) {\n                  fields=parameterString.substring(beginIndex,endIndex);\n                }\n else {\n                  fields=parameterString.substring(beginIndex);\n                }\n                kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n              }\n            }\n            solrQuery.setParam(kv[0],kv[1]);\n          }\n        }\n        return solrQuery;\n      }\n else {\n        queryBuilder.append(nativeQueryString);\n      }\n    }\n else {\n      if (pr.propertyName.contains(\"/\")) {\n        continue;\n      }\n      if (\"rep:excerpt\".equals(pr.propertyName)) {\n        continue;\n      }\n      String first=null;\n      if (pr.first != null) {\n        first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n      }\n      String last=null;\n      if (pr.last != null) {\n        last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n      }\n      String prField=configuration.getFieldForPropertyRestriction(pr);\n      CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n      if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n        queryBuilder.append(configuration.getPathField());\n        queryBuilder.append(':');\n        queryBuilder.append(first);\n      }\n else {\n        if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(first);\n        }\n else         if (pr.first == null && pr.last == null) {\n          if (!queryBuilder.toString().contains(fieldName + \":\")) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append('*');\n          }\n        }\n else         if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n        }\n else         if (pr.isLike) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n        }\n else {\n          throw new RuntimeException(\"[unexpected!] not handled case\");\n        }\n      }\n    }\n    queryBuilder.append(\" \");\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 570,
                    "astHeight": 23
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.MethodDeclaration,body]",
                    "nodePosition": {
                        "charLength": 7985,
                        "startLineNumber": 103,
                        "startColumnNumber": 46,
                        "endLineNumber": 255,
                        "endColumnNumber": 5
                    },
                    "nodeContext": "{\n  SolrQuery solrQuery=new SolrQuery();\n  setDefaults(solrQuery);\n  StringBuilder queryBuilder=new StringBuilder();\n  if (filter.getFullTextConstraint() != null) {\n    queryBuilder.append(getFullTextQuery(filter.getFullTextConstraint()));\n    queryBuilder.append(' ');\n  }\n else   if (filter.getFulltextConditions() != null) {\n    Collection<String> fulltextConditions=filter.getFulltextConditions();\n    for (    String fulltextCondition : fulltextConditions) {\n      queryBuilder.append(fulltextCondition).append(\" \");\n    }\n  }\n  Collection<Filter.PropertyRestriction> propertyRestrictions=filter.getPropertyRestrictions();\n  if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n    for (    Filter.PropertyRestriction pr : propertyRestrictions) {\n      if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n        String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n        if (isSupportedHttpRequest(nativeQueryString)) {\n          String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n          if (!\"select\".equals(requestHandlerString)) {\n            if (requestHandlerString.charAt(0) != '/') {\n              requestHandlerString=\"/\" + requestHandlerString;\n            }\n            solrQuery.setRequestHandler(requestHandlerString);\n          }\n          String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n          for (          String param : parameterString.split(\"&\")) {\n            String[] kv=param.split(\"=\");\n            if (kv.length != 2) {\n              throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n            }\n else {\n              if (\"stream.body\".equals(kv[0])) {\n                kv[0]=\"q\";\n                String mltFlString=\"mlt.fl=\";\n                int mltFlIndex=parameterString.indexOf(mltFlString);\n                if (mltFlIndex > -1) {\n                  int beginIndex=mltFlIndex + mltFlString.length();\n                  int endIndex=parameterString.indexOf('&',beginIndex);\n                  String fields;\n                  if (endIndex > beginIndex) {\n                    fields=parameterString.substring(beginIndex,endIndex);\n                  }\n else {\n                    fields=parameterString.substring(beginIndex);\n                  }\n                  kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n                }\n              }\n              solrQuery.setParam(kv[0],kv[1]);\n            }\n          }\n          return solrQuery;\n        }\n else {\n          queryBuilder.append(nativeQueryString);\n        }\n      }\n else {\n        if (pr.propertyName.contains(\"/\")) {\n          continue;\n        }\n        if (\"rep:excerpt\".equals(pr.propertyName)) {\n          continue;\n        }\n        String first=null;\n        if (pr.first != null) {\n          first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n        }\n        String last=null;\n        if (pr.last != null) {\n          last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n        }\n        String prField=configuration.getFieldForPropertyRestriction(pr);\n        CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n        if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n          queryBuilder.append(configuration.getPathField());\n          queryBuilder.append(':');\n          queryBuilder.append(first);\n        }\n else {\n          if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(first);\n          }\n else           if (pr.first == null && pr.last == null) {\n            if (!queryBuilder.toString().contains(fieldName + \":\")) {\n              queryBuilder.append(fieldName).append(':');\n              queryBuilder.append('*');\n            }\n          }\n else           if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n          }\n else           if (pr.isLike) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n          }\n else {\n            throw new RuntimeException(\"[unexpected!] not handled case\");\n          }\n        }\n      }\n      queryBuilder.append(\" \");\n    }\n  }\n  String[] pts=filter.getPrimaryTypes().toArray(new String[filter.getPrimaryTypes().size()]);\n  for (int i=0; i < pts.length; i++) {\n    String pt=pts[i];\n    if (i == 0) {\n      queryBuilder.append(\"(\");\n    }\n    if (i > 0 && i < pts.length) {\n      queryBuilder.append(\"OR \");\n    }\n    queryBuilder.append(\"jcr\\\\:primaryType\").append(':').append(partialEscape(pt)).append(\" \");\n    if (i == pts.length - 1) {\n      queryBuilder.append(\")\");\n      queryBuilder.append(' ');\n    }\n  }\n  Filter.PathRestriction pathRestriction=filter.getPathRestriction();\n  if (pathRestriction != null) {\n    String path=purgePath(filter);\n    String fieldName=configuration.getFieldForPathRestriction(pathRestriction);\n    if (fieldName != null) {\n      queryBuilder.append(fieldName);\n      queryBuilder.append(':');\n      queryBuilder.append(path);\n    }\n  }\n  if (queryBuilder.length() == 0) {\n    queryBuilder.append(\"*:*\");\n  }\n  String escapedQuery=queryBuilder.toString();\n  solrQuery.setQuery(escapedQuery);\n  if (log.isDebugEnabled()) {\n    log.debug(\"JCR query {} has been converted to Solr query {}\",filter.getQueryStatement(),solrQuery.toString());\n  }\n  return solrQuery;\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 858,
                    "astHeight": 24
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.TypeDeclaration,bodyDeclarations]",
                    "nodePosition": {
                        "charLength": 8027,
                        "startLineNumber": 103,
                        "startColumnNumber": 4,
                        "endLineNumber": 255,
                        "endColumnNumber": 5
                    },
                    "nodeContext": "private SolrQuery getQuery(Filter filter){\n  SolrQuery solrQuery=new SolrQuery();\n  setDefaults(solrQuery);\n  StringBuilder queryBuilder=new StringBuilder();\n  if (filter.getFullTextConstraint() != null) {\n    queryBuilder.append(getFullTextQuery(filter.getFullTextConstraint()));\n    queryBuilder.append(' ');\n  }\n else   if (filter.getFulltextConditions() != null) {\n    Collection<String> fulltextConditions=filter.getFulltextConditions();\n    for (    String fulltextCondition : fulltextConditions) {\n      queryBuilder.append(fulltextCondition).append(\" \");\n    }\n  }\n  Collection<Filter.PropertyRestriction> propertyRestrictions=filter.getPropertyRestrictions();\n  if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n    for (    Filter.PropertyRestriction pr : propertyRestrictions) {\n      if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n        String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n        if (isSupportedHttpRequest(nativeQueryString)) {\n          String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n          if (!\"select\".equals(requestHandlerString)) {\n            if (requestHandlerString.charAt(0) != '/') {\n              requestHandlerString=\"/\" + requestHandlerString;\n            }\n            solrQuery.setRequestHandler(requestHandlerString);\n          }\n          String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n          for (          String param : parameterString.split(\"&\")) {\n            String[] kv=param.split(\"=\");\n            if (kv.length != 2) {\n              throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n            }\n else {\n              if (\"stream.body\".equals(kv[0])) {\n                kv[0]=\"q\";\n                String mltFlString=\"mlt.fl=\";\n                int mltFlIndex=parameterString.indexOf(mltFlString);\n                if (mltFlIndex > -1) {\n                  int beginIndex=mltFlIndex + mltFlString.length();\n                  int endIndex=parameterString.indexOf('&',beginIndex);\n                  String fields;\n                  if (endIndex > beginIndex) {\n                    fields=parameterString.substring(beginIndex,endIndex);\n                  }\n else {\n                    fields=parameterString.substring(beginIndex);\n                  }\n                  kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n                }\n              }\n              solrQuery.setParam(kv[0],kv[1]);\n            }\n          }\n          return solrQuery;\n        }\n else {\n          queryBuilder.append(nativeQueryString);\n        }\n      }\n else {\n        if (pr.propertyName.contains(\"/\")) {\n          continue;\n        }\n        if (\"rep:excerpt\".equals(pr.propertyName)) {\n          continue;\n        }\n        String first=null;\n        if (pr.first != null) {\n          first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n        }\n        String last=null;\n        if (pr.last != null) {\n          last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n        }\n        String prField=configuration.getFieldForPropertyRestriction(pr);\n        CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n        if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n          queryBuilder.append(configuration.getPathField());\n          queryBuilder.append(':');\n          queryBuilder.append(first);\n        }\n else {\n          if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(first);\n          }\n else           if (pr.first == null && pr.last == null) {\n            if (!queryBuilder.toString().contains(fieldName + \":\")) {\n              queryBuilder.append(fieldName).append(':');\n              queryBuilder.append('*');\n            }\n          }\n else           if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n          }\n else           if (pr.isLike) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n          }\n else {\n            throw new RuntimeException(\"[unexpected!] not handled case\");\n          }\n        }\n      }\n      queryBuilder.append(\" \");\n    }\n  }\n  String[] pts=filter.getPrimaryTypes().toArray(new String[filter.getPrimaryTypes().size()]);\n  for (int i=0; i < pts.length; i++) {\n    String pt=pts[i];\n    if (i == 0) {\n      queryBuilder.append(\"(\");\n    }\n    if (i > 0 && i < pts.length) {\n      queryBuilder.append(\"OR \");\n    }\n    queryBuilder.append(\"jcr\\\\:primaryType\").append(':').append(partialEscape(pt)).append(\" \");\n    if (i == pts.length - 1) {\n      queryBuilder.append(\")\");\n      queryBuilder.append(' ');\n    }\n  }\n  Filter.PathRestriction pathRestriction=filter.getPathRestriction();\n  if (pathRestriction != null) {\n    String path=purgePath(filter);\n    String fieldName=configuration.getFieldForPathRestriction(pathRestriction);\n    if (fieldName != null) {\n      queryBuilder.append(fieldName);\n      queryBuilder.append(':');\n      queryBuilder.append(path);\n    }\n  }\n  if (queryBuilder.length() == 0) {\n    queryBuilder.append(\"*:*\");\n  }\n  String escapedQuery=queryBuilder.toString();\n  solrQuery.setQuery(escapedQuery);\n  if (log.isDebugEnabled()) {\n    log.debug(\"JCR query {} has been converted to Solr query {}\",filter.getQueryStatement(),solrQuery.toString());\n  }\n  return solrQuery;\n}\n",
                    "nodeType": "MethodDeclaration",
                    "astNodeNumber": 867,
                    "astHeight": 25
                }
            ],
            "currentLineData": {
                "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,expression]",
                "nodePosition": {
                    "charLength": 88,
                    "startLineNumber": 124,
                    "startColumnNumber": 20,
                    "endLineNumber": 124,
                    "endColumnNumber": 108
                },
                "nodeContext": "NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)",
                "nodeType": "InfixExpression",
                "astNodeNumber": 13,
                "astHeight": 4
            },
            "tokenLength": 1,
            "type": "org.apache.jackrabbit.oak.spi.query.Filter.PropertyRestriction"
        },
        {
            "nodeContext": "pr",
            "nodeType": "SimpleName",
            "nodePosition": {
                "charLength": 2,
                "startLineNumber": 124,
                "startColumnNumber": 92,
                "endLineNumber": 124,
                "endColumnNumber": 94
            },
            "astNodeNumber": 1,
            "astHeight": 1,
            "parentDataList": [
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.MethodInvocation,arguments]",
                    "nodePosition": {
                        "charLength": 15,
                        "startLineNumber": 124,
                        "startColumnNumber": 92,
                        "endLineNumber": 124,
                        "endColumnNumber": 107
                    },
                    "nodeContext": "pr.propertyName",
                    "nodeType": "QualifiedName",
                    "astNodeNumber": 3,
                    "astHeight": 2
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.InfixExpression,rightOperand]",
                    "nodePosition": {
                        "charLength": 43,
                        "startLineNumber": 124,
                        "startColumnNumber": 65,
                        "endLineNumber": 124,
                        "endColumnNumber": 108
                    },
                    "nodeContext": "NATIVE_LUCENE_QUERY.equals(pr.propertyName)",
                    "nodeType": "MethodInvocation",
                    "astNodeNumber": 6,
                    "astHeight": 3
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,expression]",
                    "nodePosition": {
                        "charLength": 88,
                        "startLineNumber": 124,
                        "startColumnNumber": 20,
                        "endLineNumber": 124,
                        "endColumnNumber": 108
                    },
                    "nodeContext": "NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)",
                    "nodeType": "InfixExpression",
                    "astNodeNumber": 13,
                    "astHeight": 4
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5508,
                        "startLineNumber": 124,
                        "startColumnNumber": 16,
                        "endLineNumber": 211,
                        "endColumnNumber": 17
                    },
                    "nodeContext": "if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n  String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n  if (isSupportedHttpRequest(nativeQueryString)) {\n    String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n    if (!\"select\".equals(requestHandlerString)) {\n      if (requestHandlerString.charAt(0) != '/') {\n        requestHandlerString=\"/\" + requestHandlerString;\n      }\n      solrQuery.setRequestHandler(requestHandlerString);\n    }\n    String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n    for (    String param : parameterString.split(\"&\")) {\n      String[] kv=param.split(\"=\");\n      if (kv.length != 2) {\n        throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n      }\n else {\n        if (\"stream.body\".equals(kv[0])) {\n          kv[0]=\"q\";\n          String mltFlString=\"mlt.fl=\";\n          int mltFlIndex=parameterString.indexOf(mltFlString);\n          if (mltFlIndex > -1) {\n            int beginIndex=mltFlIndex + mltFlString.length();\n            int endIndex=parameterString.indexOf('&',beginIndex);\n            String fields;\n            if (endIndex > beginIndex) {\n              fields=parameterString.substring(beginIndex,endIndex);\n            }\n else {\n              fields=parameterString.substring(beginIndex);\n            }\n            kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n          }\n        }\n        solrQuery.setParam(kv[0],kv[1]);\n      }\n    }\n    return solrQuery;\n  }\n else {\n    queryBuilder.append(nativeQueryString);\n  }\n}\n else {\n  if (pr.propertyName.contains(\"/\")) {\n    continue;\n  }\n  if (\"rep:excerpt\".equals(pr.propertyName)) {\n    continue;\n  }\n  String first=null;\n  if (pr.first != null) {\n    first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n  }\n  String last=null;\n  if (pr.last != null) {\n    last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n  }\n  String prField=configuration.getFieldForPropertyRestriction(pr);\n  CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n  if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n    queryBuilder.append(configuration.getPathField());\n    queryBuilder.append(':');\n    queryBuilder.append(first);\n  }\n else {\n    if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(first);\n    }\n else     if (pr.first == null && pr.last == null) {\n      if (!queryBuilder.toString().contains(fieldName + \":\")) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append('*');\n      }\n    }\n else     if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n    }\n else     if (pr.isLike) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n    }\n else {\n      throw new RuntimeException(\"[unexpected!] not handled case\");\n    }\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 546,
                    "astHeight": 19
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.EnhancedForStatement,body]",
                    "nodePosition": {
                        "charLength": 5622,
                        "startLineNumber": 122,
                        "startColumnNumber": 71,
                        "endLineNumber": 213,
                        "endColumnNumber": 13
                    },
                    "nodeContext": "{\n  if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n    String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n    if (isSupportedHttpRequest(nativeQueryString)) {\n      String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n      if (!\"select\".equals(requestHandlerString)) {\n        if (requestHandlerString.charAt(0) != '/') {\n          requestHandlerString=\"/\" + requestHandlerString;\n        }\n        solrQuery.setRequestHandler(requestHandlerString);\n      }\n      String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n      for (      String param : parameterString.split(\"&\")) {\n        String[] kv=param.split(\"=\");\n        if (kv.length != 2) {\n          throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n        }\n else {\n          if (\"stream.body\".equals(kv[0])) {\n            kv[0]=\"q\";\n            String mltFlString=\"mlt.fl=\";\n            int mltFlIndex=parameterString.indexOf(mltFlString);\n            if (mltFlIndex > -1) {\n              int beginIndex=mltFlIndex + mltFlString.length();\n              int endIndex=parameterString.indexOf('&',beginIndex);\n              String fields;\n              if (endIndex > beginIndex) {\n                fields=parameterString.substring(beginIndex,endIndex);\n              }\n else {\n                fields=parameterString.substring(beginIndex);\n              }\n              kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n            }\n          }\n          solrQuery.setParam(kv[0],kv[1]);\n        }\n      }\n      return solrQuery;\n    }\n else {\n      queryBuilder.append(nativeQueryString);\n    }\n  }\n else {\n    if (pr.propertyName.contains(\"/\")) {\n      continue;\n    }\n    if (\"rep:excerpt\".equals(pr.propertyName)) {\n      continue;\n    }\n    String first=null;\n    if (pr.first != null) {\n      first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n    }\n    String last=null;\n    if (pr.last != null) {\n      last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n    }\n    String prField=configuration.getFieldForPropertyRestriction(pr);\n    CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n    if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n      queryBuilder.append(configuration.getPathField());\n      queryBuilder.append(':');\n      queryBuilder.append(first);\n    }\n else {\n      if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(first);\n      }\n else       if (pr.first == null && pr.last == null) {\n        if (!queryBuilder.toString().contains(fieldName + \":\")) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append('*');\n        }\n      }\n else       if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n      }\n else       if (pr.isLike) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n      }\n else {\n        throw new RuntimeException(\"[unexpected!] not handled case\");\n      }\n    }\n  }\n  queryBuilder.append(\" \");\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 552,
                    "astHeight": 20
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5681,
                        "startLineNumber": 122,
                        "startColumnNumber": 12,
                        "endLineNumber": 213,
                        "endColumnNumber": 13
                    },
                    "nodeContext": "for (Filter.PropertyRestriction pr : propertyRestrictions) {\n  if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n    String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n    if (isSupportedHttpRequest(nativeQueryString)) {\n      String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n      if (!\"select\".equals(requestHandlerString)) {\n        if (requestHandlerString.charAt(0) != '/') {\n          requestHandlerString=\"/\" + requestHandlerString;\n        }\n        solrQuery.setRequestHandler(requestHandlerString);\n      }\n      String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n      for (      String param : parameterString.split(\"&\")) {\n        String[] kv=param.split(\"=\");\n        if (kv.length != 2) {\n          throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n        }\n else {\n          if (\"stream.body\".equals(kv[0])) {\n            kv[0]=\"q\";\n            String mltFlString=\"mlt.fl=\";\n            int mltFlIndex=parameterString.indexOf(mltFlString);\n            if (mltFlIndex > -1) {\n              int beginIndex=mltFlIndex + mltFlString.length();\n              int endIndex=parameterString.indexOf('&',beginIndex);\n              String fields;\n              if (endIndex > beginIndex) {\n                fields=parameterString.substring(beginIndex,endIndex);\n              }\n else {\n                fields=parameterString.substring(beginIndex);\n              }\n              kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n            }\n          }\n          solrQuery.setParam(kv[0],kv[1]);\n        }\n      }\n      return solrQuery;\n    }\n else {\n      queryBuilder.append(nativeQueryString);\n    }\n  }\n else {\n    if (pr.propertyName.contains(\"/\")) {\n      continue;\n    }\n    if (\"rep:excerpt\".equals(pr.propertyName)) {\n      continue;\n    }\n    String first=null;\n    if (pr.first != null) {\n      first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n    }\n    String last=null;\n    if (pr.last != null) {\n      last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n    }\n    String prField=configuration.getFieldForPropertyRestriction(pr);\n    CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n    if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n      queryBuilder.append(configuration.getPathField());\n      queryBuilder.append(':');\n      queryBuilder.append(first);\n    }\n else {\n      if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(first);\n      }\n else       if (pr.first == null && pr.last == null) {\n        if (!queryBuilder.toString().contains(fieldName + \":\")) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append('*');\n        }\n      }\n else       if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n      }\n else       if (pr.isLike) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n      }\n else {\n        throw new RuntimeException(\"[unexpected!] not handled case\");\n      }\n    }\n  }\n  queryBuilder.append(\" \");\n}\n",
                    "nodeType": "EnhancedForStatement",
                    "astNodeNumber": 560,
                    "astHeight": 21
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,thenStatement]",
                    "nodePosition": {
                        "charLength": 5705,
                        "startLineNumber": 121,
                        "startColumnNumber": 77,
                        "endLineNumber": 214,
                        "endColumnNumber": 9
                    },
                    "nodeContext": "{\n  for (  Filter.PropertyRestriction pr : propertyRestrictions) {\n    if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n      String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n      if (isSupportedHttpRequest(nativeQueryString)) {\n        String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n        if (!\"select\".equals(requestHandlerString)) {\n          if (requestHandlerString.charAt(0) != '/') {\n            requestHandlerString=\"/\" + requestHandlerString;\n          }\n          solrQuery.setRequestHandler(requestHandlerString);\n        }\n        String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n        for (        String param : parameterString.split(\"&\")) {\n          String[] kv=param.split(\"=\");\n          if (kv.length != 2) {\n            throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n          }\n else {\n            if (\"stream.body\".equals(kv[0])) {\n              kv[0]=\"q\";\n              String mltFlString=\"mlt.fl=\";\n              int mltFlIndex=parameterString.indexOf(mltFlString);\n              if (mltFlIndex > -1) {\n                int beginIndex=mltFlIndex + mltFlString.length();\n                int endIndex=parameterString.indexOf('&',beginIndex);\n                String fields;\n                if (endIndex > beginIndex) {\n                  fields=parameterString.substring(beginIndex,endIndex);\n                }\n else {\n                  fields=parameterString.substring(beginIndex);\n                }\n                kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n              }\n            }\n            solrQuery.setParam(kv[0],kv[1]);\n          }\n        }\n        return solrQuery;\n      }\n else {\n        queryBuilder.append(nativeQueryString);\n      }\n    }\n else {\n      if (pr.propertyName.contains(\"/\")) {\n        continue;\n      }\n      if (\"rep:excerpt\".equals(pr.propertyName)) {\n        continue;\n      }\n      String first=null;\n      if (pr.first != null) {\n        first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n      }\n      String last=null;\n      if (pr.last != null) {\n        last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n      }\n      String prField=configuration.getFieldForPropertyRestriction(pr);\n      CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n      if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n        queryBuilder.append(configuration.getPathField());\n        queryBuilder.append(':');\n        queryBuilder.append(first);\n      }\n else {\n        if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(first);\n        }\n else         if (pr.first == null && pr.last == null) {\n          if (!queryBuilder.toString().contains(fieldName + \":\")) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append('*');\n          }\n        }\n else         if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n        }\n else         if (pr.isLike) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n        }\n else {\n          throw new RuntimeException(\"[unexpected!] not handled case\");\n        }\n      }\n    }\n    queryBuilder.append(\" \");\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 561,
                    "astHeight": 22
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5774,
                        "startLineNumber": 121,
                        "startColumnNumber": 8,
                        "endLineNumber": 214,
                        "endColumnNumber": 9
                    },
                    "nodeContext": "if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n  for (  Filter.PropertyRestriction pr : propertyRestrictions) {\n    if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n      String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n      if (isSupportedHttpRequest(nativeQueryString)) {\n        String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n        if (!\"select\".equals(requestHandlerString)) {\n          if (requestHandlerString.charAt(0) != '/') {\n            requestHandlerString=\"/\" + requestHandlerString;\n          }\n          solrQuery.setRequestHandler(requestHandlerString);\n        }\n        String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n        for (        String param : parameterString.split(\"&\")) {\n          String[] kv=param.split(\"=\");\n          if (kv.length != 2) {\n            throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n          }\n else {\n            if (\"stream.body\".equals(kv[0])) {\n              kv[0]=\"q\";\n              String mltFlString=\"mlt.fl=\";\n              int mltFlIndex=parameterString.indexOf(mltFlString);\n              if (mltFlIndex > -1) {\n                int beginIndex=mltFlIndex + mltFlString.length();\n                int endIndex=parameterString.indexOf('&',beginIndex);\n                String fields;\n                if (endIndex > beginIndex) {\n                  fields=parameterString.substring(beginIndex,endIndex);\n                }\n else {\n                  fields=parameterString.substring(beginIndex);\n                }\n                kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n              }\n            }\n            solrQuery.setParam(kv[0],kv[1]);\n          }\n        }\n        return solrQuery;\n      }\n else {\n        queryBuilder.append(nativeQueryString);\n      }\n    }\n else {\n      if (pr.propertyName.contains(\"/\")) {\n        continue;\n      }\n      if (\"rep:excerpt\".equals(pr.propertyName)) {\n        continue;\n      }\n      String first=null;\n      if (pr.first != null) {\n        first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n      }\n      String last=null;\n      if (pr.last != null) {\n        last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n      }\n      String prField=configuration.getFieldForPropertyRestriction(pr);\n      CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n      if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n        queryBuilder.append(configuration.getPathField());\n        queryBuilder.append(':');\n        queryBuilder.append(first);\n      }\n else {\n        if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(first);\n        }\n else         if (pr.first == null && pr.last == null) {\n          if (!queryBuilder.toString().contains(fieldName + \":\")) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append('*');\n          }\n        }\n else         if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n        }\n else         if (pr.isLike) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n        }\n else {\n          throw new RuntimeException(\"[unexpected!] not handled case\");\n        }\n      }\n    }\n    queryBuilder.append(\" \");\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 570,
                    "astHeight": 23
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.MethodDeclaration,body]",
                    "nodePosition": {
                        "charLength": 7985,
                        "startLineNumber": 103,
                        "startColumnNumber": 46,
                        "endLineNumber": 255,
                        "endColumnNumber": 5
                    },
                    "nodeContext": "{\n  SolrQuery solrQuery=new SolrQuery();\n  setDefaults(solrQuery);\n  StringBuilder queryBuilder=new StringBuilder();\n  if (filter.getFullTextConstraint() != null) {\n    queryBuilder.append(getFullTextQuery(filter.getFullTextConstraint()));\n    queryBuilder.append(' ');\n  }\n else   if (filter.getFulltextConditions() != null) {\n    Collection<String> fulltextConditions=filter.getFulltextConditions();\n    for (    String fulltextCondition : fulltextConditions) {\n      queryBuilder.append(fulltextCondition).append(\" \");\n    }\n  }\n  Collection<Filter.PropertyRestriction> propertyRestrictions=filter.getPropertyRestrictions();\n  if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n    for (    Filter.PropertyRestriction pr : propertyRestrictions) {\n      if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n        String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n        if (isSupportedHttpRequest(nativeQueryString)) {\n          String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n          if (!\"select\".equals(requestHandlerString)) {\n            if (requestHandlerString.charAt(0) != '/') {\n              requestHandlerString=\"/\" + requestHandlerString;\n            }\n            solrQuery.setRequestHandler(requestHandlerString);\n          }\n          String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n          for (          String param : parameterString.split(\"&\")) {\n            String[] kv=param.split(\"=\");\n            if (kv.length != 2) {\n              throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n            }\n else {\n              if (\"stream.body\".equals(kv[0])) {\n                kv[0]=\"q\";\n                String mltFlString=\"mlt.fl=\";\n                int mltFlIndex=parameterString.indexOf(mltFlString);\n                if (mltFlIndex > -1) {\n                  int beginIndex=mltFlIndex + mltFlString.length();\n                  int endIndex=parameterString.indexOf('&',beginIndex);\n                  String fields;\n                  if (endIndex > beginIndex) {\n                    fields=parameterString.substring(beginIndex,endIndex);\n                  }\n else {\n                    fields=parameterString.substring(beginIndex);\n                  }\n                  kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n                }\n              }\n              solrQuery.setParam(kv[0],kv[1]);\n            }\n          }\n          return solrQuery;\n        }\n else {\n          queryBuilder.append(nativeQueryString);\n        }\n      }\n else {\n        if (pr.propertyName.contains(\"/\")) {\n          continue;\n        }\n        if (\"rep:excerpt\".equals(pr.propertyName)) {\n          continue;\n        }\n        String first=null;\n        if (pr.first != null) {\n          first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n        }\n        String last=null;\n        if (pr.last != null) {\n          last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n        }\n        String prField=configuration.getFieldForPropertyRestriction(pr);\n        CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n        if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n          queryBuilder.append(configuration.getPathField());\n          queryBuilder.append(':');\n          queryBuilder.append(first);\n        }\n else {\n          if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(first);\n          }\n else           if (pr.first == null && pr.last == null) {\n            if (!queryBuilder.toString().contains(fieldName + \":\")) {\n              queryBuilder.append(fieldName).append(':');\n              queryBuilder.append('*');\n            }\n          }\n else           if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n          }\n else           if (pr.isLike) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n          }\n else {\n            throw new RuntimeException(\"[unexpected!] not handled case\");\n          }\n        }\n      }\n      queryBuilder.append(\" \");\n    }\n  }\n  String[] pts=filter.getPrimaryTypes().toArray(new String[filter.getPrimaryTypes().size()]);\n  for (int i=0; i < pts.length; i++) {\n    String pt=pts[i];\n    if (i == 0) {\n      queryBuilder.append(\"(\");\n    }\n    if (i > 0 && i < pts.length) {\n      queryBuilder.append(\"OR \");\n    }\n    queryBuilder.append(\"jcr\\\\:primaryType\").append(':').append(partialEscape(pt)).append(\" \");\n    if (i == pts.length - 1) {\n      queryBuilder.append(\")\");\n      queryBuilder.append(' ');\n    }\n  }\n  Filter.PathRestriction pathRestriction=filter.getPathRestriction();\n  if (pathRestriction != null) {\n    String path=purgePath(filter);\n    String fieldName=configuration.getFieldForPathRestriction(pathRestriction);\n    if (fieldName != null) {\n      queryBuilder.append(fieldName);\n      queryBuilder.append(':');\n      queryBuilder.append(path);\n    }\n  }\n  if (queryBuilder.length() == 0) {\n    queryBuilder.append(\"*:*\");\n  }\n  String escapedQuery=queryBuilder.toString();\n  solrQuery.setQuery(escapedQuery);\n  if (log.isDebugEnabled()) {\n    log.debug(\"JCR query {} has been converted to Solr query {}\",filter.getQueryStatement(),solrQuery.toString());\n  }\n  return solrQuery;\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 858,
                    "astHeight": 24
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.TypeDeclaration,bodyDeclarations]",
                    "nodePosition": {
                        "charLength": 8027,
                        "startLineNumber": 103,
                        "startColumnNumber": 4,
                        "endLineNumber": 255,
                        "endColumnNumber": 5
                    },
                    "nodeContext": "private SolrQuery getQuery(Filter filter){\n  SolrQuery solrQuery=new SolrQuery();\n  setDefaults(solrQuery);\n  StringBuilder queryBuilder=new StringBuilder();\n  if (filter.getFullTextConstraint() != null) {\n    queryBuilder.append(getFullTextQuery(filter.getFullTextConstraint()));\n    queryBuilder.append(' ');\n  }\n else   if (filter.getFulltextConditions() != null) {\n    Collection<String> fulltextConditions=filter.getFulltextConditions();\n    for (    String fulltextCondition : fulltextConditions) {\n      queryBuilder.append(fulltextCondition).append(\" \");\n    }\n  }\n  Collection<Filter.PropertyRestriction> propertyRestrictions=filter.getPropertyRestrictions();\n  if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n    for (    Filter.PropertyRestriction pr : propertyRestrictions) {\n      if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n        String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n        if (isSupportedHttpRequest(nativeQueryString)) {\n          String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n          if (!\"select\".equals(requestHandlerString)) {\n            if (requestHandlerString.charAt(0) != '/') {\n              requestHandlerString=\"/\" + requestHandlerString;\n            }\n            solrQuery.setRequestHandler(requestHandlerString);\n          }\n          String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n          for (          String param : parameterString.split(\"&\")) {\n            String[] kv=param.split(\"=\");\n            if (kv.length != 2) {\n              throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n            }\n else {\n              if (\"stream.body\".equals(kv[0])) {\n                kv[0]=\"q\";\n                String mltFlString=\"mlt.fl=\";\n                int mltFlIndex=parameterString.indexOf(mltFlString);\n                if (mltFlIndex > -1) {\n                  int beginIndex=mltFlIndex + mltFlString.length();\n                  int endIndex=parameterString.indexOf('&',beginIndex);\n                  String fields;\n                  if (endIndex > beginIndex) {\n                    fields=parameterString.substring(beginIndex,endIndex);\n                  }\n else {\n                    fields=parameterString.substring(beginIndex);\n                  }\n                  kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n                }\n              }\n              solrQuery.setParam(kv[0],kv[1]);\n            }\n          }\n          return solrQuery;\n        }\n else {\n          queryBuilder.append(nativeQueryString);\n        }\n      }\n else {\n        if (pr.propertyName.contains(\"/\")) {\n          continue;\n        }\n        if (\"rep:excerpt\".equals(pr.propertyName)) {\n          continue;\n        }\n        String first=null;\n        if (pr.first != null) {\n          first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n        }\n        String last=null;\n        if (pr.last != null) {\n          last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n        }\n        String prField=configuration.getFieldForPropertyRestriction(pr);\n        CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n        if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n          queryBuilder.append(configuration.getPathField());\n          queryBuilder.append(':');\n          queryBuilder.append(first);\n        }\n else {\n          if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(first);\n          }\n else           if (pr.first == null && pr.last == null) {\n            if (!queryBuilder.toString().contains(fieldName + \":\")) {\n              queryBuilder.append(fieldName).append(':');\n              queryBuilder.append('*');\n            }\n          }\n else           if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n          }\n else           if (pr.isLike) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n          }\n else {\n            throw new RuntimeException(\"[unexpected!] not handled case\");\n          }\n        }\n      }\n      queryBuilder.append(\" \");\n    }\n  }\n  String[] pts=filter.getPrimaryTypes().toArray(new String[filter.getPrimaryTypes().size()]);\n  for (int i=0; i < pts.length; i++) {\n    String pt=pts[i];\n    if (i == 0) {\n      queryBuilder.append(\"(\");\n    }\n    if (i > 0 && i < pts.length) {\n      queryBuilder.append(\"OR \");\n    }\n    queryBuilder.append(\"jcr\\\\:primaryType\").append(':').append(partialEscape(pt)).append(\" \");\n    if (i == pts.length - 1) {\n      queryBuilder.append(\")\");\n      queryBuilder.append(' ');\n    }\n  }\n  Filter.PathRestriction pathRestriction=filter.getPathRestriction();\n  if (pathRestriction != null) {\n    String path=purgePath(filter);\n    String fieldName=configuration.getFieldForPathRestriction(pathRestriction);\n    if (fieldName != null) {\n      queryBuilder.append(fieldName);\n      queryBuilder.append(':');\n      queryBuilder.append(path);\n    }\n  }\n  if (queryBuilder.length() == 0) {\n    queryBuilder.append(\"*:*\");\n  }\n  String escapedQuery=queryBuilder.toString();\n  solrQuery.setQuery(escapedQuery);\n  if (log.isDebugEnabled()) {\n    log.debug(\"JCR query {} has been converted to Solr query {}\",filter.getQueryStatement(),solrQuery.toString());\n  }\n  return solrQuery;\n}\n",
                    "nodeType": "MethodDeclaration",
                    "astNodeNumber": 867,
                    "astHeight": 25
                }
            ],
            "currentLineData": {
                "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,expression]",
                "nodePosition": {
                    "charLength": 88,
                    "startLineNumber": 124,
                    "startColumnNumber": 20,
                    "endLineNumber": 124,
                    "endColumnNumber": 108
                },
                "nodeContext": "NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)",
                "nodeType": "InfixExpression",
                "astNodeNumber": 13,
                "astHeight": 4
            },
            "tokenLength": 1,
            "type": "org.apache.jackrabbit.oak.spi.query.Filter.PropertyRestriction"
        },
        {
            "nodeContext": "pr",
            "nodeType": "SimpleName",
            "nodePosition": {
                "charLength": 2,
                "startLineNumber": 125,
                "startColumnNumber": 62,
                "endLineNumber": 125,
                "endColumnNumber": 64
            },
            "astNodeNumber": 1,
            "astHeight": 1,
            "parentDataList": [
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.MethodInvocation,expression]",
                    "nodePosition": {
                        "charLength": 8,
                        "startLineNumber": 125,
                        "startColumnNumber": 62,
                        "endLineNumber": 125,
                        "endColumnNumber": 70
                    },
                    "nodeContext": "pr.first",
                    "nodeType": "QualifiedName",
                    "astNodeNumber": 3,
                    "astHeight": 2
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.MethodInvocation,arguments]",
                    "nodePosition": {
                        "charLength": 37,
                        "startLineNumber": 125,
                        "startColumnNumber": 62,
                        "endLineNumber": 125,
                        "endColumnNumber": 99
                    },
                    "nodeContext": "pr.first.getValue(pr.first.getType())",
                    "nodeType": "MethodInvocation",
                    "astNodeNumber": 10,
                    "astHeight": 4
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.VariableDeclarationFragment,initializer]",
                    "nodePosition": {
                        "charLength": 53,
                        "startLineNumber": 125,
                        "startColumnNumber": 47,
                        "endLineNumber": 125,
                        "endColumnNumber": 100
                    },
                    "nodeContext": "String.valueOf(pr.first.getValue(pr.first.getType()))",
                    "nodeType": "MethodInvocation",
                    "astNodeNumber": 13,
                    "astHeight": 5
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.VariableDeclarationStatement,fragments]",
                    "nodePosition": {
                        "charLength": 73,
                        "startLineNumber": 125,
                        "startColumnNumber": 27,
                        "endLineNumber": 125,
                        "endColumnNumber": 100
                    },
                    "nodeContext": "nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()))",
                    "nodeType": "VariableDeclarationFragment",
                    "astNodeNumber": 15,
                    "astHeight": 6
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 81,
                        "startLineNumber": 125,
                        "startColumnNumber": 20,
                        "endLineNumber": 125,
                        "endColumnNumber": 101
                    },
                    "nodeContext": "String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n",
                    "nodeType": "VariableDeclarationStatement",
                    "astNodeNumber": 18,
                    "astHeight": 7
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,thenStatement]",
                    "nodePosition": {
                        "charLength": 2610,
                        "startLineNumber": 124,
                        "startColumnNumber": 110,
                        "endLineNumber": 164,
                        "endColumnNumber": 17
                    },
                    "nodeContext": "{\n  String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n  if (isSupportedHttpRequest(nativeQueryString)) {\n    String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n    if (!\"select\".equals(requestHandlerString)) {\n      if (requestHandlerString.charAt(0) != '/') {\n        requestHandlerString=\"/\" + requestHandlerString;\n      }\n      solrQuery.setRequestHandler(requestHandlerString);\n    }\n    String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n    for (    String param : parameterString.split(\"&\")) {\n      String[] kv=param.split(\"=\");\n      if (kv.length != 2) {\n        throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n      }\n else {\n        if (\"stream.body\".equals(kv[0])) {\n          kv[0]=\"q\";\n          String mltFlString=\"mlt.fl=\";\n          int mltFlIndex=parameterString.indexOf(mltFlString);\n          if (mltFlIndex > -1) {\n            int beginIndex=mltFlIndex + mltFlString.length();\n            int endIndex=parameterString.indexOf('&',beginIndex);\n            String fields;\n            if (endIndex > beginIndex) {\n              fields=parameterString.substring(beginIndex,endIndex);\n            }\n else {\n              fields=parameterString.substring(beginIndex);\n            }\n            kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n          }\n        }\n        solrQuery.setParam(kv[0],kv[1]);\n      }\n    }\n    return solrQuery;\n  }\n else {\n    queryBuilder.append(nativeQueryString);\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 220,
                    "astHeight": 17
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5508,
                        "startLineNumber": 124,
                        "startColumnNumber": 16,
                        "endLineNumber": 211,
                        "endColumnNumber": 17
                    },
                    "nodeContext": "if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n  String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n  if (isSupportedHttpRequest(nativeQueryString)) {\n    String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n    if (!\"select\".equals(requestHandlerString)) {\n      if (requestHandlerString.charAt(0) != '/') {\n        requestHandlerString=\"/\" + requestHandlerString;\n      }\n      solrQuery.setRequestHandler(requestHandlerString);\n    }\n    String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n    for (    String param : parameterString.split(\"&\")) {\n      String[] kv=param.split(\"=\");\n      if (kv.length != 2) {\n        throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n      }\n else {\n        if (\"stream.body\".equals(kv[0])) {\n          kv[0]=\"q\";\n          String mltFlString=\"mlt.fl=\";\n          int mltFlIndex=parameterString.indexOf(mltFlString);\n          if (mltFlIndex > -1) {\n            int beginIndex=mltFlIndex + mltFlString.length();\n            int endIndex=parameterString.indexOf('&',beginIndex);\n            String fields;\n            if (endIndex > beginIndex) {\n              fields=parameterString.substring(beginIndex,endIndex);\n            }\n else {\n              fields=parameterString.substring(beginIndex);\n            }\n            kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n          }\n        }\n        solrQuery.setParam(kv[0],kv[1]);\n      }\n    }\n    return solrQuery;\n  }\n else {\n    queryBuilder.append(nativeQueryString);\n  }\n}\n else {\n  if (pr.propertyName.contains(\"/\")) {\n    continue;\n  }\n  if (\"rep:excerpt\".equals(pr.propertyName)) {\n    continue;\n  }\n  String first=null;\n  if (pr.first != null) {\n    first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n  }\n  String last=null;\n  if (pr.last != null) {\n    last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n  }\n  String prField=configuration.getFieldForPropertyRestriction(pr);\n  CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n  if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n    queryBuilder.append(configuration.getPathField());\n    queryBuilder.append(':');\n    queryBuilder.append(first);\n  }\n else {\n    if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(first);\n    }\n else     if (pr.first == null && pr.last == null) {\n      if (!queryBuilder.toString().contains(fieldName + \":\")) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append('*');\n      }\n    }\n else     if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n    }\n else     if (pr.isLike) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n    }\n else {\n      throw new RuntimeException(\"[unexpected!] not handled case\");\n    }\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 546,
                    "astHeight": 19
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.EnhancedForStatement,body]",
                    "nodePosition": {
                        "charLength": 5622,
                        "startLineNumber": 122,
                        "startColumnNumber": 71,
                        "endLineNumber": 213,
                        "endColumnNumber": 13
                    },
                    "nodeContext": "{\n  if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n    String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n    if (isSupportedHttpRequest(nativeQueryString)) {\n      String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n      if (!\"select\".equals(requestHandlerString)) {\n        if (requestHandlerString.charAt(0) != '/') {\n          requestHandlerString=\"/\" + requestHandlerString;\n        }\n        solrQuery.setRequestHandler(requestHandlerString);\n      }\n      String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n      for (      String param : parameterString.split(\"&\")) {\n        String[] kv=param.split(\"=\");\n        if (kv.length != 2) {\n          throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n        }\n else {\n          if (\"stream.body\".equals(kv[0])) {\n            kv[0]=\"q\";\n            String mltFlString=\"mlt.fl=\";\n            int mltFlIndex=parameterString.indexOf(mltFlString);\n            if (mltFlIndex > -1) {\n              int beginIndex=mltFlIndex + mltFlString.length();\n              int endIndex=parameterString.indexOf('&',beginIndex);\n              String fields;\n              if (endIndex > beginIndex) {\n                fields=parameterString.substring(beginIndex,endIndex);\n              }\n else {\n                fields=parameterString.substring(beginIndex);\n              }\n              kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n            }\n          }\n          solrQuery.setParam(kv[0],kv[1]);\n        }\n      }\n      return solrQuery;\n    }\n else {\n      queryBuilder.append(nativeQueryString);\n    }\n  }\n else {\n    if (pr.propertyName.contains(\"/\")) {\n      continue;\n    }\n    if (\"rep:excerpt\".equals(pr.propertyName)) {\n      continue;\n    }\n    String first=null;\n    if (pr.first != null) {\n      first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n    }\n    String last=null;\n    if (pr.last != null) {\n      last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n    }\n    String prField=configuration.getFieldForPropertyRestriction(pr);\n    CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n    if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n      queryBuilder.append(configuration.getPathField());\n      queryBuilder.append(':');\n      queryBuilder.append(first);\n    }\n else {\n      if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(first);\n      }\n else       if (pr.first == null && pr.last == null) {\n        if (!queryBuilder.toString().contains(fieldName + \":\")) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append('*');\n        }\n      }\n else       if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n      }\n else       if (pr.isLike) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n      }\n else {\n        throw new RuntimeException(\"[unexpected!] not handled case\");\n      }\n    }\n  }\n  queryBuilder.append(\" \");\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 552,
                    "astHeight": 20
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5681,
                        "startLineNumber": 122,
                        "startColumnNumber": 12,
                        "endLineNumber": 213,
                        "endColumnNumber": 13
                    },
                    "nodeContext": "for (Filter.PropertyRestriction pr : propertyRestrictions) {\n  if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n    String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n    if (isSupportedHttpRequest(nativeQueryString)) {\n      String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n      if (!\"select\".equals(requestHandlerString)) {\n        if (requestHandlerString.charAt(0) != '/') {\n          requestHandlerString=\"/\" + requestHandlerString;\n        }\n        solrQuery.setRequestHandler(requestHandlerString);\n      }\n      String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n      for (      String param : parameterString.split(\"&\")) {\n        String[] kv=param.split(\"=\");\n        if (kv.length != 2) {\n          throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n        }\n else {\n          if (\"stream.body\".equals(kv[0])) {\n            kv[0]=\"q\";\n            String mltFlString=\"mlt.fl=\";\n            int mltFlIndex=parameterString.indexOf(mltFlString);\n            if (mltFlIndex > -1) {\n              int beginIndex=mltFlIndex + mltFlString.length();\n              int endIndex=parameterString.indexOf('&',beginIndex);\n              String fields;\n              if (endIndex > beginIndex) {\n                fields=parameterString.substring(beginIndex,endIndex);\n              }\n else {\n                fields=parameterString.substring(beginIndex);\n              }\n              kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n            }\n          }\n          solrQuery.setParam(kv[0],kv[1]);\n        }\n      }\n      return solrQuery;\n    }\n else {\n      queryBuilder.append(nativeQueryString);\n    }\n  }\n else {\n    if (pr.propertyName.contains(\"/\")) {\n      continue;\n    }\n    if (\"rep:excerpt\".equals(pr.propertyName)) {\n      continue;\n    }\n    String first=null;\n    if (pr.first != null) {\n      first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n    }\n    String last=null;\n    if (pr.last != null) {\n      last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n    }\n    String prField=configuration.getFieldForPropertyRestriction(pr);\n    CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n    if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n      queryBuilder.append(configuration.getPathField());\n      queryBuilder.append(':');\n      queryBuilder.append(first);\n    }\n else {\n      if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(first);\n      }\n else       if (pr.first == null && pr.last == null) {\n        if (!queryBuilder.toString().contains(fieldName + \":\")) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append('*');\n        }\n      }\n else       if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n      }\n else       if (pr.isLike) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n      }\n else {\n        throw new RuntimeException(\"[unexpected!] not handled case\");\n      }\n    }\n  }\n  queryBuilder.append(\" \");\n}\n",
                    "nodeType": "EnhancedForStatement",
                    "astNodeNumber": 560,
                    "astHeight": 21
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,thenStatement]",
                    "nodePosition": {
                        "charLength": 5705,
                        "startLineNumber": 121,
                        "startColumnNumber": 77,
                        "endLineNumber": 214,
                        "endColumnNumber": 9
                    },
                    "nodeContext": "{\n  for (  Filter.PropertyRestriction pr : propertyRestrictions) {\n    if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n      String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n      if (isSupportedHttpRequest(nativeQueryString)) {\n        String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n        if (!\"select\".equals(requestHandlerString)) {\n          if (requestHandlerString.charAt(0) != '/') {\n            requestHandlerString=\"/\" + requestHandlerString;\n          }\n          solrQuery.setRequestHandler(requestHandlerString);\n        }\n        String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n        for (        String param : parameterString.split(\"&\")) {\n          String[] kv=param.split(\"=\");\n          if (kv.length != 2) {\n            throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n          }\n else {\n            if (\"stream.body\".equals(kv[0])) {\n              kv[0]=\"q\";\n              String mltFlString=\"mlt.fl=\";\n              int mltFlIndex=parameterString.indexOf(mltFlString);\n              if (mltFlIndex > -1) {\n                int beginIndex=mltFlIndex + mltFlString.length();\n                int endIndex=parameterString.indexOf('&',beginIndex);\n                String fields;\n                if (endIndex > beginIndex) {\n                  fields=parameterString.substring(beginIndex,endIndex);\n                }\n else {\n                  fields=parameterString.substring(beginIndex);\n                }\n                kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n              }\n            }\n            solrQuery.setParam(kv[0],kv[1]);\n          }\n        }\n        return solrQuery;\n      }\n else {\n        queryBuilder.append(nativeQueryString);\n      }\n    }\n else {\n      if (pr.propertyName.contains(\"/\")) {\n        continue;\n      }\n      if (\"rep:excerpt\".equals(pr.propertyName)) {\n        continue;\n      }\n      String first=null;\n      if (pr.first != null) {\n        first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n      }\n      String last=null;\n      if (pr.last != null) {\n        last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n      }\n      String prField=configuration.getFieldForPropertyRestriction(pr);\n      CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n      if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n        queryBuilder.append(configuration.getPathField());\n        queryBuilder.append(':');\n        queryBuilder.append(first);\n      }\n else {\n        if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(first);\n        }\n else         if (pr.first == null && pr.last == null) {\n          if (!queryBuilder.toString().contains(fieldName + \":\")) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append('*');\n          }\n        }\n else         if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n        }\n else         if (pr.isLike) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n        }\n else {\n          throw new RuntimeException(\"[unexpected!] not handled case\");\n        }\n      }\n    }\n    queryBuilder.append(\" \");\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 561,
                    "astHeight": 22
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5774,
                        "startLineNumber": 121,
                        "startColumnNumber": 8,
                        "endLineNumber": 214,
                        "endColumnNumber": 9
                    },
                    "nodeContext": "if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n  for (  Filter.PropertyRestriction pr : propertyRestrictions) {\n    if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n      String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n      if (isSupportedHttpRequest(nativeQueryString)) {\n        String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n        if (!\"select\".equals(requestHandlerString)) {\n          if (requestHandlerString.charAt(0) != '/') {\n            requestHandlerString=\"/\" + requestHandlerString;\n          }\n          solrQuery.setRequestHandler(requestHandlerString);\n        }\n        String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n        for (        String param : parameterString.split(\"&\")) {\n          String[] kv=param.split(\"=\");\n          if (kv.length != 2) {\n            throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n          }\n else {\n            if (\"stream.body\".equals(kv[0])) {\n              kv[0]=\"q\";\n              String mltFlString=\"mlt.fl=\";\n              int mltFlIndex=parameterString.indexOf(mltFlString);\n              if (mltFlIndex > -1) {\n                int beginIndex=mltFlIndex + mltFlString.length();\n                int endIndex=parameterString.indexOf('&',beginIndex);\n                String fields;\n                if (endIndex > beginIndex) {\n                  fields=parameterString.substring(beginIndex,endIndex);\n                }\n else {\n                  fields=parameterString.substring(beginIndex);\n                }\n                kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n              }\n            }\n            solrQuery.setParam(kv[0],kv[1]);\n          }\n        }\n        return solrQuery;\n      }\n else {\n        queryBuilder.append(nativeQueryString);\n      }\n    }\n else {\n      if (pr.propertyName.contains(\"/\")) {\n        continue;\n      }\n      if (\"rep:excerpt\".equals(pr.propertyName)) {\n        continue;\n      }\n      String first=null;\n      if (pr.first != null) {\n        first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n      }\n      String last=null;\n      if (pr.last != null) {\n        last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n      }\n      String prField=configuration.getFieldForPropertyRestriction(pr);\n      CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n      if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n        queryBuilder.append(configuration.getPathField());\n        queryBuilder.append(':');\n        queryBuilder.append(first);\n      }\n else {\n        if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(first);\n        }\n else         if (pr.first == null && pr.last == null) {\n          if (!queryBuilder.toString().contains(fieldName + \":\")) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append('*');\n          }\n        }\n else         if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n        }\n else         if (pr.isLike) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n        }\n else {\n          throw new RuntimeException(\"[unexpected!] not handled case\");\n        }\n      }\n    }\n    queryBuilder.append(\" \");\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 570,
                    "astHeight": 23
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.MethodDeclaration,body]",
                    "nodePosition": {
                        "charLength": 7985,
                        "startLineNumber": 103,
                        "startColumnNumber": 46,
                        "endLineNumber": 255,
                        "endColumnNumber": 5
                    },
                    "nodeContext": "{\n  SolrQuery solrQuery=new SolrQuery();\n  setDefaults(solrQuery);\n  StringBuilder queryBuilder=new StringBuilder();\n  if (filter.getFullTextConstraint() != null) {\n    queryBuilder.append(getFullTextQuery(filter.getFullTextConstraint()));\n    queryBuilder.append(' ');\n  }\n else   if (filter.getFulltextConditions() != null) {\n    Collection<String> fulltextConditions=filter.getFulltextConditions();\n    for (    String fulltextCondition : fulltextConditions) {\n      queryBuilder.append(fulltextCondition).append(\" \");\n    }\n  }\n  Collection<Filter.PropertyRestriction> propertyRestrictions=filter.getPropertyRestrictions();\n  if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n    for (    Filter.PropertyRestriction pr : propertyRestrictions) {\n      if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n        String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n        if (isSupportedHttpRequest(nativeQueryString)) {\n          String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n          if (!\"select\".equals(requestHandlerString)) {\n            if (requestHandlerString.charAt(0) != '/') {\n              requestHandlerString=\"/\" + requestHandlerString;\n            }\n            solrQuery.setRequestHandler(requestHandlerString);\n          }\n          String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n          for (          String param : parameterString.split(\"&\")) {\n            String[] kv=param.split(\"=\");\n            if (kv.length != 2) {\n              throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n            }\n else {\n              if (\"stream.body\".equals(kv[0])) {\n                kv[0]=\"q\";\n                String mltFlString=\"mlt.fl=\";\n                int mltFlIndex=parameterString.indexOf(mltFlString);\n                if (mltFlIndex > -1) {\n                  int beginIndex=mltFlIndex + mltFlString.length();\n                  int endIndex=parameterString.indexOf('&',beginIndex);\n                  String fields;\n                  if (endIndex > beginIndex) {\n                    fields=parameterString.substring(beginIndex,endIndex);\n                  }\n else {\n                    fields=parameterString.substring(beginIndex);\n                  }\n                  kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n                }\n              }\n              solrQuery.setParam(kv[0],kv[1]);\n            }\n          }\n          return solrQuery;\n        }\n else {\n          queryBuilder.append(nativeQueryString);\n        }\n      }\n else {\n        if (pr.propertyName.contains(\"/\")) {\n          continue;\n        }\n        if (\"rep:excerpt\".equals(pr.propertyName)) {\n          continue;\n        }\n        String first=null;\n        if (pr.first != null) {\n          first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n        }\n        String last=null;\n        if (pr.last != null) {\n          last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n        }\n        String prField=configuration.getFieldForPropertyRestriction(pr);\n        CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n        if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n          queryBuilder.append(configuration.getPathField());\n          queryBuilder.append(':');\n          queryBuilder.append(first);\n        }\n else {\n          if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(first);\n          }\n else           if (pr.first == null && pr.last == null) {\n            if (!queryBuilder.toString().contains(fieldName + \":\")) {\n              queryBuilder.append(fieldName).append(':');\n              queryBuilder.append('*');\n            }\n          }\n else           if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n          }\n else           if (pr.isLike) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n          }\n else {\n            throw new RuntimeException(\"[unexpected!] not handled case\");\n          }\n        }\n      }\n      queryBuilder.append(\" \");\n    }\n  }\n  String[] pts=filter.getPrimaryTypes().toArray(new String[filter.getPrimaryTypes().size()]);\n  for (int i=0; i < pts.length; i++) {\n    String pt=pts[i];\n    if (i == 0) {\n      queryBuilder.append(\"(\");\n    }\n    if (i > 0 && i < pts.length) {\n      queryBuilder.append(\"OR \");\n    }\n    queryBuilder.append(\"jcr\\\\:primaryType\").append(':').append(partialEscape(pt)).append(\" \");\n    if (i == pts.length - 1) {\n      queryBuilder.append(\")\");\n      queryBuilder.append(' ');\n    }\n  }\n  Filter.PathRestriction pathRestriction=filter.getPathRestriction();\n  if (pathRestriction != null) {\n    String path=purgePath(filter);\n    String fieldName=configuration.getFieldForPathRestriction(pathRestriction);\n    if (fieldName != null) {\n      queryBuilder.append(fieldName);\n      queryBuilder.append(':');\n      queryBuilder.append(path);\n    }\n  }\n  if (queryBuilder.length() == 0) {\n    queryBuilder.append(\"*:*\");\n  }\n  String escapedQuery=queryBuilder.toString();\n  solrQuery.setQuery(escapedQuery);\n  if (log.isDebugEnabled()) {\n    log.debug(\"JCR query {} has been converted to Solr query {}\",filter.getQueryStatement(),solrQuery.toString());\n  }\n  return solrQuery;\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 858,
                    "astHeight": 24
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.TypeDeclaration,bodyDeclarations]",
                    "nodePosition": {
                        "charLength": 8027,
                        "startLineNumber": 103,
                        "startColumnNumber": 4,
                        "endLineNumber": 255,
                        "endColumnNumber": 5
                    },
                    "nodeContext": "private SolrQuery getQuery(Filter filter){\n  SolrQuery solrQuery=new SolrQuery();\n  setDefaults(solrQuery);\n  StringBuilder queryBuilder=new StringBuilder();\n  if (filter.getFullTextConstraint() != null) {\n    queryBuilder.append(getFullTextQuery(filter.getFullTextConstraint()));\n    queryBuilder.append(' ');\n  }\n else   if (filter.getFulltextConditions() != null) {\n    Collection<String> fulltextConditions=filter.getFulltextConditions();\n    for (    String fulltextCondition : fulltextConditions) {\n      queryBuilder.append(fulltextCondition).append(\" \");\n    }\n  }\n  Collection<Filter.PropertyRestriction> propertyRestrictions=filter.getPropertyRestrictions();\n  if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n    for (    Filter.PropertyRestriction pr : propertyRestrictions) {\n      if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n        String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n        if (isSupportedHttpRequest(nativeQueryString)) {\n          String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n          if (!\"select\".equals(requestHandlerString)) {\n            if (requestHandlerString.charAt(0) != '/') {\n              requestHandlerString=\"/\" + requestHandlerString;\n            }\n            solrQuery.setRequestHandler(requestHandlerString);\n          }\n          String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n          for (          String param : parameterString.split(\"&\")) {\n            String[] kv=param.split(\"=\");\n            if (kv.length != 2) {\n              throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n            }\n else {\n              if (\"stream.body\".equals(kv[0])) {\n                kv[0]=\"q\";\n                String mltFlString=\"mlt.fl=\";\n                int mltFlIndex=parameterString.indexOf(mltFlString);\n                if (mltFlIndex > -1) {\n                  int beginIndex=mltFlIndex + mltFlString.length();\n                  int endIndex=parameterString.indexOf('&',beginIndex);\n                  String fields;\n                  if (endIndex > beginIndex) {\n                    fields=parameterString.substring(beginIndex,endIndex);\n                  }\n else {\n                    fields=parameterString.substring(beginIndex);\n                  }\n                  kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n                }\n              }\n              solrQuery.setParam(kv[0],kv[1]);\n            }\n          }\n          return solrQuery;\n        }\n else {\n          queryBuilder.append(nativeQueryString);\n        }\n      }\n else {\n        if (pr.propertyName.contains(\"/\")) {\n          continue;\n        }\n        if (\"rep:excerpt\".equals(pr.propertyName)) {\n          continue;\n        }\n        String first=null;\n        if (pr.first != null) {\n          first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n        }\n        String last=null;\n        if (pr.last != null) {\n          last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n        }\n        String prField=configuration.getFieldForPropertyRestriction(pr);\n        CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n        if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n          queryBuilder.append(configuration.getPathField());\n          queryBuilder.append(':');\n          queryBuilder.append(first);\n        }\n else {\n          if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(first);\n          }\n else           if (pr.first == null && pr.last == null) {\n            if (!queryBuilder.toString().contains(fieldName + \":\")) {\n              queryBuilder.append(fieldName).append(':');\n              queryBuilder.append('*');\n            }\n          }\n else           if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n          }\n else           if (pr.isLike) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n          }\n else {\n            throw new RuntimeException(\"[unexpected!] not handled case\");\n          }\n        }\n      }\n      queryBuilder.append(\" \");\n    }\n  }\n  String[] pts=filter.getPrimaryTypes().toArray(new String[filter.getPrimaryTypes().size()]);\n  for (int i=0; i < pts.length; i++) {\n    String pt=pts[i];\n    if (i == 0) {\n      queryBuilder.append(\"(\");\n    }\n    if (i > 0 && i < pts.length) {\n      queryBuilder.append(\"OR \");\n    }\n    queryBuilder.append(\"jcr\\\\:primaryType\").append(':').append(partialEscape(pt)).append(\" \");\n    if (i == pts.length - 1) {\n      queryBuilder.append(\")\");\n      queryBuilder.append(' ');\n    }\n  }\n  Filter.PathRestriction pathRestriction=filter.getPathRestriction();\n  if (pathRestriction != null) {\n    String path=purgePath(filter);\n    String fieldName=configuration.getFieldForPathRestriction(pathRestriction);\n    if (fieldName != null) {\n      queryBuilder.append(fieldName);\n      queryBuilder.append(':');\n      queryBuilder.append(path);\n    }\n  }\n  if (queryBuilder.length() == 0) {\n    queryBuilder.append(\"*:*\");\n  }\n  String escapedQuery=queryBuilder.toString();\n  solrQuery.setQuery(escapedQuery);\n  if (log.isDebugEnabled()) {\n    log.debug(\"JCR query {} has been converted to Solr query {}\",filter.getQueryStatement(),solrQuery.toString());\n  }\n  return solrQuery;\n}\n",
                    "nodeType": "MethodDeclaration",
                    "astNodeNumber": 867,
                    "astHeight": 25
                }
            ],
            "currentLineData": {
                "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                "nodePosition": {
                    "charLength": 81,
                    "startLineNumber": 125,
                    "startColumnNumber": 20,
                    "endLineNumber": 125,
                    "endColumnNumber": 101
                },
                "nodeContext": "String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n",
                "nodeType": "VariableDeclarationStatement",
                "astNodeNumber": 18,
                "astHeight": 7
            },
            "tokenLength": 1,
            "type": "org.apache.jackrabbit.oak.spi.query.Filter.PropertyRestriction"
        },
        {
            "nodeContext": "pr",
            "nodeType": "SimpleName",
            "nodePosition": {
                "charLength": 2,
                "startLineNumber": 125,
                "startColumnNumber": 80,
                "endLineNumber": 125,
                "endColumnNumber": 82
            },
            "astNodeNumber": 1,
            "astHeight": 1,
            "parentDataList": [
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.MethodInvocation,expression]",
                    "nodePosition": {
                        "charLength": 8,
                        "startLineNumber": 125,
                        "startColumnNumber": 80,
                        "endLineNumber": 125,
                        "endColumnNumber": 88
                    },
                    "nodeContext": "pr.first",
                    "nodeType": "QualifiedName",
                    "astNodeNumber": 3,
                    "astHeight": 2
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.MethodInvocation,arguments]",
                    "nodePosition": {
                        "charLength": 18,
                        "startLineNumber": 125,
                        "startColumnNumber": 80,
                        "endLineNumber": 125,
                        "endColumnNumber": 98
                    },
                    "nodeContext": "pr.first.getType()",
                    "nodeType": "MethodInvocation",
                    "astNodeNumber": 5,
                    "astHeight": 3
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.MethodInvocation,arguments]",
                    "nodePosition": {
                        "charLength": 37,
                        "startLineNumber": 125,
                        "startColumnNumber": 62,
                        "endLineNumber": 125,
                        "endColumnNumber": 99
                    },
                    "nodeContext": "pr.first.getValue(pr.first.getType())",
                    "nodeType": "MethodInvocation",
                    "astNodeNumber": 10,
                    "astHeight": 4
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.VariableDeclarationFragment,initializer]",
                    "nodePosition": {
                        "charLength": 53,
                        "startLineNumber": 125,
                        "startColumnNumber": 47,
                        "endLineNumber": 125,
                        "endColumnNumber": 100
                    },
                    "nodeContext": "String.valueOf(pr.first.getValue(pr.first.getType()))",
                    "nodeType": "MethodInvocation",
                    "astNodeNumber": 13,
                    "astHeight": 5
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.VariableDeclarationStatement,fragments]",
                    "nodePosition": {
                        "charLength": 73,
                        "startLineNumber": 125,
                        "startColumnNumber": 27,
                        "endLineNumber": 125,
                        "endColumnNumber": 100
                    },
                    "nodeContext": "nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()))",
                    "nodeType": "VariableDeclarationFragment",
                    "astNodeNumber": 15,
                    "astHeight": 6
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 81,
                        "startLineNumber": 125,
                        "startColumnNumber": 20,
                        "endLineNumber": 125,
                        "endColumnNumber": 101
                    },
                    "nodeContext": "String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n",
                    "nodeType": "VariableDeclarationStatement",
                    "astNodeNumber": 18,
                    "astHeight": 7
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,thenStatement]",
                    "nodePosition": {
                        "charLength": 2610,
                        "startLineNumber": 124,
                        "startColumnNumber": 110,
                        "endLineNumber": 164,
                        "endColumnNumber": 17
                    },
                    "nodeContext": "{\n  String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n  if (isSupportedHttpRequest(nativeQueryString)) {\n    String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n    if (!\"select\".equals(requestHandlerString)) {\n      if (requestHandlerString.charAt(0) != '/') {\n        requestHandlerString=\"/\" + requestHandlerString;\n      }\n      solrQuery.setRequestHandler(requestHandlerString);\n    }\n    String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n    for (    String param : parameterString.split(\"&\")) {\n      String[] kv=param.split(\"=\");\n      if (kv.length != 2) {\n        throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n      }\n else {\n        if (\"stream.body\".equals(kv[0])) {\n          kv[0]=\"q\";\n          String mltFlString=\"mlt.fl=\";\n          int mltFlIndex=parameterString.indexOf(mltFlString);\n          if (mltFlIndex > -1) {\n            int beginIndex=mltFlIndex + mltFlString.length();\n            int endIndex=parameterString.indexOf('&',beginIndex);\n            String fields;\n            if (endIndex > beginIndex) {\n              fields=parameterString.substring(beginIndex,endIndex);\n            }\n else {\n              fields=parameterString.substring(beginIndex);\n            }\n            kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n          }\n        }\n        solrQuery.setParam(kv[0],kv[1]);\n      }\n    }\n    return solrQuery;\n  }\n else {\n    queryBuilder.append(nativeQueryString);\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 220,
                    "astHeight": 17
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5508,
                        "startLineNumber": 124,
                        "startColumnNumber": 16,
                        "endLineNumber": 211,
                        "endColumnNumber": 17
                    },
                    "nodeContext": "if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n  String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n  if (isSupportedHttpRequest(nativeQueryString)) {\n    String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n    if (!\"select\".equals(requestHandlerString)) {\n      if (requestHandlerString.charAt(0) != '/') {\n        requestHandlerString=\"/\" + requestHandlerString;\n      }\n      solrQuery.setRequestHandler(requestHandlerString);\n    }\n    String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n    for (    String param : parameterString.split(\"&\")) {\n      String[] kv=param.split(\"=\");\n      if (kv.length != 2) {\n        throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n      }\n else {\n        if (\"stream.body\".equals(kv[0])) {\n          kv[0]=\"q\";\n          String mltFlString=\"mlt.fl=\";\n          int mltFlIndex=parameterString.indexOf(mltFlString);\n          if (mltFlIndex > -1) {\n            int beginIndex=mltFlIndex + mltFlString.length();\n            int endIndex=parameterString.indexOf('&',beginIndex);\n            String fields;\n            if (endIndex > beginIndex) {\n              fields=parameterString.substring(beginIndex,endIndex);\n            }\n else {\n              fields=parameterString.substring(beginIndex);\n            }\n            kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n          }\n        }\n        solrQuery.setParam(kv[0],kv[1]);\n      }\n    }\n    return solrQuery;\n  }\n else {\n    queryBuilder.append(nativeQueryString);\n  }\n}\n else {\n  if (pr.propertyName.contains(\"/\")) {\n    continue;\n  }\n  if (\"rep:excerpt\".equals(pr.propertyName)) {\n    continue;\n  }\n  String first=null;\n  if (pr.first != null) {\n    first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n  }\n  String last=null;\n  if (pr.last != null) {\n    last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n  }\n  String prField=configuration.getFieldForPropertyRestriction(pr);\n  CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n  if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n    queryBuilder.append(configuration.getPathField());\n    queryBuilder.append(':');\n    queryBuilder.append(first);\n  }\n else {\n    if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(first);\n    }\n else     if (pr.first == null && pr.last == null) {\n      if (!queryBuilder.toString().contains(fieldName + \":\")) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append('*');\n      }\n    }\n else     if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n    }\n else     if (pr.isLike) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n    }\n else {\n      throw new RuntimeException(\"[unexpected!] not handled case\");\n    }\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 546,
                    "astHeight": 19
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.EnhancedForStatement,body]",
                    "nodePosition": {
                        "charLength": 5622,
                        "startLineNumber": 122,
                        "startColumnNumber": 71,
                        "endLineNumber": 213,
                        "endColumnNumber": 13
                    },
                    "nodeContext": "{\n  if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n    String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n    if (isSupportedHttpRequest(nativeQueryString)) {\n      String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n      if (!\"select\".equals(requestHandlerString)) {\n        if (requestHandlerString.charAt(0) != '/') {\n          requestHandlerString=\"/\" + requestHandlerString;\n        }\n        solrQuery.setRequestHandler(requestHandlerString);\n      }\n      String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n      for (      String param : parameterString.split(\"&\")) {\n        String[] kv=param.split(\"=\");\n        if (kv.length != 2) {\n          throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n        }\n else {\n          if (\"stream.body\".equals(kv[0])) {\n            kv[0]=\"q\";\n            String mltFlString=\"mlt.fl=\";\n            int mltFlIndex=parameterString.indexOf(mltFlString);\n            if (mltFlIndex > -1) {\n              int beginIndex=mltFlIndex + mltFlString.length();\n              int endIndex=parameterString.indexOf('&',beginIndex);\n              String fields;\n              if (endIndex > beginIndex) {\n                fields=parameterString.substring(beginIndex,endIndex);\n              }\n else {\n                fields=parameterString.substring(beginIndex);\n              }\n              kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n            }\n          }\n          solrQuery.setParam(kv[0],kv[1]);\n        }\n      }\n      return solrQuery;\n    }\n else {\n      queryBuilder.append(nativeQueryString);\n    }\n  }\n else {\n    if (pr.propertyName.contains(\"/\")) {\n      continue;\n    }\n    if (\"rep:excerpt\".equals(pr.propertyName)) {\n      continue;\n    }\n    String first=null;\n    if (pr.first != null) {\n      first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n    }\n    String last=null;\n    if (pr.last != null) {\n      last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n    }\n    String prField=configuration.getFieldForPropertyRestriction(pr);\n    CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n    if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n      queryBuilder.append(configuration.getPathField());\n      queryBuilder.append(':');\n      queryBuilder.append(first);\n    }\n else {\n      if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(first);\n      }\n else       if (pr.first == null && pr.last == null) {\n        if (!queryBuilder.toString().contains(fieldName + \":\")) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append('*');\n        }\n      }\n else       if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n      }\n else       if (pr.isLike) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n      }\n else {\n        throw new RuntimeException(\"[unexpected!] not handled case\");\n      }\n    }\n  }\n  queryBuilder.append(\" \");\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 552,
                    "astHeight": 20
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5681,
                        "startLineNumber": 122,
                        "startColumnNumber": 12,
                        "endLineNumber": 213,
                        "endColumnNumber": 13
                    },
                    "nodeContext": "for (Filter.PropertyRestriction pr : propertyRestrictions) {\n  if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n    String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n    if (isSupportedHttpRequest(nativeQueryString)) {\n      String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n      if (!\"select\".equals(requestHandlerString)) {\n        if (requestHandlerString.charAt(0) != '/') {\n          requestHandlerString=\"/\" + requestHandlerString;\n        }\n        solrQuery.setRequestHandler(requestHandlerString);\n      }\n      String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n      for (      String param : parameterString.split(\"&\")) {\n        String[] kv=param.split(\"=\");\n        if (kv.length != 2) {\n          throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n        }\n else {\n          if (\"stream.body\".equals(kv[0])) {\n            kv[0]=\"q\";\n            String mltFlString=\"mlt.fl=\";\n            int mltFlIndex=parameterString.indexOf(mltFlString);\n            if (mltFlIndex > -1) {\n              int beginIndex=mltFlIndex + mltFlString.length();\n              int endIndex=parameterString.indexOf('&',beginIndex);\n              String fields;\n              if (endIndex > beginIndex) {\n                fields=parameterString.substring(beginIndex,endIndex);\n              }\n else {\n                fields=parameterString.substring(beginIndex);\n              }\n              kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n            }\n          }\n          solrQuery.setParam(kv[0],kv[1]);\n        }\n      }\n      return solrQuery;\n    }\n else {\n      queryBuilder.append(nativeQueryString);\n    }\n  }\n else {\n    if (pr.propertyName.contains(\"/\")) {\n      continue;\n    }\n    if (\"rep:excerpt\".equals(pr.propertyName)) {\n      continue;\n    }\n    String first=null;\n    if (pr.first != null) {\n      first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n    }\n    String last=null;\n    if (pr.last != null) {\n      last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n    }\n    String prField=configuration.getFieldForPropertyRestriction(pr);\n    CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n    if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n      queryBuilder.append(configuration.getPathField());\n      queryBuilder.append(':');\n      queryBuilder.append(first);\n    }\n else {\n      if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(first);\n      }\n else       if (pr.first == null && pr.last == null) {\n        if (!queryBuilder.toString().contains(fieldName + \":\")) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append('*');\n        }\n      }\n else       if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n      }\n else       if (pr.isLike) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n      }\n else {\n        throw new RuntimeException(\"[unexpected!] not handled case\");\n      }\n    }\n  }\n  queryBuilder.append(\" \");\n}\n",
                    "nodeType": "EnhancedForStatement",
                    "astNodeNumber": 560,
                    "astHeight": 21
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,thenStatement]",
                    "nodePosition": {
                        "charLength": 5705,
                        "startLineNumber": 121,
                        "startColumnNumber": 77,
                        "endLineNumber": 214,
                        "endColumnNumber": 9
                    },
                    "nodeContext": "{\n  for (  Filter.PropertyRestriction pr : propertyRestrictions) {\n    if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n      String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n      if (isSupportedHttpRequest(nativeQueryString)) {\n        String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n        if (!\"select\".equals(requestHandlerString)) {\n          if (requestHandlerString.charAt(0) != '/') {\n            requestHandlerString=\"/\" + requestHandlerString;\n          }\n          solrQuery.setRequestHandler(requestHandlerString);\n        }\n        String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n        for (        String param : parameterString.split(\"&\")) {\n          String[] kv=param.split(\"=\");\n          if (kv.length != 2) {\n            throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n          }\n else {\n            if (\"stream.body\".equals(kv[0])) {\n              kv[0]=\"q\";\n              String mltFlString=\"mlt.fl=\";\n              int mltFlIndex=parameterString.indexOf(mltFlString);\n              if (mltFlIndex > -1) {\n                int beginIndex=mltFlIndex + mltFlString.length();\n                int endIndex=parameterString.indexOf('&',beginIndex);\n                String fields;\n                if (endIndex > beginIndex) {\n                  fields=parameterString.substring(beginIndex,endIndex);\n                }\n else {\n                  fields=parameterString.substring(beginIndex);\n                }\n                kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n              }\n            }\n            solrQuery.setParam(kv[0],kv[1]);\n          }\n        }\n        return solrQuery;\n      }\n else {\n        queryBuilder.append(nativeQueryString);\n      }\n    }\n else {\n      if (pr.propertyName.contains(\"/\")) {\n        continue;\n      }\n      if (\"rep:excerpt\".equals(pr.propertyName)) {\n        continue;\n      }\n      String first=null;\n      if (pr.first != null) {\n        first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n      }\n      String last=null;\n      if (pr.last != null) {\n        last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n      }\n      String prField=configuration.getFieldForPropertyRestriction(pr);\n      CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n      if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n        queryBuilder.append(configuration.getPathField());\n        queryBuilder.append(':');\n        queryBuilder.append(first);\n      }\n else {\n        if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(first);\n        }\n else         if (pr.first == null && pr.last == null) {\n          if (!queryBuilder.toString().contains(fieldName + \":\")) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append('*');\n          }\n        }\n else         if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n        }\n else         if (pr.isLike) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n        }\n else {\n          throw new RuntimeException(\"[unexpected!] not handled case\");\n        }\n      }\n    }\n    queryBuilder.append(\" \");\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 561,
                    "astHeight": 22
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5774,
                        "startLineNumber": 121,
                        "startColumnNumber": 8,
                        "endLineNumber": 214,
                        "endColumnNumber": 9
                    },
                    "nodeContext": "if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n  for (  Filter.PropertyRestriction pr : propertyRestrictions) {\n    if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n      String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n      if (isSupportedHttpRequest(nativeQueryString)) {\n        String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n        if (!\"select\".equals(requestHandlerString)) {\n          if (requestHandlerString.charAt(0) != '/') {\n            requestHandlerString=\"/\" + requestHandlerString;\n          }\n          solrQuery.setRequestHandler(requestHandlerString);\n        }\n        String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n        for (        String param : parameterString.split(\"&\")) {\n          String[] kv=param.split(\"=\");\n          if (kv.length != 2) {\n            throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n          }\n else {\n            if (\"stream.body\".equals(kv[0])) {\n              kv[0]=\"q\";\n              String mltFlString=\"mlt.fl=\";\n              int mltFlIndex=parameterString.indexOf(mltFlString);\n              if (mltFlIndex > -1) {\n                int beginIndex=mltFlIndex + mltFlString.length();\n                int endIndex=parameterString.indexOf('&',beginIndex);\n                String fields;\n                if (endIndex > beginIndex) {\n                  fields=parameterString.substring(beginIndex,endIndex);\n                }\n else {\n                  fields=parameterString.substring(beginIndex);\n                }\n                kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n              }\n            }\n            solrQuery.setParam(kv[0],kv[1]);\n          }\n        }\n        return solrQuery;\n      }\n else {\n        queryBuilder.append(nativeQueryString);\n      }\n    }\n else {\n      if (pr.propertyName.contains(\"/\")) {\n        continue;\n      }\n      if (\"rep:excerpt\".equals(pr.propertyName)) {\n        continue;\n      }\n      String first=null;\n      if (pr.first != null) {\n        first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n      }\n      String last=null;\n      if (pr.last != null) {\n        last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n      }\n      String prField=configuration.getFieldForPropertyRestriction(pr);\n      CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n      if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n        queryBuilder.append(configuration.getPathField());\n        queryBuilder.append(':');\n        queryBuilder.append(first);\n      }\n else {\n        if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(first);\n        }\n else         if (pr.first == null && pr.last == null) {\n          if (!queryBuilder.toString().contains(fieldName + \":\")) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append('*');\n          }\n        }\n else         if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n        }\n else         if (pr.isLike) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n        }\n else {\n          throw new RuntimeException(\"[unexpected!] not handled case\");\n        }\n      }\n    }\n    queryBuilder.append(\" \");\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 570,
                    "astHeight": 23
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.MethodDeclaration,body]",
                    "nodePosition": {
                        "charLength": 7985,
                        "startLineNumber": 103,
                        "startColumnNumber": 46,
                        "endLineNumber": 255,
                        "endColumnNumber": 5
                    },
                    "nodeContext": "{\n  SolrQuery solrQuery=new SolrQuery();\n  setDefaults(solrQuery);\n  StringBuilder queryBuilder=new StringBuilder();\n  if (filter.getFullTextConstraint() != null) {\n    queryBuilder.append(getFullTextQuery(filter.getFullTextConstraint()));\n    queryBuilder.append(' ');\n  }\n else   if (filter.getFulltextConditions() != null) {\n    Collection<String> fulltextConditions=filter.getFulltextConditions();\n    for (    String fulltextCondition : fulltextConditions) {\n      queryBuilder.append(fulltextCondition).append(\" \");\n    }\n  }\n  Collection<Filter.PropertyRestriction> propertyRestrictions=filter.getPropertyRestrictions();\n  if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n    for (    Filter.PropertyRestriction pr : propertyRestrictions) {\n      if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n        String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n        if (isSupportedHttpRequest(nativeQueryString)) {\n          String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n          if (!\"select\".equals(requestHandlerString)) {\n            if (requestHandlerString.charAt(0) != '/') {\n              requestHandlerString=\"/\" + requestHandlerString;\n            }\n            solrQuery.setRequestHandler(requestHandlerString);\n          }\n          String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n          for (          String param : parameterString.split(\"&\")) {\n            String[] kv=param.split(\"=\");\n            if (kv.length != 2) {\n              throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n            }\n else {\n              if (\"stream.body\".equals(kv[0])) {\n                kv[0]=\"q\";\n                String mltFlString=\"mlt.fl=\";\n                int mltFlIndex=parameterString.indexOf(mltFlString);\n                if (mltFlIndex > -1) {\n                  int beginIndex=mltFlIndex + mltFlString.length();\n                  int endIndex=parameterString.indexOf('&',beginIndex);\n                  String fields;\n                  if (endIndex > beginIndex) {\n                    fields=parameterString.substring(beginIndex,endIndex);\n                  }\n else {\n                    fields=parameterString.substring(beginIndex);\n                  }\n                  kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n                }\n              }\n              solrQuery.setParam(kv[0],kv[1]);\n            }\n          }\n          return solrQuery;\n        }\n else {\n          queryBuilder.append(nativeQueryString);\n        }\n      }\n else {\n        if (pr.propertyName.contains(\"/\")) {\n          continue;\n        }\n        if (\"rep:excerpt\".equals(pr.propertyName)) {\n          continue;\n        }\n        String first=null;\n        if (pr.first != null) {\n          first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n        }\n        String last=null;\n        if (pr.last != null) {\n          last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n        }\n        String prField=configuration.getFieldForPropertyRestriction(pr);\n        CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n        if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n          queryBuilder.append(configuration.getPathField());\n          queryBuilder.append(':');\n          queryBuilder.append(first);\n        }\n else {\n          if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(first);\n          }\n else           if (pr.first == null && pr.last == null) {\n            if (!queryBuilder.toString().contains(fieldName + \":\")) {\n              queryBuilder.append(fieldName).append(':');\n              queryBuilder.append('*');\n            }\n          }\n else           if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n          }\n else           if (pr.isLike) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n          }\n else {\n            throw new RuntimeException(\"[unexpected!] not handled case\");\n          }\n        }\n      }\n      queryBuilder.append(\" \");\n    }\n  }\n  String[] pts=filter.getPrimaryTypes().toArray(new String[filter.getPrimaryTypes().size()]);\n  for (int i=0; i < pts.length; i++) {\n    String pt=pts[i];\n    if (i == 0) {\n      queryBuilder.append(\"(\");\n    }\n    if (i > 0 && i < pts.length) {\n      queryBuilder.append(\"OR \");\n    }\n    queryBuilder.append(\"jcr\\\\:primaryType\").append(':').append(partialEscape(pt)).append(\" \");\n    if (i == pts.length - 1) {\n      queryBuilder.append(\")\");\n      queryBuilder.append(' ');\n    }\n  }\n  Filter.PathRestriction pathRestriction=filter.getPathRestriction();\n  if (pathRestriction != null) {\n    String path=purgePath(filter);\n    String fieldName=configuration.getFieldForPathRestriction(pathRestriction);\n    if (fieldName != null) {\n      queryBuilder.append(fieldName);\n      queryBuilder.append(':');\n      queryBuilder.append(path);\n    }\n  }\n  if (queryBuilder.length() == 0) {\n    queryBuilder.append(\"*:*\");\n  }\n  String escapedQuery=queryBuilder.toString();\n  solrQuery.setQuery(escapedQuery);\n  if (log.isDebugEnabled()) {\n    log.debug(\"JCR query {} has been converted to Solr query {}\",filter.getQueryStatement(),solrQuery.toString());\n  }\n  return solrQuery;\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 858,
                    "astHeight": 24
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.TypeDeclaration,bodyDeclarations]",
                    "nodePosition": {
                        "charLength": 8027,
                        "startLineNumber": 103,
                        "startColumnNumber": 4,
                        "endLineNumber": 255,
                        "endColumnNumber": 5
                    },
                    "nodeContext": "private SolrQuery getQuery(Filter filter){\n  SolrQuery solrQuery=new SolrQuery();\n  setDefaults(solrQuery);\n  StringBuilder queryBuilder=new StringBuilder();\n  if (filter.getFullTextConstraint() != null) {\n    queryBuilder.append(getFullTextQuery(filter.getFullTextConstraint()));\n    queryBuilder.append(' ');\n  }\n else   if (filter.getFulltextConditions() != null) {\n    Collection<String> fulltextConditions=filter.getFulltextConditions();\n    for (    String fulltextCondition : fulltextConditions) {\n      queryBuilder.append(fulltextCondition).append(\" \");\n    }\n  }\n  Collection<Filter.PropertyRestriction> propertyRestrictions=filter.getPropertyRestrictions();\n  if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n    for (    Filter.PropertyRestriction pr : propertyRestrictions) {\n      if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n        String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n        if (isSupportedHttpRequest(nativeQueryString)) {\n          String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n          if (!\"select\".equals(requestHandlerString)) {\n            if (requestHandlerString.charAt(0) != '/') {\n              requestHandlerString=\"/\" + requestHandlerString;\n            }\n            solrQuery.setRequestHandler(requestHandlerString);\n          }\n          String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n          for (          String param : parameterString.split(\"&\")) {\n            String[] kv=param.split(\"=\");\n            if (kv.length != 2) {\n              throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n            }\n else {\n              if (\"stream.body\".equals(kv[0])) {\n                kv[0]=\"q\";\n                String mltFlString=\"mlt.fl=\";\n                int mltFlIndex=parameterString.indexOf(mltFlString);\n                if (mltFlIndex > -1) {\n                  int beginIndex=mltFlIndex + mltFlString.length();\n                  int endIndex=parameterString.indexOf('&',beginIndex);\n                  String fields;\n                  if (endIndex > beginIndex) {\n                    fields=parameterString.substring(beginIndex,endIndex);\n                  }\n else {\n                    fields=parameterString.substring(beginIndex);\n                  }\n                  kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n                }\n              }\n              solrQuery.setParam(kv[0],kv[1]);\n            }\n          }\n          return solrQuery;\n        }\n else {\n          queryBuilder.append(nativeQueryString);\n        }\n      }\n else {\n        if (pr.propertyName.contains(\"/\")) {\n          continue;\n        }\n        if (\"rep:excerpt\".equals(pr.propertyName)) {\n          continue;\n        }\n        String first=null;\n        if (pr.first != null) {\n          first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n        }\n        String last=null;\n        if (pr.last != null) {\n          last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n        }\n        String prField=configuration.getFieldForPropertyRestriction(pr);\n        CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n        if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n          queryBuilder.append(configuration.getPathField());\n          queryBuilder.append(':');\n          queryBuilder.append(first);\n        }\n else {\n          if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(first);\n          }\n else           if (pr.first == null && pr.last == null) {\n            if (!queryBuilder.toString().contains(fieldName + \":\")) {\n              queryBuilder.append(fieldName).append(':');\n              queryBuilder.append('*');\n            }\n          }\n else           if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n          }\n else           if (pr.isLike) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n          }\n else {\n            throw new RuntimeException(\"[unexpected!] not handled case\");\n          }\n        }\n      }\n      queryBuilder.append(\" \");\n    }\n  }\n  String[] pts=filter.getPrimaryTypes().toArray(new String[filter.getPrimaryTypes().size()]);\n  for (int i=0; i < pts.length; i++) {\n    String pt=pts[i];\n    if (i == 0) {\n      queryBuilder.append(\"(\");\n    }\n    if (i > 0 && i < pts.length) {\n      queryBuilder.append(\"OR \");\n    }\n    queryBuilder.append(\"jcr\\\\:primaryType\").append(':').append(partialEscape(pt)).append(\" \");\n    if (i == pts.length - 1) {\n      queryBuilder.append(\")\");\n      queryBuilder.append(' ');\n    }\n  }\n  Filter.PathRestriction pathRestriction=filter.getPathRestriction();\n  if (pathRestriction != null) {\n    String path=purgePath(filter);\n    String fieldName=configuration.getFieldForPathRestriction(pathRestriction);\n    if (fieldName != null) {\n      queryBuilder.append(fieldName);\n      queryBuilder.append(':');\n      queryBuilder.append(path);\n    }\n  }\n  if (queryBuilder.length() == 0) {\n    queryBuilder.append(\"*:*\");\n  }\n  String escapedQuery=queryBuilder.toString();\n  solrQuery.setQuery(escapedQuery);\n  if (log.isDebugEnabled()) {\n    log.debug(\"JCR query {} has been converted to Solr query {}\",filter.getQueryStatement(),solrQuery.toString());\n  }\n  return solrQuery;\n}\n",
                    "nodeType": "MethodDeclaration",
                    "astNodeNumber": 867,
                    "astHeight": 25
                }
            ],
            "currentLineData": {
                "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                "nodePosition": {
                    "charLength": 81,
                    "startLineNumber": 125,
                    "startColumnNumber": 20,
                    "endLineNumber": 125,
                    "endColumnNumber": 101
                },
                "nodeContext": "String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n",
                "nodeType": "VariableDeclarationStatement",
                "astNodeNumber": 18,
                "astHeight": 7
            },
            "tokenLength": 1,
            "type": "org.apache.jackrabbit.oak.spi.query.Filter.PropertyRestriction"
        },
        {
            "nodeContext": "pr",
            "nodeType": "SimpleName",
            "nodePosition": {
                "charLength": 2,
                "startLineNumber": 165,
                "startColumnNumber": 24,
                "endLineNumber": 165,
                "endColumnNumber": 26
            },
            "astNodeNumber": 1,
            "astHeight": 1,
            "parentDataList": [
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.MethodInvocation,expression]",
                    "nodePosition": {
                        "charLength": 15,
                        "startLineNumber": 165,
                        "startColumnNumber": 24,
                        "endLineNumber": 165,
                        "endColumnNumber": 39
                    },
                    "nodeContext": "pr.propertyName",
                    "nodeType": "QualifiedName",
                    "astNodeNumber": 3,
                    "astHeight": 2
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,expression]",
                    "nodePosition": {
                        "charLength": 29,
                        "startLineNumber": 165,
                        "startColumnNumber": 24,
                        "endLineNumber": 165,
                        "endColumnNumber": 53
                    },
                    "nodeContext": "pr.propertyName.contains(\"/\")",
                    "nodeType": "MethodInvocation",
                    "astNodeNumber": 6,
                    "astHeight": 3
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 167,
                        "startLineNumber": 165,
                        "startColumnNumber": 20,
                        "endLineNumber": 168,
                        "endColumnNumber": 21
                    },
                    "nodeContext": "if (pr.propertyName.contains(\"/\")) {\n  continue;\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 9,
                    "astHeight": 4
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 2798,
                        "startLineNumber": 164,
                        "startColumnNumber": 23,
                        "endLineNumber": 211,
                        "endColumnNumber": 17
                    },
                    "nodeContext": "{\n  if (pr.propertyName.contains(\"/\")) {\n    continue;\n  }\n  if (\"rep:excerpt\".equals(pr.propertyName)) {\n    continue;\n  }\n  String first=null;\n  if (pr.first != null) {\n    first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n  }\n  String last=null;\n  if (pr.last != null) {\n    last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n  }\n  String prField=configuration.getFieldForPropertyRestriction(pr);\n  CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n  if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n    queryBuilder.append(configuration.getPathField());\n    queryBuilder.append(':');\n    queryBuilder.append(first);\n  }\n else {\n    if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(first);\n    }\n else     if (pr.first == null && pr.last == null) {\n      if (!queryBuilder.toString().contains(fieldName + \":\")) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append('*');\n      }\n    }\n else     if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n    }\n else     if (pr.isLike) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n    }\n else {\n      throw new RuntimeException(\"[unexpected!] not handled case\");\n    }\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 312,
                    "astHeight": 18
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5508,
                        "startLineNumber": 124,
                        "startColumnNumber": 16,
                        "endLineNumber": 211,
                        "endColumnNumber": 17
                    },
                    "nodeContext": "if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n  String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n  if (isSupportedHttpRequest(nativeQueryString)) {\n    String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n    if (!\"select\".equals(requestHandlerString)) {\n      if (requestHandlerString.charAt(0) != '/') {\n        requestHandlerString=\"/\" + requestHandlerString;\n      }\n      solrQuery.setRequestHandler(requestHandlerString);\n    }\n    String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n    for (    String param : parameterString.split(\"&\")) {\n      String[] kv=param.split(\"=\");\n      if (kv.length != 2) {\n        throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n      }\n else {\n        if (\"stream.body\".equals(kv[0])) {\n          kv[0]=\"q\";\n          String mltFlString=\"mlt.fl=\";\n          int mltFlIndex=parameterString.indexOf(mltFlString);\n          if (mltFlIndex > -1) {\n            int beginIndex=mltFlIndex + mltFlString.length();\n            int endIndex=parameterString.indexOf('&',beginIndex);\n            String fields;\n            if (endIndex > beginIndex) {\n              fields=parameterString.substring(beginIndex,endIndex);\n            }\n else {\n              fields=parameterString.substring(beginIndex);\n            }\n            kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n          }\n        }\n        solrQuery.setParam(kv[0],kv[1]);\n      }\n    }\n    return solrQuery;\n  }\n else {\n    queryBuilder.append(nativeQueryString);\n  }\n}\n else {\n  if (pr.propertyName.contains(\"/\")) {\n    continue;\n  }\n  if (\"rep:excerpt\".equals(pr.propertyName)) {\n    continue;\n  }\n  String first=null;\n  if (pr.first != null) {\n    first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n  }\n  String last=null;\n  if (pr.last != null) {\n    last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n  }\n  String prField=configuration.getFieldForPropertyRestriction(pr);\n  CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n  if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n    queryBuilder.append(configuration.getPathField());\n    queryBuilder.append(':');\n    queryBuilder.append(first);\n  }\n else {\n    if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(first);\n    }\n else     if (pr.first == null && pr.last == null) {\n      if (!queryBuilder.toString().contains(fieldName + \":\")) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append('*');\n      }\n    }\n else     if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n    }\n else     if (pr.isLike) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n    }\n else {\n      throw new RuntimeException(\"[unexpected!] not handled case\");\n    }\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 546,
                    "astHeight": 19
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.EnhancedForStatement,body]",
                    "nodePosition": {
                        "charLength": 5622,
                        "startLineNumber": 122,
                        "startColumnNumber": 71,
                        "endLineNumber": 213,
                        "endColumnNumber": 13
                    },
                    "nodeContext": "{\n  if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n    String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n    if (isSupportedHttpRequest(nativeQueryString)) {\n      String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n      if (!\"select\".equals(requestHandlerString)) {\n        if (requestHandlerString.charAt(0) != '/') {\n          requestHandlerString=\"/\" + requestHandlerString;\n        }\n        solrQuery.setRequestHandler(requestHandlerString);\n      }\n      String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n      for (      String param : parameterString.split(\"&\")) {\n        String[] kv=param.split(\"=\");\n        if (kv.length != 2) {\n          throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n        }\n else {\n          if (\"stream.body\".equals(kv[0])) {\n            kv[0]=\"q\";\n            String mltFlString=\"mlt.fl=\";\n            int mltFlIndex=parameterString.indexOf(mltFlString);\n            if (mltFlIndex > -1) {\n              int beginIndex=mltFlIndex + mltFlString.length();\n              int endIndex=parameterString.indexOf('&',beginIndex);\n              String fields;\n              if (endIndex > beginIndex) {\n                fields=parameterString.substring(beginIndex,endIndex);\n              }\n else {\n                fields=parameterString.substring(beginIndex);\n              }\n              kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n            }\n          }\n          solrQuery.setParam(kv[0],kv[1]);\n        }\n      }\n      return solrQuery;\n    }\n else {\n      queryBuilder.append(nativeQueryString);\n    }\n  }\n else {\n    if (pr.propertyName.contains(\"/\")) {\n      continue;\n    }\n    if (\"rep:excerpt\".equals(pr.propertyName)) {\n      continue;\n    }\n    String first=null;\n    if (pr.first != null) {\n      first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n    }\n    String last=null;\n    if (pr.last != null) {\n      last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n    }\n    String prField=configuration.getFieldForPropertyRestriction(pr);\n    CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n    if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n      queryBuilder.append(configuration.getPathField());\n      queryBuilder.append(':');\n      queryBuilder.append(first);\n    }\n else {\n      if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(first);\n      }\n else       if (pr.first == null && pr.last == null) {\n        if (!queryBuilder.toString().contains(fieldName + \":\")) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append('*');\n        }\n      }\n else       if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n      }\n else       if (pr.isLike) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n      }\n else {\n        throw new RuntimeException(\"[unexpected!] not handled case\");\n      }\n    }\n  }\n  queryBuilder.append(\" \");\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 552,
                    "astHeight": 20
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5681,
                        "startLineNumber": 122,
                        "startColumnNumber": 12,
                        "endLineNumber": 213,
                        "endColumnNumber": 13
                    },
                    "nodeContext": "for (Filter.PropertyRestriction pr : propertyRestrictions) {\n  if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n    String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n    if (isSupportedHttpRequest(nativeQueryString)) {\n      String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n      if (!\"select\".equals(requestHandlerString)) {\n        if (requestHandlerString.charAt(0) != '/') {\n          requestHandlerString=\"/\" + requestHandlerString;\n        }\n        solrQuery.setRequestHandler(requestHandlerString);\n      }\n      String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n      for (      String param : parameterString.split(\"&\")) {\n        String[] kv=param.split(\"=\");\n        if (kv.length != 2) {\n          throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n        }\n else {\n          if (\"stream.body\".equals(kv[0])) {\n            kv[0]=\"q\";\n            String mltFlString=\"mlt.fl=\";\n            int mltFlIndex=parameterString.indexOf(mltFlString);\n            if (mltFlIndex > -1) {\n              int beginIndex=mltFlIndex + mltFlString.length();\n              int endIndex=parameterString.indexOf('&',beginIndex);\n              String fields;\n              if (endIndex > beginIndex) {\n                fields=parameterString.substring(beginIndex,endIndex);\n              }\n else {\n                fields=parameterString.substring(beginIndex);\n              }\n              kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n            }\n          }\n          solrQuery.setParam(kv[0],kv[1]);\n        }\n      }\n      return solrQuery;\n    }\n else {\n      queryBuilder.append(nativeQueryString);\n    }\n  }\n else {\n    if (pr.propertyName.contains(\"/\")) {\n      continue;\n    }\n    if (\"rep:excerpt\".equals(pr.propertyName)) {\n      continue;\n    }\n    String first=null;\n    if (pr.first != null) {\n      first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n    }\n    String last=null;\n    if (pr.last != null) {\n      last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n    }\n    String prField=configuration.getFieldForPropertyRestriction(pr);\n    CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n    if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n      queryBuilder.append(configuration.getPathField());\n      queryBuilder.append(':');\n      queryBuilder.append(first);\n    }\n else {\n      if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(first);\n      }\n else       if (pr.first == null && pr.last == null) {\n        if (!queryBuilder.toString().contains(fieldName + \":\")) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append('*');\n        }\n      }\n else       if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n      }\n else       if (pr.isLike) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n      }\n else {\n        throw new RuntimeException(\"[unexpected!] not handled case\");\n      }\n    }\n  }\n  queryBuilder.append(\" \");\n}\n",
                    "nodeType": "EnhancedForStatement",
                    "astNodeNumber": 560,
                    "astHeight": 21
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,thenStatement]",
                    "nodePosition": {
                        "charLength": 5705,
                        "startLineNumber": 121,
                        "startColumnNumber": 77,
                        "endLineNumber": 214,
                        "endColumnNumber": 9
                    },
                    "nodeContext": "{\n  for (  Filter.PropertyRestriction pr : propertyRestrictions) {\n    if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n      String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n      if (isSupportedHttpRequest(nativeQueryString)) {\n        String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n        if (!\"select\".equals(requestHandlerString)) {\n          if (requestHandlerString.charAt(0) != '/') {\n            requestHandlerString=\"/\" + requestHandlerString;\n          }\n          solrQuery.setRequestHandler(requestHandlerString);\n        }\n        String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n        for (        String param : parameterString.split(\"&\")) {\n          String[] kv=param.split(\"=\");\n          if (kv.length != 2) {\n            throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n          }\n else {\n            if (\"stream.body\".equals(kv[0])) {\n              kv[0]=\"q\";\n              String mltFlString=\"mlt.fl=\";\n              int mltFlIndex=parameterString.indexOf(mltFlString);\n              if (mltFlIndex > -1) {\n                int beginIndex=mltFlIndex + mltFlString.length();\n                int endIndex=parameterString.indexOf('&',beginIndex);\n                String fields;\n                if (endIndex > beginIndex) {\n                  fields=parameterString.substring(beginIndex,endIndex);\n                }\n else {\n                  fields=parameterString.substring(beginIndex);\n                }\n                kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n              }\n            }\n            solrQuery.setParam(kv[0],kv[1]);\n          }\n        }\n        return solrQuery;\n      }\n else {\n        queryBuilder.append(nativeQueryString);\n      }\n    }\n else {\n      if (pr.propertyName.contains(\"/\")) {\n        continue;\n      }\n      if (\"rep:excerpt\".equals(pr.propertyName)) {\n        continue;\n      }\n      String first=null;\n      if (pr.first != null) {\n        first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n      }\n      String last=null;\n      if (pr.last != null) {\n        last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n      }\n      String prField=configuration.getFieldForPropertyRestriction(pr);\n      CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n      if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n        queryBuilder.append(configuration.getPathField());\n        queryBuilder.append(':');\n        queryBuilder.append(first);\n      }\n else {\n        if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(first);\n        }\n else         if (pr.first == null && pr.last == null) {\n          if (!queryBuilder.toString().contains(fieldName + \":\")) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append('*');\n          }\n        }\n else         if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n        }\n else         if (pr.isLike) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n        }\n else {\n          throw new RuntimeException(\"[unexpected!] not handled case\");\n        }\n      }\n    }\n    queryBuilder.append(\" \");\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 561,
                    "astHeight": 22
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5774,
                        "startLineNumber": 121,
                        "startColumnNumber": 8,
                        "endLineNumber": 214,
                        "endColumnNumber": 9
                    },
                    "nodeContext": "if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n  for (  Filter.PropertyRestriction pr : propertyRestrictions) {\n    if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n      String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n      if (isSupportedHttpRequest(nativeQueryString)) {\n        String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n        if (!\"select\".equals(requestHandlerString)) {\n          if (requestHandlerString.charAt(0) != '/') {\n            requestHandlerString=\"/\" + requestHandlerString;\n          }\n          solrQuery.setRequestHandler(requestHandlerString);\n        }\n        String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n        for (        String param : parameterString.split(\"&\")) {\n          String[] kv=param.split(\"=\");\n          if (kv.length != 2) {\n            throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n          }\n else {\n            if (\"stream.body\".equals(kv[0])) {\n              kv[0]=\"q\";\n              String mltFlString=\"mlt.fl=\";\n              int mltFlIndex=parameterString.indexOf(mltFlString);\n              if (mltFlIndex > -1) {\n                int beginIndex=mltFlIndex + mltFlString.length();\n                int endIndex=parameterString.indexOf('&',beginIndex);\n                String fields;\n                if (endIndex > beginIndex) {\n                  fields=parameterString.substring(beginIndex,endIndex);\n                }\n else {\n                  fields=parameterString.substring(beginIndex);\n                }\n                kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n              }\n            }\n            solrQuery.setParam(kv[0],kv[1]);\n          }\n        }\n        return solrQuery;\n      }\n else {\n        queryBuilder.append(nativeQueryString);\n      }\n    }\n else {\n      if (pr.propertyName.contains(\"/\")) {\n        continue;\n      }\n      if (\"rep:excerpt\".equals(pr.propertyName)) {\n        continue;\n      }\n      String first=null;\n      if (pr.first != null) {\n        first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n      }\n      String last=null;\n      if (pr.last != null) {\n        last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n      }\n      String prField=configuration.getFieldForPropertyRestriction(pr);\n      CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n      if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n        queryBuilder.append(configuration.getPathField());\n        queryBuilder.append(':');\n        queryBuilder.append(first);\n      }\n else {\n        if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(first);\n        }\n else         if (pr.first == null && pr.last == null) {\n          if (!queryBuilder.toString().contains(fieldName + \":\")) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append('*');\n          }\n        }\n else         if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n        }\n else         if (pr.isLike) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n        }\n else {\n          throw new RuntimeException(\"[unexpected!] not handled case\");\n        }\n      }\n    }\n    queryBuilder.append(\" \");\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 570,
                    "astHeight": 23
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.MethodDeclaration,body]",
                    "nodePosition": {
                        "charLength": 7985,
                        "startLineNumber": 103,
                        "startColumnNumber": 46,
                        "endLineNumber": 255,
                        "endColumnNumber": 5
                    },
                    "nodeContext": "{\n  SolrQuery solrQuery=new SolrQuery();\n  setDefaults(solrQuery);\n  StringBuilder queryBuilder=new StringBuilder();\n  if (filter.getFullTextConstraint() != null) {\n    queryBuilder.append(getFullTextQuery(filter.getFullTextConstraint()));\n    queryBuilder.append(' ');\n  }\n else   if (filter.getFulltextConditions() != null) {\n    Collection<String> fulltextConditions=filter.getFulltextConditions();\n    for (    String fulltextCondition : fulltextConditions) {\n      queryBuilder.append(fulltextCondition).append(\" \");\n    }\n  }\n  Collection<Filter.PropertyRestriction> propertyRestrictions=filter.getPropertyRestrictions();\n  if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n    for (    Filter.PropertyRestriction pr : propertyRestrictions) {\n      if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n        String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n        if (isSupportedHttpRequest(nativeQueryString)) {\n          String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n          if (!\"select\".equals(requestHandlerString)) {\n            if (requestHandlerString.charAt(0) != '/') {\n              requestHandlerString=\"/\" + requestHandlerString;\n            }\n            solrQuery.setRequestHandler(requestHandlerString);\n          }\n          String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n          for (          String param : parameterString.split(\"&\")) {\n            String[] kv=param.split(\"=\");\n            if (kv.length != 2) {\n              throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n            }\n else {\n              if (\"stream.body\".equals(kv[0])) {\n                kv[0]=\"q\";\n                String mltFlString=\"mlt.fl=\";\n                int mltFlIndex=parameterString.indexOf(mltFlString);\n                if (mltFlIndex > -1) {\n                  int beginIndex=mltFlIndex + mltFlString.length();\n                  int endIndex=parameterString.indexOf('&',beginIndex);\n                  String fields;\n                  if (endIndex > beginIndex) {\n                    fields=parameterString.substring(beginIndex,endIndex);\n                  }\n else {\n                    fields=parameterString.substring(beginIndex);\n                  }\n                  kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n                }\n              }\n              solrQuery.setParam(kv[0],kv[1]);\n            }\n          }\n          return solrQuery;\n        }\n else {\n          queryBuilder.append(nativeQueryString);\n        }\n      }\n else {\n        if (pr.propertyName.contains(\"/\")) {\n          continue;\n        }\n        if (\"rep:excerpt\".equals(pr.propertyName)) {\n          continue;\n        }\n        String first=null;\n        if (pr.first != null) {\n          first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n        }\n        String last=null;\n        if (pr.last != null) {\n          last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n        }\n        String prField=configuration.getFieldForPropertyRestriction(pr);\n        CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n        if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n          queryBuilder.append(configuration.getPathField());\n          queryBuilder.append(':');\n          queryBuilder.append(first);\n        }\n else {\n          if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(first);\n          }\n else           if (pr.first == null && pr.last == null) {\n            if (!queryBuilder.toString().contains(fieldName + \":\")) {\n              queryBuilder.append(fieldName).append(':');\n              queryBuilder.append('*');\n            }\n          }\n else           if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n          }\n else           if (pr.isLike) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n          }\n else {\n            throw new RuntimeException(\"[unexpected!] not handled case\");\n          }\n        }\n      }\n      queryBuilder.append(\" \");\n    }\n  }\n  String[] pts=filter.getPrimaryTypes().toArray(new String[filter.getPrimaryTypes().size()]);\n  for (int i=0; i < pts.length; i++) {\n    String pt=pts[i];\n    if (i == 0) {\n      queryBuilder.append(\"(\");\n    }\n    if (i > 0 && i < pts.length) {\n      queryBuilder.append(\"OR \");\n    }\n    queryBuilder.append(\"jcr\\\\:primaryType\").append(':').append(partialEscape(pt)).append(\" \");\n    if (i == pts.length - 1) {\n      queryBuilder.append(\")\");\n      queryBuilder.append(' ');\n    }\n  }\n  Filter.PathRestriction pathRestriction=filter.getPathRestriction();\n  if (pathRestriction != null) {\n    String path=purgePath(filter);\n    String fieldName=configuration.getFieldForPathRestriction(pathRestriction);\n    if (fieldName != null) {\n      queryBuilder.append(fieldName);\n      queryBuilder.append(':');\n      queryBuilder.append(path);\n    }\n  }\n  if (queryBuilder.length() == 0) {\n    queryBuilder.append(\"*:*\");\n  }\n  String escapedQuery=queryBuilder.toString();\n  solrQuery.setQuery(escapedQuery);\n  if (log.isDebugEnabled()) {\n    log.debug(\"JCR query {} has been converted to Solr query {}\",filter.getQueryStatement(),solrQuery.toString());\n  }\n  return solrQuery;\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 858,
                    "astHeight": 24
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.TypeDeclaration,bodyDeclarations]",
                    "nodePosition": {
                        "charLength": 8027,
                        "startLineNumber": 103,
                        "startColumnNumber": 4,
                        "endLineNumber": 255,
                        "endColumnNumber": 5
                    },
                    "nodeContext": "private SolrQuery getQuery(Filter filter){\n  SolrQuery solrQuery=new SolrQuery();\n  setDefaults(solrQuery);\n  StringBuilder queryBuilder=new StringBuilder();\n  if (filter.getFullTextConstraint() != null) {\n    queryBuilder.append(getFullTextQuery(filter.getFullTextConstraint()));\n    queryBuilder.append(' ');\n  }\n else   if (filter.getFulltextConditions() != null) {\n    Collection<String> fulltextConditions=filter.getFulltextConditions();\n    for (    String fulltextCondition : fulltextConditions) {\n      queryBuilder.append(fulltextCondition).append(\" \");\n    }\n  }\n  Collection<Filter.PropertyRestriction> propertyRestrictions=filter.getPropertyRestrictions();\n  if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n    for (    Filter.PropertyRestriction pr : propertyRestrictions) {\n      if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n        String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n        if (isSupportedHttpRequest(nativeQueryString)) {\n          String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n          if (!\"select\".equals(requestHandlerString)) {\n            if (requestHandlerString.charAt(0) != '/') {\n              requestHandlerString=\"/\" + requestHandlerString;\n            }\n            solrQuery.setRequestHandler(requestHandlerString);\n          }\n          String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n          for (          String param : parameterString.split(\"&\")) {\n            String[] kv=param.split(\"=\");\n            if (kv.length != 2) {\n              throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n            }\n else {\n              if (\"stream.body\".equals(kv[0])) {\n                kv[0]=\"q\";\n                String mltFlString=\"mlt.fl=\";\n                int mltFlIndex=parameterString.indexOf(mltFlString);\n                if (mltFlIndex > -1) {\n                  int beginIndex=mltFlIndex + mltFlString.length();\n                  int endIndex=parameterString.indexOf('&',beginIndex);\n                  String fields;\n                  if (endIndex > beginIndex) {\n                    fields=parameterString.substring(beginIndex,endIndex);\n                  }\n else {\n                    fields=parameterString.substring(beginIndex);\n                  }\n                  kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n                }\n              }\n              solrQuery.setParam(kv[0],kv[1]);\n            }\n          }\n          return solrQuery;\n        }\n else {\n          queryBuilder.append(nativeQueryString);\n        }\n      }\n else {\n        if (pr.propertyName.contains(\"/\")) {\n          continue;\n        }\n        if (\"rep:excerpt\".equals(pr.propertyName)) {\n          continue;\n        }\n        String first=null;\n        if (pr.first != null) {\n          first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n        }\n        String last=null;\n        if (pr.last != null) {\n          last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n        }\n        String prField=configuration.getFieldForPropertyRestriction(pr);\n        CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n        if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n          queryBuilder.append(configuration.getPathField());\n          queryBuilder.append(':');\n          queryBuilder.append(first);\n        }\n else {\n          if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(first);\n          }\n else           if (pr.first == null && pr.last == null) {\n            if (!queryBuilder.toString().contains(fieldName + \":\")) {\n              queryBuilder.append(fieldName).append(':');\n              queryBuilder.append('*');\n            }\n          }\n else           if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n          }\n else           if (pr.isLike) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n          }\n else {\n            throw new RuntimeException(\"[unexpected!] not handled case\");\n          }\n        }\n      }\n      queryBuilder.append(\" \");\n    }\n  }\n  String[] pts=filter.getPrimaryTypes().toArray(new String[filter.getPrimaryTypes().size()]);\n  for (int i=0; i < pts.length; i++) {\n    String pt=pts[i];\n    if (i == 0) {\n      queryBuilder.append(\"(\");\n    }\n    if (i > 0 && i < pts.length) {\n      queryBuilder.append(\"OR \");\n    }\n    queryBuilder.append(\"jcr\\\\:primaryType\").append(':').append(partialEscape(pt)).append(\" \");\n    if (i == pts.length - 1) {\n      queryBuilder.append(\")\");\n      queryBuilder.append(' ');\n    }\n  }\n  Filter.PathRestriction pathRestriction=filter.getPathRestriction();\n  if (pathRestriction != null) {\n    String path=purgePath(filter);\n    String fieldName=configuration.getFieldForPathRestriction(pathRestriction);\n    if (fieldName != null) {\n      queryBuilder.append(fieldName);\n      queryBuilder.append(':');\n      queryBuilder.append(path);\n    }\n  }\n  if (queryBuilder.length() == 0) {\n    queryBuilder.append(\"*:*\");\n  }\n  String escapedQuery=queryBuilder.toString();\n  solrQuery.setQuery(escapedQuery);\n  if (log.isDebugEnabled()) {\n    log.debug(\"JCR query {} has been converted to Solr query {}\",filter.getQueryStatement(),solrQuery.toString());\n  }\n  return solrQuery;\n}\n",
                    "nodeType": "MethodDeclaration",
                    "astNodeNumber": 867,
                    "astHeight": 25
                }
            ],
            "currentLineData": {
                "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,expression]",
                "nodePosition": {
                    "charLength": 29,
                    "startLineNumber": 165,
                    "startColumnNumber": 24,
                    "endLineNumber": 165,
                    "endColumnNumber": 53
                },
                "nodeContext": "pr.propertyName.contains(\"/\")",
                "nodeType": "MethodInvocation",
                "astNodeNumber": 6,
                "astHeight": 3
            },
            "tokenLength": 1,
            "type": "org.apache.jackrabbit.oak.spi.query.Filter.PropertyRestriction"
        },
        {
            "nodeContext": "pr",
            "nodeType": "SimpleName",
            "nodePosition": {
                "charLength": 2,
                "startLineNumber": 170,
                "startColumnNumber": 45,
                "endLineNumber": 170,
                "endColumnNumber": 47
            },
            "astNodeNumber": 1,
            "astHeight": 1,
            "parentDataList": [
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.MethodInvocation,arguments]",
                    "nodePosition": {
                        "charLength": 15,
                        "startLineNumber": 170,
                        "startColumnNumber": 45,
                        "endLineNumber": 170,
                        "endColumnNumber": 60
                    },
                    "nodeContext": "pr.propertyName",
                    "nodeType": "QualifiedName",
                    "astNodeNumber": 3,
                    "astHeight": 2
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,expression]",
                    "nodePosition": {
                        "charLength": 37,
                        "startLineNumber": 170,
                        "startColumnNumber": 24,
                        "endLineNumber": 170,
                        "endColumnNumber": 61
                    },
                    "nodeContext": "\"rep:excerpt\".equals(pr.propertyName)",
                    "nodeType": "MethodInvocation",
                    "astNodeNumber": 6,
                    "astHeight": 3
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 100,
                        "startLineNumber": 170,
                        "startColumnNumber": 20,
                        "endLineNumber": 172,
                        "endColumnNumber": 21
                    },
                    "nodeContext": "if (\"rep:excerpt\".equals(pr.propertyName)) {\n  continue;\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 9,
                    "astHeight": 4
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 2798,
                        "startLineNumber": 164,
                        "startColumnNumber": 23,
                        "endLineNumber": 211,
                        "endColumnNumber": 17
                    },
                    "nodeContext": "{\n  if (pr.propertyName.contains(\"/\")) {\n    continue;\n  }\n  if (\"rep:excerpt\".equals(pr.propertyName)) {\n    continue;\n  }\n  String first=null;\n  if (pr.first != null) {\n    first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n  }\n  String last=null;\n  if (pr.last != null) {\n    last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n  }\n  String prField=configuration.getFieldForPropertyRestriction(pr);\n  CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n  if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n    queryBuilder.append(configuration.getPathField());\n    queryBuilder.append(':');\n    queryBuilder.append(first);\n  }\n else {\n    if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(first);\n    }\n else     if (pr.first == null && pr.last == null) {\n      if (!queryBuilder.toString().contains(fieldName + \":\")) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append('*');\n      }\n    }\n else     if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n    }\n else     if (pr.isLike) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n    }\n else {\n      throw new RuntimeException(\"[unexpected!] not handled case\");\n    }\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 312,
                    "astHeight": 18
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5508,
                        "startLineNumber": 124,
                        "startColumnNumber": 16,
                        "endLineNumber": 211,
                        "endColumnNumber": 17
                    },
                    "nodeContext": "if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n  String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n  if (isSupportedHttpRequest(nativeQueryString)) {\n    String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n    if (!\"select\".equals(requestHandlerString)) {\n      if (requestHandlerString.charAt(0) != '/') {\n        requestHandlerString=\"/\" + requestHandlerString;\n      }\n      solrQuery.setRequestHandler(requestHandlerString);\n    }\n    String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n    for (    String param : parameterString.split(\"&\")) {\n      String[] kv=param.split(\"=\");\n      if (kv.length != 2) {\n        throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n      }\n else {\n        if (\"stream.body\".equals(kv[0])) {\n          kv[0]=\"q\";\n          String mltFlString=\"mlt.fl=\";\n          int mltFlIndex=parameterString.indexOf(mltFlString);\n          if (mltFlIndex > -1) {\n            int beginIndex=mltFlIndex + mltFlString.length();\n            int endIndex=parameterString.indexOf('&',beginIndex);\n            String fields;\n            if (endIndex > beginIndex) {\n              fields=parameterString.substring(beginIndex,endIndex);\n            }\n else {\n              fields=parameterString.substring(beginIndex);\n            }\n            kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n          }\n        }\n        solrQuery.setParam(kv[0],kv[1]);\n      }\n    }\n    return solrQuery;\n  }\n else {\n    queryBuilder.append(nativeQueryString);\n  }\n}\n else {\n  if (pr.propertyName.contains(\"/\")) {\n    continue;\n  }\n  if (\"rep:excerpt\".equals(pr.propertyName)) {\n    continue;\n  }\n  String first=null;\n  if (pr.first != null) {\n    first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n  }\n  String last=null;\n  if (pr.last != null) {\n    last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n  }\n  String prField=configuration.getFieldForPropertyRestriction(pr);\n  CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n  if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n    queryBuilder.append(configuration.getPathField());\n    queryBuilder.append(':');\n    queryBuilder.append(first);\n  }\n else {\n    if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(first);\n    }\n else     if (pr.first == null && pr.last == null) {\n      if (!queryBuilder.toString().contains(fieldName + \":\")) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append('*');\n      }\n    }\n else     if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n    }\n else     if (pr.isLike) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n    }\n else {\n      throw new RuntimeException(\"[unexpected!] not handled case\");\n    }\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 546,
                    "astHeight": 19
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.EnhancedForStatement,body]",
                    "nodePosition": {
                        "charLength": 5622,
                        "startLineNumber": 122,
                        "startColumnNumber": 71,
                        "endLineNumber": 213,
                        "endColumnNumber": 13
                    },
                    "nodeContext": "{\n  if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n    String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n    if (isSupportedHttpRequest(nativeQueryString)) {\n      String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n      if (!\"select\".equals(requestHandlerString)) {\n        if (requestHandlerString.charAt(0) != '/') {\n          requestHandlerString=\"/\" + requestHandlerString;\n        }\n        solrQuery.setRequestHandler(requestHandlerString);\n      }\n      String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n      for (      String param : parameterString.split(\"&\")) {\n        String[] kv=param.split(\"=\");\n        if (kv.length != 2) {\n          throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n        }\n else {\n          if (\"stream.body\".equals(kv[0])) {\n            kv[0]=\"q\";\n            String mltFlString=\"mlt.fl=\";\n            int mltFlIndex=parameterString.indexOf(mltFlString);\n            if (mltFlIndex > -1) {\n              int beginIndex=mltFlIndex + mltFlString.length();\n              int endIndex=parameterString.indexOf('&',beginIndex);\n              String fields;\n              if (endIndex > beginIndex) {\n                fields=parameterString.substring(beginIndex,endIndex);\n              }\n else {\n                fields=parameterString.substring(beginIndex);\n              }\n              kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n            }\n          }\n          solrQuery.setParam(kv[0],kv[1]);\n        }\n      }\n      return solrQuery;\n    }\n else {\n      queryBuilder.append(nativeQueryString);\n    }\n  }\n else {\n    if (pr.propertyName.contains(\"/\")) {\n      continue;\n    }\n    if (\"rep:excerpt\".equals(pr.propertyName)) {\n      continue;\n    }\n    String first=null;\n    if (pr.first != null) {\n      first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n    }\n    String last=null;\n    if (pr.last != null) {\n      last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n    }\n    String prField=configuration.getFieldForPropertyRestriction(pr);\n    CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n    if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n      queryBuilder.append(configuration.getPathField());\n      queryBuilder.append(':');\n      queryBuilder.append(first);\n    }\n else {\n      if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(first);\n      }\n else       if (pr.first == null && pr.last == null) {\n        if (!queryBuilder.toString().contains(fieldName + \":\")) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append('*');\n        }\n      }\n else       if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n      }\n else       if (pr.isLike) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n      }\n else {\n        throw new RuntimeException(\"[unexpected!] not handled case\");\n      }\n    }\n  }\n  queryBuilder.append(\" \");\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 552,
                    "astHeight": 20
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5681,
                        "startLineNumber": 122,
                        "startColumnNumber": 12,
                        "endLineNumber": 213,
                        "endColumnNumber": 13
                    },
                    "nodeContext": "for (Filter.PropertyRestriction pr : propertyRestrictions) {\n  if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n    String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n    if (isSupportedHttpRequest(nativeQueryString)) {\n      String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n      if (!\"select\".equals(requestHandlerString)) {\n        if (requestHandlerString.charAt(0) != '/') {\n          requestHandlerString=\"/\" + requestHandlerString;\n        }\n        solrQuery.setRequestHandler(requestHandlerString);\n      }\n      String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n      for (      String param : parameterString.split(\"&\")) {\n        String[] kv=param.split(\"=\");\n        if (kv.length != 2) {\n          throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n        }\n else {\n          if (\"stream.body\".equals(kv[0])) {\n            kv[0]=\"q\";\n            String mltFlString=\"mlt.fl=\";\n            int mltFlIndex=parameterString.indexOf(mltFlString);\n            if (mltFlIndex > -1) {\n              int beginIndex=mltFlIndex + mltFlString.length();\n              int endIndex=parameterString.indexOf('&',beginIndex);\n              String fields;\n              if (endIndex > beginIndex) {\n                fields=parameterString.substring(beginIndex,endIndex);\n              }\n else {\n                fields=parameterString.substring(beginIndex);\n              }\n              kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n            }\n          }\n          solrQuery.setParam(kv[0],kv[1]);\n        }\n      }\n      return solrQuery;\n    }\n else {\n      queryBuilder.append(nativeQueryString);\n    }\n  }\n else {\n    if (pr.propertyName.contains(\"/\")) {\n      continue;\n    }\n    if (\"rep:excerpt\".equals(pr.propertyName)) {\n      continue;\n    }\n    String first=null;\n    if (pr.first != null) {\n      first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n    }\n    String last=null;\n    if (pr.last != null) {\n      last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n    }\n    String prField=configuration.getFieldForPropertyRestriction(pr);\n    CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n    if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n      queryBuilder.append(configuration.getPathField());\n      queryBuilder.append(':');\n      queryBuilder.append(first);\n    }\n else {\n      if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(first);\n      }\n else       if (pr.first == null && pr.last == null) {\n        if (!queryBuilder.toString().contains(fieldName + \":\")) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append('*');\n        }\n      }\n else       if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n      }\n else       if (pr.isLike) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n      }\n else {\n        throw new RuntimeException(\"[unexpected!] not handled case\");\n      }\n    }\n  }\n  queryBuilder.append(\" \");\n}\n",
                    "nodeType": "EnhancedForStatement",
                    "astNodeNumber": 560,
                    "astHeight": 21
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,thenStatement]",
                    "nodePosition": {
                        "charLength": 5705,
                        "startLineNumber": 121,
                        "startColumnNumber": 77,
                        "endLineNumber": 214,
                        "endColumnNumber": 9
                    },
                    "nodeContext": "{\n  for (  Filter.PropertyRestriction pr : propertyRestrictions) {\n    if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n      String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n      if (isSupportedHttpRequest(nativeQueryString)) {\n        String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n        if (!\"select\".equals(requestHandlerString)) {\n          if (requestHandlerString.charAt(0) != '/') {\n            requestHandlerString=\"/\" + requestHandlerString;\n          }\n          solrQuery.setRequestHandler(requestHandlerString);\n        }\n        String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n        for (        String param : parameterString.split(\"&\")) {\n          String[] kv=param.split(\"=\");\n          if (kv.length != 2) {\n            throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n          }\n else {\n            if (\"stream.body\".equals(kv[0])) {\n              kv[0]=\"q\";\n              String mltFlString=\"mlt.fl=\";\n              int mltFlIndex=parameterString.indexOf(mltFlString);\n              if (mltFlIndex > -1) {\n                int beginIndex=mltFlIndex + mltFlString.length();\n                int endIndex=parameterString.indexOf('&',beginIndex);\n                String fields;\n                if (endIndex > beginIndex) {\n                  fields=parameterString.substring(beginIndex,endIndex);\n                }\n else {\n                  fields=parameterString.substring(beginIndex);\n                }\n                kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n              }\n            }\n            solrQuery.setParam(kv[0],kv[1]);\n          }\n        }\n        return solrQuery;\n      }\n else {\n        queryBuilder.append(nativeQueryString);\n      }\n    }\n else {\n      if (pr.propertyName.contains(\"/\")) {\n        continue;\n      }\n      if (\"rep:excerpt\".equals(pr.propertyName)) {\n        continue;\n      }\n      String first=null;\n      if (pr.first != null) {\n        first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n      }\n      String last=null;\n      if (pr.last != null) {\n        last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n      }\n      String prField=configuration.getFieldForPropertyRestriction(pr);\n      CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n      if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n        queryBuilder.append(configuration.getPathField());\n        queryBuilder.append(':');\n        queryBuilder.append(first);\n      }\n else {\n        if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(first);\n        }\n else         if (pr.first == null && pr.last == null) {\n          if (!queryBuilder.toString().contains(fieldName + \":\")) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append('*');\n          }\n        }\n else         if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n        }\n else         if (pr.isLike) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n        }\n else {\n          throw new RuntimeException(\"[unexpected!] not handled case\");\n        }\n      }\n    }\n    queryBuilder.append(\" \");\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 561,
                    "astHeight": 22
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5774,
                        "startLineNumber": 121,
                        "startColumnNumber": 8,
                        "endLineNumber": 214,
                        "endColumnNumber": 9
                    },
                    "nodeContext": "if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n  for (  Filter.PropertyRestriction pr : propertyRestrictions) {\n    if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n      String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n      if (isSupportedHttpRequest(nativeQueryString)) {\n        String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n        if (!\"select\".equals(requestHandlerString)) {\n          if (requestHandlerString.charAt(0) != '/') {\n            requestHandlerString=\"/\" + requestHandlerString;\n          }\n          solrQuery.setRequestHandler(requestHandlerString);\n        }\n        String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n        for (        String param : parameterString.split(\"&\")) {\n          String[] kv=param.split(\"=\");\n          if (kv.length != 2) {\n            throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n          }\n else {\n            if (\"stream.body\".equals(kv[0])) {\n              kv[0]=\"q\";\n              String mltFlString=\"mlt.fl=\";\n              int mltFlIndex=parameterString.indexOf(mltFlString);\n              if (mltFlIndex > -1) {\n                int beginIndex=mltFlIndex + mltFlString.length();\n                int endIndex=parameterString.indexOf('&',beginIndex);\n                String fields;\n                if (endIndex > beginIndex) {\n                  fields=parameterString.substring(beginIndex,endIndex);\n                }\n else {\n                  fields=parameterString.substring(beginIndex);\n                }\n                kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n              }\n            }\n            solrQuery.setParam(kv[0],kv[1]);\n          }\n        }\n        return solrQuery;\n      }\n else {\n        queryBuilder.append(nativeQueryString);\n      }\n    }\n else {\n      if (pr.propertyName.contains(\"/\")) {\n        continue;\n      }\n      if (\"rep:excerpt\".equals(pr.propertyName)) {\n        continue;\n      }\n      String first=null;\n      if (pr.first != null) {\n        first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n      }\n      String last=null;\n      if (pr.last != null) {\n        last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n      }\n      String prField=configuration.getFieldForPropertyRestriction(pr);\n      CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n      if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n        queryBuilder.append(configuration.getPathField());\n        queryBuilder.append(':');\n        queryBuilder.append(first);\n      }\n else {\n        if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(first);\n        }\n else         if (pr.first == null && pr.last == null) {\n          if (!queryBuilder.toString().contains(fieldName + \":\")) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append('*');\n          }\n        }\n else         if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n        }\n else         if (pr.isLike) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n        }\n else {\n          throw new RuntimeException(\"[unexpected!] not handled case\");\n        }\n      }\n    }\n    queryBuilder.append(\" \");\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 570,
                    "astHeight": 23
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.MethodDeclaration,body]",
                    "nodePosition": {
                        "charLength": 7985,
                        "startLineNumber": 103,
                        "startColumnNumber": 46,
                        "endLineNumber": 255,
                        "endColumnNumber": 5
                    },
                    "nodeContext": "{\n  SolrQuery solrQuery=new SolrQuery();\n  setDefaults(solrQuery);\n  StringBuilder queryBuilder=new StringBuilder();\n  if (filter.getFullTextConstraint() != null) {\n    queryBuilder.append(getFullTextQuery(filter.getFullTextConstraint()));\n    queryBuilder.append(' ');\n  }\n else   if (filter.getFulltextConditions() != null) {\n    Collection<String> fulltextConditions=filter.getFulltextConditions();\n    for (    String fulltextCondition : fulltextConditions) {\n      queryBuilder.append(fulltextCondition).append(\" \");\n    }\n  }\n  Collection<Filter.PropertyRestriction> propertyRestrictions=filter.getPropertyRestrictions();\n  if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n    for (    Filter.PropertyRestriction pr : propertyRestrictions) {\n      if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n        String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n        if (isSupportedHttpRequest(nativeQueryString)) {\n          String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n          if (!\"select\".equals(requestHandlerString)) {\n            if (requestHandlerString.charAt(0) != '/') {\n              requestHandlerString=\"/\" + requestHandlerString;\n            }\n            solrQuery.setRequestHandler(requestHandlerString);\n          }\n          String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n          for (          String param : parameterString.split(\"&\")) {\n            String[] kv=param.split(\"=\");\n            if (kv.length != 2) {\n              throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n            }\n else {\n              if (\"stream.body\".equals(kv[0])) {\n                kv[0]=\"q\";\n                String mltFlString=\"mlt.fl=\";\n                int mltFlIndex=parameterString.indexOf(mltFlString);\n                if (mltFlIndex > -1) {\n                  int beginIndex=mltFlIndex + mltFlString.length();\n                  int endIndex=parameterString.indexOf('&',beginIndex);\n                  String fields;\n                  if (endIndex > beginIndex) {\n                    fields=parameterString.substring(beginIndex,endIndex);\n                  }\n else {\n                    fields=parameterString.substring(beginIndex);\n                  }\n                  kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n                }\n              }\n              solrQuery.setParam(kv[0],kv[1]);\n            }\n          }\n          return solrQuery;\n        }\n else {\n          queryBuilder.append(nativeQueryString);\n        }\n      }\n else {\n        if (pr.propertyName.contains(\"/\")) {\n          continue;\n        }\n        if (\"rep:excerpt\".equals(pr.propertyName)) {\n          continue;\n        }\n        String first=null;\n        if (pr.first != null) {\n          first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n        }\n        String last=null;\n        if (pr.last != null) {\n          last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n        }\n        String prField=configuration.getFieldForPropertyRestriction(pr);\n        CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n        if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n          queryBuilder.append(configuration.getPathField());\n          queryBuilder.append(':');\n          queryBuilder.append(first);\n        }\n else {\n          if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(first);\n          }\n else           if (pr.first == null && pr.last == null) {\n            if (!queryBuilder.toString().contains(fieldName + \":\")) {\n              queryBuilder.append(fieldName).append(':');\n              queryBuilder.append('*');\n            }\n          }\n else           if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n          }\n else           if (pr.isLike) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n          }\n else {\n            throw new RuntimeException(\"[unexpected!] not handled case\");\n          }\n        }\n      }\n      queryBuilder.append(\" \");\n    }\n  }\n  String[] pts=filter.getPrimaryTypes().toArray(new String[filter.getPrimaryTypes().size()]);\n  for (int i=0; i < pts.length; i++) {\n    String pt=pts[i];\n    if (i == 0) {\n      queryBuilder.append(\"(\");\n    }\n    if (i > 0 && i < pts.length) {\n      queryBuilder.append(\"OR \");\n    }\n    queryBuilder.append(\"jcr\\\\:primaryType\").append(':').append(partialEscape(pt)).append(\" \");\n    if (i == pts.length - 1) {\n      queryBuilder.append(\")\");\n      queryBuilder.append(' ');\n    }\n  }\n  Filter.PathRestriction pathRestriction=filter.getPathRestriction();\n  if (pathRestriction != null) {\n    String path=purgePath(filter);\n    String fieldName=configuration.getFieldForPathRestriction(pathRestriction);\n    if (fieldName != null) {\n      queryBuilder.append(fieldName);\n      queryBuilder.append(':');\n      queryBuilder.append(path);\n    }\n  }\n  if (queryBuilder.length() == 0) {\n    queryBuilder.append(\"*:*\");\n  }\n  String escapedQuery=queryBuilder.toString();\n  solrQuery.setQuery(escapedQuery);\n  if (log.isDebugEnabled()) {\n    log.debug(\"JCR query {} has been converted to Solr query {}\",filter.getQueryStatement(),solrQuery.toString());\n  }\n  return solrQuery;\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 858,
                    "astHeight": 24
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.TypeDeclaration,bodyDeclarations]",
                    "nodePosition": {
                        "charLength": 8027,
                        "startLineNumber": 103,
                        "startColumnNumber": 4,
                        "endLineNumber": 255,
                        "endColumnNumber": 5
                    },
                    "nodeContext": "private SolrQuery getQuery(Filter filter){\n  SolrQuery solrQuery=new SolrQuery();\n  setDefaults(solrQuery);\n  StringBuilder queryBuilder=new StringBuilder();\n  if (filter.getFullTextConstraint() != null) {\n    queryBuilder.append(getFullTextQuery(filter.getFullTextConstraint()));\n    queryBuilder.append(' ');\n  }\n else   if (filter.getFulltextConditions() != null) {\n    Collection<String> fulltextConditions=filter.getFulltextConditions();\n    for (    String fulltextCondition : fulltextConditions) {\n      queryBuilder.append(fulltextCondition).append(\" \");\n    }\n  }\n  Collection<Filter.PropertyRestriction> propertyRestrictions=filter.getPropertyRestrictions();\n  if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n    for (    Filter.PropertyRestriction pr : propertyRestrictions) {\n      if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n        String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n        if (isSupportedHttpRequest(nativeQueryString)) {\n          String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n          if (!\"select\".equals(requestHandlerString)) {\n            if (requestHandlerString.charAt(0) != '/') {\n              requestHandlerString=\"/\" + requestHandlerString;\n            }\n            solrQuery.setRequestHandler(requestHandlerString);\n          }\n          String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n          for (          String param : parameterString.split(\"&\")) {\n            String[] kv=param.split(\"=\");\n            if (kv.length != 2) {\n              throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n            }\n else {\n              if (\"stream.body\".equals(kv[0])) {\n                kv[0]=\"q\";\n                String mltFlString=\"mlt.fl=\";\n                int mltFlIndex=parameterString.indexOf(mltFlString);\n                if (mltFlIndex > -1) {\n                  int beginIndex=mltFlIndex + mltFlString.length();\n                  int endIndex=parameterString.indexOf('&',beginIndex);\n                  String fields;\n                  if (endIndex > beginIndex) {\n                    fields=parameterString.substring(beginIndex,endIndex);\n                  }\n else {\n                    fields=parameterString.substring(beginIndex);\n                  }\n                  kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n                }\n              }\n              solrQuery.setParam(kv[0],kv[1]);\n            }\n          }\n          return solrQuery;\n        }\n else {\n          queryBuilder.append(nativeQueryString);\n        }\n      }\n else {\n        if (pr.propertyName.contains(\"/\")) {\n          continue;\n        }\n        if (\"rep:excerpt\".equals(pr.propertyName)) {\n          continue;\n        }\n        String first=null;\n        if (pr.first != null) {\n          first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n        }\n        String last=null;\n        if (pr.last != null) {\n          last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n        }\n        String prField=configuration.getFieldForPropertyRestriction(pr);\n        CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n        if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n          queryBuilder.append(configuration.getPathField());\n          queryBuilder.append(':');\n          queryBuilder.append(first);\n        }\n else {\n          if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(first);\n          }\n else           if (pr.first == null && pr.last == null) {\n            if (!queryBuilder.toString().contains(fieldName + \":\")) {\n              queryBuilder.append(fieldName).append(':');\n              queryBuilder.append('*');\n            }\n          }\n else           if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n          }\n else           if (pr.isLike) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n          }\n else {\n            throw new RuntimeException(\"[unexpected!] not handled case\");\n          }\n        }\n      }\n      queryBuilder.append(\" \");\n    }\n  }\n  String[] pts=filter.getPrimaryTypes().toArray(new String[filter.getPrimaryTypes().size()]);\n  for (int i=0; i < pts.length; i++) {\n    String pt=pts[i];\n    if (i == 0) {\n      queryBuilder.append(\"(\");\n    }\n    if (i > 0 && i < pts.length) {\n      queryBuilder.append(\"OR \");\n    }\n    queryBuilder.append(\"jcr\\\\:primaryType\").append(':').append(partialEscape(pt)).append(\" \");\n    if (i == pts.length - 1) {\n      queryBuilder.append(\")\");\n      queryBuilder.append(' ');\n    }\n  }\n  Filter.PathRestriction pathRestriction=filter.getPathRestriction();\n  if (pathRestriction != null) {\n    String path=purgePath(filter);\n    String fieldName=configuration.getFieldForPathRestriction(pathRestriction);\n    if (fieldName != null) {\n      queryBuilder.append(fieldName);\n      queryBuilder.append(':');\n      queryBuilder.append(path);\n    }\n  }\n  if (queryBuilder.length() == 0) {\n    queryBuilder.append(\"*:*\");\n  }\n  String escapedQuery=queryBuilder.toString();\n  solrQuery.setQuery(escapedQuery);\n  if (log.isDebugEnabled()) {\n    log.debug(\"JCR query {} has been converted to Solr query {}\",filter.getQueryStatement(),solrQuery.toString());\n  }\n  return solrQuery;\n}\n",
                    "nodeType": "MethodDeclaration",
                    "astNodeNumber": 867,
                    "astHeight": 25
                }
            ],
            "currentLineData": {
                "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,expression]",
                "nodePosition": {
                    "charLength": 37,
                    "startLineNumber": 170,
                    "startColumnNumber": 24,
                    "endLineNumber": 170,
                    "endColumnNumber": 61
                },
                "nodeContext": "\"rep:excerpt\".equals(pr.propertyName)",
                "nodeType": "MethodInvocation",
                "astNodeNumber": 6,
                "astHeight": 3
            },
            "tokenLength": 1,
            "type": "org.apache.jackrabbit.oak.spi.query.Filter.PropertyRestriction"
        },
        {
            "nodeContext": "pr",
            "nodeType": "SimpleName",
            "nodePosition": {
                "charLength": 2,
                "startLineNumber": 175,
                "startColumnNumber": 24,
                "endLineNumber": 175,
                "endColumnNumber": 26
            },
            "astNodeNumber": 1,
            "astHeight": 1,
            "parentDataList": [
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.InfixExpression,leftOperand]",
                    "nodePosition": {
                        "charLength": 8,
                        "startLineNumber": 175,
                        "startColumnNumber": 24,
                        "endLineNumber": 175,
                        "endColumnNumber": 32
                    },
                    "nodeContext": "pr.first",
                    "nodeType": "QualifiedName",
                    "astNodeNumber": 3,
                    "astHeight": 2
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,expression]",
                    "nodePosition": {
                        "charLength": 16,
                        "startLineNumber": 175,
                        "startColumnNumber": 24,
                        "endLineNumber": 175,
                        "endColumnNumber": 40
                    },
                    "nodeContext": "pr.first != null",
                    "nodeType": "InfixExpression",
                    "astNodeNumber": 5,
                    "astHeight": 3
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 158,
                        "startLineNumber": 175,
                        "startColumnNumber": 20,
                        "endLineNumber": 177,
                        "endColumnNumber": 21
                    },
                    "nodeContext": "if (pr.first != null) {\n  first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 27,
                    "astHeight": 11
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 2798,
                        "startLineNumber": 164,
                        "startColumnNumber": 23,
                        "endLineNumber": 211,
                        "endColumnNumber": 17
                    },
                    "nodeContext": "{\n  if (pr.propertyName.contains(\"/\")) {\n    continue;\n  }\n  if (\"rep:excerpt\".equals(pr.propertyName)) {\n    continue;\n  }\n  String first=null;\n  if (pr.first != null) {\n    first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n  }\n  String last=null;\n  if (pr.last != null) {\n    last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n  }\n  String prField=configuration.getFieldForPropertyRestriction(pr);\n  CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n  if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n    queryBuilder.append(configuration.getPathField());\n    queryBuilder.append(':');\n    queryBuilder.append(first);\n  }\n else {\n    if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(first);\n    }\n else     if (pr.first == null && pr.last == null) {\n      if (!queryBuilder.toString().contains(fieldName + \":\")) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append('*');\n      }\n    }\n else     if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n    }\n else     if (pr.isLike) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n    }\n else {\n      throw new RuntimeException(\"[unexpected!] not handled case\");\n    }\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 312,
                    "astHeight": 18
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5508,
                        "startLineNumber": 124,
                        "startColumnNumber": 16,
                        "endLineNumber": 211,
                        "endColumnNumber": 17
                    },
                    "nodeContext": "if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n  String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n  if (isSupportedHttpRequest(nativeQueryString)) {\n    String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n    if (!\"select\".equals(requestHandlerString)) {\n      if (requestHandlerString.charAt(0) != '/') {\n        requestHandlerString=\"/\" + requestHandlerString;\n      }\n      solrQuery.setRequestHandler(requestHandlerString);\n    }\n    String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n    for (    String param : parameterString.split(\"&\")) {\n      String[] kv=param.split(\"=\");\n      if (kv.length != 2) {\n        throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n      }\n else {\n        if (\"stream.body\".equals(kv[0])) {\n          kv[0]=\"q\";\n          String mltFlString=\"mlt.fl=\";\n          int mltFlIndex=parameterString.indexOf(mltFlString);\n          if (mltFlIndex > -1) {\n            int beginIndex=mltFlIndex + mltFlString.length();\n            int endIndex=parameterString.indexOf('&',beginIndex);\n            String fields;\n            if (endIndex > beginIndex) {\n              fields=parameterString.substring(beginIndex,endIndex);\n            }\n else {\n              fields=parameterString.substring(beginIndex);\n            }\n            kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n          }\n        }\n        solrQuery.setParam(kv[0],kv[1]);\n      }\n    }\n    return solrQuery;\n  }\n else {\n    queryBuilder.append(nativeQueryString);\n  }\n}\n else {\n  if (pr.propertyName.contains(\"/\")) {\n    continue;\n  }\n  if (\"rep:excerpt\".equals(pr.propertyName)) {\n    continue;\n  }\n  String first=null;\n  if (pr.first != null) {\n    first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n  }\n  String last=null;\n  if (pr.last != null) {\n    last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n  }\n  String prField=configuration.getFieldForPropertyRestriction(pr);\n  CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n  if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n    queryBuilder.append(configuration.getPathField());\n    queryBuilder.append(':');\n    queryBuilder.append(first);\n  }\n else {\n    if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(first);\n    }\n else     if (pr.first == null && pr.last == null) {\n      if (!queryBuilder.toString().contains(fieldName + \":\")) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append('*');\n      }\n    }\n else     if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n    }\n else     if (pr.isLike) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n    }\n else {\n      throw new RuntimeException(\"[unexpected!] not handled case\");\n    }\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 546,
                    "astHeight": 19
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.EnhancedForStatement,body]",
                    "nodePosition": {
                        "charLength": 5622,
                        "startLineNumber": 122,
                        "startColumnNumber": 71,
                        "endLineNumber": 213,
                        "endColumnNumber": 13
                    },
                    "nodeContext": "{\n  if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n    String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n    if (isSupportedHttpRequest(nativeQueryString)) {\n      String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n      if (!\"select\".equals(requestHandlerString)) {\n        if (requestHandlerString.charAt(0) != '/') {\n          requestHandlerString=\"/\" + requestHandlerString;\n        }\n        solrQuery.setRequestHandler(requestHandlerString);\n      }\n      String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n      for (      String param : parameterString.split(\"&\")) {\n        String[] kv=param.split(\"=\");\n        if (kv.length != 2) {\n          throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n        }\n else {\n          if (\"stream.body\".equals(kv[0])) {\n            kv[0]=\"q\";\n            String mltFlString=\"mlt.fl=\";\n            int mltFlIndex=parameterString.indexOf(mltFlString);\n            if (mltFlIndex > -1) {\n              int beginIndex=mltFlIndex + mltFlString.length();\n              int endIndex=parameterString.indexOf('&',beginIndex);\n              String fields;\n              if (endIndex > beginIndex) {\n                fields=parameterString.substring(beginIndex,endIndex);\n              }\n else {\n                fields=parameterString.substring(beginIndex);\n              }\n              kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n            }\n          }\n          solrQuery.setParam(kv[0],kv[1]);\n        }\n      }\n      return solrQuery;\n    }\n else {\n      queryBuilder.append(nativeQueryString);\n    }\n  }\n else {\n    if (pr.propertyName.contains(\"/\")) {\n      continue;\n    }\n    if (\"rep:excerpt\".equals(pr.propertyName)) {\n      continue;\n    }\n    String first=null;\n    if (pr.first != null) {\n      first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n    }\n    String last=null;\n    if (pr.last != null) {\n      last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n    }\n    String prField=configuration.getFieldForPropertyRestriction(pr);\n    CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n    if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n      queryBuilder.append(configuration.getPathField());\n      queryBuilder.append(':');\n      queryBuilder.append(first);\n    }\n else {\n      if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(first);\n      }\n else       if (pr.first == null && pr.last == null) {\n        if (!queryBuilder.toString().contains(fieldName + \":\")) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append('*');\n        }\n      }\n else       if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n      }\n else       if (pr.isLike) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n      }\n else {\n        throw new RuntimeException(\"[unexpected!] not handled case\");\n      }\n    }\n  }\n  queryBuilder.append(\" \");\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 552,
                    "astHeight": 20
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5681,
                        "startLineNumber": 122,
                        "startColumnNumber": 12,
                        "endLineNumber": 213,
                        "endColumnNumber": 13
                    },
                    "nodeContext": "for (Filter.PropertyRestriction pr : propertyRestrictions) {\n  if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n    String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n    if (isSupportedHttpRequest(nativeQueryString)) {\n      String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n      if (!\"select\".equals(requestHandlerString)) {\n        if (requestHandlerString.charAt(0) != '/') {\n          requestHandlerString=\"/\" + requestHandlerString;\n        }\n        solrQuery.setRequestHandler(requestHandlerString);\n      }\n      String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n      for (      String param : parameterString.split(\"&\")) {\n        String[] kv=param.split(\"=\");\n        if (kv.length != 2) {\n          throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n        }\n else {\n          if (\"stream.body\".equals(kv[0])) {\n            kv[0]=\"q\";\n            String mltFlString=\"mlt.fl=\";\n            int mltFlIndex=parameterString.indexOf(mltFlString);\n            if (mltFlIndex > -1) {\n              int beginIndex=mltFlIndex + mltFlString.length();\n              int endIndex=parameterString.indexOf('&',beginIndex);\n              String fields;\n              if (endIndex > beginIndex) {\n                fields=parameterString.substring(beginIndex,endIndex);\n              }\n else {\n                fields=parameterString.substring(beginIndex);\n              }\n              kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n            }\n          }\n          solrQuery.setParam(kv[0],kv[1]);\n        }\n      }\n      return solrQuery;\n    }\n else {\n      queryBuilder.append(nativeQueryString);\n    }\n  }\n else {\n    if (pr.propertyName.contains(\"/\")) {\n      continue;\n    }\n    if (\"rep:excerpt\".equals(pr.propertyName)) {\n      continue;\n    }\n    String first=null;\n    if (pr.first != null) {\n      first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n    }\n    String last=null;\n    if (pr.last != null) {\n      last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n    }\n    String prField=configuration.getFieldForPropertyRestriction(pr);\n    CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n    if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n      queryBuilder.append(configuration.getPathField());\n      queryBuilder.append(':');\n      queryBuilder.append(first);\n    }\n else {\n      if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(first);\n      }\n else       if (pr.first == null && pr.last == null) {\n        if (!queryBuilder.toString().contains(fieldName + \":\")) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append('*');\n        }\n      }\n else       if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n      }\n else       if (pr.isLike) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n      }\n else {\n        throw new RuntimeException(\"[unexpected!] not handled case\");\n      }\n    }\n  }\n  queryBuilder.append(\" \");\n}\n",
                    "nodeType": "EnhancedForStatement",
                    "astNodeNumber": 560,
                    "astHeight": 21
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,thenStatement]",
                    "nodePosition": {
                        "charLength": 5705,
                        "startLineNumber": 121,
                        "startColumnNumber": 77,
                        "endLineNumber": 214,
                        "endColumnNumber": 9
                    },
                    "nodeContext": "{\n  for (  Filter.PropertyRestriction pr : propertyRestrictions) {\n    if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n      String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n      if (isSupportedHttpRequest(nativeQueryString)) {\n        String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n        if (!\"select\".equals(requestHandlerString)) {\n          if (requestHandlerString.charAt(0) != '/') {\n            requestHandlerString=\"/\" + requestHandlerString;\n          }\n          solrQuery.setRequestHandler(requestHandlerString);\n        }\n        String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n        for (        String param : parameterString.split(\"&\")) {\n          String[] kv=param.split(\"=\");\n          if (kv.length != 2) {\n            throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n          }\n else {\n            if (\"stream.body\".equals(kv[0])) {\n              kv[0]=\"q\";\n              String mltFlString=\"mlt.fl=\";\n              int mltFlIndex=parameterString.indexOf(mltFlString);\n              if (mltFlIndex > -1) {\n                int beginIndex=mltFlIndex + mltFlString.length();\n                int endIndex=parameterString.indexOf('&',beginIndex);\n                String fields;\n                if (endIndex > beginIndex) {\n                  fields=parameterString.substring(beginIndex,endIndex);\n                }\n else {\n                  fields=parameterString.substring(beginIndex);\n                }\n                kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n              }\n            }\n            solrQuery.setParam(kv[0],kv[1]);\n          }\n        }\n        return solrQuery;\n      }\n else {\n        queryBuilder.append(nativeQueryString);\n      }\n    }\n else {\n      if (pr.propertyName.contains(\"/\")) {\n        continue;\n      }\n      if (\"rep:excerpt\".equals(pr.propertyName)) {\n        continue;\n      }\n      String first=null;\n      if (pr.first != null) {\n        first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n      }\n      String last=null;\n      if (pr.last != null) {\n        last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n      }\n      String prField=configuration.getFieldForPropertyRestriction(pr);\n      CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n      if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n        queryBuilder.append(configuration.getPathField());\n        queryBuilder.append(':');\n        queryBuilder.append(first);\n      }\n else {\n        if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(first);\n        }\n else         if (pr.first == null && pr.last == null) {\n          if (!queryBuilder.toString().contains(fieldName + \":\")) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append('*');\n          }\n        }\n else         if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n        }\n else         if (pr.isLike) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n        }\n else {\n          throw new RuntimeException(\"[unexpected!] not handled case\");\n        }\n      }\n    }\n    queryBuilder.append(\" \");\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 561,
                    "astHeight": 22
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5774,
                        "startLineNumber": 121,
                        "startColumnNumber": 8,
                        "endLineNumber": 214,
                        "endColumnNumber": 9
                    },
                    "nodeContext": "if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n  for (  Filter.PropertyRestriction pr : propertyRestrictions) {\n    if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n      String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n      if (isSupportedHttpRequest(nativeQueryString)) {\n        String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n        if (!\"select\".equals(requestHandlerString)) {\n          if (requestHandlerString.charAt(0) != '/') {\n            requestHandlerString=\"/\" + requestHandlerString;\n          }\n          solrQuery.setRequestHandler(requestHandlerString);\n        }\n        String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n        for (        String param : parameterString.split(\"&\")) {\n          String[] kv=param.split(\"=\");\n          if (kv.length != 2) {\n            throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n          }\n else {\n            if (\"stream.body\".equals(kv[0])) {\n              kv[0]=\"q\";\n              String mltFlString=\"mlt.fl=\";\n              int mltFlIndex=parameterString.indexOf(mltFlString);\n              if (mltFlIndex > -1) {\n                int beginIndex=mltFlIndex + mltFlString.length();\n                int endIndex=parameterString.indexOf('&',beginIndex);\n                String fields;\n                if (endIndex > beginIndex) {\n                  fields=parameterString.substring(beginIndex,endIndex);\n                }\n else {\n                  fields=parameterString.substring(beginIndex);\n                }\n                kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n              }\n            }\n            solrQuery.setParam(kv[0],kv[1]);\n          }\n        }\n        return solrQuery;\n      }\n else {\n        queryBuilder.append(nativeQueryString);\n      }\n    }\n else {\n      if (pr.propertyName.contains(\"/\")) {\n        continue;\n      }\n      if (\"rep:excerpt\".equals(pr.propertyName)) {\n        continue;\n      }\n      String first=null;\n      if (pr.first != null) {\n        first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n      }\n      String last=null;\n      if (pr.last != null) {\n        last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n      }\n      String prField=configuration.getFieldForPropertyRestriction(pr);\n      CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n      if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n        queryBuilder.append(configuration.getPathField());\n        queryBuilder.append(':');\n        queryBuilder.append(first);\n      }\n else {\n        if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(first);\n        }\n else         if (pr.first == null && pr.last == null) {\n          if (!queryBuilder.toString().contains(fieldName + \":\")) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append('*');\n          }\n        }\n else         if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n        }\n else         if (pr.isLike) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n        }\n else {\n          throw new RuntimeException(\"[unexpected!] not handled case\");\n        }\n      }\n    }\n    queryBuilder.append(\" \");\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 570,
                    "astHeight": 23
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.MethodDeclaration,body]",
                    "nodePosition": {
                        "charLength": 7985,
                        "startLineNumber": 103,
                        "startColumnNumber": 46,
                        "endLineNumber": 255,
                        "endColumnNumber": 5
                    },
                    "nodeContext": "{\n  SolrQuery solrQuery=new SolrQuery();\n  setDefaults(solrQuery);\n  StringBuilder queryBuilder=new StringBuilder();\n  if (filter.getFullTextConstraint() != null) {\n    queryBuilder.append(getFullTextQuery(filter.getFullTextConstraint()));\n    queryBuilder.append(' ');\n  }\n else   if (filter.getFulltextConditions() != null) {\n    Collection<String> fulltextConditions=filter.getFulltextConditions();\n    for (    String fulltextCondition : fulltextConditions) {\n      queryBuilder.append(fulltextCondition).append(\" \");\n    }\n  }\n  Collection<Filter.PropertyRestriction> propertyRestrictions=filter.getPropertyRestrictions();\n  if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n    for (    Filter.PropertyRestriction pr : propertyRestrictions) {\n      if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n        String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n        if (isSupportedHttpRequest(nativeQueryString)) {\n          String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n          if (!\"select\".equals(requestHandlerString)) {\n            if (requestHandlerString.charAt(0) != '/') {\n              requestHandlerString=\"/\" + requestHandlerString;\n            }\n            solrQuery.setRequestHandler(requestHandlerString);\n          }\n          String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n          for (          String param : parameterString.split(\"&\")) {\n            String[] kv=param.split(\"=\");\n            if (kv.length != 2) {\n              throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n            }\n else {\n              if (\"stream.body\".equals(kv[0])) {\n                kv[0]=\"q\";\n                String mltFlString=\"mlt.fl=\";\n                int mltFlIndex=parameterString.indexOf(mltFlString);\n                if (mltFlIndex > -1) {\n                  int beginIndex=mltFlIndex + mltFlString.length();\n                  int endIndex=parameterString.indexOf('&',beginIndex);\n                  String fields;\n                  if (endIndex > beginIndex) {\n                    fields=parameterString.substring(beginIndex,endIndex);\n                  }\n else {\n                    fields=parameterString.substring(beginIndex);\n                  }\n                  kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n                }\n              }\n              solrQuery.setParam(kv[0],kv[1]);\n            }\n          }\n          return solrQuery;\n        }\n else {\n          queryBuilder.append(nativeQueryString);\n        }\n      }\n else {\n        if (pr.propertyName.contains(\"/\")) {\n          continue;\n        }\n        if (\"rep:excerpt\".equals(pr.propertyName)) {\n          continue;\n        }\n        String first=null;\n        if (pr.first != null) {\n          first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n        }\n        String last=null;\n        if (pr.last != null) {\n          last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n        }\n        String prField=configuration.getFieldForPropertyRestriction(pr);\n        CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n        if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n          queryBuilder.append(configuration.getPathField());\n          queryBuilder.append(':');\n          queryBuilder.append(first);\n        }\n else {\n          if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(first);\n          }\n else           if (pr.first == null && pr.last == null) {\n            if (!queryBuilder.toString().contains(fieldName + \":\")) {\n              queryBuilder.append(fieldName).append(':');\n              queryBuilder.append('*');\n            }\n          }\n else           if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n          }\n else           if (pr.isLike) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n          }\n else {\n            throw new RuntimeException(\"[unexpected!] not handled case\");\n          }\n        }\n      }\n      queryBuilder.append(\" \");\n    }\n  }\n  String[] pts=filter.getPrimaryTypes().toArray(new String[filter.getPrimaryTypes().size()]);\n  for (int i=0; i < pts.length; i++) {\n    String pt=pts[i];\n    if (i == 0) {\n      queryBuilder.append(\"(\");\n    }\n    if (i > 0 && i < pts.length) {\n      queryBuilder.append(\"OR \");\n    }\n    queryBuilder.append(\"jcr\\\\:primaryType\").append(':').append(partialEscape(pt)).append(\" \");\n    if (i == pts.length - 1) {\n      queryBuilder.append(\")\");\n      queryBuilder.append(' ');\n    }\n  }\n  Filter.PathRestriction pathRestriction=filter.getPathRestriction();\n  if (pathRestriction != null) {\n    String path=purgePath(filter);\n    String fieldName=configuration.getFieldForPathRestriction(pathRestriction);\n    if (fieldName != null) {\n      queryBuilder.append(fieldName);\n      queryBuilder.append(':');\n      queryBuilder.append(path);\n    }\n  }\n  if (queryBuilder.length() == 0) {\n    queryBuilder.append(\"*:*\");\n  }\n  String escapedQuery=queryBuilder.toString();\n  solrQuery.setQuery(escapedQuery);\n  if (log.isDebugEnabled()) {\n    log.debug(\"JCR query {} has been converted to Solr query {}\",filter.getQueryStatement(),solrQuery.toString());\n  }\n  return solrQuery;\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 858,
                    "astHeight": 24
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.TypeDeclaration,bodyDeclarations]",
                    "nodePosition": {
                        "charLength": 8027,
                        "startLineNumber": 103,
                        "startColumnNumber": 4,
                        "endLineNumber": 255,
                        "endColumnNumber": 5
                    },
                    "nodeContext": "private SolrQuery getQuery(Filter filter){\n  SolrQuery solrQuery=new SolrQuery();\n  setDefaults(solrQuery);\n  StringBuilder queryBuilder=new StringBuilder();\n  if (filter.getFullTextConstraint() != null) {\n    queryBuilder.append(getFullTextQuery(filter.getFullTextConstraint()));\n    queryBuilder.append(' ');\n  }\n else   if (filter.getFulltextConditions() != null) {\n    Collection<String> fulltextConditions=filter.getFulltextConditions();\n    for (    String fulltextCondition : fulltextConditions) {\n      queryBuilder.append(fulltextCondition).append(\" \");\n    }\n  }\n  Collection<Filter.PropertyRestriction> propertyRestrictions=filter.getPropertyRestrictions();\n  if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n    for (    Filter.PropertyRestriction pr : propertyRestrictions) {\n      if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n        String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n        if (isSupportedHttpRequest(nativeQueryString)) {\n          String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n          if (!\"select\".equals(requestHandlerString)) {\n            if (requestHandlerString.charAt(0) != '/') {\n              requestHandlerString=\"/\" + requestHandlerString;\n            }\n            solrQuery.setRequestHandler(requestHandlerString);\n          }\n          String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n          for (          String param : parameterString.split(\"&\")) {\n            String[] kv=param.split(\"=\");\n            if (kv.length != 2) {\n              throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n            }\n else {\n              if (\"stream.body\".equals(kv[0])) {\n                kv[0]=\"q\";\n                String mltFlString=\"mlt.fl=\";\n                int mltFlIndex=parameterString.indexOf(mltFlString);\n                if (mltFlIndex > -1) {\n                  int beginIndex=mltFlIndex + mltFlString.length();\n                  int endIndex=parameterString.indexOf('&',beginIndex);\n                  String fields;\n                  if (endIndex > beginIndex) {\n                    fields=parameterString.substring(beginIndex,endIndex);\n                  }\n else {\n                    fields=parameterString.substring(beginIndex);\n                  }\n                  kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n                }\n              }\n              solrQuery.setParam(kv[0],kv[1]);\n            }\n          }\n          return solrQuery;\n        }\n else {\n          queryBuilder.append(nativeQueryString);\n        }\n      }\n else {\n        if (pr.propertyName.contains(\"/\")) {\n          continue;\n        }\n        if (\"rep:excerpt\".equals(pr.propertyName)) {\n          continue;\n        }\n        String first=null;\n        if (pr.first != null) {\n          first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n        }\n        String last=null;\n        if (pr.last != null) {\n          last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n        }\n        String prField=configuration.getFieldForPropertyRestriction(pr);\n        CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n        if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n          queryBuilder.append(configuration.getPathField());\n          queryBuilder.append(':');\n          queryBuilder.append(first);\n        }\n else {\n          if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(first);\n          }\n else           if (pr.first == null && pr.last == null) {\n            if (!queryBuilder.toString().contains(fieldName + \":\")) {\n              queryBuilder.append(fieldName).append(':');\n              queryBuilder.append('*');\n            }\n          }\n else           if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n          }\n else           if (pr.isLike) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n          }\n else {\n            throw new RuntimeException(\"[unexpected!] not handled case\");\n          }\n        }\n      }\n      queryBuilder.append(\" \");\n    }\n  }\n  String[] pts=filter.getPrimaryTypes().toArray(new String[filter.getPrimaryTypes().size()]);\n  for (int i=0; i < pts.length; i++) {\n    String pt=pts[i];\n    if (i == 0) {\n      queryBuilder.append(\"(\");\n    }\n    if (i > 0 && i < pts.length) {\n      queryBuilder.append(\"OR \");\n    }\n    queryBuilder.append(\"jcr\\\\:primaryType\").append(':').append(partialEscape(pt)).append(\" \");\n    if (i == pts.length - 1) {\n      queryBuilder.append(\")\");\n      queryBuilder.append(' ');\n    }\n  }\n  Filter.PathRestriction pathRestriction=filter.getPathRestriction();\n  if (pathRestriction != null) {\n    String path=purgePath(filter);\n    String fieldName=configuration.getFieldForPathRestriction(pathRestriction);\n    if (fieldName != null) {\n      queryBuilder.append(fieldName);\n      queryBuilder.append(':');\n      queryBuilder.append(path);\n    }\n  }\n  if (queryBuilder.length() == 0) {\n    queryBuilder.append(\"*:*\");\n  }\n  String escapedQuery=queryBuilder.toString();\n  solrQuery.setQuery(escapedQuery);\n  if (log.isDebugEnabled()) {\n    log.debug(\"JCR query {} has been converted to Solr query {}\",filter.getQueryStatement(),solrQuery.toString());\n  }\n  return solrQuery;\n}\n",
                    "nodeType": "MethodDeclaration",
                    "astNodeNumber": 867,
                    "astHeight": 25
                }
            ],
            "currentLineData": {
                "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,expression]",
                "nodePosition": {
                    "charLength": 16,
                    "startLineNumber": 175,
                    "startColumnNumber": 24,
                    "endLineNumber": 175,
                    "endColumnNumber": 40
                },
                "nodeContext": "pr.first != null",
                "nodeType": "InfixExpression",
                "astNodeNumber": 5,
                "astHeight": 3
            },
            "tokenLength": 1,
            "type": "org.apache.jackrabbit.oak.spi.query.Filter.PropertyRestriction"
        },
        {
            "nodeContext": "pr",
            "nodeType": "SimpleName",
            "nodePosition": {
                "charLength": 2,
                "startLineNumber": 176,
                "startColumnNumber": 61,
                "endLineNumber": 176,
                "endColumnNumber": 63
            },
            "astNodeNumber": 1,
            "astHeight": 1,
            "parentDataList": [
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.MethodInvocation,expression]",
                    "nodePosition": {
                        "charLength": 8,
                        "startLineNumber": 176,
                        "startColumnNumber": 61,
                        "endLineNumber": 176,
                        "endColumnNumber": 69
                    },
                    "nodeContext": "pr.first",
                    "nodeType": "QualifiedName",
                    "astNodeNumber": 3,
                    "astHeight": 2
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.MethodInvocation,arguments]",
                    "nodePosition": {
                        "charLength": 37,
                        "startLineNumber": 176,
                        "startColumnNumber": 61,
                        "endLineNumber": 176,
                        "endColumnNumber": 98
                    },
                    "nodeContext": "pr.first.getValue(pr.first.getType())",
                    "nodeType": "MethodInvocation",
                    "astNodeNumber": 10,
                    "astHeight": 4
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.MethodInvocation,arguments]",
                    "nodePosition": {
                        "charLength": 53,
                        "startLineNumber": 176,
                        "startColumnNumber": 46,
                        "endLineNumber": 176,
                        "endColumnNumber": 99
                    },
                    "nodeContext": "String.valueOf(pr.first.getValue(pr.first.getType()))",
                    "nodeType": "MethodInvocation",
                    "astNodeNumber": 13,
                    "astHeight": 5
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.MethodInvocation,expression]",
                    "nodePosition": {
                        "charLength": 68,
                        "startLineNumber": 176,
                        "startColumnNumber": 32,
                        "endLineNumber": 176,
                        "endColumnNumber": 100
                    },
                    "nodeContext": "partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())))",
                    "nodeType": "MethodInvocation",
                    "astNodeNumber": 15,
                    "astHeight": 6
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.Assignment,rightHandSide]",
                    "nodePosition": {
                        "charLength": 79,
                        "startLineNumber": 176,
                        "startColumnNumber": 32,
                        "endLineNumber": 176,
                        "endColumnNumber": 111
                    },
                    "nodeContext": "partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString()",
                    "nodeType": "MethodInvocation",
                    "astNodeNumber": 17,
                    "astHeight": 7
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.ExpressionStatement,expression]",
                    "nodePosition": {
                        "charLength": 87,
                        "startLineNumber": 176,
                        "startColumnNumber": 24,
                        "endLineNumber": 176,
                        "endColumnNumber": 111
                    },
                    "nodeContext": "first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString()",
                    "nodeType": "Assignment",
                    "astNodeNumber": 19,
                    "astHeight": 8
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 88,
                        "startLineNumber": 176,
                        "startColumnNumber": 24,
                        "endLineNumber": 176,
                        "endColumnNumber": 112
                    },
                    "nodeContext": "first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n",
                    "nodeType": "ExpressionStatement",
                    "astNodeNumber": 20,
                    "astHeight": 9
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,thenStatement]",
                    "nodePosition": {
                        "charLength": 136,
                        "startLineNumber": 175,
                        "startColumnNumber": 42,
                        "endLineNumber": 177,
                        "endColumnNumber": 21
                    },
                    "nodeContext": "{\n  first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 21,
                    "astHeight": 10
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 158,
                        "startLineNumber": 175,
                        "startColumnNumber": 20,
                        "endLineNumber": 177,
                        "endColumnNumber": 21
                    },
                    "nodeContext": "if (pr.first != null) {\n  first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 27,
                    "astHeight": 11
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 2798,
                        "startLineNumber": 164,
                        "startColumnNumber": 23,
                        "endLineNumber": 211,
                        "endColumnNumber": 17
                    },
                    "nodeContext": "{\n  if (pr.propertyName.contains(\"/\")) {\n    continue;\n  }\n  if (\"rep:excerpt\".equals(pr.propertyName)) {\n    continue;\n  }\n  String first=null;\n  if (pr.first != null) {\n    first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n  }\n  String last=null;\n  if (pr.last != null) {\n    last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n  }\n  String prField=configuration.getFieldForPropertyRestriction(pr);\n  CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n  if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n    queryBuilder.append(configuration.getPathField());\n    queryBuilder.append(':');\n    queryBuilder.append(first);\n  }\n else {\n    if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(first);\n    }\n else     if (pr.first == null && pr.last == null) {\n      if (!queryBuilder.toString().contains(fieldName + \":\")) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append('*');\n      }\n    }\n else     if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n    }\n else     if (pr.isLike) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n    }\n else {\n      throw new RuntimeException(\"[unexpected!] not handled case\");\n    }\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 312,
                    "astHeight": 18
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5508,
                        "startLineNumber": 124,
                        "startColumnNumber": 16,
                        "endLineNumber": 211,
                        "endColumnNumber": 17
                    },
                    "nodeContext": "if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n  String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n  if (isSupportedHttpRequest(nativeQueryString)) {\n    String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n    if (!\"select\".equals(requestHandlerString)) {\n      if (requestHandlerString.charAt(0) != '/') {\n        requestHandlerString=\"/\" + requestHandlerString;\n      }\n      solrQuery.setRequestHandler(requestHandlerString);\n    }\n    String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n    for (    String param : parameterString.split(\"&\")) {\n      String[] kv=param.split(\"=\");\n      if (kv.length != 2) {\n        throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n      }\n else {\n        if (\"stream.body\".equals(kv[0])) {\n          kv[0]=\"q\";\n          String mltFlString=\"mlt.fl=\";\n          int mltFlIndex=parameterString.indexOf(mltFlString);\n          if (mltFlIndex > -1) {\n            int beginIndex=mltFlIndex + mltFlString.length();\n            int endIndex=parameterString.indexOf('&',beginIndex);\n            String fields;\n            if (endIndex > beginIndex) {\n              fields=parameterString.substring(beginIndex,endIndex);\n            }\n else {\n              fields=parameterString.substring(beginIndex);\n            }\n            kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n          }\n        }\n        solrQuery.setParam(kv[0],kv[1]);\n      }\n    }\n    return solrQuery;\n  }\n else {\n    queryBuilder.append(nativeQueryString);\n  }\n}\n else {\n  if (pr.propertyName.contains(\"/\")) {\n    continue;\n  }\n  if (\"rep:excerpt\".equals(pr.propertyName)) {\n    continue;\n  }\n  String first=null;\n  if (pr.first != null) {\n    first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n  }\n  String last=null;\n  if (pr.last != null) {\n    last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n  }\n  String prField=configuration.getFieldForPropertyRestriction(pr);\n  CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n  if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n    queryBuilder.append(configuration.getPathField());\n    queryBuilder.append(':');\n    queryBuilder.append(first);\n  }\n else {\n    if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(first);\n    }\n else     if (pr.first == null && pr.last == null) {\n      if (!queryBuilder.toString().contains(fieldName + \":\")) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append('*');\n      }\n    }\n else     if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n    }\n else     if (pr.isLike) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n    }\n else {\n      throw new RuntimeException(\"[unexpected!] not handled case\");\n    }\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 546,
                    "astHeight": 19
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.EnhancedForStatement,body]",
                    "nodePosition": {
                        "charLength": 5622,
                        "startLineNumber": 122,
                        "startColumnNumber": 71,
                        "endLineNumber": 213,
                        "endColumnNumber": 13
                    },
                    "nodeContext": "{\n  if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n    String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n    if (isSupportedHttpRequest(nativeQueryString)) {\n      String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n      if (!\"select\".equals(requestHandlerString)) {\n        if (requestHandlerString.charAt(0) != '/') {\n          requestHandlerString=\"/\" + requestHandlerString;\n        }\n        solrQuery.setRequestHandler(requestHandlerString);\n      }\n      String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n      for (      String param : parameterString.split(\"&\")) {\n        String[] kv=param.split(\"=\");\n        if (kv.length != 2) {\n          throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n        }\n else {\n          if (\"stream.body\".equals(kv[0])) {\n            kv[0]=\"q\";\n            String mltFlString=\"mlt.fl=\";\n            int mltFlIndex=parameterString.indexOf(mltFlString);\n            if (mltFlIndex > -1) {\n              int beginIndex=mltFlIndex + mltFlString.length();\n              int endIndex=parameterString.indexOf('&',beginIndex);\n              String fields;\n              if (endIndex > beginIndex) {\n                fields=parameterString.substring(beginIndex,endIndex);\n              }\n else {\n                fields=parameterString.substring(beginIndex);\n              }\n              kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n            }\n          }\n          solrQuery.setParam(kv[0],kv[1]);\n        }\n      }\n      return solrQuery;\n    }\n else {\n      queryBuilder.append(nativeQueryString);\n    }\n  }\n else {\n    if (pr.propertyName.contains(\"/\")) {\n      continue;\n    }\n    if (\"rep:excerpt\".equals(pr.propertyName)) {\n      continue;\n    }\n    String first=null;\n    if (pr.first != null) {\n      first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n    }\n    String last=null;\n    if (pr.last != null) {\n      last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n    }\n    String prField=configuration.getFieldForPropertyRestriction(pr);\n    CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n    if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n      queryBuilder.append(configuration.getPathField());\n      queryBuilder.append(':');\n      queryBuilder.append(first);\n    }\n else {\n      if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(first);\n      }\n else       if (pr.first == null && pr.last == null) {\n        if (!queryBuilder.toString().contains(fieldName + \":\")) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append('*');\n        }\n      }\n else       if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n      }\n else       if (pr.isLike) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n      }\n else {\n        throw new RuntimeException(\"[unexpected!] not handled case\");\n      }\n    }\n  }\n  queryBuilder.append(\" \");\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 552,
                    "astHeight": 20
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5681,
                        "startLineNumber": 122,
                        "startColumnNumber": 12,
                        "endLineNumber": 213,
                        "endColumnNumber": 13
                    },
                    "nodeContext": "for (Filter.PropertyRestriction pr : propertyRestrictions) {\n  if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n    String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n    if (isSupportedHttpRequest(nativeQueryString)) {\n      String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n      if (!\"select\".equals(requestHandlerString)) {\n        if (requestHandlerString.charAt(0) != '/') {\n          requestHandlerString=\"/\" + requestHandlerString;\n        }\n        solrQuery.setRequestHandler(requestHandlerString);\n      }\n      String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n      for (      String param : parameterString.split(\"&\")) {\n        String[] kv=param.split(\"=\");\n        if (kv.length != 2) {\n          throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n        }\n else {\n          if (\"stream.body\".equals(kv[0])) {\n            kv[0]=\"q\";\n            String mltFlString=\"mlt.fl=\";\n            int mltFlIndex=parameterString.indexOf(mltFlString);\n            if (mltFlIndex > -1) {\n              int beginIndex=mltFlIndex + mltFlString.length();\n              int endIndex=parameterString.indexOf('&',beginIndex);\n              String fields;\n              if (endIndex > beginIndex) {\n                fields=parameterString.substring(beginIndex,endIndex);\n              }\n else {\n                fields=parameterString.substring(beginIndex);\n              }\n              kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n            }\n          }\n          solrQuery.setParam(kv[0],kv[1]);\n        }\n      }\n      return solrQuery;\n    }\n else {\n      queryBuilder.append(nativeQueryString);\n    }\n  }\n else {\n    if (pr.propertyName.contains(\"/\")) {\n      continue;\n    }\n    if (\"rep:excerpt\".equals(pr.propertyName)) {\n      continue;\n    }\n    String first=null;\n    if (pr.first != null) {\n      first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n    }\n    String last=null;\n    if (pr.last != null) {\n      last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n    }\n    String prField=configuration.getFieldForPropertyRestriction(pr);\n    CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n    if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n      queryBuilder.append(configuration.getPathField());\n      queryBuilder.append(':');\n      queryBuilder.append(first);\n    }\n else {\n      if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(first);\n      }\n else       if (pr.first == null && pr.last == null) {\n        if (!queryBuilder.toString().contains(fieldName + \":\")) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append('*');\n        }\n      }\n else       if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n      }\n else       if (pr.isLike) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n      }\n else {\n        throw new RuntimeException(\"[unexpected!] not handled case\");\n      }\n    }\n  }\n  queryBuilder.append(\" \");\n}\n",
                    "nodeType": "EnhancedForStatement",
                    "astNodeNumber": 560,
                    "astHeight": 21
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,thenStatement]",
                    "nodePosition": {
                        "charLength": 5705,
                        "startLineNumber": 121,
                        "startColumnNumber": 77,
                        "endLineNumber": 214,
                        "endColumnNumber": 9
                    },
                    "nodeContext": "{\n  for (  Filter.PropertyRestriction pr : propertyRestrictions) {\n    if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n      String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n      if (isSupportedHttpRequest(nativeQueryString)) {\n        String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n        if (!\"select\".equals(requestHandlerString)) {\n          if (requestHandlerString.charAt(0) != '/') {\n            requestHandlerString=\"/\" + requestHandlerString;\n          }\n          solrQuery.setRequestHandler(requestHandlerString);\n        }\n        String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n        for (        String param : parameterString.split(\"&\")) {\n          String[] kv=param.split(\"=\");\n          if (kv.length != 2) {\n            throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n          }\n else {\n            if (\"stream.body\".equals(kv[0])) {\n              kv[0]=\"q\";\n              String mltFlString=\"mlt.fl=\";\n              int mltFlIndex=parameterString.indexOf(mltFlString);\n              if (mltFlIndex > -1) {\n                int beginIndex=mltFlIndex + mltFlString.length();\n                int endIndex=parameterString.indexOf('&',beginIndex);\n                String fields;\n                if (endIndex > beginIndex) {\n                  fields=parameterString.substring(beginIndex,endIndex);\n                }\n else {\n                  fields=parameterString.substring(beginIndex);\n                }\n                kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n              }\n            }\n            solrQuery.setParam(kv[0],kv[1]);\n          }\n        }\n        return solrQuery;\n      }\n else {\n        queryBuilder.append(nativeQueryString);\n      }\n    }\n else {\n      if (pr.propertyName.contains(\"/\")) {\n        continue;\n      }\n      if (\"rep:excerpt\".equals(pr.propertyName)) {\n        continue;\n      }\n      String first=null;\n      if (pr.first != null) {\n        first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n      }\n      String last=null;\n      if (pr.last != null) {\n        last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n      }\n      String prField=configuration.getFieldForPropertyRestriction(pr);\n      CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n      if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n        queryBuilder.append(configuration.getPathField());\n        queryBuilder.append(':');\n        queryBuilder.append(first);\n      }\n else {\n        if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(first);\n        }\n else         if (pr.first == null && pr.last == null) {\n          if (!queryBuilder.toString().contains(fieldName + \":\")) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append('*');\n          }\n        }\n else         if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n        }\n else         if (pr.isLike) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n        }\n else {\n          throw new RuntimeException(\"[unexpected!] not handled case\");\n        }\n      }\n    }\n    queryBuilder.append(\" \");\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 561,
                    "astHeight": 22
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5774,
                        "startLineNumber": 121,
                        "startColumnNumber": 8,
                        "endLineNumber": 214,
                        "endColumnNumber": 9
                    },
                    "nodeContext": "if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n  for (  Filter.PropertyRestriction pr : propertyRestrictions) {\n    if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n      String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n      if (isSupportedHttpRequest(nativeQueryString)) {\n        String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n        if (!\"select\".equals(requestHandlerString)) {\n          if (requestHandlerString.charAt(0) != '/') {\n            requestHandlerString=\"/\" + requestHandlerString;\n          }\n          solrQuery.setRequestHandler(requestHandlerString);\n        }\n        String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n        for (        String param : parameterString.split(\"&\")) {\n          String[] kv=param.split(\"=\");\n          if (kv.length != 2) {\n            throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n          }\n else {\n            if (\"stream.body\".equals(kv[0])) {\n              kv[0]=\"q\";\n              String mltFlString=\"mlt.fl=\";\n              int mltFlIndex=parameterString.indexOf(mltFlString);\n              if (mltFlIndex > -1) {\n                int beginIndex=mltFlIndex + mltFlString.length();\n                int endIndex=parameterString.indexOf('&',beginIndex);\n                String fields;\n                if (endIndex > beginIndex) {\n                  fields=parameterString.substring(beginIndex,endIndex);\n                }\n else {\n                  fields=parameterString.substring(beginIndex);\n                }\n                kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n              }\n            }\n            solrQuery.setParam(kv[0],kv[1]);\n          }\n        }\n        return solrQuery;\n      }\n else {\n        queryBuilder.append(nativeQueryString);\n      }\n    }\n else {\n      if (pr.propertyName.contains(\"/\")) {\n        continue;\n      }\n      if (\"rep:excerpt\".equals(pr.propertyName)) {\n        continue;\n      }\n      String first=null;\n      if (pr.first != null) {\n        first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n      }\n      String last=null;\n      if (pr.last != null) {\n        last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n      }\n      String prField=configuration.getFieldForPropertyRestriction(pr);\n      CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n      if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n        queryBuilder.append(configuration.getPathField());\n        queryBuilder.append(':');\n        queryBuilder.append(first);\n      }\n else {\n        if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(first);\n        }\n else         if (pr.first == null && pr.last == null) {\n          if (!queryBuilder.toString().contains(fieldName + \":\")) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append('*');\n          }\n        }\n else         if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n        }\n else         if (pr.isLike) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n        }\n else {\n          throw new RuntimeException(\"[unexpected!] not handled case\");\n        }\n      }\n    }\n    queryBuilder.append(\" \");\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 570,
                    "astHeight": 23
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.MethodDeclaration,body]",
                    "nodePosition": {
                        "charLength": 7985,
                        "startLineNumber": 103,
                        "startColumnNumber": 46,
                        "endLineNumber": 255,
                        "endColumnNumber": 5
                    },
                    "nodeContext": "{\n  SolrQuery solrQuery=new SolrQuery();\n  setDefaults(solrQuery);\n  StringBuilder queryBuilder=new StringBuilder();\n  if (filter.getFullTextConstraint() != null) {\n    queryBuilder.append(getFullTextQuery(filter.getFullTextConstraint()));\n    queryBuilder.append(' ');\n  }\n else   if (filter.getFulltextConditions() != null) {\n    Collection<String> fulltextConditions=filter.getFulltextConditions();\n    for (    String fulltextCondition : fulltextConditions) {\n      queryBuilder.append(fulltextCondition).append(\" \");\n    }\n  }\n  Collection<Filter.PropertyRestriction> propertyRestrictions=filter.getPropertyRestrictions();\n  if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n    for (    Filter.PropertyRestriction pr : propertyRestrictions) {\n      if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n        String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n        if (isSupportedHttpRequest(nativeQueryString)) {\n          String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n          if (!\"select\".equals(requestHandlerString)) {\n            if (requestHandlerString.charAt(0) != '/') {\n              requestHandlerString=\"/\" + requestHandlerString;\n            }\n            solrQuery.setRequestHandler(requestHandlerString);\n          }\n          String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n          for (          String param : parameterString.split(\"&\")) {\n            String[] kv=param.split(\"=\");\n            if (kv.length != 2) {\n              throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n            }\n else {\n              if (\"stream.body\".equals(kv[0])) {\n                kv[0]=\"q\";\n                String mltFlString=\"mlt.fl=\";\n                int mltFlIndex=parameterString.indexOf(mltFlString);\n                if (mltFlIndex > -1) {\n                  int beginIndex=mltFlIndex + mltFlString.length();\n                  int endIndex=parameterString.indexOf('&',beginIndex);\n                  String fields;\n                  if (endIndex > beginIndex) {\n                    fields=parameterString.substring(beginIndex,endIndex);\n                  }\n else {\n                    fields=parameterString.substring(beginIndex);\n                  }\n                  kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n                }\n              }\n              solrQuery.setParam(kv[0],kv[1]);\n            }\n          }\n          return solrQuery;\n        }\n else {\n          queryBuilder.append(nativeQueryString);\n        }\n      }\n else {\n        if (pr.propertyName.contains(\"/\")) {\n          continue;\n        }\n        if (\"rep:excerpt\".equals(pr.propertyName)) {\n          continue;\n        }\n        String first=null;\n        if (pr.first != null) {\n          first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n        }\n        String last=null;\n        if (pr.last != null) {\n          last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n        }\n        String prField=configuration.getFieldForPropertyRestriction(pr);\n        CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n        if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n          queryBuilder.append(configuration.getPathField());\n          queryBuilder.append(':');\n          queryBuilder.append(first);\n        }\n else {\n          if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(first);\n          }\n else           if (pr.first == null && pr.last == null) {\n            if (!queryBuilder.toString().contains(fieldName + \":\")) {\n              queryBuilder.append(fieldName).append(':');\n              queryBuilder.append('*');\n            }\n          }\n else           if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n          }\n else           if (pr.isLike) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n          }\n else {\n            throw new RuntimeException(\"[unexpected!] not handled case\");\n          }\n        }\n      }\n      queryBuilder.append(\" \");\n    }\n  }\n  String[] pts=filter.getPrimaryTypes().toArray(new String[filter.getPrimaryTypes().size()]);\n  for (int i=0; i < pts.length; i++) {\n    String pt=pts[i];\n    if (i == 0) {\n      queryBuilder.append(\"(\");\n    }\n    if (i > 0 && i < pts.length) {\n      queryBuilder.append(\"OR \");\n    }\n    queryBuilder.append(\"jcr\\\\:primaryType\").append(':').append(partialEscape(pt)).append(\" \");\n    if (i == pts.length - 1) {\n      queryBuilder.append(\")\");\n      queryBuilder.append(' ');\n    }\n  }\n  Filter.PathRestriction pathRestriction=filter.getPathRestriction();\n  if (pathRestriction != null) {\n    String path=purgePath(filter);\n    String fieldName=configuration.getFieldForPathRestriction(pathRestriction);\n    if (fieldName != null) {\n      queryBuilder.append(fieldName);\n      queryBuilder.append(':');\n      queryBuilder.append(path);\n    }\n  }\n  if (queryBuilder.length() == 0) {\n    queryBuilder.append(\"*:*\");\n  }\n  String escapedQuery=queryBuilder.toString();\n  solrQuery.setQuery(escapedQuery);\n  if (log.isDebugEnabled()) {\n    log.debug(\"JCR query {} has been converted to Solr query {}\",filter.getQueryStatement(),solrQuery.toString());\n  }\n  return solrQuery;\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 858,
                    "astHeight": 24
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.TypeDeclaration,bodyDeclarations]",
                    "nodePosition": {
                        "charLength": 8027,
                        "startLineNumber": 103,
                        "startColumnNumber": 4,
                        "endLineNumber": 255,
                        "endColumnNumber": 5
                    },
                    "nodeContext": "private SolrQuery getQuery(Filter filter){\n  SolrQuery solrQuery=new SolrQuery();\n  setDefaults(solrQuery);\n  StringBuilder queryBuilder=new StringBuilder();\n  if (filter.getFullTextConstraint() != null) {\n    queryBuilder.append(getFullTextQuery(filter.getFullTextConstraint()));\n    queryBuilder.append(' ');\n  }\n else   if (filter.getFulltextConditions() != null) {\n    Collection<String> fulltextConditions=filter.getFulltextConditions();\n    for (    String fulltextCondition : fulltextConditions) {\n      queryBuilder.append(fulltextCondition).append(\" \");\n    }\n  }\n  Collection<Filter.PropertyRestriction> propertyRestrictions=filter.getPropertyRestrictions();\n  if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n    for (    Filter.PropertyRestriction pr : propertyRestrictions) {\n      if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n        String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n        if (isSupportedHttpRequest(nativeQueryString)) {\n          String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n          if (!\"select\".equals(requestHandlerString)) {\n            if (requestHandlerString.charAt(0) != '/') {\n              requestHandlerString=\"/\" + requestHandlerString;\n            }\n            solrQuery.setRequestHandler(requestHandlerString);\n          }\n          String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n          for (          String param : parameterString.split(\"&\")) {\n            String[] kv=param.split(\"=\");\n            if (kv.length != 2) {\n              throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n            }\n else {\n              if (\"stream.body\".equals(kv[0])) {\n                kv[0]=\"q\";\n                String mltFlString=\"mlt.fl=\";\n                int mltFlIndex=parameterString.indexOf(mltFlString);\n                if (mltFlIndex > -1) {\n                  int beginIndex=mltFlIndex + mltFlString.length();\n                  int endIndex=parameterString.indexOf('&',beginIndex);\n                  String fields;\n                  if (endIndex > beginIndex) {\n                    fields=parameterString.substring(beginIndex,endIndex);\n                  }\n else {\n                    fields=parameterString.substring(beginIndex);\n                  }\n                  kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n                }\n              }\n              solrQuery.setParam(kv[0],kv[1]);\n            }\n          }\n          return solrQuery;\n        }\n else {\n          queryBuilder.append(nativeQueryString);\n        }\n      }\n else {\n        if (pr.propertyName.contains(\"/\")) {\n          continue;\n        }\n        if (\"rep:excerpt\".equals(pr.propertyName)) {\n          continue;\n        }\n        String first=null;\n        if (pr.first != null) {\n          first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n        }\n        String last=null;\n        if (pr.last != null) {\n          last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n        }\n        String prField=configuration.getFieldForPropertyRestriction(pr);\n        CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n        if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n          queryBuilder.append(configuration.getPathField());\n          queryBuilder.append(':');\n          queryBuilder.append(first);\n        }\n else {\n          if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(first);\n          }\n else           if (pr.first == null && pr.last == null) {\n            if (!queryBuilder.toString().contains(fieldName + \":\")) {\n              queryBuilder.append(fieldName).append(':');\n              queryBuilder.append('*');\n            }\n          }\n else           if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n          }\n else           if (pr.isLike) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n          }\n else {\n            throw new RuntimeException(\"[unexpected!] not handled case\");\n          }\n        }\n      }\n      queryBuilder.append(\" \");\n    }\n  }\n  String[] pts=filter.getPrimaryTypes().toArray(new String[filter.getPrimaryTypes().size()]);\n  for (int i=0; i < pts.length; i++) {\n    String pt=pts[i];\n    if (i == 0) {\n      queryBuilder.append(\"(\");\n    }\n    if (i > 0 && i < pts.length) {\n      queryBuilder.append(\"OR \");\n    }\n    queryBuilder.append(\"jcr\\\\:primaryType\").append(':').append(partialEscape(pt)).append(\" \");\n    if (i == pts.length - 1) {\n      queryBuilder.append(\")\");\n      queryBuilder.append(' ');\n    }\n  }\n  Filter.PathRestriction pathRestriction=filter.getPathRestriction();\n  if (pathRestriction != null) {\n    String path=purgePath(filter);\n    String fieldName=configuration.getFieldForPathRestriction(pathRestriction);\n    if (fieldName != null) {\n      queryBuilder.append(fieldName);\n      queryBuilder.append(':');\n      queryBuilder.append(path);\n    }\n  }\n  if (queryBuilder.length() == 0) {\n    queryBuilder.append(\"*:*\");\n  }\n  String escapedQuery=queryBuilder.toString();\n  solrQuery.setQuery(escapedQuery);\n  if (log.isDebugEnabled()) {\n    log.debug(\"JCR query {} has been converted to Solr query {}\",filter.getQueryStatement(),solrQuery.toString());\n  }\n  return solrQuery;\n}\n",
                    "nodeType": "MethodDeclaration",
                    "astNodeNumber": 867,
                    "astHeight": 25
                }
            ],
            "currentLineData": {
                "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                "nodePosition": {
                    "charLength": 88,
                    "startLineNumber": 176,
                    "startColumnNumber": 24,
                    "endLineNumber": 176,
                    "endColumnNumber": 112
                },
                "nodeContext": "first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n",
                "nodeType": "ExpressionStatement",
                "astNodeNumber": 20,
                "astHeight": 9
            },
            "tokenLength": 1,
            "type": "org.apache.jackrabbit.oak.spi.query.Filter.PropertyRestriction"
        },
        {
            "nodeContext": "pr",
            "nodeType": "SimpleName",
            "nodePosition": {
                "charLength": 2,
                "startLineNumber": 176,
                "startColumnNumber": 79,
                "endLineNumber": 176,
                "endColumnNumber": 81
            },
            "astNodeNumber": 1,
            "astHeight": 1,
            "parentDataList": [
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.MethodInvocation,expression]",
                    "nodePosition": {
                        "charLength": 8,
                        "startLineNumber": 176,
                        "startColumnNumber": 79,
                        "endLineNumber": 176,
                        "endColumnNumber": 87
                    },
                    "nodeContext": "pr.first",
                    "nodeType": "QualifiedName",
                    "astNodeNumber": 3,
                    "astHeight": 2
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.MethodInvocation,arguments]",
                    "nodePosition": {
                        "charLength": 18,
                        "startLineNumber": 176,
                        "startColumnNumber": 79,
                        "endLineNumber": 176,
                        "endColumnNumber": 97
                    },
                    "nodeContext": "pr.first.getType()",
                    "nodeType": "MethodInvocation",
                    "astNodeNumber": 5,
                    "astHeight": 3
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.MethodInvocation,arguments]",
                    "nodePosition": {
                        "charLength": 37,
                        "startLineNumber": 176,
                        "startColumnNumber": 61,
                        "endLineNumber": 176,
                        "endColumnNumber": 98
                    },
                    "nodeContext": "pr.first.getValue(pr.first.getType())",
                    "nodeType": "MethodInvocation",
                    "astNodeNumber": 10,
                    "astHeight": 4
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.MethodInvocation,arguments]",
                    "nodePosition": {
                        "charLength": 53,
                        "startLineNumber": 176,
                        "startColumnNumber": 46,
                        "endLineNumber": 176,
                        "endColumnNumber": 99
                    },
                    "nodeContext": "String.valueOf(pr.first.getValue(pr.first.getType()))",
                    "nodeType": "MethodInvocation",
                    "astNodeNumber": 13,
                    "astHeight": 5
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.MethodInvocation,expression]",
                    "nodePosition": {
                        "charLength": 68,
                        "startLineNumber": 176,
                        "startColumnNumber": 32,
                        "endLineNumber": 176,
                        "endColumnNumber": 100
                    },
                    "nodeContext": "partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())))",
                    "nodeType": "MethodInvocation",
                    "astNodeNumber": 15,
                    "astHeight": 6
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.Assignment,rightHandSide]",
                    "nodePosition": {
                        "charLength": 79,
                        "startLineNumber": 176,
                        "startColumnNumber": 32,
                        "endLineNumber": 176,
                        "endColumnNumber": 111
                    },
                    "nodeContext": "partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString()",
                    "nodeType": "MethodInvocation",
                    "astNodeNumber": 17,
                    "astHeight": 7
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.ExpressionStatement,expression]",
                    "nodePosition": {
                        "charLength": 87,
                        "startLineNumber": 176,
                        "startColumnNumber": 24,
                        "endLineNumber": 176,
                        "endColumnNumber": 111
                    },
                    "nodeContext": "first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString()",
                    "nodeType": "Assignment",
                    "astNodeNumber": 19,
                    "astHeight": 8
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 88,
                        "startLineNumber": 176,
                        "startColumnNumber": 24,
                        "endLineNumber": 176,
                        "endColumnNumber": 112
                    },
                    "nodeContext": "first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n",
                    "nodeType": "ExpressionStatement",
                    "astNodeNumber": 20,
                    "astHeight": 9
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,thenStatement]",
                    "nodePosition": {
                        "charLength": 136,
                        "startLineNumber": 175,
                        "startColumnNumber": 42,
                        "endLineNumber": 177,
                        "endColumnNumber": 21
                    },
                    "nodeContext": "{\n  first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 21,
                    "astHeight": 10
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 158,
                        "startLineNumber": 175,
                        "startColumnNumber": 20,
                        "endLineNumber": 177,
                        "endColumnNumber": 21
                    },
                    "nodeContext": "if (pr.first != null) {\n  first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 27,
                    "astHeight": 11
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 2798,
                        "startLineNumber": 164,
                        "startColumnNumber": 23,
                        "endLineNumber": 211,
                        "endColumnNumber": 17
                    },
                    "nodeContext": "{\n  if (pr.propertyName.contains(\"/\")) {\n    continue;\n  }\n  if (\"rep:excerpt\".equals(pr.propertyName)) {\n    continue;\n  }\n  String first=null;\n  if (pr.first != null) {\n    first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n  }\n  String last=null;\n  if (pr.last != null) {\n    last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n  }\n  String prField=configuration.getFieldForPropertyRestriction(pr);\n  CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n  if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n    queryBuilder.append(configuration.getPathField());\n    queryBuilder.append(':');\n    queryBuilder.append(first);\n  }\n else {\n    if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(first);\n    }\n else     if (pr.first == null && pr.last == null) {\n      if (!queryBuilder.toString().contains(fieldName + \":\")) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append('*');\n      }\n    }\n else     if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n    }\n else     if (pr.isLike) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n    }\n else {\n      throw new RuntimeException(\"[unexpected!] not handled case\");\n    }\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 312,
                    "astHeight": 18
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5508,
                        "startLineNumber": 124,
                        "startColumnNumber": 16,
                        "endLineNumber": 211,
                        "endColumnNumber": 17
                    },
                    "nodeContext": "if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n  String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n  if (isSupportedHttpRequest(nativeQueryString)) {\n    String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n    if (!\"select\".equals(requestHandlerString)) {\n      if (requestHandlerString.charAt(0) != '/') {\n        requestHandlerString=\"/\" + requestHandlerString;\n      }\n      solrQuery.setRequestHandler(requestHandlerString);\n    }\n    String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n    for (    String param : parameterString.split(\"&\")) {\n      String[] kv=param.split(\"=\");\n      if (kv.length != 2) {\n        throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n      }\n else {\n        if (\"stream.body\".equals(kv[0])) {\n          kv[0]=\"q\";\n          String mltFlString=\"mlt.fl=\";\n          int mltFlIndex=parameterString.indexOf(mltFlString);\n          if (mltFlIndex > -1) {\n            int beginIndex=mltFlIndex + mltFlString.length();\n            int endIndex=parameterString.indexOf('&',beginIndex);\n            String fields;\n            if (endIndex > beginIndex) {\n              fields=parameterString.substring(beginIndex,endIndex);\n            }\n else {\n              fields=parameterString.substring(beginIndex);\n            }\n            kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n          }\n        }\n        solrQuery.setParam(kv[0],kv[1]);\n      }\n    }\n    return solrQuery;\n  }\n else {\n    queryBuilder.append(nativeQueryString);\n  }\n}\n else {\n  if (pr.propertyName.contains(\"/\")) {\n    continue;\n  }\n  if (\"rep:excerpt\".equals(pr.propertyName)) {\n    continue;\n  }\n  String first=null;\n  if (pr.first != null) {\n    first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n  }\n  String last=null;\n  if (pr.last != null) {\n    last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n  }\n  String prField=configuration.getFieldForPropertyRestriction(pr);\n  CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n  if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n    queryBuilder.append(configuration.getPathField());\n    queryBuilder.append(':');\n    queryBuilder.append(first);\n  }\n else {\n    if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(first);\n    }\n else     if (pr.first == null && pr.last == null) {\n      if (!queryBuilder.toString().contains(fieldName + \":\")) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append('*');\n      }\n    }\n else     if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n    }\n else     if (pr.isLike) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n    }\n else {\n      throw new RuntimeException(\"[unexpected!] not handled case\");\n    }\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 546,
                    "astHeight": 19
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.EnhancedForStatement,body]",
                    "nodePosition": {
                        "charLength": 5622,
                        "startLineNumber": 122,
                        "startColumnNumber": 71,
                        "endLineNumber": 213,
                        "endColumnNumber": 13
                    },
                    "nodeContext": "{\n  if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n    String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n    if (isSupportedHttpRequest(nativeQueryString)) {\n      String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n      if (!\"select\".equals(requestHandlerString)) {\n        if (requestHandlerString.charAt(0) != '/') {\n          requestHandlerString=\"/\" + requestHandlerString;\n        }\n        solrQuery.setRequestHandler(requestHandlerString);\n      }\n      String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n      for (      String param : parameterString.split(\"&\")) {\n        String[] kv=param.split(\"=\");\n        if (kv.length != 2) {\n          throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n        }\n else {\n          if (\"stream.body\".equals(kv[0])) {\n            kv[0]=\"q\";\n            String mltFlString=\"mlt.fl=\";\n            int mltFlIndex=parameterString.indexOf(mltFlString);\n            if (mltFlIndex > -1) {\n              int beginIndex=mltFlIndex + mltFlString.length();\n              int endIndex=parameterString.indexOf('&',beginIndex);\n              String fields;\n              if (endIndex > beginIndex) {\n                fields=parameterString.substring(beginIndex,endIndex);\n              }\n else {\n                fields=parameterString.substring(beginIndex);\n              }\n              kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n            }\n          }\n          solrQuery.setParam(kv[0],kv[1]);\n        }\n      }\n      return solrQuery;\n    }\n else {\n      queryBuilder.append(nativeQueryString);\n    }\n  }\n else {\n    if (pr.propertyName.contains(\"/\")) {\n      continue;\n    }\n    if (\"rep:excerpt\".equals(pr.propertyName)) {\n      continue;\n    }\n    String first=null;\n    if (pr.first != null) {\n      first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n    }\n    String last=null;\n    if (pr.last != null) {\n      last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n    }\n    String prField=configuration.getFieldForPropertyRestriction(pr);\n    CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n    if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n      queryBuilder.append(configuration.getPathField());\n      queryBuilder.append(':');\n      queryBuilder.append(first);\n    }\n else {\n      if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(first);\n      }\n else       if (pr.first == null && pr.last == null) {\n        if (!queryBuilder.toString().contains(fieldName + \":\")) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append('*');\n        }\n      }\n else       if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n      }\n else       if (pr.isLike) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n      }\n else {\n        throw new RuntimeException(\"[unexpected!] not handled case\");\n      }\n    }\n  }\n  queryBuilder.append(\" \");\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 552,
                    "astHeight": 20
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5681,
                        "startLineNumber": 122,
                        "startColumnNumber": 12,
                        "endLineNumber": 213,
                        "endColumnNumber": 13
                    },
                    "nodeContext": "for (Filter.PropertyRestriction pr : propertyRestrictions) {\n  if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n    String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n    if (isSupportedHttpRequest(nativeQueryString)) {\n      String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n      if (!\"select\".equals(requestHandlerString)) {\n        if (requestHandlerString.charAt(0) != '/') {\n          requestHandlerString=\"/\" + requestHandlerString;\n        }\n        solrQuery.setRequestHandler(requestHandlerString);\n      }\n      String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n      for (      String param : parameterString.split(\"&\")) {\n        String[] kv=param.split(\"=\");\n        if (kv.length != 2) {\n          throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n        }\n else {\n          if (\"stream.body\".equals(kv[0])) {\n            kv[0]=\"q\";\n            String mltFlString=\"mlt.fl=\";\n            int mltFlIndex=parameterString.indexOf(mltFlString);\n            if (mltFlIndex > -1) {\n              int beginIndex=mltFlIndex + mltFlString.length();\n              int endIndex=parameterString.indexOf('&',beginIndex);\n              String fields;\n              if (endIndex > beginIndex) {\n                fields=parameterString.substring(beginIndex,endIndex);\n              }\n else {\n                fields=parameterString.substring(beginIndex);\n              }\n              kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n            }\n          }\n          solrQuery.setParam(kv[0],kv[1]);\n        }\n      }\n      return solrQuery;\n    }\n else {\n      queryBuilder.append(nativeQueryString);\n    }\n  }\n else {\n    if (pr.propertyName.contains(\"/\")) {\n      continue;\n    }\n    if (\"rep:excerpt\".equals(pr.propertyName)) {\n      continue;\n    }\n    String first=null;\n    if (pr.first != null) {\n      first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n    }\n    String last=null;\n    if (pr.last != null) {\n      last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n    }\n    String prField=configuration.getFieldForPropertyRestriction(pr);\n    CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n    if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n      queryBuilder.append(configuration.getPathField());\n      queryBuilder.append(':');\n      queryBuilder.append(first);\n    }\n else {\n      if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(first);\n      }\n else       if (pr.first == null && pr.last == null) {\n        if (!queryBuilder.toString().contains(fieldName + \":\")) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append('*');\n        }\n      }\n else       if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n      }\n else       if (pr.isLike) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n      }\n else {\n        throw new RuntimeException(\"[unexpected!] not handled case\");\n      }\n    }\n  }\n  queryBuilder.append(\" \");\n}\n",
                    "nodeType": "EnhancedForStatement",
                    "astNodeNumber": 560,
                    "astHeight": 21
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,thenStatement]",
                    "nodePosition": {
                        "charLength": 5705,
                        "startLineNumber": 121,
                        "startColumnNumber": 77,
                        "endLineNumber": 214,
                        "endColumnNumber": 9
                    },
                    "nodeContext": "{\n  for (  Filter.PropertyRestriction pr : propertyRestrictions) {\n    if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n      String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n      if (isSupportedHttpRequest(nativeQueryString)) {\n        String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n        if (!\"select\".equals(requestHandlerString)) {\n          if (requestHandlerString.charAt(0) != '/') {\n            requestHandlerString=\"/\" + requestHandlerString;\n          }\n          solrQuery.setRequestHandler(requestHandlerString);\n        }\n        String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n        for (        String param : parameterString.split(\"&\")) {\n          String[] kv=param.split(\"=\");\n          if (kv.length != 2) {\n            throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n          }\n else {\n            if (\"stream.body\".equals(kv[0])) {\n              kv[0]=\"q\";\n              String mltFlString=\"mlt.fl=\";\n              int mltFlIndex=parameterString.indexOf(mltFlString);\n              if (mltFlIndex > -1) {\n                int beginIndex=mltFlIndex + mltFlString.length();\n                int endIndex=parameterString.indexOf('&',beginIndex);\n                String fields;\n                if (endIndex > beginIndex) {\n                  fields=parameterString.substring(beginIndex,endIndex);\n                }\n else {\n                  fields=parameterString.substring(beginIndex);\n                }\n                kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n              }\n            }\n            solrQuery.setParam(kv[0],kv[1]);\n          }\n        }\n        return solrQuery;\n      }\n else {\n        queryBuilder.append(nativeQueryString);\n      }\n    }\n else {\n      if (pr.propertyName.contains(\"/\")) {\n        continue;\n      }\n      if (\"rep:excerpt\".equals(pr.propertyName)) {\n        continue;\n      }\n      String first=null;\n      if (pr.first != null) {\n        first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n      }\n      String last=null;\n      if (pr.last != null) {\n        last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n      }\n      String prField=configuration.getFieldForPropertyRestriction(pr);\n      CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n      if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n        queryBuilder.append(configuration.getPathField());\n        queryBuilder.append(':');\n        queryBuilder.append(first);\n      }\n else {\n        if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(first);\n        }\n else         if (pr.first == null && pr.last == null) {\n          if (!queryBuilder.toString().contains(fieldName + \":\")) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append('*');\n          }\n        }\n else         if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n        }\n else         if (pr.isLike) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n        }\n else {\n          throw new RuntimeException(\"[unexpected!] not handled case\");\n        }\n      }\n    }\n    queryBuilder.append(\" \");\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 561,
                    "astHeight": 22
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5774,
                        "startLineNumber": 121,
                        "startColumnNumber": 8,
                        "endLineNumber": 214,
                        "endColumnNumber": 9
                    },
                    "nodeContext": "if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n  for (  Filter.PropertyRestriction pr : propertyRestrictions) {\n    if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n      String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n      if (isSupportedHttpRequest(nativeQueryString)) {\n        String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n        if (!\"select\".equals(requestHandlerString)) {\n          if (requestHandlerString.charAt(0) != '/') {\n            requestHandlerString=\"/\" + requestHandlerString;\n          }\n          solrQuery.setRequestHandler(requestHandlerString);\n        }\n        String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n        for (        String param : parameterString.split(\"&\")) {\n          String[] kv=param.split(\"=\");\n          if (kv.length != 2) {\n            throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n          }\n else {\n            if (\"stream.body\".equals(kv[0])) {\n              kv[0]=\"q\";\n              String mltFlString=\"mlt.fl=\";\n              int mltFlIndex=parameterString.indexOf(mltFlString);\n              if (mltFlIndex > -1) {\n                int beginIndex=mltFlIndex + mltFlString.length();\n                int endIndex=parameterString.indexOf('&',beginIndex);\n                String fields;\n                if (endIndex > beginIndex) {\n                  fields=parameterString.substring(beginIndex,endIndex);\n                }\n else {\n                  fields=parameterString.substring(beginIndex);\n                }\n                kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n              }\n            }\n            solrQuery.setParam(kv[0],kv[1]);\n          }\n        }\n        return solrQuery;\n      }\n else {\n        queryBuilder.append(nativeQueryString);\n      }\n    }\n else {\n      if (pr.propertyName.contains(\"/\")) {\n        continue;\n      }\n      if (\"rep:excerpt\".equals(pr.propertyName)) {\n        continue;\n      }\n      String first=null;\n      if (pr.first != null) {\n        first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n      }\n      String last=null;\n      if (pr.last != null) {\n        last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n      }\n      String prField=configuration.getFieldForPropertyRestriction(pr);\n      CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n      if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n        queryBuilder.append(configuration.getPathField());\n        queryBuilder.append(':');\n        queryBuilder.append(first);\n      }\n else {\n        if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(first);\n        }\n else         if (pr.first == null && pr.last == null) {\n          if (!queryBuilder.toString().contains(fieldName + \":\")) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append('*');\n          }\n        }\n else         if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n        }\n else         if (pr.isLike) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n        }\n else {\n          throw new RuntimeException(\"[unexpected!] not handled case\");\n        }\n      }\n    }\n    queryBuilder.append(\" \");\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 570,
                    "astHeight": 23
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.MethodDeclaration,body]",
                    "nodePosition": {
                        "charLength": 7985,
                        "startLineNumber": 103,
                        "startColumnNumber": 46,
                        "endLineNumber": 255,
                        "endColumnNumber": 5
                    },
                    "nodeContext": "{\n  SolrQuery solrQuery=new SolrQuery();\n  setDefaults(solrQuery);\n  StringBuilder queryBuilder=new StringBuilder();\n  if (filter.getFullTextConstraint() != null) {\n    queryBuilder.append(getFullTextQuery(filter.getFullTextConstraint()));\n    queryBuilder.append(' ');\n  }\n else   if (filter.getFulltextConditions() != null) {\n    Collection<String> fulltextConditions=filter.getFulltextConditions();\n    for (    String fulltextCondition : fulltextConditions) {\n      queryBuilder.append(fulltextCondition).append(\" \");\n    }\n  }\n  Collection<Filter.PropertyRestriction> propertyRestrictions=filter.getPropertyRestrictions();\n  if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n    for (    Filter.PropertyRestriction pr : propertyRestrictions) {\n      if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n        String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n        if (isSupportedHttpRequest(nativeQueryString)) {\n          String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n          if (!\"select\".equals(requestHandlerString)) {\n            if (requestHandlerString.charAt(0) != '/') {\n              requestHandlerString=\"/\" + requestHandlerString;\n            }\n            solrQuery.setRequestHandler(requestHandlerString);\n          }\n          String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n          for (          String param : parameterString.split(\"&\")) {\n            String[] kv=param.split(\"=\");\n            if (kv.length != 2) {\n              throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n            }\n else {\n              if (\"stream.body\".equals(kv[0])) {\n                kv[0]=\"q\";\n                String mltFlString=\"mlt.fl=\";\n                int mltFlIndex=parameterString.indexOf(mltFlString);\n                if (mltFlIndex > -1) {\n                  int beginIndex=mltFlIndex + mltFlString.length();\n                  int endIndex=parameterString.indexOf('&',beginIndex);\n                  String fields;\n                  if (endIndex > beginIndex) {\n                    fields=parameterString.substring(beginIndex,endIndex);\n                  }\n else {\n                    fields=parameterString.substring(beginIndex);\n                  }\n                  kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n                }\n              }\n              solrQuery.setParam(kv[0],kv[1]);\n            }\n          }\n          return solrQuery;\n        }\n else {\n          queryBuilder.append(nativeQueryString);\n        }\n      }\n else {\n        if (pr.propertyName.contains(\"/\")) {\n          continue;\n        }\n        if (\"rep:excerpt\".equals(pr.propertyName)) {\n          continue;\n        }\n        String first=null;\n        if (pr.first != null) {\n          first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n        }\n        String last=null;\n        if (pr.last != null) {\n          last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n        }\n        String prField=configuration.getFieldForPropertyRestriction(pr);\n        CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n        if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n          queryBuilder.append(configuration.getPathField());\n          queryBuilder.append(':');\n          queryBuilder.append(first);\n        }\n else {\n          if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(first);\n          }\n else           if (pr.first == null && pr.last == null) {\n            if (!queryBuilder.toString().contains(fieldName + \":\")) {\n              queryBuilder.append(fieldName).append(':');\n              queryBuilder.append('*');\n            }\n          }\n else           if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n          }\n else           if (pr.isLike) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n          }\n else {\n            throw new RuntimeException(\"[unexpected!] not handled case\");\n          }\n        }\n      }\n      queryBuilder.append(\" \");\n    }\n  }\n  String[] pts=filter.getPrimaryTypes().toArray(new String[filter.getPrimaryTypes().size()]);\n  for (int i=0; i < pts.length; i++) {\n    String pt=pts[i];\n    if (i == 0) {\n      queryBuilder.append(\"(\");\n    }\n    if (i > 0 && i < pts.length) {\n      queryBuilder.append(\"OR \");\n    }\n    queryBuilder.append(\"jcr\\\\:primaryType\").append(':').append(partialEscape(pt)).append(\" \");\n    if (i == pts.length - 1) {\n      queryBuilder.append(\")\");\n      queryBuilder.append(' ');\n    }\n  }\n  Filter.PathRestriction pathRestriction=filter.getPathRestriction();\n  if (pathRestriction != null) {\n    String path=purgePath(filter);\n    String fieldName=configuration.getFieldForPathRestriction(pathRestriction);\n    if (fieldName != null) {\n      queryBuilder.append(fieldName);\n      queryBuilder.append(':');\n      queryBuilder.append(path);\n    }\n  }\n  if (queryBuilder.length() == 0) {\n    queryBuilder.append(\"*:*\");\n  }\n  String escapedQuery=queryBuilder.toString();\n  solrQuery.setQuery(escapedQuery);\n  if (log.isDebugEnabled()) {\n    log.debug(\"JCR query {} has been converted to Solr query {}\",filter.getQueryStatement(),solrQuery.toString());\n  }\n  return solrQuery;\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 858,
                    "astHeight": 24
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.TypeDeclaration,bodyDeclarations]",
                    "nodePosition": {
                        "charLength": 8027,
                        "startLineNumber": 103,
                        "startColumnNumber": 4,
                        "endLineNumber": 255,
                        "endColumnNumber": 5
                    },
                    "nodeContext": "private SolrQuery getQuery(Filter filter){\n  SolrQuery solrQuery=new SolrQuery();\n  setDefaults(solrQuery);\n  StringBuilder queryBuilder=new StringBuilder();\n  if (filter.getFullTextConstraint() != null) {\n    queryBuilder.append(getFullTextQuery(filter.getFullTextConstraint()));\n    queryBuilder.append(' ');\n  }\n else   if (filter.getFulltextConditions() != null) {\n    Collection<String> fulltextConditions=filter.getFulltextConditions();\n    for (    String fulltextCondition : fulltextConditions) {\n      queryBuilder.append(fulltextCondition).append(\" \");\n    }\n  }\n  Collection<Filter.PropertyRestriction> propertyRestrictions=filter.getPropertyRestrictions();\n  if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n    for (    Filter.PropertyRestriction pr : propertyRestrictions) {\n      if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n        String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n        if (isSupportedHttpRequest(nativeQueryString)) {\n          String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n          if (!\"select\".equals(requestHandlerString)) {\n            if (requestHandlerString.charAt(0) != '/') {\n              requestHandlerString=\"/\" + requestHandlerString;\n            }\n            solrQuery.setRequestHandler(requestHandlerString);\n          }\n          String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n          for (          String param : parameterString.split(\"&\")) {\n            String[] kv=param.split(\"=\");\n            if (kv.length != 2) {\n              throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n            }\n else {\n              if (\"stream.body\".equals(kv[0])) {\n                kv[0]=\"q\";\n                String mltFlString=\"mlt.fl=\";\n                int mltFlIndex=parameterString.indexOf(mltFlString);\n                if (mltFlIndex > -1) {\n                  int beginIndex=mltFlIndex + mltFlString.length();\n                  int endIndex=parameterString.indexOf('&',beginIndex);\n                  String fields;\n                  if (endIndex > beginIndex) {\n                    fields=parameterString.substring(beginIndex,endIndex);\n                  }\n else {\n                    fields=parameterString.substring(beginIndex);\n                  }\n                  kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n                }\n              }\n              solrQuery.setParam(kv[0],kv[1]);\n            }\n          }\n          return solrQuery;\n        }\n else {\n          queryBuilder.append(nativeQueryString);\n        }\n      }\n else {\n        if (pr.propertyName.contains(\"/\")) {\n          continue;\n        }\n        if (\"rep:excerpt\".equals(pr.propertyName)) {\n          continue;\n        }\n        String first=null;\n        if (pr.first != null) {\n          first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n        }\n        String last=null;\n        if (pr.last != null) {\n          last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n        }\n        String prField=configuration.getFieldForPropertyRestriction(pr);\n        CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n        if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n          queryBuilder.append(configuration.getPathField());\n          queryBuilder.append(':');\n          queryBuilder.append(first);\n        }\n else {\n          if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(first);\n          }\n else           if (pr.first == null && pr.last == null) {\n            if (!queryBuilder.toString().contains(fieldName + \":\")) {\n              queryBuilder.append(fieldName).append(':');\n              queryBuilder.append('*');\n            }\n          }\n else           if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n          }\n else           if (pr.isLike) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n          }\n else {\n            throw new RuntimeException(\"[unexpected!] not handled case\");\n          }\n        }\n      }\n      queryBuilder.append(\" \");\n    }\n  }\n  String[] pts=filter.getPrimaryTypes().toArray(new String[filter.getPrimaryTypes().size()]);\n  for (int i=0; i < pts.length; i++) {\n    String pt=pts[i];\n    if (i == 0) {\n      queryBuilder.append(\"(\");\n    }\n    if (i > 0 && i < pts.length) {\n      queryBuilder.append(\"OR \");\n    }\n    queryBuilder.append(\"jcr\\\\:primaryType\").append(':').append(partialEscape(pt)).append(\" \");\n    if (i == pts.length - 1) {\n      queryBuilder.append(\")\");\n      queryBuilder.append(' ');\n    }\n  }\n  Filter.PathRestriction pathRestriction=filter.getPathRestriction();\n  if (pathRestriction != null) {\n    String path=purgePath(filter);\n    String fieldName=configuration.getFieldForPathRestriction(pathRestriction);\n    if (fieldName != null) {\n      queryBuilder.append(fieldName);\n      queryBuilder.append(':');\n      queryBuilder.append(path);\n    }\n  }\n  if (queryBuilder.length() == 0) {\n    queryBuilder.append(\"*:*\");\n  }\n  String escapedQuery=queryBuilder.toString();\n  solrQuery.setQuery(escapedQuery);\n  if (log.isDebugEnabled()) {\n    log.debug(\"JCR query {} has been converted to Solr query {}\",filter.getQueryStatement(),solrQuery.toString());\n  }\n  return solrQuery;\n}\n",
                    "nodeType": "MethodDeclaration",
                    "astNodeNumber": 867,
                    "astHeight": 25
                }
            ],
            "currentLineData": {
                "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                "nodePosition": {
                    "charLength": 88,
                    "startLineNumber": 176,
                    "startColumnNumber": 24,
                    "endLineNumber": 176,
                    "endColumnNumber": 112
                },
                "nodeContext": "first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n",
                "nodeType": "ExpressionStatement",
                "astNodeNumber": 20,
                "astHeight": 9
            },
            "tokenLength": 1,
            "type": "org.apache.jackrabbit.oak.spi.query.Filter.PropertyRestriction"
        },
        {
            "nodeContext": "pr",
            "nodeType": "SimpleName",
            "nodePosition": {
                "charLength": 2,
                "startLineNumber": 179,
                "startColumnNumber": 24,
                "endLineNumber": 179,
                "endColumnNumber": 26
            },
            "astNodeNumber": 1,
            "astHeight": 1,
            "parentDataList": [
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.InfixExpression,leftOperand]",
                    "nodePosition": {
                        "charLength": 7,
                        "startLineNumber": 179,
                        "startColumnNumber": 24,
                        "endLineNumber": 179,
                        "endColumnNumber": 31
                    },
                    "nodeContext": "pr.last",
                    "nodeType": "QualifiedName",
                    "astNodeNumber": 3,
                    "astHeight": 2
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,expression]",
                    "nodePosition": {
                        "charLength": 15,
                        "startLineNumber": 179,
                        "startColumnNumber": 24,
                        "endLineNumber": 179,
                        "endColumnNumber": 39
                    },
                    "nodeContext": "pr.last != null",
                    "nodeType": "InfixExpression",
                    "astNodeNumber": 5,
                    "astHeight": 3
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 154,
                        "startLineNumber": 179,
                        "startColumnNumber": 20,
                        "endLineNumber": 181,
                        "endColumnNumber": 21
                    },
                    "nodeContext": "if (pr.last != null) {\n  last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 27,
                    "astHeight": 11
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 2798,
                        "startLineNumber": 164,
                        "startColumnNumber": 23,
                        "endLineNumber": 211,
                        "endColumnNumber": 17
                    },
                    "nodeContext": "{\n  if (pr.propertyName.contains(\"/\")) {\n    continue;\n  }\n  if (\"rep:excerpt\".equals(pr.propertyName)) {\n    continue;\n  }\n  String first=null;\n  if (pr.first != null) {\n    first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n  }\n  String last=null;\n  if (pr.last != null) {\n    last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n  }\n  String prField=configuration.getFieldForPropertyRestriction(pr);\n  CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n  if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n    queryBuilder.append(configuration.getPathField());\n    queryBuilder.append(':');\n    queryBuilder.append(first);\n  }\n else {\n    if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(first);\n    }\n else     if (pr.first == null && pr.last == null) {\n      if (!queryBuilder.toString().contains(fieldName + \":\")) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append('*');\n      }\n    }\n else     if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n    }\n else     if (pr.isLike) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n    }\n else {\n      throw new RuntimeException(\"[unexpected!] not handled case\");\n    }\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 312,
                    "astHeight": 18
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5508,
                        "startLineNumber": 124,
                        "startColumnNumber": 16,
                        "endLineNumber": 211,
                        "endColumnNumber": 17
                    },
                    "nodeContext": "if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n  String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n  if (isSupportedHttpRequest(nativeQueryString)) {\n    String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n    if (!\"select\".equals(requestHandlerString)) {\n      if (requestHandlerString.charAt(0) != '/') {\n        requestHandlerString=\"/\" + requestHandlerString;\n      }\n      solrQuery.setRequestHandler(requestHandlerString);\n    }\n    String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n    for (    String param : parameterString.split(\"&\")) {\n      String[] kv=param.split(\"=\");\n      if (kv.length != 2) {\n        throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n      }\n else {\n        if (\"stream.body\".equals(kv[0])) {\n          kv[0]=\"q\";\n          String mltFlString=\"mlt.fl=\";\n          int mltFlIndex=parameterString.indexOf(mltFlString);\n          if (mltFlIndex > -1) {\n            int beginIndex=mltFlIndex + mltFlString.length();\n            int endIndex=parameterString.indexOf('&',beginIndex);\n            String fields;\n            if (endIndex > beginIndex) {\n              fields=parameterString.substring(beginIndex,endIndex);\n            }\n else {\n              fields=parameterString.substring(beginIndex);\n            }\n            kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n          }\n        }\n        solrQuery.setParam(kv[0],kv[1]);\n      }\n    }\n    return solrQuery;\n  }\n else {\n    queryBuilder.append(nativeQueryString);\n  }\n}\n else {\n  if (pr.propertyName.contains(\"/\")) {\n    continue;\n  }\n  if (\"rep:excerpt\".equals(pr.propertyName)) {\n    continue;\n  }\n  String first=null;\n  if (pr.first != null) {\n    first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n  }\n  String last=null;\n  if (pr.last != null) {\n    last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n  }\n  String prField=configuration.getFieldForPropertyRestriction(pr);\n  CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n  if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n    queryBuilder.append(configuration.getPathField());\n    queryBuilder.append(':');\n    queryBuilder.append(first);\n  }\n else {\n    if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(first);\n    }\n else     if (pr.first == null && pr.last == null) {\n      if (!queryBuilder.toString().contains(fieldName + \":\")) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append('*');\n      }\n    }\n else     if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n    }\n else     if (pr.isLike) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n    }\n else {\n      throw new RuntimeException(\"[unexpected!] not handled case\");\n    }\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 546,
                    "astHeight": 19
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.EnhancedForStatement,body]",
                    "nodePosition": {
                        "charLength": 5622,
                        "startLineNumber": 122,
                        "startColumnNumber": 71,
                        "endLineNumber": 213,
                        "endColumnNumber": 13
                    },
                    "nodeContext": "{\n  if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n    String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n    if (isSupportedHttpRequest(nativeQueryString)) {\n      String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n      if (!\"select\".equals(requestHandlerString)) {\n        if (requestHandlerString.charAt(0) != '/') {\n          requestHandlerString=\"/\" + requestHandlerString;\n        }\n        solrQuery.setRequestHandler(requestHandlerString);\n      }\n      String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n      for (      String param : parameterString.split(\"&\")) {\n        String[] kv=param.split(\"=\");\n        if (kv.length != 2) {\n          throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n        }\n else {\n          if (\"stream.body\".equals(kv[0])) {\n            kv[0]=\"q\";\n            String mltFlString=\"mlt.fl=\";\n            int mltFlIndex=parameterString.indexOf(mltFlString);\n            if (mltFlIndex > -1) {\n              int beginIndex=mltFlIndex + mltFlString.length();\n              int endIndex=parameterString.indexOf('&',beginIndex);\n              String fields;\n              if (endIndex > beginIndex) {\n                fields=parameterString.substring(beginIndex,endIndex);\n              }\n else {\n                fields=parameterString.substring(beginIndex);\n              }\n              kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n            }\n          }\n          solrQuery.setParam(kv[0],kv[1]);\n        }\n      }\n      return solrQuery;\n    }\n else {\n      queryBuilder.append(nativeQueryString);\n    }\n  }\n else {\n    if (pr.propertyName.contains(\"/\")) {\n      continue;\n    }\n    if (\"rep:excerpt\".equals(pr.propertyName)) {\n      continue;\n    }\n    String first=null;\n    if (pr.first != null) {\n      first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n    }\n    String last=null;\n    if (pr.last != null) {\n      last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n    }\n    String prField=configuration.getFieldForPropertyRestriction(pr);\n    CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n    if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n      queryBuilder.append(configuration.getPathField());\n      queryBuilder.append(':');\n      queryBuilder.append(first);\n    }\n else {\n      if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(first);\n      }\n else       if (pr.first == null && pr.last == null) {\n        if (!queryBuilder.toString().contains(fieldName + \":\")) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append('*');\n        }\n      }\n else       if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n      }\n else       if (pr.isLike) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n      }\n else {\n        throw new RuntimeException(\"[unexpected!] not handled case\");\n      }\n    }\n  }\n  queryBuilder.append(\" \");\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 552,
                    "astHeight": 20
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5681,
                        "startLineNumber": 122,
                        "startColumnNumber": 12,
                        "endLineNumber": 213,
                        "endColumnNumber": 13
                    },
                    "nodeContext": "for (Filter.PropertyRestriction pr : propertyRestrictions) {\n  if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n    String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n    if (isSupportedHttpRequest(nativeQueryString)) {\n      String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n      if (!\"select\".equals(requestHandlerString)) {\n        if (requestHandlerString.charAt(0) != '/') {\n          requestHandlerString=\"/\" + requestHandlerString;\n        }\n        solrQuery.setRequestHandler(requestHandlerString);\n      }\n      String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n      for (      String param : parameterString.split(\"&\")) {\n        String[] kv=param.split(\"=\");\n        if (kv.length != 2) {\n          throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n        }\n else {\n          if (\"stream.body\".equals(kv[0])) {\n            kv[0]=\"q\";\n            String mltFlString=\"mlt.fl=\";\n            int mltFlIndex=parameterString.indexOf(mltFlString);\n            if (mltFlIndex > -1) {\n              int beginIndex=mltFlIndex + mltFlString.length();\n              int endIndex=parameterString.indexOf('&',beginIndex);\n              String fields;\n              if (endIndex > beginIndex) {\n                fields=parameterString.substring(beginIndex,endIndex);\n              }\n else {\n                fields=parameterString.substring(beginIndex);\n              }\n              kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n            }\n          }\n          solrQuery.setParam(kv[0],kv[1]);\n        }\n      }\n      return solrQuery;\n    }\n else {\n      queryBuilder.append(nativeQueryString);\n    }\n  }\n else {\n    if (pr.propertyName.contains(\"/\")) {\n      continue;\n    }\n    if (\"rep:excerpt\".equals(pr.propertyName)) {\n      continue;\n    }\n    String first=null;\n    if (pr.first != null) {\n      first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n    }\n    String last=null;\n    if (pr.last != null) {\n      last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n    }\n    String prField=configuration.getFieldForPropertyRestriction(pr);\n    CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n    if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n      queryBuilder.append(configuration.getPathField());\n      queryBuilder.append(':');\n      queryBuilder.append(first);\n    }\n else {\n      if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(first);\n      }\n else       if (pr.first == null && pr.last == null) {\n        if (!queryBuilder.toString().contains(fieldName + \":\")) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append('*');\n        }\n      }\n else       if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n      }\n else       if (pr.isLike) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n      }\n else {\n        throw new RuntimeException(\"[unexpected!] not handled case\");\n      }\n    }\n  }\n  queryBuilder.append(\" \");\n}\n",
                    "nodeType": "EnhancedForStatement",
                    "astNodeNumber": 560,
                    "astHeight": 21
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,thenStatement]",
                    "nodePosition": {
                        "charLength": 5705,
                        "startLineNumber": 121,
                        "startColumnNumber": 77,
                        "endLineNumber": 214,
                        "endColumnNumber": 9
                    },
                    "nodeContext": "{\n  for (  Filter.PropertyRestriction pr : propertyRestrictions) {\n    if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n      String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n      if (isSupportedHttpRequest(nativeQueryString)) {\n        String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n        if (!\"select\".equals(requestHandlerString)) {\n          if (requestHandlerString.charAt(0) != '/') {\n            requestHandlerString=\"/\" + requestHandlerString;\n          }\n          solrQuery.setRequestHandler(requestHandlerString);\n        }\n        String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n        for (        String param : parameterString.split(\"&\")) {\n          String[] kv=param.split(\"=\");\n          if (kv.length != 2) {\n            throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n          }\n else {\n            if (\"stream.body\".equals(kv[0])) {\n              kv[0]=\"q\";\n              String mltFlString=\"mlt.fl=\";\n              int mltFlIndex=parameterString.indexOf(mltFlString);\n              if (mltFlIndex > -1) {\n                int beginIndex=mltFlIndex + mltFlString.length();\n                int endIndex=parameterString.indexOf('&',beginIndex);\n                String fields;\n                if (endIndex > beginIndex) {\n                  fields=parameterString.substring(beginIndex,endIndex);\n                }\n else {\n                  fields=parameterString.substring(beginIndex);\n                }\n                kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n              }\n            }\n            solrQuery.setParam(kv[0],kv[1]);\n          }\n        }\n        return solrQuery;\n      }\n else {\n        queryBuilder.append(nativeQueryString);\n      }\n    }\n else {\n      if (pr.propertyName.contains(\"/\")) {\n        continue;\n      }\n      if (\"rep:excerpt\".equals(pr.propertyName)) {\n        continue;\n      }\n      String first=null;\n      if (pr.first != null) {\n        first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n      }\n      String last=null;\n      if (pr.last != null) {\n        last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n      }\n      String prField=configuration.getFieldForPropertyRestriction(pr);\n      CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n      if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n        queryBuilder.append(configuration.getPathField());\n        queryBuilder.append(':');\n        queryBuilder.append(first);\n      }\n else {\n        if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(first);\n        }\n else         if (pr.first == null && pr.last == null) {\n          if (!queryBuilder.toString().contains(fieldName + \":\")) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append('*');\n          }\n        }\n else         if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n        }\n else         if (pr.isLike) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n        }\n else {\n          throw new RuntimeException(\"[unexpected!] not handled case\");\n        }\n      }\n    }\n    queryBuilder.append(\" \");\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 561,
                    "astHeight": 22
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5774,
                        "startLineNumber": 121,
                        "startColumnNumber": 8,
                        "endLineNumber": 214,
                        "endColumnNumber": 9
                    },
                    "nodeContext": "if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n  for (  Filter.PropertyRestriction pr : propertyRestrictions) {\n    if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n      String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n      if (isSupportedHttpRequest(nativeQueryString)) {\n        String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n        if (!\"select\".equals(requestHandlerString)) {\n          if (requestHandlerString.charAt(0) != '/') {\n            requestHandlerString=\"/\" + requestHandlerString;\n          }\n          solrQuery.setRequestHandler(requestHandlerString);\n        }\n        String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n        for (        String param : parameterString.split(\"&\")) {\n          String[] kv=param.split(\"=\");\n          if (kv.length != 2) {\n            throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n          }\n else {\n            if (\"stream.body\".equals(kv[0])) {\n              kv[0]=\"q\";\n              String mltFlString=\"mlt.fl=\";\n              int mltFlIndex=parameterString.indexOf(mltFlString);\n              if (mltFlIndex > -1) {\n                int beginIndex=mltFlIndex + mltFlString.length();\n                int endIndex=parameterString.indexOf('&',beginIndex);\n                String fields;\n                if (endIndex > beginIndex) {\n                  fields=parameterString.substring(beginIndex,endIndex);\n                }\n else {\n                  fields=parameterString.substring(beginIndex);\n                }\n                kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n              }\n            }\n            solrQuery.setParam(kv[0],kv[1]);\n          }\n        }\n        return solrQuery;\n      }\n else {\n        queryBuilder.append(nativeQueryString);\n      }\n    }\n else {\n      if (pr.propertyName.contains(\"/\")) {\n        continue;\n      }\n      if (\"rep:excerpt\".equals(pr.propertyName)) {\n        continue;\n      }\n      String first=null;\n      if (pr.first != null) {\n        first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n      }\n      String last=null;\n      if (pr.last != null) {\n        last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n      }\n      String prField=configuration.getFieldForPropertyRestriction(pr);\n      CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n      if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n        queryBuilder.append(configuration.getPathField());\n        queryBuilder.append(':');\n        queryBuilder.append(first);\n      }\n else {\n        if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(first);\n        }\n else         if (pr.first == null && pr.last == null) {\n          if (!queryBuilder.toString().contains(fieldName + \":\")) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append('*');\n          }\n        }\n else         if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n        }\n else         if (pr.isLike) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n        }\n else {\n          throw new RuntimeException(\"[unexpected!] not handled case\");\n        }\n      }\n    }\n    queryBuilder.append(\" \");\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 570,
                    "astHeight": 23
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.MethodDeclaration,body]",
                    "nodePosition": {
                        "charLength": 7985,
                        "startLineNumber": 103,
                        "startColumnNumber": 46,
                        "endLineNumber": 255,
                        "endColumnNumber": 5
                    },
                    "nodeContext": "{\n  SolrQuery solrQuery=new SolrQuery();\n  setDefaults(solrQuery);\n  StringBuilder queryBuilder=new StringBuilder();\n  if (filter.getFullTextConstraint() != null) {\n    queryBuilder.append(getFullTextQuery(filter.getFullTextConstraint()));\n    queryBuilder.append(' ');\n  }\n else   if (filter.getFulltextConditions() != null) {\n    Collection<String> fulltextConditions=filter.getFulltextConditions();\n    for (    String fulltextCondition : fulltextConditions) {\n      queryBuilder.append(fulltextCondition).append(\" \");\n    }\n  }\n  Collection<Filter.PropertyRestriction> propertyRestrictions=filter.getPropertyRestrictions();\n  if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n    for (    Filter.PropertyRestriction pr : propertyRestrictions) {\n      if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n        String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n        if (isSupportedHttpRequest(nativeQueryString)) {\n          String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n          if (!\"select\".equals(requestHandlerString)) {\n            if (requestHandlerString.charAt(0) != '/') {\n              requestHandlerString=\"/\" + requestHandlerString;\n            }\n            solrQuery.setRequestHandler(requestHandlerString);\n          }\n          String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n          for (          String param : parameterString.split(\"&\")) {\n            String[] kv=param.split(\"=\");\n            if (kv.length != 2) {\n              throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n            }\n else {\n              if (\"stream.body\".equals(kv[0])) {\n                kv[0]=\"q\";\n                String mltFlString=\"mlt.fl=\";\n                int mltFlIndex=parameterString.indexOf(mltFlString);\n                if (mltFlIndex > -1) {\n                  int beginIndex=mltFlIndex + mltFlString.length();\n                  int endIndex=parameterString.indexOf('&',beginIndex);\n                  String fields;\n                  if (endIndex > beginIndex) {\n                    fields=parameterString.substring(beginIndex,endIndex);\n                  }\n else {\n                    fields=parameterString.substring(beginIndex);\n                  }\n                  kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n                }\n              }\n              solrQuery.setParam(kv[0],kv[1]);\n            }\n          }\n          return solrQuery;\n        }\n else {\n          queryBuilder.append(nativeQueryString);\n        }\n      }\n else {\n        if (pr.propertyName.contains(\"/\")) {\n          continue;\n        }\n        if (\"rep:excerpt\".equals(pr.propertyName)) {\n          continue;\n        }\n        String first=null;\n        if (pr.first != null) {\n          first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n        }\n        String last=null;\n        if (pr.last != null) {\n          last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n        }\n        String prField=configuration.getFieldForPropertyRestriction(pr);\n        CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n        if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n          queryBuilder.append(configuration.getPathField());\n          queryBuilder.append(':');\n          queryBuilder.append(first);\n        }\n else {\n          if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(first);\n          }\n else           if (pr.first == null && pr.last == null) {\n            if (!queryBuilder.toString().contains(fieldName + \":\")) {\n              queryBuilder.append(fieldName).append(':');\n              queryBuilder.append('*');\n            }\n          }\n else           if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n          }\n else           if (pr.isLike) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n          }\n else {\n            throw new RuntimeException(\"[unexpected!] not handled case\");\n          }\n        }\n      }\n      queryBuilder.append(\" \");\n    }\n  }\n  String[] pts=filter.getPrimaryTypes().toArray(new String[filter.getPrimaryTypes().size()]);\n  for (int i=0; i < pts.length; i++) {\n    String pt=pts[i];\n    if (i == 0) {\n      queryBuilder.append(\"(\");\n    }\n    if (i > 0 && i < pts.length) {\n      queryBuilder.append(\"OR \");\n    }\n    queryBuilder.append(\"jcr\\\\:primaryType\").append(':').append(partialEscape(pt)).append(\" \");\n    if (i == pts.length - 1) {\n      queryBuilder.append(\")\");\n      queryBuilder.append(' ');\n    }\n  }\n  Filter.PathRestriction pathRestriction=filter.getPathRestriction();\n  if (pathRestriction != null) {\n    String path=purgePath(filter);\n    String fieldName=configuration.getFieldForPathRestriction(pathRestriction);\n    if (fieldName != null) {\n      queryBuilder.append(fieldName);\n      queryBuilder.append(':');\n      queryBuilder.append(path);\n    }\n  }\n  if (queryBuilder.length() == 0) {\n    queryBuilder.append(\"*:*\");\n  }\n  String escapedQuery=queryBuilder.toString();\n  solrQuery.setQuery(escapedQuery);\n  if (log.isDebugEnabled()) {\n    log.debug(\"JCR query {} has been converted to Solr query {}\",filter.getQueryStatement(),solrQuery.toString());\n  }\n  return solrQuery;\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 858,
                    "astHeight": 24
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.TypeDeclaration,bodyDeclarations]",
                    "nodePosition": {
                        "charLength": 8027,
                        "startLineNumber": 103,
                        "startColumnNumber": 4,
                        "endLineNumber": 255,
                        "endColumnNumber": 5
                    },
                    "nodeContext": "private SolrQuery getQuery(Filter filter){\n  SolrQuery solrQuery=new SolrQuery();\n  setDefaults(solrQuery);\n  StringBuilder queryBuilder=new StringBuilder();\n  if (filter.getFullTextConstraint() != null) {\n    queryBuilder.append(getFullTextQuery(filter.getFullTextConstraint()));\n    queryBuilder.append(' ');\n  }\n else   if (filter.getFulltextConditions() != null) {\n    Collection<String> fulltextConditions=filter.getFulltextConditions();\n    for (    String fulltextCondition : fulltextConditions) {\n      queryBuilder.append(fulltextCondition).append(\" \");\n    }\n  }\n  Collection<Filter.PropertyRestriction> propertyRestrictions=filter.getPropertyRestrictions();\n  if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n    for (    Filter.PropertyRestriction pr : propertyRestrictions) {\n      if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n        String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n        if (isSupportedHttpRequest(nativeQueryString)) {\n          String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n          if (!\"select\".equals(requestHandlerString)) {\n            if (requestHandlerString.charAt(0) != '/') {\n              requestHandlerString=\"/\" + requestHandlerString;\n            }\n            solrQuery.setRequestHandler(requestHandlerString);\n          }\n          String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n          for (          String param : parameterString.split(\"&\")) {\n            String[] kv=param.split(\"=\");\n            if (kv.length != 2) {\n              throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n            }\n else {\n              if (\"stream.body\".equals(kv[0])) {\n                kv[0]=\"q\";\n                String mltFlString=\"mlt.fl=\";\n                int mltFlIndex=parameterString.indexOf(mltFlString);\n                if (mltFlIndex > -1) {\n                  int beginIndex=mltFlIndex + mltFlString.length();\n                  int endIndex=parameterString.indexOf('&',beginIndex);\n                  String fields;\n                  if (endIndex > beginIndex) {\n                    fields=parameterString.substring(beginIndex,endIndex);\n                  }\n else {\n                    fields=parameterString.substring(beginIndex);\n                  }\n                  kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n                }\n              }\n              solrQuery.setParam(kv[0],kv[1]);\n            }\n          }\n          return solrQuery;\n        }\n else {\n          queryBuilder.append(nativeQueryString);\n        }\n      }\n else {\n        if (pr.propertyName.contains(\"/\")) {\n          continue;\n        }\n        if (\"rep:excerpt\".equals(pr.propertyName)) {\n          continue;\n        }\n        String first=null;\n        if (pr.first != null) {\n          first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n        }\n        String last=null;\n        if (pr.last != null) {\n          last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n        }\n        String prField=configuration.getFieldForPropertyRestriction(pr);\n        CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n        if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n          queryBuilder.append(configuration.getPathField());\n          queryBuilder.append(':');\n          queryBuilder.append(first);\n        }\n else {\n          if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(first);\n          }\n else           if (pr.first == null && pr.last == null) {\n            if (!queryBuilder.toString().contains(fieldName + \":\")) {\n              queryBuilder.append(fieldName).append(':');\n              queryBuilder.append('*');\n            }\n          }\n else           if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n          }\n else           if (pr.isLike) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n          }\n else {\n            throw new RuntimeException(\"[unexpected!] not handled case\");\n          }\n        }\n      }\n      queryBuilder.append(\" \");\n    }\n  }\n  String[] pts=filter.getPrimaryTypes().toArray(new String[filter.getPrimaryTypes().size()]);\n  for (int i=0; i < pts.length; i++) {\n    String pt=pts[i];\n    if (i == 0) {\n      queryBuilder.append(\"(\");\n    }\n    if (i > 0 && i < pts.length) {\n      queryBuilder.append(\"OR \");\n    }\n    queryBuilder.append(\"jcr\\\\:primaryType\").append(':').append(partialEscape(pt)).append(\" \");\n    if (i == pts.length - 1) {\n      queryBuilder.append(\")\");\n      queryBuilder.append(' ');\n    }\n  }\n  Filter.PathRestriction pathRestriction=filter.getPathRestriction();\n  if (pathRestriction != null) {\n    String path=purgePath(filter);\n    String fieldName=configuration.getFieldForPathRestriction(pathRestriction);\n    if (fieldName != null) {\n      queryBuilder.append(fieldName);\n      queryBuilder.append(':');\n      queryBuilder.append(path);\n    }\n  }\n  if (queryBuilder.length() == 0) {\n    queryBuilder.append(\"*:*\");\n  }\n  String escapedQuery=queryBuilder.toString();\n  solrQuery.setQuery(escapedQuery);\n  if (log.isDebugEnabled()) {\n    log.debug(\"JCR query {} has been converted to Solr query {}\",filter.getQueryStatement(),solrQuery.toString());\n  }\n  return solrQuery;\n}\n",
                    "nodeType": "MethodDeclaration",
                    "astNodeNumber": 867,
                    "astHeight": 25
                }
            ],
            "currentLineData": {
                "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,expression]",
                "nodePosition": {
                    "charLength": 15,
                    "startLineNumber": 179,
                    "startColumnNumber": 24,
                    "endLineNumber": 179,
                    "endColumnNumber": 39
                },
                "nodeContext": "pr.last != null",
                "nodeType": "InfixExpression",
                "astNodeNumber": 5,
                "astHeight": 3
            },
            "tokenLength": 1,
            "type": "org.apache.jackrabbit.oak.spi.query.Filter.PropertyRestriction"
        },
        {
            "nodeContext": "pr",
            "nodeType": "SimpleName",
            "nodePosition": {
                "charLength": 2,
                "startLineNumber": 180,
                "startColumnNumber": 60,
                "endLineNumber": 180,
                "endColumnNumber": 62
            },
            "astNodeNumber": 1,
            "astHeight": 1,
            "parentDataList": [
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.MethodInvocation,expression]",
                    "nodePosition": {
                        "charLength": 7,
                        "startLineNumber": 180,
                        "startColumnNumber": 60,
                        "endLineNumber": 180,
                        "endColumnNumber": 67
                    },
                    "nodeContext": "pr.last",
                    "nodeType": "QualifiedName",
                    "astNodeNumber": 3,
                    "astHeight": 2
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.MethodInvocation,arguments]",
                    "nodePosition": {
                        "charLength": 35,
                        "startLineNumber": 180,
                        "startColumnNumber": 60,
                        "endLineNumber": 180,
                        "endColumnNumber": 95
                    },
                    "nodeContext": "pr.last.getValue(pr.last.getType())",
                    "nodeType": "MethodInvocation",
                    "astNodeNumber": 10,
                    "astHeight": 4
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.MethodInvocation,arguments]",
                    "nodePosition": {
                        "charLength": 51,
                        "startLineNumber": 180,
                        "startColumnNumber": 45,
                        "endLineNumber": 180,
                        "endColumnNumber": 96
                    },
                    "nodeContext": "String.valueOf(pr.last.getValue(pr.last.getType()))",
                    "nodeType": "MethodInvocation",
                    "astNodeNumber": 13,
                    "astHeight": 5
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.MethodInvocation,expression]",
                    "nodePosition": {
                        "charLength": 66,
                        "startLineNumber": 180,
                        "startColumnNumber": 31,
                        "endLineNumber": 180,
                        "endColumnNumber": 97
                    },
                    "nodeContext": "partialEscape(String.valueOf(pr.last.getValue(pr.last.getType())))",
                    "nodeType": "MethodInvocation",
                    "astNodeNumber": 15,
                    "astHeight": 6
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.Assignment,rightHandSide]",
                    "nodePosition": {
                        "charLength": 77,
                        "startLineNumber": 180,
                        "startColumnNumber": 31,
                        "endLineNumber": 180,
                        "endColumnNumber": 108
                    },
                    "nodeContext": "partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString()",
                    "nodeType": "MethodInvocation",
                    "astNodeNumber": 17,
                    "astHeight": 7
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.ExpressionStatement,expression]",
                    "nodePosition": {
                        "charLength": 84,
                        "startLineNumber": 180,
                        "startColumnNumber": 24,
                        "endLineNumber": 180,
                        "endColumnNumber": 108
                    },
                    "nodeContext": "last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString()",
                    "nodeType": "Assignment",
                    "astNodeNumber": 19,
                    "astHeight": 8
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 85,
                        "startLineNumber": 180,
                        "startColumnNumber": 24,
                        "endLineNumber": 180,
                        "endColumnNumber": 109
                    },
                    "nodeContext": "last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n",
                    "nodeType": "ExpressionStatement",
                    "astNodeNumber": 20,
                    "astHeight": 9
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,thenStatement]",
                    "nodePosition": {
                        "charLength": 133,
                        "startLineNumber": 179,
                        "startColumnNumber": 41,
                        "endLineNumber": 181,
                        "endColumnNumber": 21
                    },
                    "nodeContext": "{\n  last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 21,
                    "astHeight": 10
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 154,
                        "startLineNumber": 179,
                        "startColumnNumber": 20,
                        "endLineNumber": 181,
                        "endColumnNumber": 21
                    },
                    "nodeContext": "if (pr.last != null) {\n  last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 27,
                    "astHeight": 11
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 2798,
                        "startLineNumber": 164,
                        "startColumnNumber": 23,
                        "endLineNumber": 211,
                        "endColumnNumber": 17
                    },
                    "nodeContext": "{\n  if (pr.propertyName.contains(\"/\")) {\n    continue;\n  }\n  if (\"rep:excerpt\".equals(pr.propertyName)) {\n    continue;\n  }\n  String first=null;\n  if (pr.first != null) {\n    first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n  }\n  String last=null;\n  if (pr.last != null) {\n    last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n  }\n  String prField=configuration.getFieldForPropertyRestriction(pr);\n  CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n  if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n    queryBuilder.append(configuration.getPathField());\n    queryBuilder.append(':');\n    queryBuilder.append(first);\n  }\n else {\n    if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(first);\n    }\n else     if (pr.first == null && pr.last == null) {\n      if (!queryBuilder.toString().contains(fieldName + \":\")) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append('*');\n      }\n    }\n else     if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n    }\n else     if (pr.isLike) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n    }\n else {\n      throw new RuntimeException(\"[unexpected!] not handled case\");\n    }\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 312,
                    "astHeight": 18
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5508,
                        "startLineNumber": 124,
                        "startColumnNumber": 16,
                        "endLineNumber": 211,
                        "endColumnNumber": 17
                    },
                    "nodeContext": "if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n  String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n  if (isSupportedHttpRequest(nativeQueryString)) {\n    String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n    if (!\"select\".equals(requestHandlerString)) {\n      if (requestHandlerString.charAt(0) != '/') {\n        requestHandlerString=\"/\" + requestHandlerString;\n      }\n      solrQuery.setRequestHandler(requestHandlerString);\n    }\n    String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n    for (    String param : parameterString.split(\"&\")) {\n      String[] kv=param.split(\"=\");\n      if (kv.length != 2) {\n        throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n      }\n else {\n        if (\"stream.body\".equals(kv[0])) {\n          kv[0]=\"q\";\n          String mltFlString=\"mlt.fl=\";\n          int mltFlIndex=parameterString.indexOf(mltFlString);\n          if (mltFlIndex > -1) {\n            int beginIndex=mltFlIndex + mltFlString.length();\n            int endIndex=parameterString.indexOf('&',beginIndex);\n            String fields;\n            if (endIndex > beginIndex) {\n              fields=parameterString.substring(beginIndex,endIndex);\n            }\n else {\n              fields=parameterString.substring(beginIndex);\n            }\n            kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n          }\n        }\n        solrQuery.setParam(kv[0],kv[1]);\n      }\n    }\n    return solrQuery;\n  }\n else {\n    queryBuilder.append(nativeQueryString);\n  }\n}\n else {\n  if (pr.propertyName.contains(\"/\")) {\n    continue;\n  }\n  if (\"rep:excerpt\".equals(pr.propertyName)) {\n    continue;\n  }\n  String first=null;\n  if (pr.first != null) {\n    first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n  }\n  String last=null;\n  if (pr.last != null) {\n    last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n  }\n  String prField=configuration.getFieldForPropertyRestriction(pr);\n  CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n  if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n    queryBuilder.append(configuration.getPathField());\n    queryBuilder.append(':');\n    queryBuilder.append(first);\n  }\n else {\n    if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(first);\n    }\n else     if (pr.first == null && pr.last == null) {\n      if (!queryBuilder.toString().contains(fieldName + \":\")) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append('*');\n      }\n    }\n else     if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n    }\n else     if (pr.isLike) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n    }\n else {\n      throw new RuntimeException(\"[unexpected!] not handled case\");\n    }\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 546,
                    "astHeight": 19
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.EnhancedForStatement,body]",
                    "nodePosition": {
                        "charLength": 5622,
                        "startLineNumber": 122,
                        "startColumnNumber": 71,
                        "endLineNumber": 213,
                        "endColumnNumber": 13
                    },
                    "nodeContext": "{\n  if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n    String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n    if (isSupportedHttpRequest(nativeQueryString)) {\n      String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n      if (!\"select\".equals(requestHandlerString)) {\n        if (requestHandlerString.charAt(0) != '/') {\n          requestHandlerString=\"/\" + requestHandlerString;\n        }\n        solrQuery.setRequestHandler(requestHandlerString);\n      }\n      String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n      for (      String param : parameterString.split(\"&\")) {\n        String[] kv=param.split(\"=\");\n        if (kv.length != 2) {\n          throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n        }\n else {\n          if (\"stream.body\".equals(kv[0])) {\n            kv[0]=\"q\";\n            String mltFlString=\"mlt.fl=\";\n            int mltFlIndex=parameterString.indexOf(mltFlString);\n            if (mltFlIndex > -1) {\n              int beginIndex=mltFlIndex + mltFlString.length();\n              int endIndex=parameterString.indexOf('&',beginIndex);\n              String fields;\n              if (endIndex > beginIndex) {\n                fields=parameterString.substring(beginIndex,endIndex);\n              }\n else {\n                fields=parameterString.substring(beginIndex);\n              }\n              kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n            }\n          }\n          solrQuery.setParam(kv[0],kv[1]);\n        }\n      }\n      return solrQuery;\n    }\n else {\n      queryBuilder.append(nativeQueryString);\n    }\n  }\n else {\n    if (pr.propertyName.contains(\"/\")) {\n      continue;\n    }\n    if (\"rep:excerpt\".equals(pr.propertyName)) {\n      continue;\n    }\n    String first=null;\n    if (pr.first != null) {\n      first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n    }\n    String last=null;\n    if (pr.last != null) {\n      last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n    }\n    String prField=configuration.getFieldForPropertyRestriction(pr);\n    CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n    if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n      queryBuilder.append(configuration.getPathField());\n      queryBuilder.append(':');\n      queryBuilder.append(first);\n    }\n else {\n      if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(first);\n      }\n else       if (pr.first == null && pr.last == null) {\n        if (!queryBuilder.toString().contains(fieldName + \":\")) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append('*');\n        }\n      }\n else       if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n      }\n else       if (pr.isLike) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n      }\n else {\n        throw new RuntimeException(\"[unexpected!] not handled case\");\n      }\n    }\n  }\n  queryBuilder.append(\" \");\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 552,
                    "astHeight": 20
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5681,
                        "startLineNumber": 122,
                        "startColumnNumber": 12,
                        "endLineNumber": 213,
                        "endColumnNumber": 13
                    },
                    "nodeContext": "for (Filter.PropertyRestriction pr : propertyRestrictions) {\n  if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n    String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n    if (isSupportedHttpRequest(nativeQueryString)) {\n      String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n      if (!\"select\".equals(requestHandlerString)) {\n        if (requestHandlerString.charAt(0) != '/') {\n          requestHandlerString=\"/\" + requestHandlerString;\n        }\n        solrQuery.setRequestHandler(requestHandlerString);\n      }\n      String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n      for (      String param : parameterString.split(\"&\")) {\n        String[] kv=param.split(\"=\");\n        if (kv.length != 2) {\n          throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n        }\n else {\n          if (\"stream.body\".equals(kv[0])) {\n            kv[0]=\"q\";\n            String mltFlString=\"mlt.fl=\";\n            int mltFlIndex=parameterString.indexOf(mltFlString);\n            if (mltFlIndex > -1) {\n              int beginIndex=mltFlIndex + mltFlString.length();\n              int endIndex=parameterString.indexOf('&',beginIndex);\n              String fields;\n              if (endIndex > beginIndex) {\n                fields=parameterString.substring(beginIndex,endIndex);\n              }\n else {\n                fields=parameterString.substring(beginIndex);\n              }\n              kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n            }\n          }\n          solrQuery.setParam(kv[0],kv[1]);\n        }\n      }\n      return solrQuery;\n    }\n else {\n      queryBuilder.append(nativeQueryString);\n    }\n  }\n else {\n    if (pr.propertyName.contains(\"/\")) {\n      continue;\n    }\n    if (\"rep:excerpt\".equals(pr.propertyName)) {\n      continue;\n    }\n    String first=null;\n    if (pr.first != null) {\n      first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n    }\n    String last=null;\n    if (pr.last != null) {\n      last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n    }\n    String prField=configuration.getFieldForPropertyRestriction(pr);\n    CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n    if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n      queryBuilder.append(configuration.getPathField());\n      queryBuilder.append(':');\n      queryBuilder.append(first);\n    }\n else {\n      if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(first);\n      }\n else       if (pr.first == null && pr.last == null) {\n        if (!queryBuilder.toString().contains(fieldName + \":\")) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append('*');\n        }\n      }\n else       if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n      }\n else       if (pr.isLike) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n      }\n else {\n        throw new RuntimeException(\"[unexpected!] not handled case\");\n      }\n    }\n  }\n  queryBuilder.append(\" \");\n}\n",
                    "nodeType": "EnhancedForStatement",
                    "astNodeNumber": 560,
                    "astHeight": 21
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,thenStatement]",
                    "nodePosition": {
                        "charLength": 5705,
                        "startLineNumber": 121,
                        "startColumnNumber": 77,
                        "endLineNumber": 214,
                        "endColumnNumber": 9
                    },
                    "nodeContext": "{\n  for (  Filter.PropertyRestriction pr : propertyRestrictions) {\n    if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n      String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n      if (isSupportedHttpRequest(nativeQueryString)) {\n        String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n        if (!\"select\".equals(requestHandlerString)) {\n          if (requestHandlerString.charAt(0) != '/') {\n            requestHandlerString=\"/\" + requestHandlerString;\n          }\n          solrQuery.setRequestHandler(requestHandlerString);\n        }\n        String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n        for (        String param : parameterString.split(\"&\")) {\n          String[] kv=param.split(\"=\");\n          if (kv.length != 2) {\n            throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n          }\n else {\n            if (\"stream.body\".equals(kv[0])) {\n              kv[0]=\"q\";\n              String mltFlString=\"mlt.fl=\";\n              int mltFlIndex=parameterString.indexOf(mltFlString);\n              if (mltFlIndex > -1) {\n                int beginIndex=mltFlIndex + mltFlString.length();\n                int endIndex=parameterString.indexOf('&',beginIndex);\n                String fields;\n                if (endIndex > beginIndex) {\n                  fields=parameterString.substring(beginIndex,endIndex);\n                }\n else {\n                  fields=parameterString.substring(beginIndex);\n                }\n                kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n              }\n            }\n            solrQuery.setParam(kv[0],kv[1]);\n          }\n        }\n        return solrQuery;\n      }\n else {\n        queryBuilder.append(nativeQueryString);\n      }\n    }\n else {\n      if (pr.propertyName.contains(\"/\")) {\n        continue;\n      }\n      if (\"rep:excerpt\".equals(pr.propertyName)) {\n        continue;\n      }\n      String first=null;\n      if (pr.first != null) {\n        first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n      }\n      String last=null;\n      if (pr.last != null) {\n        last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n      }\n      String prField=configuration.getFieldForPropertyRestriction(pr);\n      CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n      if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n        queryBuilder.append(configuration.getPathField());\n        queryBuilder.append(':');\n        queryBuilder.append(first);\n      }\n else {\n        if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(first);\n        }\n else         if (pr.first == null && pr.last == null) {\n          if (!queryBuilder.toString().contains(fieldName + \":\")) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append('*');\n          }\n        }\n else         if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n        }\n else         if (pr.isLike) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n        }\n else {\n          throw new RuntimeException(\"[unexpected!] not handled case\");\n        }\n      }\n    }\n    queryBuilder.append(\" \");\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 561,
                    "astHeight": 22
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5774,
                        "startLineNumber": 121,
                        "startColumnNumber": 8,
                        "endLineNumber": 214,
                        "endColumnNumber": 9
                    },
                    "nodeContext": "if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n  for (  Filter.PropertyRestriction pr : propertyRestrictions) {\n    if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n      String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n      if (isSupportedHttpRequest(nativeQueryString)) {\n        String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n        if (!\"select\".equals(requestHandlerString)) {\n          if (requestHandlerString.charAt(0) != '/') {\n            requestHandlerString=\"/\" + requestHandlerString;\n          }\n          solrQuery.setRequestHandler(requestHandlerString);\n        }\n        String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n        for (        String param : parameterString.split(\"&\")) {\n          String[] kv=param.split(\"=\");\n          if (kv.length != 2) {\n            throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n          }\n else {\n            if (\"stream.body\".equals(kv[0])) {\n              kv[0]=\"q\";\n              String mltFlString=\"mlt.fl=\";\n              int mltFlIndex=parameterString.indexOf(mltFlString);\n              if (mltFlIndex > -1) {\n                int beginIndex=mltFlIndex + mltFlString.length();\n                int endIndex=parameterString.indexOf('&',beginIndex);\n                String fields;\n                if (endIndex > beginIndex) {\n                  fields=parameterString.substring(beginIndex,endIndex);\n                }\n else {\n                  fields=parameterString.substring(beginIndex);\n                }\n                kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n              }\n            }\n            solrQuery.setParam(kv[0],kv[1]);\n          }\n        }\n        return solrQuery;\n      }\n else {\n        queryBuilder.append(nativeQueryString);\n      }\n    }\n else {\n      if (pr.propertyName.contains(\"/\")) {\n        continue;\n      }\n      if (\"rep:excerpt\".equals(pr.propertyName)) {\n        continue;\n      }\n      String first=null;\n      if (pr.first != null) {\n        first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n      }\n      String last=null;\n      if (pr.last != null) {\n        last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n      }\n      String prField=configuration.getFieldForPropertyRestriction(pr);\n      CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n      if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n        queryBuilder.append(configuration.getPathField());\n        queryBuilder.append(':');\n        queryBuilder.append(first);\n      }\n else {\n        if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(first);\n        }\n else         if (pr.first == null && pr.last == null) {\n          if (!queryBuilder.toString().contains(fieldName + \":\")) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append('*');\n          }\n        }\n else         if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n        }\n else         if (pr.isLike) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n        }\n else {\n          throw new RuntimeException(\"[unexpected!] not handled case\");\n        }\n      }\n    }\n    queryBuilder.append(\" \");\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 570,
                    "astHeight": 23
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.MethodDeclaration,body]",
                    "nodePosition": {
                        "charLength": 7985,
                        "startLineNumber": 103,
                        "startColumnNumber": 46,
                        "endLineNumber": 255,
                        "endColumnNumber": 5
                    },
                    "nodeContext": "{\n  SolrQuery solrQuery=new SolrQuery();\n  setDefaults(solrQuery);\n  StringBuilder queryBuilder=new StringBuilder();\n  if (filter.getFullTextConstraint() != null) {\n    queryBuilder.append(getFullTextQuery(filter.getFullTextConstraint()));\n    queryBuilder.append(' ');\n  }\n else   if (filter.getFulltextConditions() != null) {\n    Collection<String> fulltextConditions=filter.getFulltextConditions();\n    for (    String fulltextCondition : fulltextConditions) {\n      queryBuilder.append(fulltextCondition).append(\" \");\n    }\n  }\n  Collection<Filter.PropertyRestriction> propertyRestrictions=filter.getPropertyRestrictions();\n  if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n    for (    Filter.PropertyRestriction pr : propertyRestrictions) {\n      if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n        String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n        if (isSupportedHttpRequest(nativeQueryString)) {\n          String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n          if (!\"select\".equals(requestHandlerString)) {\n            if (requestHandlerString.charAt(0) != '/') {\n              requestHandlerString=\"/\" + requestHandlerString;\n            }\n            solrQuery.setRequestHandler(requestHandlerString);\n          }\n          String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n          for (          String param : parameterString.split(\"&\")) {\n            String[] kv=param.split(\"=\");\n            if (kv.length != 2) {\n              throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n            }\n else {\n              if (\"stream.body\".equals(kv[0])) {\n                kv[0]=\"q\";\n                String mltFlString=\"mlt.fl=\";\n                int mltFlIndex=parameterString.indexOf(mltFlString);\n                if (mltFlIndex > -1) {\n                  int beginIndex=mltFlIndex + mltFlString.length();\n                  int endIndex=parameterString.indexOf('&',beginIndex);\n                  String fields;\n                  if (endIndex > beginIndex) {\n                    fields=parameterString.substring(beginIndex,endIndex);\n                  }\n else {\n                    fields=parameterString.substring(beginIndex);\n                  }\n                  kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n                }\n              }\n              solrQuery.setParam(kv[0],kv[1]);\n            }\n          }\n          return solrQuery;\n        }\n else {\n          queryBuilder.append(nativeQueryString);\n        }\n      }\n else {\n        if (pr.propertyName.contains(\"/\")) {\n          continue;\n        }\n        if (\"rep:excerpt\".equals(pr.propertyName)) {\n          continue;\n        }\n        String first=null;\n        if (pr.first != null) {\n          first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n        }\n        String last=null;\n        if (pr.last != null) {\n          last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n        }\n        String prField=configuration.getFieldForPropertyRestriction(pr);\n        CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n        if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n          queryBuilder.append(configuration.getPathField());\n          queryBuilder.append(':');\n          queryBuilder.append(first);\n        }\n else {\n          if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(first);\n          }\n else           if (pr.first == null && pr.last == null) {\n            if (!queryBuilder.toString().contains(fieldName + \":\")) {\n              queryBuilder.append(fieldName).append(':');\n              queryBuilder.append('*');\n            }\n          }\n else           if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n          }\n else           if (pr.isLike) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n          }\n else {\n            throw new RuntimeException(\"[unexpected!] not handled case\");\n          }\n        }\n      }\n      queryBuilder.append(\" \");\n    }\n  }\n  String[] pts=filter.getPrimaryTypes().toArray(new String[filter.getPrimaryTypes().size()]);\n  for (int i=0; i < pts.length; i++) {\n    String pt=pts[i];\n    if (i == 0) {\n      queryBuilder.append(\"(\");\n    }\n    if (i > 0 && i < pts.length) {\n      queryBuilder.append(\"OR \");\n    }\n    queryBuilder.append(\"jcr\\\\:primaryType\").append(':').append(partialEscape(pt)).append(\" \");\n    if (i == pts.length - 1) {\n      queryBuilder.append(\")\");\n      queryBuilder.append(' ');\n    }\n  }\n  Filter.PathRestriction pathRestriction=filter.getPathRestriction();\n  if (pathRestriction != null) {\n    String path=purgePath(filter);\n    String fieldName=configuration.getFieldForPathRestriction(pathRestriction);\n    if (fieldName != null) {\n      queryBuilder.append(fieldName);\n      queryBuilder.append(':');\n      queryBuilder.append(path);\n    }\n  }\n  if (queryBuilder.length() == 0) {\n    queryBuilder.append(\"*:*\");\n  }\n  String escapedQuery=queryBuilder.toString();\n  solrQuery.setQuery(escapedQuery);\n  if (log.isDebugEnabled()) {\n    log.debug(\"JCR query {} has been converted to Solr query {}\",filter.getQueryStatement(),solrQuery.toString());\n  }\n  return solrQuery;\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 858,
                    "astHeight": 24
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.TypeDeclaration,bodyDeclarations]",
                    "nodePosition": {
                        "charLength": 8027,
                        "startLineNumber": 103,
                        "startColumnNumber": 4,
                        "endLineNumber": 255,
                        "endColumnNumber": 5
                    },
                    "nodeContext": "private SolrQuery getQuery(Filter filter){\n  SolrQuery solrQuery=new SolrQuery();\n  setDefaults(solrQuery);\n  StringBuilder queryBuilder=new StringBuilder();\n  if (filter.getFullTextConstraint() != null) {\n    queryBuilder.append(getFullTextQuery(filter.getFullTextConstraint()));\n    queryBuilder.append(' ');\n  }\n else   if (filter.getFulltextConditions() != null) {\n    Collection<String> fulltextConditions=filter.getFulltextConditions();\n    for (    String fulltextCondition : fulltextConditions) {\n      queryBuilder.append(fulltextCondition).append(\" \");\n    }\n  }\n  Collection<Filter.PropertyRestriction> propertyRestrictions=filter.getPropertyRestrictions();\n  if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n    for (    Filter.PropertyRestriction pr : propertyRestrictions) {\n      if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n        String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n        if (isSupportedHttpRequest(nativeQueryString)) {\n          String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n          if (!\"select\".equals(requestHandlerString)) {\n            if (requestHandlerString.charAt(0) != '/') {\n              requestHandlerString=\"/\" + requestHandlerString;\n            }\n            solrQuery.setRequestHandler(requestHandlerString);\n          }\n          String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n          for (          String param : parameterString.split(\"&\")) {\n            String[] kv=param.split(\"=\");\n            if (kv.length != 2) {\n              throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n            }\n else {\n              if (\"stream.body\".equals(kv[0])) {\n                kv[0]=\"q\";\n                String mltFlString=\"mlt.fl=\";\n                int mltFlIndex=parameterString.indexOf(mltFlString);\n                if (mltFlIndex > -1) {\n                  int beginIndex=mltFlIndex + mltFlString.length();\n                  int endIndex=parameterString.indexOf('&',beginIndex);\n                  String fields;\n                  if (endIndex > beginIndex) {\n                    fields=parameterString.substring(beginIndex,endIndex);\n                  }\n else {\n                    fields=parameterString.substring(beginIndex);\n                  }\n                  kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n                }\n              }\n              solrQuery.setParam(kv[0],kv[1]);\n            }\n          }\n          return solrQuery;\n        }\n else {\n          queryBuilder.append(nativeQueryString);\n        }\n      }\n else {\n        if (pr.propertyName.contains(\"/\")) {\n          continue;\n        }\n        if (\"rep:excerpt\".equals(pr.propertyName)) {\n          continue;\n        }\n        String first=null;\n        if (pr.first != null) {\n          first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n        }\n        String last=null;\n        if (pr.last != null) {\n          last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n        }\n        String prField=configuration.getFieldForPropertyRestriction(pr);\n        CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n        if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n          queryBuilder.append(configuration.getPathField());\n          queryBuilder.append(':');\n          queryBuilder.append(first);\n        }\n else {\n          if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(first);\n          }\n else           if (pr.first == null && pr.last == null) {\n            if (!queryBuilder.toString().contains(fieldName + \":\")) {\n              queryBuilder.append(fieldName).append(':');\n              queryBuilder.append('*');\n            }\n          }\n else           if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n          }\n else           if (pr.isLike) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n          }\n else {\n            throw new RuntimeException(\"[unexpected!] not handled case\");\n          }\n        }\n      }\n      queryBuilder.append(\" \");\n    }\n  }\n  String[] pts=filter.getPrimaryTypes().toArray(new String[filter.getPrimaryTypes().size()]);\n  for (int i=0; i < pts.length; i++) {\n    String pt=pts[i];\n    if (i == 0) {\n      queryBuilder.append(\"(\");\n    }\n    if (i > 0 && i < pts.length) {\n      queryBuilder.append(\"OR \");\n    }\n    queryBuilder.append(\"jcr\\\\:primaryType\").append(':').append(partialEscape(pt)).append(\" \");\n    if (i == pts.length - 1) {\n      queryBuilder.append(\")\");\n      queryBuilder.append(' ');\n    }\n  }\n  Filter.PathRestriction pathRestriction=filter.getPathRestriction();\n  if (pathRestriction != null) {\n    String path=purgePath(filter);\n    String fieldName=configuration.getFieldForPathRestriction(pathRestriction);\n    if (fieldName != null) {\n      queryBuilder.append(fieldName);\n      queryBuilder.append(':');\n      queryBuilder.append(path);\n    }\n  }\n  if (queryBuilder.length() == 0) {\n    queryBuilder.append(\"*:*\");\n  }\n  String escapedQuery=queryBuilder.toString();\n  solrQuery.setQuery(escapedQuery);\n  if (log.isDebugEnabled()) {\n    log.debug(\"JCR query {} has been converted to Solr query {}\",filter.getQueryStatement(),solrQuery.toString());\n  }\n  return solrQuery;\n}\n",
                    "nodeType": "MethodDeclaration",
                    "astNodeNumber": 867,
                    "astHeight": 25
                }
            ],
            "currentLineData": {
                "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                "nodePosition": {
                    "charLength": 85,
                    "startLineNumber": 180,
                    "startColumnNumber": 24,
                    "endLineNumber": 180,
                    "endColumnNumber": 109
                },
                "nodeContext": "last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n",
                "nodeType": "ExpressionStatement",
                "astNodeNumber": 20,
                "astHeight": 9
            },
            "tokenLength": 1,
            "type": "org.apache.jackrabbit.oak.spi.query.Filter.PropertyRestriction"
        },
        {
            "nodeContext": "pr",
            "nodeType": "SimpleName",
            "nodePosition": {
                "charLength": 2,
                "startLineNumber": 180,
                "startColumnNumber": 77,
                "endLineNumber": 180,
                "endColumnNumber": 79
            },
            "astNodeNumber": 1,
            "astHeight": 1,
            "parentDataList": [
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.MethodInvocation,expression]",
                    "nodePosition": {
                        "charLength": 7,
                        "startLineNumber": 180,
                        "startColumnNumber": 77,
                        "endLineNumber": 180,
                        "endColumnNumber": 84
                    },
                    "nodeContext": "pr.last",
                    "nodeType": "QualifiedName",
                    "astNodeNumber": 3,
                    "astHeight": 2
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.MethodInvocation,arguments]",
                    "nodePosition": {
                        "charLength": 17,
                        "startLineNumber": 180,
                        "startColumnNumber": 77,
                        "endLineNumber": 180,
                        "endColumnNumber": 94
                    },
                    "nodeContext": "pr.last.getType()",
                    "nodeType": "MethodInvocation",
                    "astNodeNumber": 5,
                    "astHeight": 3
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.MethodInvocation,arguments]",
                    "nodePosition": {
                        "charLength": 35,
                        "startLineNumber": 180,
                        "startColumnNumber": 60,
                        "endLineNumber": 180,
                        "endColumnNumber": 95
                    },
                    "nodeContext": "pr.last.getValue(pr.last.getType())",
                    "nodeType": "MethodInvocation",
                    "astNodeNumber": 10,
                    "astHeight": 4
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.MethodInvocation,arguments]",
                    "nodePosition": {
                        "charLength": 51,
                        "startLineNumber": 180,
                        "startColumnNumber": 45,
                        "endLineNumber": 180,
                        "endColumnNumber": 96
                    },
                    "nodeContext": "String.valueOf(pr.last.getValue(pr.last.getType()))",
                    "nodeType": "MethodInvocation",
                    "astNodeNumber": 13,
                    "astHeight": 5
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.MethodInvocation,expression]",
                    "nodePosition": {
                        "charLength": 66,
                        "startLineNumber": 180,
                        "startColumnNumber": 31,
                        "endLineNumber": 180,
                        "endColumnNumber": 97
                    },
                    "nodeContext": "partialEscape(String.valueOf(pr.last.getValue(pr.last.getType())))",
                    "nodeType": "MethodInvocation",
                    "astNodeNumber": 15,
                    "astHeight": 6
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.Assignment,rightHandSide]",
                    "nodePosition": {
                        "charLength": 77,
                        "startLineNumber": 180,
                        "startColumnNumber": 31,
                        "endLineNumber": 180,
                        "endColumnNumber": 108
                    },
                    "nodeContext": "partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString()",
                    "nodeType": "MethodInvocation",
                    "astNodeNumber": 17,
                    "astHeight": 7
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.ExpressionStatement,expression]",
                    "nodePosition": {
                        "charLength": 84,
                        "startLineNumber": 180,
                        "startColumnNumber": 24,
                        "endLineNumber": 180,
                        "endColumnNumber": 108
                    },
                    "nodeContext": "last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString()",
                    "nodeType": "Assignment",
                    "astNodeNumber": 19,
                    "astHeight": 8
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 85,
                        "startLineNumber": 180,
                        "startColumnNumber": 24,
                        "endLineNumber": 180,
                        "endColumnNumber": 109
                    },
                    "nodeContext": "last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n",
                    "nodeType": "ExpressionStatement",
                    "astNodeNumber": 20,
                    "astHeight": 9
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,thenStatement]",
                    "nodePosition": {
                        "charLength": 133,
                        "startLineNumber": 179,
                        "startColumnNumber": 41,
                        "endLineNumber": 181,
                        "endColumnNumber": 21
                    },
                    "nodeContext": "{\n  last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 21,
                    "astHeight": 10
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 154,
                        "startLineNumber": 179,
                        "startColumnNumber": 20,
                        "endLineNumber": 181,
                        "endColumnNumber": 21
                    },
                    "nodeContext": "if (pr.last != null) {\n  last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 27,
                    "astHeight": 11
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 2798,
                        "startLineNumber": 164,
                        "startColumnNumber": 23,
                        "endLineNumber": 211,
                        "endColumnNumber": 17
                    },
                    "nodeContext": "{\n  if (pr.propertyName.contains(\"/\")) {\n    continue;\n  }\n  if (\"rep:excerpt\".equals(pr.propertyName)) {\n    continue;\n  }\n  String first=null;\n  if (pr.first != null) {\n    first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n  }\n  String last=null;\n  if (pr.last != null) {\n    last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n  }\n  String prField=configuration.getFieldForPropertyRestriction(pr);\n  CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n  if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n    queryBuilder.append(configuration.getPathField());\n    queryBuilder.append(':');\n    queryBuilder.append(first);\n  }\n else {\n    if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(first);\n    }\n else     if (pr.first == null && pr.last == null) {\n      if (!queryBuilder.toString().contains(fieldName + \":\")) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append('*');\n      }\n    }\n else     if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n    }\n else     if (pr.isLike) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n    }\n else {\n      throw new RuntimeException(\"[unexpected!] not handled case\");\n    }\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 312,
                    "astHeight": 18
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5508,
                        "startLineNumber": 124,
                        "startColumnNumber": 16,
                        "endLineNumber": 211,
                        "endColumnNumber": 17
                    },
                    "nodeContext": "if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n  String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n  if (isSupportedHttpRequest(nativeQueryString)) {\n    String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n    if (!\"select\".equals(requestHandlerString)) {\n      if (requestHandlerString.charAt(0) != '/') {\n        requestHandlerString=\"/\" + requestHandlerString;\n      }\n      solrQuery.setRequestHandler(requestHandlerString);\n    }\n    String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n    for (    String param : parameterString.split(\"&\")) {\n      String[] kv=param.split(\"=\");\n      if (kv.length != 2) {\n        throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n      }\n else {\n        if (\"stream.body\".equals(kv[0])) {\n          kv[0]=\"q\";\n          String mltFlString=\"mlt.fl=\";\n          int mltFlIndex=parameterString.indexOf(mltFlString);\n          if (mltFlIndex > -1) {\n            int beginIndex=mltFlIndex + mltFlString.length();\n            int endIndex=parameterString.indexOf('&',beginIndex);\n            String fields;\n            if (endIndex > beginIndex) {\n              fields=parameterString.substring(beginIndex,endIndex);\n            }\n else {\n              fields=parameterString.substring(beginIndex);\n            }\n            kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n          }\n        }\n        solrQuery.setParam(kv[0],kv[1]);\n      }\n    }\n    return solrQuery;\n  }\n else {\n    queryBuilder.append(nativeQueryString);\n  }\n}\n else {\n  if (pr.propertyName.contains(\"/\")) {\n    continue;\n  }\n  if (\"rep:excerpt\".equals(pr.propertyName)) {\n    continue;\n  }\n  String first=null;\n  if (pr.first != null) {\n    first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n  }\n  String last=null;\n  if (pr.last != null) {\n    last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n  }\n  String prField=configuration.getFieldForPropertyRestriction(pr);\n  CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n  if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n    queryBuilder.append(configuration.getPathField());\n    queryBuilder.append(':');\n    queryBuilder.append(first);\n  }\n else {\n    if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(first);\n    }\n else     if (pr.first == null && pr.last == null) {\n      if (!queryBuilder.toString().contains(fieldName + \":\")) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append('*');\n      }\n    }\n else     if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n    }\n else     if (pr.isLike) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n    }\n else {\n      throw new RuntimeException(\"[unexpected!] not handled case\");\n    }\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 546,
                    "astHeight": 19
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.EnhancedForStatement,body]",
                    "nodePosition": {
                        "charLength": 5622,
                        "startLineNumber": 122,
                        "startColumnNumber": 71,
                        "endLineNumber": 213,
                        "endColumnNumber": 13
                    },
                    "nodeContext": "{\n  if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n    String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n    if (isSupportedHttpRequest(nativeQueryString)) {\n      String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n      if (!\"select\".equals(requestHandlerString)) {\n        if (requestHandlerString.charAt(0) != '/') {\n          requestHandlerString=\"/\" + requestHandlerString;\n        }\n        solrQuery.setRequestHandler(requestHandlerString);\n      }\n      String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n      for (      String param : parameterString.split(\"&\")) {\n        String[] kv=param.split(\"=\");\n        if (kv.length != 2) {\n          throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n        }\n else {\n          if (\"stream.body\".equals(kv[0])) {\n            kv[0]=\"q\";\n            String mltFlString=\"mlt.fl=\";\n            int mltFlIndex=parameterString.indexOf(mltFlString);\n            if (mltFlIndex > -1) {\n              int beginIndex=mltFlIndex + mltFlString.length();\n              int endIndex=parameterString.indexOf('&',beginIndex);\n              String fields;\n              if (endIndex > beginIndex) {\n                fields=parameterString.substring(beginIndex,endIndex);\n              }\n else {\n                fields=parameterString.substring(beginIndex);\n              }\n              kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n            }\n          }\n          solrQuery.setParam(kv[0],kv[1]);\n        }\n      }\n      return solrQuery;\n    }\n else {\n      queryBuilder.append(nativeQueryString);\n    }\n  }\n else {\n    if (pr.propertyName.contains(\"/\")) {\n      continue;\n    }\n    if (\"rep:excerpt\".equals(pr.propertyName)) {\n      continue;\n    }\n    String first=null;\n    if (pr.first != null) {\n      first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n    }\n    String last=null;\n    if (pr.last != null) {\n      last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n    }\n    String prField=configuration.getFieldForPropertyRestriction(pr);\n    CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n    if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n      queryBuilder.append(configuration.getPathField());\n      queryBuilder.append(':');\n      queryBuilder.append(first);\n    }\n else {\n      if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(first);\n      }\n else       if (pr.first == null && pr.last == null) {\n        if (!queryBuilder.toString().contains(fieldName + \":\")) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append('*');\n        }\n      }\n else       if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n      }\n else       if (pr.isLike) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n      }\n else {\n        throw new RuntimeException(\"[unexpected!] not handled case\");\n      }\n    }\n  }\n  queryBuilder.append(\" \");\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 552,
                    "astHeight": 20
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5681,
                        "startLineNumber": 122,
                        "startColumnNumber": 12,
                        "endLineNumber": 213,
                        "endColumnNumber": 13
                    },
                    "nodeContext": "for (Filter.PropertyRestriction pr : propertyRestrictions) {\n  if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n    String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n    if (isSupportedHttpRequest(nativeQueryString)) {\n      String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n      if (!\"select\".equals(requestHandlerString)) {\n        if (requestHandlerString.charAt(0) != '/') {\n          requestHandlerString=\"/\" + requestHandlerString;\n        }\n        solrQuery.setRequestHandler(requestHandlerString);\n      }\n      String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n      for (      String param : parameterString.split(\"&\")) {\n        String[] kv=param.split(\"=\");\n        if (kv.length != 2) {\n          throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n        }\n else {\n          if (\"stream.body\".equals(kv[0])) {\n            kv[0]=\"q\";\n            String mltFlString=\"mlt.fl=\";\n            int mltFlIndex=parameterString.indexOf(mltFlString);\n            if (mltFlIndex > -1) {\n              int beginIndex=mltFlIndex + mltFlString.length();\n              int endIndex=parameterString.indexOf('&',beginIndex);\n              String fields;\n              if (endIndex > beginIndex) {\n                fields=parameterString.substring(beginIndex,endIndex);\n              }\n else {\n                fields=parameterString.substring(beginIndex);\n              }\n              kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n            }\n          }\n          solrQuery.setParam(kv[0],kv[1]);\n        }\n      }\n      return solrQuery;\n    }\n else {\n      queryBuilder.append(nativeQueryString);\n    }\n  }\n else {\n    if (pr.propertyName.contains(\"/\")) {\n      continue;\n    }\n    if (\"rep:excerpt\".equals(pr.propertyName)) {\n      continue;\n    }\n    String first=null;\n    if (pr.first != null) {\n      first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n    }\n    String last=null;\n    if (pr.last != null) {\n      last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n    }\n    String prField=configuration.getFieldForPropertyRestriction(pr);\n    CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n    if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n      queryBuilder.append(configuration.getPathField());\n      queryBuilder.append(':');\n      queryBuilder.append(first);\n    }\n else {\n      if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(first);\n      }\n else       if (pr.first == null && pr.last == null) {\n        if (!queryBuilder.toString().contains(fieldName + \":\")) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append('*');\n        }\n      }\n else       if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n      }\n else       if (pr.isLike) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n      }\n else {\n        throw new RuntimeException(\"[unexpected!] not handled case\");\n      }\n    }\n  }\n  queryBuilder.append(\" \");\n}\n",
                    "nodeType": "EnhancedForStatement",
                    "astNodeNumber": 560,
                    "astHeight": 21
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,thenStatement]",
                    "nodePosition": {
                        "charLength": 5705,
                        "startLineNumber": 121,
                        "startColumnNumber": 77,
                        "endLineNumber": 214,
                        "endColumnNumber": 9
                    },
                    "nodeContext": "{\n  for (  Filter.PropertyRestriction pr : propertyRestrictions) {\n    if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n      String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n      if (isSupportedHttpRequest(nativeQueryString)) {\n        String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n        if (!\"select\".equals(requestHandlerString)) {\n          if (requestHandlerString.charAt(0) != '/') {\n            requestHandlerString=\"/\" + requestHandlerString;\n          }\n          solrQuery.setRequestHandler(requestHandlerString);\n        }\n        String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n        for (        String param : parameterString.split(\"&\")) {\n          String[] kv=param.split(\"=\");\n          if (kv.length != 2) {\n            throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n          }\n else {\n            if (\"stream.body\".equals(kv[0])) {\n              kv[0]=\"q\";\n              String mltFlString=\"mlt.fl=\";\n              int mltFlIndex=parameterString.indexOf(mltFlString);\n              if (mltFlIndex > -1) {\n                int beginIndex=mltFlIndex + mltFlString.length();\n                int endIndex=parameterString.indexOf('&',beginIndex);\n                String fields;\n                if (endIndex > beginIndex) {\n                  fields=parameterString.substring(beginIndex,endIndex);\n                }\n else {\n                  fields=parameterString.substring(beginIndex);\n                }\n                kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n              }\n            }\n            solrQuery.setParam(kv[0],kv[1]);\n          }\n        }\n        return solrQuery;\n      }\n else {\n        queryBuilder.append(nativeQueryString);\n      }\n    }\n else {\n      if (pr.propertyName.contains(\"/\")) {\n        continue;\n      }\n      if (\"rep:excerpt\".equals(pr.propertyName)) {\n        continue;\n      }\n      String first=null;\n      if (pr.first != null) {\n        first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n      }\n      String last=null;\n      if (pr.last != null) {\n        last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n      }\n      String prField=configuration.getFieldForPropertyRestriction(pr);\n      CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n      if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n        queryBuilder.append(configuration.getPathField());\n        queryBuilder.append(':');\n        queryBuilder.append(first);\n      }\n else {\n        if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(first);\n        }\n else         if (pr.first == null && pr.last == null) {\n          if (!queryBuilder.toString().contains(fieldName + \":\")) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append('*');\n          }\n        }\n else         if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n        }\n else         if (pr.isLike) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n        }\n else {\n          throw new RuntimeException(\"[unexpected!] not handled case\");\n        }\n      }\n    }\n    queryBuilder.append(\" \");\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 561,
                    "astHeight": 22
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5774,
                        "startLineNumber": 121,
                        "startColumnNumber": 8,
                        "endLineNumber": 214,
                        "endColumnNumber": 9
                    },
                    "nodeContext": "if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n  for (  Filter.PropertyRestriction pr : propertyRestrictions) {\n    if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n      String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n      if (isSupportedHttpRequest(nativeQueryString)) {\n        String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n        if (!\"select\".equals(requestHandlerString)) {\n          if (requestHandlerString.charAt(0) != '/') {\n            requestHandlerString=\"/\" + requestHandlerString;\n          }\n          solrQuery.setRequestHandler(requestHandlerString);\n        }\n        String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n        for (        String param : parameterString.split(\"&\")) {\n          String[] kv=param.split(\"=\");\n          if (kv.length != 2) {\n            throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n          }\n else {\n            if (\"stream.body\".equals(kv[0])) {\n              kv[0]=\"q\";\n              String mltFlString=\"mlt.fl=\";\n              int mltFlIndex=parameterString.indexOf(mltFlString);\n              if (mltFlIndex > -1) {\n                int beginIndex=mltFlIndex + mltFlString.length();\n                int endIndex=parameterString.indexOf('&',beginIndex);\n                String fields;\n                if (endIndex > beginIndex) {\n                  fields=parameterString.substring(beginIndex,endIndex);\n                }\n else {\n                  fields=parameterString.substring(beginIndex);\n                }\n                kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n              }\n            }\n            solrQuery.setParam(kv[0],kv[1]);\n          }\n        }\n        return solrQuery;\n      }\n else {\n        queryBuilder.append(nativeQueryString);\n      }\n    }\n else {\n      if (pr.propertyName.contains(\"/\")) {\n        continue;\n      }\n      if (\"rep:excerpt\".equals(pr.propertyName)) {\n        continue;\n      }\n      String first=null;\n      if (pr.first != null) {\n        first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n      }\n      String last=null;\n      if (pr.last != null) {\n        last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n      }\n      String prField=configuration.getFieldForPropertyRestriction(pr);\n      CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n      if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n        queryBuilder.append(configuration.getPathField());\n        queryBuilder.append(':');\n        queryBuilder.append(first);\n      }\n else {\n        if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(first);\n        }\n else         if (pr.first == null && pr.last == null) {\n          if (!queryBuilder.toString().contains(fieldName + \":\")) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append('*');\n          }\n        }\n else         if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n        }\n else         if (pr.isLike) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n        }\n else {\n          throw new RuntimeException(\"[unexpected!] not handled case\");\n        }\n      }\n    }\n    queryBuilder.append(\" \");\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 570,
                    "astHeight": 23
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.MethodDeclaration,body]",
                    "nodePosition": {
                        "charLength": 7985,
                        "startLineNumber": 103,
                        "startColumnNumber": 46,
                        "endLineNumber": 255,
                        "endColumnNumber": 5
                    },
                    "nodeContext": "{\n  SolrQuery solrQuery=new SolrQuery();\n  setDefaults(solrQuery);\n  StringBuilder queryBuilder=new StringBuilder();\n  if (filter.getFullTextConstraint() != null) {\n    queryBuilder.append(getFullTextQuery(filter.getFullTextConstraint()));\n    queryBuilder.append(' ');\n  }\n else   if (filter.getFulltextConditions() != null) {\n    Collection<String> fulltextConditions=filter.getFulltextConditions();\n    for (    String fulltextCondition : fulltextConditions) {\n      queryBuilder.append(fulltextCondition).append(\" \");\n    }\n  }\n  Collection<Filter.PropertyRestriction> propertyRestrictions=filter.getPropertyRestrictions();\n  if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n    for (    Filter.PropertyRestriction pr : propertyRestrictions) {\n      if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n        String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n        if (isSupportedHttpRequest(nativeQueryString)) {\n          String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n          if (!\"select\".equals(requestHandlerString)) {\n            if (requestHandlerString.charAt(0) != '/') {\n              requestHandlerString=\"/\" + requestHandlerString;\n            }\n            solrQuery.setRequestHandler(requestHandlerString);\n          }\n          String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n          for (          String param : parameterString.split(\"&\")) {\n            String[] kv=param.split(\"=\");\n            if (kv.length != 2) {\n              throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n            }\n else {\n              if (\"stream.body\".equals(kv[0])) {\n                kv[0]=\"q\";\n                String mltFlString=\"mlt.fl=\";\n                int mltFlIndex=parameterString.indexOf(mltFlString);\n                if (mltFlIndex > -1) {\n                  int beginIndex=mltFlIndex + mltFlString.length();\n                  int endIndex=parameterString.indexOf('&',beginIndex);\n                  String fields;\n                  if (endIndex > beginIndex) {\n                    fields=parameterString.substring(beginIndex,endIndex);\n                  }\n else {\n                    fields=parameterString.substring(beginIndex);\n                  }\n                  kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n                }\n              }\n              solrQuery.setParam(kv[0],kv[1]);\n            }\n          }\n          return solrQuery;\n        }\n else {\n          queryBuilder.append(nativeQueryString);\n        }\n      }\n else {\n        if (pr.propertyName.contains(\"/\")) {\n          continue;\n        }\n        if (\"rep:excerpt\".equals(pr.propertyName)) {\n          continue;\n        }\n        String first=null;\n        if (pr.first != null) {\n          first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n        }\n        String last=null;\n        if (pr.last != null) {\n          last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n        }\n        String prField=configuration.getFieldForPropertyRestriction(pr);\n        CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n        if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n          queryBuilder.append(configuration.getPathField());\n          queryBuilder.append(':');\n          queryBuilder.append(first);\n        }\n else {\n          if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(first);\n          }\n else           if (pr.first == null && pr.last == null) {\n            if (!queryBuilder.toString().contains(fieldName + \":\")) {\n              queryBuilder.append(fieldName).append(':');\n              queryBuilder.append('*');\n            }\n          }\n else           if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n          }\n else           if (pr.isLike) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n          }\n else {\n            throw new RuntimeException(\"[unexpected!] not handled case\");\n          }\n        }\n      }\n      queryBuilder.append(\" \");\n    }\n  }\n  String[] pts=filter.getPrimaryTypes().toArray(new String[filter.getPrimaryTypes().size()]);\n  for (int i=0; i < pts.length; i++) {\n    String pt=pts[i];\n    if (i == 0) {\n      queryBuilder.append(\"(\");\n    }\n    if (i > 0 && i < pts.length) {\n      queryBuilder.append(\"OR \");\n    }\n    queryBuilder.append(\"jcr\\\\:primaryType\").append(':').append(partialEscape(pt)).append(\" \");\n    if (i == pts.length - 1) {\n      queryBuilder.append(\")\");\n      queryBuilder.append(' ');\n    }\n  }\n  Filter.PathRestriction pathRestriction=filter.getPathRestriction();\n  if (pathRestriction != null) {\n    String path=purgePath(filter);\n    String fieldName=configuration.getFieldForPathRestriction(pathRestriction);\n    if (fieldName != null) {\n      queryBuilder.append(fieldName);\n      queryBuilder.append(':');\n      queryBuilder.append(path);\n    }\n  }\n  if (queryBuilder.length() == 0) {\n    queryBuilder.append(\"*:*\");\n  }\n  String escapedQuery=queryBuilder.toString();\n  solrQuery.setQuery(escapedQuery);\n  if (log.isDebugEnabled()) {\n    log.debug(\"JCR query {} has been converted to Solr query {}\",filter.getQueryStatement(),solrQuery.toString());\n  }\n  return solrQuery;\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 858,
                    "astHeight": 24
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.TypeDeclaration,bodyDeclarations]",
                    "nodePosition": {
                        "charLength": 8027,
                        "startLineNumber": 103,
                        "startColumnNumber": 4,
                        "endLineNumber": 255,
                        "endColumnNumber": 5
                    },
                    "nodeContext": "private SolrQuery getQuery(Filter filter){\n  SolrQuery solrQuery=new SolrQuery();\n  setDefaults(solrQuery);\n  StringBuilder queryBuilder=new StringBuilder();\n  if (filter.getFullTextConstraint() != null) {\n    queryBuilder.append(getFullTextQuery(filter.getFullTextConstraint()));\n    queryBuilder.append(' ');\n  }\n else   if (filter.getFulltextConditions() != null) {\n    Collection<String> fulltextConditions=filter.getFulltextConditions();\n    for (    String fulltextCondition : fulltextConditions) {\n      queryBuilder.append(fulltextCondition).append(\" \");\n    }\n  }\n  Collection<Filter.PropertyRestriction> propertyRestrictions=filter.getPropertyRestrictions();\n  if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n    for (    Filter.PropertyRestriction pr : propertyRestrictions) {\n      if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n        String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n        if (isSupportedHttpRequest(nativeQueryString)) {\n          String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n          if (!\"select\".equals(requestHandlerString)) {\n            if (requestHandlerString.charAt(0) != '/') {\n              requestHandlerString=\"/\" + requestHandlerString;\n            }\n            solrQuery.setRequestHandler(requestHandlerString);\n          }\n          String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n          for (          String param : parameterString.split(\"&\")) {\n            String[] kv=param.split(\"=\");\n            if (kv.length != 2) {\n              throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n            }\n else {\n              if (\"stream.body\".equals(kv[0])) {\n                kv[0]=\"q\";\n                String mltFlString=\"mlt.fl=\";\n                int mltFlIndex=parameterString.indexOf(mltFlString);\n                if (mltFlIndex > -1) {\n                  int beginIndex=mltFlIndex + mltFlString.length();\n                  int endIndex=parameterString.indexOf('&',beginIndex);\n                  String fields;\n                  if (endIndex > beginIndex) {\n                    fields=parameterString.substring(beginIndex,endIndex);\n                  }\n else {\n                    fields=parameterString.substring(beginIndex);\n                  }\n                  kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n                }\n              }\n              solrQuery.setParam(kv[0],kv[1]);\n            }\n          }\n          return solrQuery;\n        }\n else {\n          queryBuilder.append(nativeQueryString);\n        }\n      }\n else {\n        if (pr.propertyName.contains(\"/\")) {\n          continue;\n        }\n        if (\"rep:excerpt\".equals(pr.propertyName)) {\n          continue;\n        }\n        String first=null;\n        if (pr.first != null) {\n          first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n        }\n        String last=null;\n        if (pr.last != null) {\n          last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n        }\n        String prField=configuration.getFieldForPropertyRestriction(pr);\n        CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n        if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n          queryBuilder.append(configuration.getPathField());\n          queryBuilder.append(':');\n          queryBuilder.append(first);\n        }\n else {\n          if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(first);\n          }\n else           if (pr.first == null && pr.last == null) {\n            if (!queryBuilder.toString().contains(fieldName + \":\")) {\n              queryBuilder.append(fieldName).append(':');\n              queryBuilder.append('*');\n            }\n          }\n else           if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n          }\n else           if (pr.isLike) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n          }\n else {\n            throw new RuntimeException(\"[unexpected!] not handled case\");\n          }\n        }\n      }\n      queryBuilder.append(\" \");\n    }\n  }\n  String[] pts=filter.getPrimaryTypes().toArray(new String[filter.getPrimaryTypes().size()]);\n  for (int i=0; i < pts.length; i++) {\n    String pt=pts[i];\n    if (i == 0) {\n      queryBuilder.append(\"(\");\n    }\n    if (i > 0 && i < pts.length) {\n      queryBuilder.append(\"OR \");\n    }\n    queryBuilder.append(\"jcr\\\\:primaryType\").append(':').append(partialEscape(pt)).append(\" \");\n    if (i == pts.length - 1) {\n      queryBuilder.append(\")\");\n      queryBuilder.append(' ');\n    }\n  }\n  Filter.PathRestriction pathRestriction=filter.getPathRestriction();\n  if (pathRestriction != null) {\n    String path=purgePath(filter);\n    String fieldName=configuration.getFieldForPathRestriction(pathRestriction);\n    if (fieldName != null) {\n      queryBuilder.append(fieldName);\n      queryBuilder.append(':');\n      queryBuilder.append(path);\n    }\n  }\n  if (queryBuilder.length() == 0) {\n    queryBuilder.append(\"*:*\");\n  }\n  String escapedQuery=queryBuilder.toString();\n  solrQuery.setQuery(escapedQuery);\n  if (log.isDebugEnabled()) {\n    log.debug(\"JCR query {} has been converted to Solr query {}\",filter.getQueryStatement(),solrQuery.toString());\n  }\n  return solrQuery;\n}\n",
                    "nodeType": "MethodDeclaration",
                    "astNodeNumber": 867,
                    "astHeight": 25
                }
            ],
            "currentLineData": {
                "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                "nodePosition": {
                    "charLength": 85,
                    "startLineNumber": 180,
                    "startColumnNumber": 24,
                    "endLineNumber": 180,
                    "endColumnNumber": 109
                },
                "nodeContext": "last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n",
                "nodeType": "ExpressionStatement",
                "astNodeNumber": 20,
                "astHeight": 9
            },
            "tokenLength": 1,
            "type": "org.apache.jackrabbit.oak.spi.query.Filter.PropertyRestriction"
        },
        {
            "nodeContext": "pr",
            "nodeType": "SimpleName",
            "nodePosition": {
                "charLength": 2,
                "startLineNumber": 183,
                "startColumnNumber": 82,
                "endLineNumber": 183,
                "endColumnNumber": 84
            },
            "astNodeNumber": 1,
            "astHeight": 1,
            "parentDataList": [
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.VariableDeclarationFragment,initializer]",
                    "nodePosition": {
                        "charLength": 48,
                        "startLineNumber": 183,
                        "startColumnNumber": 37,
                        "endLineNumber": 183,
                        "endColumnNumber": 85
                    },
                    "nodeContext": "configuration.getFieldForPropertyRestriction(pr)",
                    "nodeType": "MethodInvocation",
                    "astNodeNumber": 4,
                    "astHeight": 2
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.VariableDeclarationStatement,fragments]",
                    "nodePosition": {
                        "charLength": 58,
                        "startLineNumber": 183,
                        "startColumnNumber": 27,
                        "endLineNumber": 183,
                        "endColumnNumber": 85
                    },
                    "nodeContext": "prField=configuration.getFieldForPropertyRestriction(pr)",
                    "nodeType": "VariableDeclarationFragment",
                    "astNodeNumber": 6,
                    "astHeight": 3
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 66,
                        "startLineNumber": 183,
                        "startColumnNumber": 20,
                        "endLineNumber": 183,
                        "endColumnNumber": 86
                    },
                    "nodeContext": "String prField=configuration.getFieldForPropertyRestriction(pr);\n",
                    "nodeType": "VariableDeclarationStatement",
                    "astNodeNumber": 9,
                    "astHeight": 4
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 2798,
                        "startLineNumber": 164,
                        "startColumnNumber": 23,
                        "endLineNumber": 211,
                        "endColumnNumber": 17
                    },
                    "nodeContext": "{\n  if (pr.propertyName.contains(\"/\")) {\n    continue;\n  }\n  if (\"rep:excerpt\".equals(pr.propertyName)) {\n    continue;\n  }\n  String first=null;\n  if (pr.first != null) {\n    first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n  }\n  String last=null;\n  if (pr.last != null) {\n    last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n  }\n  String prField=configuration.getFieldForPropertyRestriction(pr);\n  CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n  if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n    queryBuilder.append(configuration.getPathField());\n    queryBuilder.append(':');\n    queryBuilder.append(first);\n  }\n else {\n    if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(first);\n    }\n else     if (pr.first == null && pr.last == null) {\n      if (!queryBuilder.toString().contains(fieldName + \":\")) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append('*');\n      }\n    }\n else     if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n    }\n else     if (pr.isLike) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n    }\n else {\n      throw new RuntimeException(\"[unexpected!] not handled case\");\n    }\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 312,
                    "astHeight": 18
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5508,
                        "startLineNumber": 124,
                        "startColumnNumber": 16,
                        "endLineNumber": 211,
                        "endColumnNumber": 17
                    },
                    "nodeContext": "if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n  String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n  if (isSupportedHttpRequest(nativeQueryString)) {\n    String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n    if (!\"select\".equals(requestHandlerString)) {\n      if (requestHandlerString.charAt(0) != '/') {\n        requestHandlerString=\"/\" + requestHandlerString;\n      }\n      solrQuery.setRequestHandler(requestHandlerString);\n    }\n    String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n    for (    String param : parameterString.split(\"&\")) {\n      String[] kv=param.split(\"=\");\n      if (kv.length != 2) {\n        throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n      }\n else {\n        if (\"stream.body\".equals(kv[0])) {\n          kv[0]=\"q\";\n          String mltFlString=\"mlt.fl=\";\n          int mltFlIndex=parameterString.indexOf(mltFlString);\n          if (mltFlIndex > -1) {\n            int beginIndex=mltFlIndex + mltFlString.length();\n            int endIndex=parameterString.indexOf('&',beginIndex);\n            String fields;\n            if (endIndex > beginIndex) {\n              fields=parameterString.substring(beginIndex,endIndex);\n            }\n else {\n              fields=parameterString.substring(beginIndex);\n            }\n            kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n          }\n        }\n        solrQuery.setParam(kv[0],kv[1]);\n      }\n    }\n    return solrQuery;\n  }\n else {\n    queryBuilder.append(nativeQueryString);\n  }\n}\n else {\n  if (pr.propertyName.contains(\"/\")) {\n    continue;\n  }\n  if (\"rep:excerpt\".equals(pr.propertyName)) {\n    continue;\n  }\n  String first=null;\n  if (pr.first != null) {\n    first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n  }\n  String last=null;\n  if (pr.last != null) {\n    last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n  }\n  String prField=configuration.getFieldForPropertyRestriction(pr);\n  CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n  if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n    queryBuilder.append(configuration.getPathField());\n    queryBuilder.append(':');\n    queryBuilder.append(first);\n  }\n else {\n    if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(first);\n    }\n else     if (pr.first == null && pr.last == null) {\n      if (!queryBuilder.toString().contains(fieldName + \":\")) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append('*');\n      }\n    }\n else     if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n    }\n else     if (pr.isLike) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n    }\n else {\n      throw new RuntimeException(\"[unexpected!] not handled case\");\n    }\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 546,
                    "astHeight": 19
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.EnhancedForStatement,body]",
                    "nodePosition": {
                        "charLength": 5622,
                        "startLineNumber": 122,
                        "startColumnNumber": 71,
                        "endLineNumber": 213,
                        "endColumnNumber": 13
                    },
                    "nodeContext": "{\n  if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n    String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n    if (isSupportedHttpRequest(nativeQueryString)) {\n      String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n      if (!\"select\".equals(requestHandlerString)) {\n        if (requestHandlerString.charAt(0) != '/') {\n          requestHandlerString=\"/\" + requestHandlerString;\n        }\n        solrQuery.setRequestHandler(requestHandlerString);\n      }\n      String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n      for (      String param : parameterString.split(\"&\")) {\n        String[] kv=param.split(\"=\");\n        if (kv.length != 2) {\n          throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n        }\n else {\n          if (\"stream.body\".equals(kv[0])) {\n            kv[0]=\"q\";\n            String mltFlString=\"mlt.fl=\";\n            int mltFlIndex=parameterString.indexOf(mltFlString);\n            if (mltFlIndex > -1) {\n              int beginIndex=mltFlIndex + mltFlString.length();\n              int endIndex=parameterString.indexOf('&',beginIndex);\n              String fields;\n              if (endIndex > beginIndex) {\n                fields=parameterString.substring(beginIndex,endIndex);\n              }\n else {\n                fields=parameterString.substring(beginIndex);\n              }\n              kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n            }\n          }\n          solrQuery.setParam(kv[0],kv[1]);\n        }\n      }\n      return solrQuery;\n    }\n else {\n      queryBuilder.append(nativeQueryString);\n    }\n  }\n else {\n    if (pr.propertyName.contains(\"/\")) {\n      continue;\n    }\n    if (\"rep:excerpt\".equals(pr.propertyName)) {\n      continue;\n    }\n    String first=null;\n    if (pr.first != null) {\n      first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n    }\n    String last=null;\n    if (pr.last != null) {\n      last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n    }\n    String prField=configuration.getFieldForPropertyRestriction(pr);\n    CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n    if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n      queryBuilder.append(configuration.getPathField());\n      queryBuilder.append(':');\n      queryBuilder.append(first);\n    }\n else {\n      if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(first);\n      }\n else       if (pr.first == null && pr.last == null) {\n        if (!queryBuilder.toString().contains(fieldName + \":\")) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append('*');\n        }\n      }\n else       if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n      }\n else       if (pr.isLike) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n      }\n else {\n        throw new RuntimeException(\"[unexpected!] not handled case\");\n      }\n    }\n  }\n  queryBuilder.append(\" \");\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 552,
                    "astHeight": 20
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5681,
                        "startLineNumber": 122,
                        "startColumnNumber": 12,
                        "endLineNumber": 213,
                        "endColumnNumber": 13
                    },
                    "nodeContext": "for (Filter.PropertyRestriction pr : propertyRestrictions) {\n  if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n    String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n    if (isSupportedHttpRequest(nativeQueryString)) {\n      String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n      if (!\"select\".equals(requestHandlerString)) {\n        if (requestHandlerString.charAt(0) != '/') {\n          requestHandlerString=\"/\" + requestHandlerString;\n        }\n        solrQuery.setRequestHandler(requestHandlerString);\n      }\n      String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n      for (      String param : parameterString.split(\"&\")) {\n        String[] kv=param.split(\"=\");\n        if (kv.length != 2) {\n          throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n        }\n else {\n          if (\"stream.body\".equals(kv[0])) {\n            kv[0]=\"q\";\n            String mltFlString=\"mlt.fl=\";\n            int mltFlIndex=parameterString.indexOf(mltFlString);\n            if (mltFlIndex > -1) {\n              int beginIndex=mltFlIndex + mltFlString.length();\n              int endIndex=parameterString.indexOf('&',beginIndex);\n              String fields;\n              if (endIndex > beginIndex) {\n                fields=parameterString.substring(beginIndex,endIndex);\n              }\n else {\n                fields=parameterString.substring(beginIndex);\n              }\n              kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n            }\n          }\n          solrQuery.setParam(kv[0],kv[1]);\n        }\n      }\n      return solrQuery;\n    }\n else {\n      queryBuilder.append(nativeQueryString);\n    }\n  }\n else {\n    if (pr.propertyName.contains(\"/\")) {\n      continue;\n    }\n    if (\"rep:excerpt\".equals(pr.propertyName)) {\n      continue;\n    }\n    String first=null;\n    if (pr.first != null) {\n      first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n    }\n    String last=null;\n    if (pr.last != null) {\n      last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n    }\n    String prField=configuration.getFieldForPropertyRestriction(pr);\n    CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n    if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n      queryBuilder.append(configuration.getPathField());\n      queryBuilder.append(':');\n      queryBuilder.append(first);\n    }\n else {\n      if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(first);\n      }\n else       if (pr.first == null && pr.last == null) {\n        if (!queryBuilder.toString().contains(fieldName + \":\")) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append('*');\n        }\n      }\n else       if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n      }\n else       if (pr.isLike) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n      }\n else {\n        throw new RuntimeException(\"[unexpected!] not handled case\");\n      }\n    }\n  }\n  queryBuilder.append(\" \");\n}\n",
                    "nodeType": "EnhancedForStatement",
                    "astNodeNumber": 560,
                    "astHeight": 21
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,thenStatement]",
                    "nodePosition": {
                        "charLength": 5705,
                        "startLineNumber": 121,
                        "startColumnNumber": 77,
                        "endLineNumber": 214,
                        "endColumnNumber": 9
                    },
                    "nodeContext": "{\n  for (  Filter.PropertyRestriction pr : propertyRestrictions) {\n    if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n      String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n      if (isSupportedHttpRequest(nativeQueryString)) {\n        String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n        if (!\"select\".equals(requestHandlerString)) {\n          if (requestHandlerString.charAt(0) != '/') {\n            requestHandlerString=\"/\" + requestHandlerString;\n          }\n          solrQuery.setRequestHandler(requestHandlerString);\n        }\n        String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n        for (        String param : parameterString.split(\"&\")) {\n          String[] kv=param.split(\"=\");\n          if (kv.length != 2) {\n            throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n          }\n else {\n            if (\"stream.body\".equals(kv[0])) {\n              kv[0]=\"q\";\n              String mltFlString=\"mlt.fl=\";\n              int mltFlIndex=parameterString.indexOf(mltFlString);\n              if (mltFlIndex > -1) {\n                int beginIndex=mltFlIndex + mltFlString.length();\n                int endIndex=parameterString.indexOf('&',beginIndex);\n                String fields;\n                if (endIndex > beginIndex) {\n                  fields=parameterString.substring(beginIndex,endIndex);\n                }\n else {\n                  fields=parameterString.substring(beginIndex);\n                }\n                kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n              }\n            }\n            solrQuery.setParam(kv[0],kv[1]);\n          }\n        }\n        return solrQuery;\n      }\n else {\n        queryBuilder.append(nativeQueryString);\n      }\n    }\n else {\n      if (pr.propertyName.contains(\"/\")) {\n        continue;\n      }\n      if (\"rep:excerpt\".equals(pr.propertyName)) {\n        continue;\n      }\n      String first=null;\n      if (pr.first != null) {\n        first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n      }\n      String last=null;\n      if (pr.last != null) {\n        last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n      }\n      String prField=configuration.getFieldForPropertyRestriction(pr);\n      CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n      if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n        queryBuilder.append(configuration.getPathField());\n        queryBuilder.append(':');\n        queryBuilder.append(first);\n      }\n else {\n        if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(first);\n        }\n else         if (pr.first == null && pr.last == null) {\n          if (!queryBuilder.toString().contains(fieldName + \":\")) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append('*');\n          }\n        }\n else         if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n        }\n else         if (pr.isLike) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n        }\n else {\n          throw new RuntimeException(\"[unexpected!] not handled case\");\n        }\n      }\n    }\n    queryBuilder.append(\" \");\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 561,
                    "astHeight": 22
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5774,
                        "startLineNumber": 121,
                        "startColumnNumber": 8,
                        "endLineNumber": 214,
                        "endColumnNumber": 9
                    },
                    "nodeContext": "if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n  for (  Filter.PropertyRestriction pr : propertyRestrictions) {\n    if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n      String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n      if (isSupportedHttpRequest(nativeQueryString)) {\n        String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n        if (!\"select\".equals(requestHandlerString)) {\n          if (requestHandlerString.charAt(0) != '/') {\n            requestHandlerString=\"/\" + requestHandlerString;\n          }\n          solrQuery.setRequestHandler(requestHandlerString);\n        }\n        String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n        for (        String param : parameterString.split(\"&\")) {\n          String[] kv=param.split(\"=\");\n          if (kv.length != 2) {\n            throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n          }\n else {\n            if (\"stream.body\".equals(kv[0])) {\n              kv[0]=\"q\";\n              String mltFlString=\"mlt.fl=\";\n              int mltFlIndex=parameterString.indexOf(mltFlString);\n              if (mltFlIndex > -1) {\n                int beginIndex=mltFlIndex + mltFlString.length();\n                int endIndex=parameterString.indexOf('&',beginIndex);\n                String fields;\n                if (endIndex > beginIndex) {\n                  fields=parameterString.substring(beginIndex,endIndex);\n                }\n else {\n                  fields=parameterString.substring(beginIndex);\n                }\n                kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n              }\n            }\n            solrQuery.setParam(kv[0],kv[1]);\n          }\n        }\n        return solrQuery;\n      }\n else {\n        queryBuilder.append(nativeQueryString);\n      }\n    }\n else {\n      if (pr.propertyName.contains(\"/\")) {\n        continue;\n      }\n      if (\"rep:excerpt\".equals(pr.propertyName)) {\n        continue;\n      }\n      String first=null;\n      if (pr.first != null) {\n        first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n      }\n      String last=null;\n      if (pr.last != null) {\n        last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n      }\n      String prField=configuration.getFieldForPropertyRestriction(pr);\n      CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n      if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n        queryBuilder.append(configuration.getPathField());\n        queryBuilder.append(':');\n        queryBuilder.append(first);\n      }\n else {\n        if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(first);\n        }\n else         if (pr.first == null && pr.last == null) {\n          if (!queryBuilder.toString().contains(fieldName + \":\")) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append('*');\n          }\n        }\n else         if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n        }\n else         if (pr.isLike) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n        }\n else {\n          throw new RuntimeException(\"[unexpected!] not handled case\");\n        }\n      }\n    }\n    queryBuilder.append(\" \");\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 570,
                    "astHeight": 23
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.MethodDeclaration,body]",
                    "nodePosition": {
                        "charLength": 7985,
                        "startLineNumber": 103,
                        "startColumnNumber": 46,
                        "endLineNumber": 255,
                        "endColumnNumber": 5
                    },
                    "nodeContext": "{\n  SolrQuery solrQuery=new SolrQuery();\n  setDefaults(solrQuery);\n  StringBuilder queryBuilder=new StringBuilder();\n  if (filter.getFullTextConstraint() != null) {\n    queryBuilder.append(getFullTextQuery(filter.getFullTextConstraint()));\n    queryBuilder.append(' ');\n  }\n else   if (filter.getFulltextConditions() != null) {\n    Collection<String> fulltextConditions=filter.getFulltextConditions();\n    for (    String fulltextCondition : fulltextConditions) {\n      queryBuilder.append(fulltextCondition).append(\" \");\n    }\n  }\n  Collection<Filter.PropertyRestriction> propertyRestrictions=filter.getPropertyRestrictions();\n  if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n    for (    Filter.PropertyRestriction pr : propertyRestrictions) {\n      if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n        String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n        if (isSupportedHttpRequest(nativeQueryString)) {\n          String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n          if (!\"select\".equals(requestHandlerString)) {\n            if (requestHandlerString.charAt(0) != '/') {\n              requestHandlerString=\"/\" + requestHandlerString;\n            }\n            solrQuery.setRequestHandler(requestHandlerString);\n          }\n          String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n          for (          String param : parameterString.split(\"&\")) {\n            String[] kv=param.split(\"=\");\n            if (kv.length != 2) {\n              throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n            }\n else {\n              if (\"stream.body\".equals(kv[0])) {\n                kv[0]=\"q\";\n                String mltFlString=\"mlt.fl=\";\n                int mltFlIndex=parameterString.indexOf(mltFlString);\n                if (mltFlIndex > -1) {\n                  int beginIndex=mltFlIndex + mltFlString.length();\n                  int endIndex=parameterString.indexOf('&',beginIndex);\n                  String fields;\n                  if (endIndex > beginIndex) {\n                    fields=parameterString.substring(beginIndex,endIndex);\n                  }\n else {\n                    fields=parameterString.substring(beginIndex);\n                  }\n                  kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n                }\n              }\n              solrQuery.setParam(kv[0],kv[1]);\n            }\n          }\n          return solrQuery;\n        }\n else {\n          queryBuilder.append(nativeQueryString);\n        }\n      }\n else {\n        if (pr.propertyName.contains(\"/\")) {\n          continue;\n        }\n        if (\"rep:excerpt\".equals(pr.propertyName)) {\n          continue;\n        }\n        String first=null;\n        if (pr.first != null) {\n          first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n        }\n        String last=null;\n        if (pr.last != null) {\n          last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n        }\n        String prField=configuration.getFieldForPropertyRestriction(pr);\n        CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n        if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n          queryBuilder.append(configuration.getPathField());\n          queryBuilder.append(':');\n          queryBuilder.append(first);\n        }\n else {\n          if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(first);\n          }\n else           if (pr.first == null && pr.last == null) {\n            if (!queryBuilder.toString().contains(fieldName + \":\")) {\n              queryBuilder.append(fieldName).append(':');\n              queryBuilder.append('*');\n            }\n          }\n else           if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n          }\n else           if (pr.isLike) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n          }\n else {\n            throw new RuntimeException(\"[unexpected!] not handled case\");\n          }\n        }\n      }\n      queryBuilder.append(\" \");\n    }\n  }\n  String[] pts=filter.getPrimaryTypes().toArray(new String[filter.getPrimaryTypes().size()]);\n  for (int i=0; i < pts.length; i++) {\n    String pt=pts[i];\n    if (i == 0) {\n      queryBuilder.append(\"(\");\n    }\n    if (i > 0 && i < pts.length) {\n      queryBuilder.append(\"OR \");\n    }\n    queryBuilder.append(\"jcr\\\\:primaryType\").append(':').append(partialEscape(pt)).append(\" \");\n    if (i == pts.length - 1) {\n      queryBuilder.append(\")\");\n      queryBuilder.append(' ');\n    }\n  }\n  Filter.PathRestriction pathRestriction=filter.getPathRestriction();\n  if (pathRestriction != null) {\n    String path=purgePath(filter);\n    String fieldName=configuration.getFieldForPathRestriction(pathRestriction);\n    if (fieldName != null) {\n      queryBuilder.append(fieldName);\n      queryBuilder.append(':');\n      queryBuilder.append(path);\n    }\n  }\n  if (queryBuilder.length() == 0) {\n    queryBuilder.append(\"*:*\");\n  }\n  String escapedQuery=queryBuilder.toString();\n  solrQuery.setQuery(escapedQuery);\n  if (log.isDebugEnabled()) {\n    log.debug(\"JCR query {} has been converted to Solr query {}\",filter.getQueryStatement(),solrQuery.toString());\n  }\n  return solrQuery;\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 858,
                    "astHeight": 24
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.TypeDeclaration,bodyDeclarations]",
                    "nodePosition": {
                        "charLength": 8027,
                        "startLineNumber": 103,
                        "startColumnNumber": 4,
                        "endLineNumber": 255,
                        "endColumnNumber": 5
                    },
                    "nodeContext": "private SolrQuery getQuery(Filter filter){\n  SolrQuery solrQuery=new SolrQuery();\n  setDefaults(solrQuery);\n  StringBuilder queryBuilder=new StringBuilder();\n  if (filter.getFullTextConstraint() != null) {\n    queryBuilder.append(getFullTextQuery(filter.getFullTextConstraint()));\n    queryBuilder.append(' ');\n  }\n else   if (filter.getFulltextConditions() != null) {\n    Collection<String> fulltextConditions=filter.getFulltextConditions();\n    for (    String fulltextCondition : fulltextConditions) {\n      queryBuilder.append(fulltextCondition).append(\" \");\n    }\n  }\n  Collection<Filter.PropertyRestriction> propertyRestrictions=filter.getPropertyRestrictions();\n  if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n    for (    Filter.PropertyRestriction pr : propertyRestrictions) {\n      if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n        String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n        if (isSupportedHttpRequest(nativeQueryString)) {\n          String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n          if (!\"select\".equals(requestHandlerString)) {\n            if (requestHandlerString.charAt(0) != '/') {\n              requestHandlerString=\"/\" + requestHandlerString;\n            }\n            solrQuery.setRequestHandler(requestHandlerString);\n          }\n          String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n          for (          String param : parameterString.split(\"&\")) {\n            String[] kv=param.split(\"=\");\n            if (kv.length != 2) {\n              throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n            }\n else {\n              if (\"stream.body\".equals(kv[0])) {\n                kv[0]=\"q\";\n                String mltFlString=\"mlt.fl=\";\n                int mltFlIndex=parameterString.indexOf(mltFlString);\n                if (mltFlIndex > -1) {\n                  int beginIndex=mltFlIndex + mltFlString.length();\n                  int endIndex=parameterString.indexOf('&',beginIndex);\n                  String fields;\n                  if (endIndex > beginIndex) {\n                    fields=parameterString.substring(beginIndex,endIndex);\n                  }\n else {\n                    fields=parameterString.substring(beginIndex);\n                  }\n                  kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n                }\n              }\n              solrQuery.setParam(kv[0],kv[1]);\n            }\n          }\n          return solrQuery;\n        }\n else {\n          queryBuilder.append(nativeQueryString);\n        }\n      }\n else {\n        if (pr.propertyName.contains(\"/\")) {\n          continue;\n        }\n        if (\"rep:excerpt\".equals(pr.propertyName)) {\n          continue;\n        }\n        String first=null;\n        if (pr.first != null) {\n          first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n        }\n        String last=null;\n        if (pr.last != null) {\n          last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n        }\n        String prField=configuration.getFieldForPropertyRestriction(pr);\n        CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n        if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n          queryBuilder.append(configuration.getPathField());\n          queryBuilder.append(':');\n          queryBuilder.append(first);\n        }\n else {\n          if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(first);\n          }\n else           if (pr.first == null && pr.last == null) {\n            if (!queryBuilder.toString().contains(fieldName + \":\")) {\n              queryBuilder.append(fieldName).append(':');\n              queryBuilder.append('*');\n            }\n          }\n else           if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n          }\n else           if (pr.isLike) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n          }\n else {\n            throw new RuntimeException(\"[unexpected!] not handled case\");\n          }\n        }\n      }\n      queryBuilder.append(\" \");\n    }\n  }\n  String[] pts=filter.getPrimaryTypes().toArray(new String[filter.getPrimaryTypes().size()]);\n  for (int i=0; i < pts.length; i++) {\n    String pt=pts[i];\n    if (i == 0) {\n      queryBuilder.append(\"(\");\n    }\n    if (i > 0 && i < pts.length) {\n      queryBuilder.append(\"OR \");\n    }\n    queryBuilder.append(\"jcr\\\\:primaryType\").append(':').append(partialEscape(pt)).append(\" \");\n    if (i == pts.length - 1) {\n      queryBuilder.append(\")\");\n      queryBuilder.append(' ');\n    }\n  }\n  Filter.PathRestriction pathRestriction=filter.getPathRestriction();\n  if (pathRestriction != null) {\n    String path=purgePath(filter);\n    String fieldName=configuration.getFieldForPathRestriction(pathRestriction);\n    if (fieldName != null) {\n      queryBuilder.append(fieldName);\n      queryBuilder.append(':');\n      queryBuilder.append(path);\n    }\n  }\n  if (queryBuilder.length() == 0) {\n    queryBuilder.append(\"*:*\");\n  }\n  String escapedQuery=queryBuilder.toString();\n  solrQuery.setQuery(escapedQuery);\n  if (log.isDebugEnabled()) {\n    log.debug(\"JCR query {} has been converted to Solr query {}\",filter.getQueryStatement(),solrQuery.toString());\n  }\n  return solrQuery;\n}\n",
                    "nodeType": "MethodDeclaration",
                    "astNodeNumber": 867,
                    "astHeight": 25
                }
            ],
            "currentLineData": {
                "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                "nodePosition": {
                    "charLength": 66,
                    "startLineNumber": 183,
                    "startColumnNumber": 20,
                    "endLineNumber": 183,
                    "endColumnNumber": 86
                },
                "nodeContext": "String prField=configuration.getFieldForPropertyRestriction(pr);\n",
                "nodeType": "VariableDeclarationStatement",
                "astNodeNumber": 9,
                "astHeight": 4
            },
            "tokenLength": 1,
            "type": "org.apache.jackrabbit.oak.spi.query.Filter.PropertyRestriction"
        },
        {
            "nodeContext": "pr",
            "nodeType": "SimpleName",
            "nodePosition": {
                "charLength": 2,
                "startLineNumber": 185,
                "startColumnNumber": 38,
                "endLineNumber": 185,
                "endColumnNumber": 40
            },
            "astNodeNumber": 1,
            "astHeight": 1,
            "parentDataList": [
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.ConditionalExpression,elseExpression]",
                    "nodePosition": {
                        "charLength": 15,
                        "startLineNumber": 185,
                        "startColumnNumber": 38,
                        "endLineNumber": 185,
                        "endColumnNumber": 53
                    },
                    "nodeContext": "pr.propertyName",
                    "nodeType": "QualifiedName",
                    "astNodeNumber": 3,
                    "astHeight": 2
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.MethodInvocation,arguments]",
                    "nodePosition": {
                        "charLength": 71,
                        "startLineNumber": 184,
                        "startColumnNumber": 59,
                        "endLineNumber": 185,
                        "endColumnNumber": 53
                    },
                    "nodeContext": "prField != null ? prField : pr.propertyName",
                    "nodeType": "ConditionalExpression",
                    "astNodeNumber": 8,
                    "astHeight": 3
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.VariableDeclarationFragment,initializer]",
                    "nodePosition": {
                        "charLength": 86,
                        "startLineNumber": 184,
                        "startColumnNumber": 45,
                        "endLineNumber": 185,
                        "endColumnNumber": 54
                    },
                    "nodeContext": "partialEscape(prField != null ? prField : pr.propertyName)",
                    "nodeType": "MethodInvocation",
                    "astNodeNumber": 10,
                    "astHeight": 4
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.VariableDeclarationStatement,fragments]",
                    "nodePosition": {
                        "charLength": 98,
                        "startLineNumber": 184,
                        "startColumnNumber": 33,
                        "endLineNumber": 185,
                        "endColumnNumber": 54
                    },
                    "nodeContext": "fieldName=partialEscape(prField != null ? prField : pr.propertyName)",
                    "nodeType": "VariableDeclarationFragment",
                    "astNodeNumber": 12,
                    "astHeight": 5
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 112,
                        "startLineNumber": 184,
                        "startColumnNumber": 20,
                        "endLineNumber": 185,
                        "endColumnNumber": 55
                    },
                    "nodeContext": "CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n",
                    "nodeType": "VariableDeclarationStatement",
                    "astNodeNumber": 15,
                    "astHeight": 6
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 2798,
                        "startLineNumber": 164,
                        "startColumnNumber": 23,
                        "endLineNumber": 211,
                        "endColumnNumber": 17
                    },
                    "nodeContext": "{\n  if (pr.propertyName.contains(\"/\")) {\n    continue;\n  }\n  if (\"rep:excerpt\".equals(pr.propertyName)) {\n    continue;\n  }\n  String first=null;\n  if (pr.first != null) {\n    first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n  }\n  String last=null;\n  if (pr.last != null) {\n    last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n  }\n  String prField=configuration.getFieldForPropertyRestriction(pr);\n  CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n  if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n    queryBuilder.append(configuration.getPathField());\n    queryBuilder.append(':');\n    queryBuilder.append(first);\n  }\n else {\n    if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(first);\n    }\n else     if (pr.first == null && pr.last == null) {\n      if (!queryBuilder.toString().contains(fieldName + \":\")) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append('*');\n      }\n    }\n else     if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n    }\n else     if (pr.isLike) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n    }\n else {\n      throw new RuntimeException(\"[unexpected!] not handled case\");\n    }\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 312,
                    "astHeight": 18
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5508,
                        "startLineNumber": 124,
                        "startColumnNumber": 16,
                        "endLineNumber": 211,
                        "endColumnNumber": 17
                    },
                    "nodeContext": "if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n  String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n  if (isSupportedHttpRequest(nativeQueryString)) {\n    String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n    if (!\"select\".equals(requestHandlerString)) {\n      if (requestHandlerString.charAt(0) != '/') {\n        requestHandlerString=\"/\" + requestHandlerString;\n      }\n      solrQuery.setRequestHandler(requestHandlerString);\n    }\n    String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n    for (    String param : parameterString.split(\"&\")) {\n      String[] kv=param.split(\"=\");\n      if (kv.length != 2) {\n        throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n      }\n else {\n        if (\"stream.body\".equals(kv[0])) {\n          kv[0]=\"q\";\n          String mltFlString=\"mlt.fl=\";\n          int mltFlIndex=parameterString.indexOf(mltFlString);\n          if (mltFlIndex > -1) {\n            int beginIndex=mltFlIndex + mltFlString.length();\n            int endIndex=parameterString.indexOf('&',beginIndex);\n            String fields;\n            if (endIndex > beginIndex) {\n              fields=parameterString.substring(beginIndex,endIndex);\n            }\n else {\n              fields=parameterString.substring(beginIndex);\n            }\n            kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n          }\n        }\n        solrQuery.setParam(kv[0],kv[1]);\n      }\n    }\n    return solrQuery;\n  }\n else {\n    queryBuilder.append(nativeQueryString);\n  }\n}\n else {\n  if (pr.propertyName.contains(\"/\")) {\n    continue;\n  }\n  if (\"rep:excerpt\".equals(pr.propertyName)) {\n    continue;\n  }\n  String first=null;\n  if (pr.first != null) {\n    first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n  }\n  String last=null;\n  if (pr.last != null) {\n    last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n  }\n  String prField=configuration.getFieldForPropertyRestriction(pr);\n  CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n  if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n    queryBuilder.append(configuration.getPathField());\n    queryBuilder.append(':');\n    queryBuilder.append(first);\n  }\n else {\n    if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(first);\n    }\n else     if (pr.first == null && pr.last == null) {\n      if (!queryBuilder.toString().contains(fieldName + \":\")) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append('*');\n      }\n    }\n else     if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n    }\n else     if (pr.isLike) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n    }\n else {\n      throw new RuntimeException(\"[unexpected!] not handled case\");\n    }\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 546,
                    "astHeight": 19
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.EnhancedForStatement,body]",
                    "nodePosition": {
                        "charLength": 5622,
                        "startLineNumber": 122,
                        "startColumnNumber": 71,
                        "endLineNumber": 213,
                        "endColumnNumber": 13
                    },
                    "nodeContext": "{\n  if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n    String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n    if (isSupportedHttpRequest(nativeQueryString)) {\n      String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n      if (!\"select\".equals(requestHandlerString)) {\n        if (requestHandlerString.charAt(0) != '/') {\n          requestHandlerString=\"/\" + requestHandlerString;\n        }\n        solrQuery.setRequestHandler(requestHandlerString);\n      }\n      String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n      for (      String param : parameterString.split(\"&\")) {\n        String[] kv=param.split(\"=\");\n        if (kv.length != 2) {\n          throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n        }\n else {\n          if (\"stream.body\".equals(kv[0])) {\n            kv[0]=\"q\";\n            String mltFlString=\"mlt.fl=\";\n            int mltFlIndex=parameterString.indexOf(mltFlString);\n            if (mltFlIndex > -1) {\n              int beginIndex=mltFlIndex + mltFlString.length();\n              int endIndex=parameterString.indexOf('&',beginIndex);\n              String fields;\n              if (endIndex > beginIndex) {\n                fields=parameterString.substring(beginIndex,endIndex);\n              }\n else {\n                fields=parameterString.substring(beginIndex);\n              }\n              kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n            }\n          }\n          solrQuery.setParam(kv[0],kv[1]);\n        }\n      }\n      return solrQuery;\n    }\n else {\n      queryBuilder.append(nativeQueryString);\n    }\n  }\n else {\n    if (pr.propertyName.contains(\"/\")) {\n      continue;\n    }\n    if (\"rep:excerpt\".equals(pr.propertyName)) {\n      continue;\n    }\n    String first=null;\n    if (pr.first != null) {\n      first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n    }\n    String last=null;\n    if (pr.last != null) {\n      last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n    }\n    String prField=configuration.getFieldForPropertyRestriction(pr);\n    CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n    if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n      queryBuilder.append(configuration.getPathField());\n      queryBuilder.append(':');\n      queryBuilder.append(first);\n    }\n else {\n      if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(first);\n      }\n else       if (pr.first == null && pr.last == null) {\n        if (!queryBuilder.toString().contains(fieldName + \":\")) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append('*');\n        }\n      }\n else       if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n      }\n else       if (pr.isLike) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n      }\n else {\n        throw new RuntimeException(\"[unexpected!] not handled case\");\n      }\n    }\n  }\n  queryBuilder.append(\" \");\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 552,
                    "astHeight": 20
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5681,
                        "startLineNumber": 122,
                        "startColumnNumber": 12,
                        "endLineNumber": 213,
                        "endColumnNumber": 13
                    },
                    "nodeContext": "for (Filter.PropertyRestriction pr : propertyRestrictions) {\n  if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n    String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n    if (isSupportedHttpRequest(nativeQueryString)) {\n      String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n      if (!\"select\".equals(requestHandlerString)) {\n        if (requestHandlerString.charAt(0) != '/') {\n          requestHandlerString=\"/\" + requestHandlerString;\n        }\n        solrQuery.setRequestHandler(requestHandlerString);\n      }\n      String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n      for (      String param : parameterString.split(\"&\")) {\n        String[] kv=param.split(\"=\");\n        if (kv.length != 2) {\n          throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n        }\n else {\n          if (\"stream.body\".equals(kv[0])) {\n            kv[0]=\"q\";\n            String mltFlString=\"mlt.fl=\";\n            int mltFlIndex=parameterString.indexOf(mltFlString);\n            if (mltFlIndex > -1) {\n              int beginIndex=mltFlIndex + mltFlString.length();\n              int endIndex=parameterString.indexOf('&',beginIndex);\n              String fields;\n              if (endIndex > beginIndex) {\n                fields=parameterString.substring(beginIndex,endIndex);\n              }\n else {\n                fields=parameterString.substring(beginIndex);\n              }\n              kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n            }\n          }\n          solrQuery.setParam(kv[0],kv[1]);\n        }\n      }\n      return solrQuery;\n    }\n else {\n      queryBuilder.append(nativeQueryString);\n    }\n  }\n else {\n    if (pr.propertyName.contains(\"/\")) {\n      continue;\n    }\n    if (\"rep:excerpt\".equals(pr.propertyName)) {\n      continue;\n    }\n    String first=null;\n    if (pr.first != null) {\n      first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n    }\n    String last=null;\n    if (pr.last != null) {\n      last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n    }\n    String prField=configuration.getFieldForPropertyRestriction(pr);\n    CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n    if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n      queryBuilder.append(configuration.getPathField());\n      queryBuilder.append(':');\n      queryBuilder.append(first);\n    }\n else {\n      if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(first);\n      }\n else       if (pr.first == null && pr.last == null) {\n        if (!queryBuilder.toString().contains(fieldName + \":\")) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append('*');\n        }\n      }\n else       if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n      }\n else       if (pr.isLike) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n      }\n else {\n        throw new RuntimeException(\"[unexpected!] not handled case\");\n      }\n    }\n  }\n  queryBuilder.append(\" \");\n}\n",
                    "nodeType": "EnhancedForStatement",
                    "astNodeNumber": 560,
                    "astHeight": 21
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,thenStatement]",
                    "nodePosition": {
                        "charLength": 5705,
                        "startLineNumber": 121,
                        "startColumnNumber": 77,
                        "endLineNumber": 214,
                        "endColumnNumber": 9
                    },
                    "nodeContext": "{\n  for (  Filter.PropertyRestriction pr : propertyRestrictions) {\n    if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n      String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n      if (isSupportedHttpRequest(nativeQueryString)) {\n        String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n        if (!\"select\".equals(requestHandlerString)) {\n          if (requestHandlerString.charAt(0) != '/') {\n            requestHandlerString=\"/\" + requestHandlerString;\n          }\n          solrQuery.setRequestHandler(requestHandlerString);\n        }\n        String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n        for (        String param : parameterString.split(\"&\")) {\n          String[] kv=param.split(\"=\");\n          if (kv.length != 2) {\n            throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n          }\n else {\n            if (\"stream.body\".equals(kv[0])) {\n              kv[0]=\"q\";\n              String mltFlString=\"mlt.fl=\";\n              int mltFlIndex=parameterString.indexOf(mltFlString);\n              if (mltFlIndex > -1) {\n                int beginIndex=mltFlIndex + mltFlString.length();\n                int endIndex=parameterString.indexOf('&',beginIndex);\n                String fields;\n                if (endIndex > beginIndex) {\n                  fields=parameterString.substring(beginIndex,endIndex);\n                }\n else {\n                  fields=parameterString.substring(beginIndex);\n                }\n                kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n              }\n            }\n            solrQuery.setParam(kv[0],kv[1]);\n          }\n        }\n        return solrQuery;\n      }\n else {\n        queryBuilder.append(nativeQueryString);\n      }\n    }\n else {\n      if (pr.propertyName.contains(\"/\")) {\n        continue;\n      }\n      if (\"rep:excerpt\".equals(pr.propertyName)) {\n        continue;\n      }\n      String first=null;\n      if (pr.first != null) {\n        first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n      }\n      String last=null;\n      if (pr.last != null) {\n        last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n      }\n      String prField=configuration.getFieldForPropertyRestriction(pr);\n      CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n      if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n        queryBuilder.append(configuration.getPathField());\n        queryBuilder.append(':');\n        queryBuilder.append(first);\n      }\n else {\n        if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(first);\n        }\n else         if (pr.first == null && pr.last == null) {\n          if (!queryBuilder.toString().contains(fieldName + \":\")) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append('*');\n          }\n        }\n else         if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n        }\n else         if (pr.isLike) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n        }\n else {\n          throw new RuntimeException(\"[unexpected!] not handled case\");\n        }\n      }\n    }\n    queryBuilder.append(\" \");\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 561,
                    "astHeight": 22
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5774,
                        "startLineNumber": 121,
                        "startColumnNumber": 8,
                        "endLineNumber": 214,
                        "endColumnNumber": 9
                    },
                    "nodeContext": "if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n  for (  Filter.PropertyRestriction pr : propertyRestrictions) {\n    if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n      String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n      if (isSupportedHttpRequest(nativeQueryString)) {\n        String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n        if (!\"select\".equals(requestHandlerString)) {\n          if (requestHandlerString.charAt(0) != '/') {\n            requestHandlerString=\"/\" + requestHandlerString;\n          }\n          solrQuery.setRequestHandler(requestHandlerString);\n        }\n        String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n        for (        String param : parameterString.split(\"&\")) {\n          String[] kv=param.split(\"=\");\n          if (kv.length != 2) {\n            throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n          }\n else {\n            if (\"stream.body\".equals(kv[0])) {\n              kv[0]=\"q\";\n              String mltFlString=\"mlt.fl=\";\n              int mltFlIndex=parameterString.indexOf(mltFlString);\n              if (mltFlIndex > -1) {\n                int beginIndex=mltFlIndex + mltFlString.length();\n                int endIndex=parameterString.indexOf('&',beginIndex);\n                String fields;\n                if (endIndex > beginIndex) {\n                  fields=parameterString.substring(beginIndex,endIndex);\n                }\n else {\n                  fields=parameterString.substring(beginIndex);\n                }\n                kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n              }\n            }\n            solrQuery.setParam(kv[0],kv[1]);\n          }\n        }\n        return solrQuery;\n      }\n else {\n        queryBuilder.append(nativeQueryString);\n      }\n    }\n else {\n      if (pr.propertyName.contains(\"/\")) {\n        continue;\n      }\n      if (\"rep:excerpt\".equals(pr.propertyName)) {\n        continue;\n      }\n      String first=null;\n      if (pr.first != null) {\n        first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n      }\n      String last=null;\n      if (pr.last != null) {\n        last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n      }\n      String prField=configuration.getFieldForPropertyRestriction(pr);\n      CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n      if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n        queryBuilder.append(configuration.getPathField());\n        queryBuilder.append(':');\n        queryBuilder.append(first);\n      }\n else {\n        if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(first);\n        }\n else         if (pr.first == null && pr.last == null) {\n          if (!queryBuilder.toString().contains(fieldName + \":\")) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append('*');\n          }\n        }\n else         if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n        }\n else         if (pr.isLike) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n        }\n else {\n          throw new RuntimeException(\"[unexpected!] not handled case\");\n        }\n      }\n    }\n    queryBuilder.append(\" \");\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 570,
                    "astHeight": 23
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.MethodDeclaration,body]",
                    "nodePosition": {
                        "charLength": 7985,
                        "startLineNumber": 103,
                        "startColumnNumber": 46,
                        "endLineNumber": 255,
                        "endColumnNumber": 5
                    },
                    "nodeContext": "{\n  SolrQuery solrQuery=new SolrQuery();\n  setDefaults(solrQuery);\n  StringBuilder queryBuilder=new StringBuilder();\n  if (filter.getFullTextConstraint() != null) {\n    queryBuilder.append(getFullTextQuery(filter.getFullTextConstraint()));\n    queryBuilder.append(' ');\n  }\n else   if (filter.getFulltextConditions() != null) {\n    Collection<String> fulltextConditions=filter.getFulltextConditions();\n    for (    String fulltextCondition : fulltextConditions) {\n      queryBuilder.append(fulltextCondition).append(\" \");\n    }\n  }\n  Collection<Filter.PropertyRestriction> propertyRestrictions=filter.getPropertyRestrictions();\n  if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n    for (    Filter.PropertyRestriction pr : propertyRestrictions) {\n      if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n        String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n        if (isSupportedHttpRequest(nativeQueryString)) {\n          String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n          if (!\"select\".equals(requestHandlerString)) {\n            if (requestHandlerString.charAt(0) != '/') {\n              requestHandlerString=\"/\" + requestHandlerString;\n            }\n            solrQuery.setRequestHandler(requestHandlerString);\n          }\n          String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n          for (          String param : parameterString.split(\"&\")) {\n            String[] kv=param.split(\"=\");\n            if (kv.length != 2) {\n              throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n            }\n else {\n              if (\"stream.body\".equals(kv[0])) {\n                kv[0]=\"q\";\n                String mltFlString=\"mlt.fl=\";\n                int mltFlIndex=parameterString.indexOf(mltFlString);\n                if (mltFlIndex > -1) {\n                  int beginIndex=mltFlIndex + mltFlString.length();\n                  int endIndex=parameterString.indexOf('&',beginIndex);\n                  String fields;\n                  if (endIndex > beginIndex) {\n                    fields=parameterString.substring(beginIndex,endIndex);\n                  }\n else {\n                    fields=parameterString.substring(beginIndex);\n                  }\n                  kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n                }\n              }\n              solrQuery.setParam(kv[0],kv[1]);\n            }\n          }\n          return solrQuery;\n        }\n else {\n          queryBuilder.append(nativeQueryString);\n        }\n      }\n else {\n        if (pr.propertyName.contains(\"/\")) {\n          continue;\n        }\n        if (\"rep:excerpt\".equals(pr.propertyName)) {\n          continue;\n        }\n        String first=null;\n        if (pr.first != null) {\n          first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n        }\n        String last=null;\n        if (pr.last != null) {\n          last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n        }\n        String prField=configuration.getFieldForPropertyRestriction(pr);\n        CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n        if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n          queryBuilder.append(configuration.getPathField());\n          queryBuilder.append(':');\n          queryBuilder.append(first);\n        }\n else {\n          if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(first);\n          }\n else           if (pr.first == null && pr.last == null) {\n            if (!queryBuilder.toString().contains(fieldName + \":\")) {\n              queryBuilder.append(fieldName).append(':');\n              queryBuilder.append('*');\n            }\n          }\n else           if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n          }\n else           if (pr.isLike) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n          }\n else {\n            throw new RuntimeException(\"[unexpected!] not handled case\");\n          }\n        }\n      }\n      queryBuilder.append(\" \");\n    }\n  }\n  String[] pts=filter.getPrimaryTypes().toArray(new String[filter.getPrimaryTypes().size()]);\n  for (int i=0; i < pts.length; i++) {\n    String pt=pts[i];\n    if (i == 0) {\n      queryBuilder.append(\"(\");\n    }\n    if (i > 0 && i < pts.length) {\n      queryBuilder.append(\"OR \");\n    }\n    queryBuilder.append(\"jcr\\\\:primaryType\").append(':').append(partialEscape(pt)).append(\" \");\n    if (i == pts.length - 1) {\n      queryBuilder.append(\")\");\n      queryBuilder.append(' ');\n    }\n  }\n  Filter.PathRestriction pathRestriction=filter.getPathRestriction();\n  if (pathRestriction != null) {\n    String path=purgePath(filter);\n    String fieldName=configuration.getFieldForPathRestriction(pathRestriction);\n    if (fieldName != null) {\n      queryBuilder.append(fieldName);\n      queryBuilder.append(':');\n      queryBuilder.append(path);\n    }\n  }\n  if (queryBuilder.length() == 0) {\n    queryBuilder.append(\"*:*\");\n  }\n  String escapedQuery=queryBuilder.toString();\n  solrQuery.setQuery(escapedQuery);\n  if (log.isDebugEnabled()) {\n    log.debug(\"JCR query {} has been converted to Solr query {}\",filter.getQueryStatement(),solrQuery.toString());\n  }\n  return solrQuery;\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 858,
                    "astHeight": 24
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.TypeDeclaration,bodyDeclarations]",
                    "nodePosition": {
                        "charLength": 8027,
                        "startLineNumber": 103,
                        "startColumnNumber": 4,
                        "endLineNumber": 255,
                        "endColumnNumber": 5
                    },
                    "nodeContext": "private SolrQuery getQuery(Filter filter){\n  SolrQuery solrQuery=new SolrQuery();\n  setDefaults(solrQuery);\n  StringBuilder queryBuilder=new StringBuilder();\n  if (filter.getFullTextConstraint() != null) {\n    queryBuilder.append(getFullTextQuery(filter.getFullTextConstraint()));\n    queryBuilder.append(' ');\n  }\n else   if (filter.getFulltextConditions() != null) {\n    Collection<String> fulltextConditions=filter.getFulltextConditions();\n    for (    String fulltextCondition : fulltextConditions) {\n      queryBuilder.append(fulltextCondition).append(\" \");\n    }\n  }\n  Collection<Filter.PropertyRestriction> propertyRestrictions=filter.getPropertyRestrictions();\n  if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n    for (    Filter.PropertyRestriction pr : propertyRestrictions) {\n      if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n        String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n        if (isSupportedHttpRequest(nativeQueryString)) {\n          String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n          if (!\"select\".equals(requestHandlerString)) {\n            if (requestHandlerString.charAt(0) != '/') {\n              requestHandlerString=\"/\" + requestHandlerString;\n            }\n            solrQuery.setRequestHandler(requestHandlerString);\n          }\n          String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n          for (          String param : parameterString.split(\"&\")) {\n            String[] kv=param.split(\"=\");\n            if (kv.length != 2) {\n              throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n            }\n else {\n              if (\"stream.body\".equals(kv[0])) {\n                kv[0]=\"q\";\n                String mltFlString=\"mlt.fl=\";\n                int mltFlIndex=parameterString.indexOf(mltFlString);\n                if (mltFlIndex > -1) {\n                  int beginIndex=mltFlIndex + mltFlString.length();\n                  int endIndex=parameterString.indexOf('&',beginIndex);\n                  String fields;\n                  if (endIndex > beginIndex) {\n                    fields=parameterString.substring(beginIndex,endIndex);\n                  }\n else {\n                    fields=parameterString.substring(beginIndex);\n                  }\n                  kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n                }\n              }\n              solrQuery.setParam(kv[0],kv[1]);\n            }\n          }\n          return solrQuery;\n        }\n else {\n          queryBuilder.append(nativeQueryString);\n        }\n      }\n else {\n        if (pr.propertyName.contains(\"/\")) {\n          continue;\n        }\n        if (\"rep:excerpt\".equals(pr.propertyName)) {\n          continue;\n        }\n        String first=null;\n        if (pr.first != null) {\n          first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n        }\n        String last=null;\n        if (pr.last != null) {\n          last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n        }\n        String prField=configuration.getFieldForPropertyRestriction(pr);\n        CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n        if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n          queryBuilder.append(configuration.getPathField());\n          queryBuilder.append(':');\n          queryBuilder.append(first);\n        }\n else {\n          if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(first);\n          }\n else           if (pr.first == null && pr.last == null) {\n            if (!queryBuilder.toString().contains(fieldName + \":\")) {\n              queryBuilder.append(fieldName).append(':');\n              queryBuilder.append('*');\n            }\n          }\n else           if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n          }\n else           if (pr.isLike) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n          }\n else {\n            throw new RuntimeException(\"[unexpected!] not handled case\");\n          }\n        }\n      }\n      queryBuilder.append(\" \");\n    }\n  }\n  String[] pts=filter.getPrimaryTypes().toArray(new String[filter.getPrimaryTypes().size()]);\n  for (int i=0; i < pts.length; i++) {\n    String pt=pts[i];\n    if (i == 0) {\n      queryBuilder.append(\"(\");\n    }\n    if (i > 0 && i < pts.length) {\n      queryBuilder.append(\"OR \");\n    }\n    queryBuilder.append(\"jcr\\\\:primaryType\").append(':').append(partialEscape(pt)).append(\" \");\n    if (i == pts.length - 1) {\n      queryBuilder.append(\")\");\n      queryBuilder.append(' ');\n    }\n  }\n  Filter.PathRestriction pathRestriction=filter.getPathRestriction();\n  if (pathRestriction != null) {\n    String path=purgePath(filter);\n    String fieldName=configuration.getFieldForPathRestriction(pathRestriction);\n    if (fieldName != null) {\n      queryBuilder.append(fieldName);\n      queryBuilder.append(':');\n      queryBuilder.append(path);\n    }\n  }\n  if (queryBuilder.length() == 0) {\n    queryBuilder.append(\"*:*\");\n  }\n  String escapedQuery=queryBuilder.toString();\n  solrQuery.setQuery(escapedQuery);\n  if (log.isDebugEnabled()) {\n    log.debug(\"JCR query {} has been converted to Solr query {}\",filter.getQueryStatement(),solrQuery.toString());\n  }\n  return solrQuery;\n}\n",
                    "nodeType": "MethodDeclaration",
                    "astNodeNumber": 867,
                    "astHeight": 25
                }
            ],
            "currentLineData": {
                "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.ConditionalExpression,elseExpression]",
                "nodePosition": {
                    "charLength": 15,
                    "startLineNumber": 185,
                    "startColumnNumber": 38,
                    "endLineNumber": 185,
                    "endColumnNumber": 53
                },
                "nodeContext": "pr.propertyName",
                "nodeType": "QualifiedName",
                "astNodeNumber": 3,
                "astHeight": 2
            },
            "tokenLength": 1,
            "type": "org.apache.jackrabbit.oak.spi.query.Filter.PropertyRestriction"
        },
        {
            "nodeContext": "pr",
            "nodeType": "SimpleName",
            "nodePosition": {
                "charLength": 2,
                "startLineNumber": 191,
                "startColumnNumber": 28,
                "endLineNumber": 191,
                "endColumnNumber": 30
            },
            "astNodeNumber": 1,
            "astHeight": 1,
            "parentDataList": [
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.InfixExpression,leftOperand]",
                    "nodePosition": {
                        "charLength": 8,
                        "startLineNumber": 191,
                        "startColumnNumber": 28,
                        "endLineNumber": 191,
                        "endColumnNumber": 36
                    },
                    "nodeContext": "pr.first",
                    "nodeType": "QualifiedName",
                    "astNodeNumber": 3,
                    "astHeight": 2
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.InfixExpression,leftOperand]",
                    "nodePosition": {
                        "charLength": 16,
                        "startLineNumber": 191,
                        "startColumnNumber": 28,
                        "endLineNumber": 191,
                        "endColumnNumber": 44
                    },
                    "nodeContext": "pr.first != null",
                    "nodeType": "InfixExpression",
                    "astNodeNumber": 5,
                    "astHeight": 3
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.InfixExpression,leftOperand]",
                    "nodePosition": {
                        "charLength": 35,
                        "startLineNumber": 191,
                        "startColumnNumber": 28,
                        "endLineNumber": 191,
                        "endColumnNumber": 63
                    },
                    "nodeContext": "pr.first != null && pr.last != null",
                    "nodeType": "InfixExpression",
                    "astNodeNumber": 11,
                    "astHeight": 4
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,expression]",
                    "nodePosition": {
                        "charLength": 63,
                        "startLineNumber": 191,
                        "startColumnNumber": 28,
                        "endLineNumber": 191,
                        "endColumnNumber": 91
                    },
                    "nodeContext": "pr.first != null && pr.last != null && pr.first.equals(pr.last)",
                    "nodeType": "InfixExpression",
                    "astNodeNumber": 20,
                    "astHeight": 5
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 1490,
                        "startLineNumber": 191,
                        "startColumnNumber": 24,
                        "endLineNumber": 209,
                        "endColumnNumber": 25
                    },
                    "nodeContext": "if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(first);\n}\n else if (pr.first == null && pr.last == null) {\n  if (!queryBuilder.toString().contains(fieldName + \":\")) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append('*');\n  }\n}\n else if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n}\n else if (pr.isLike) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n}\n else {\n  throw new RuntimeException(\"[unexpected!] not handled case\");\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 177,
                    "astHeight": 15
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 1538,
                        "startLineNumber": 190,
                        "startColumnNumber": 27,
                        "endLineNumber": 210,
                        "endColumnNumber": 21
                    },
                    "nodeContext": "{\n  if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(first);\n  }\n else   if (pr.first == null && pr.last == null) {\n    if (!queryBuilder.toString().contains(fieldName + \":\")) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append('*');\n    }\n  }\n else   if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n  }\n else   if (pr.isLike) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n  }\n else {\n    throw new RuntimeException(\"[unexpected!] not handled case\");\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 178,
                    "astHeight": 16
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 1791,
                        "startLineNumber": 186,
                        "startColumnNumber": 20,
                        "endLineNumber": 210,
                        "endColumnNumber": 21
                    },
                    "nodeContext": "if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n  queryBuilder.append(configuration.getPathField());\n  queryBuilder.append(':');\n  queryBuilder.append(first);\n}\n else {\n  if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(first);\n  }\n else   if (pr.first == null && pr.last == null) {\n    if (!queryBuilder.toString().contains(fieldName + \":\")) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append('*');\n    }\n  }\n else   if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n  }\n else   if (pr.isLike) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n  }\n else {\n    throw new RuntimeException(\"[unexpected!] not handled case\");\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 203,
                    "astHeight": 17
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 2798,
                        "startLineNumber": 164,
                        "startColumnNumber": 23,
                        "endLineNumber": 211,
                        "endColumnNumber": 17
                    },
                    "nodeContext": "{\n  if (pr.propertyName.contains(\"/\")) {\n    continue;\n  }\n  if (\"rep:excerpt\".equals(pr.propertyName)) {\n    continue;\n  }\n  String first=null;\n  if (pr.first != null) {\n    first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n  }\n  String last=null;\n  if (pr.last != null) {\n    last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n  }\n  String prField=configuration.getFieldForPropertyRestriction(pr);\n  CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n  if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n    queryBuilder.append(configuration.getPathField());\n    queryBuilder.append(':');\n    queryBuilder.append(first);\n  }\n else {\n    if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(first);\n    }\n else     if (pr.first == null && pr.last == null) {\n      if (!queryBuilder.toString().contains(fieldName + \":\")) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append('*');\n      }\n    }\n else     if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n    }\n else     if (pr.isLike) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n    }\n else {\n      throw new RuntimeException(\"[unexpected!] not handled case\");\n    }\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 312,
                    "astHeight": 18
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5508,
                        "startLineNumber": 124,
                        "startColumnNumber": 16,
                        "endLineNumber": 211,
                        "endColumnNumber": 17
                    },
                    "nodeContext": "if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n  String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n  if (isSupportedHttpRequest(nativeQueryString)) {\n    String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n    if (!\"select\".equals(requestHandlerString)) {\n      if (requestHandlerString.charAt(0) != '/') {\n        requestHandlerString=\"/\" + requestHandlerString;\n      }\n      solrQuery.setRequestHandler(requestHandlerString);\n    }\n    String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n    for (    String param : parameterString.split(\"&\")) {\n      String[] kv=param.split(\"=\");\n      if (kv.length != 2) {\n        throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n      }\n else {\n        if (\"stream.body\".equals(kv[0])) {\n          kv[0]=\"q\";\n          String mltFlString=\"mlt.fl=\";\n          int mltFlIndex=parameterString.indexOf(mltFlString);\n          if (mltFlIndex > -1) {\n            int beginIndex=mltFlIndex + mltFlString.length();\n            int endIndex=parameterString.indexOf('&',beginIndex);\n            String fields;\n            if (endIndex > beginIndex) {\n              fields=parameterString.substring(beginIndex,endIndex);\n            }\n else {\n              fields=parameterString.substring(beginIndex);\n            }\n            kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n          }\n        }\n        solrQuery.setParam(kv[0],kv[1]);\n      }\n    }\n    return solrQuery;\n  }\n else {\n    queryBuilder.append(nativeQueryString);\n  }\n}\n else {\n  if (pr.propertyName.contains(\"/\")) {\n    continue;\n  }\n  if (\"rep:excerpt\".equals(pr.propertyName)) {\n    continue;\n  }\n  String first=null;\n  if (pr.first != null) {\n    first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n  }\n  String last=null;\n  if (pr.last != null) {\n    last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n  }\n  String prField=configuration.getFieldForPropertyRestriction(pr);\n  CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n  if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n    queryBuilder.append(configuration.getPathField());\n    queryBuilder.append(':');\n    queryBuilder.append(first);\n  }\n else {\n    if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(first);\n    }\n else     if (pr.first == null && pr.last == null) {\n      if (!queryBuilder.toString().contains(fieldName + \":\")) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append('*');\n      }\n    }\n else     if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n    }\n else     if (pr.isLike) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n    }\n else {\n      throw new RuntimeException(\"[unexpected!] not handled case\");\n    }\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 546,
                    "astHeight": 19
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.EnhancedForStatement,body]",
                    "nodePosition": {
                        "charLength": 5622,
                        "startLineNumber": 122,
                        "startColumnNumber": 71,
                        "endLineNumber": 213,
                        "endColumnNumber": 13
                    },
                    "nodeContext": "{\n  if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n    String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n    if (isSupportedHttpRequest(nativeQueryString)) {\n      String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n      if (!\"select\".equals(requestHandlerString)) {\n        if (requestHandlerString.charAt(0) != '/') {\n          requestHandlerString=\"/\" + requestHandlerString;\n        }\n        solrQuery.setRequestHandler(requestHandlerString);\n      }\n      String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n      for (      String param : parameterString.split(\"&\")) {\n        String[] kv=param.split(\"=\");\n        if (kv.length != 2) {\n          throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n        }\n else {\n          if (\"stream.body\".equals(kv[0])) {\n            kv[0]=\"q\";\n            String mltFlString=\"mlt.fl=\";\n            int mltFlIndex=parameterString.indexOf(mltFlString);\n            if (mltFlIndex > -1) {\n              int beginIndex=mltFlIndex + mltFlString.length();\n              int endIndex=parameterString.indexOf('&',beginIndex);\n              String fields;\n              if (endIndex > beginIndex) {\n                fields=parameterString.substring(beginIndex,endIndex);\n              }\n else {\n                fields=parameterString.substring(beginIndex);\n              }\n              kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n            }\n          }\n          solrQuery.setParam(kv[0],kv[1]);\n        }\n      }\n      return solrQuery;\n    }\n else {\n      queryBuilder.append(nativeQueryString);\n    }\n  }\n else {\n    if (pr.propertyName.contains(\"/\")) {\n      continue;\n    }\n    if (\"rep:excerpt\".equals(pr.propertyName)) {\n      continue;\n    }\n    String first=null;\n    if (pr.first != null) {\n      first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n    }\n    String last=null;\n    if (pr.last != null) {\n      last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n    }\n    String prField=configuration.getFieldForPropertyRestriction(pr);\n    CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n    if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n      queryBuilder.append(configuration.getPathField());\n      queryBuilder.append(':');\n      queryBuilder.append(first);\n    }\n else {\n      if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(first);\n      }\n else       if (pr.first == null && pr.last == null) {\n        if (!queryBuilder.toString().contains(fieldName + \":\")) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append('*');\n        }\n      }\n else       if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n      }\n else       if (pr.isLike) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n      }\n else {\n        throw new RuntimeException(\"[unexpected!] not handled case\");\n      }\n    }\n  }\n  queryBuilder.append(\" \");\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 552,
                    "astHeight": 20
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5681,
                        "startLineNumber": 122,
                        "startColumnNumber": 12,
                        "endLineNumber": 213,
                        "endColumnNumber": 13
                    },
                    "nodeContext": "for (Filter.PropertyRestriction pr : propertyRestrictions) {\n  if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n    String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n    if (isSupportedHttpRequest(nativeQueryString)) {\n      String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n      if (!\"select\".equals(requestHandlerString)) {\n        if (requestHandlerString.charAt(0) != '/') {\n          requestHandlerString=\"/\" + requestHandlerString;\n        }\n        solrQuery.setRequestHandler(requestHandlerString);\n      }\n      String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n      for (      String param : parameterString.split(\"&\")) {\n        String[] kv=param.split(\"=\");\n        if (kv.length != 2) {\n          throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n        }\n else {\n          if (\"stream.body\".equals(kv[0])) {\n            kv[0]=\"q\";\n            String mltFlString=\"mlt.fl=\";\n            int mltFlIndex=parameterString.indexOf(mltFlString);\n            if (mltFlIndex > -1) {\n              int beginIndex=mltFlIndex + mltFlString.length();\n              int endIndex=parameterString.indexOf('&',beginIndex);\n              String fields;\n              if (endIndex > beginIndex) {\n                fields=parameterString.substring(beginIndex,endIndex);\n              }\n else {\n                fields=parameterString.substring(beginIndex);\n              }\n              kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n            }\n          }\n          solrQuery.setParam(kv[0],kv[1]);\n        }\n      }\n      return solrQuery;\n    }\n else {\n      queryBuilder.append(nativeQueryString);\n    }\n  }\n else {\n    if (pr.propertyName.contains(\"/\")) {\n      continue;\n    }\n    if (\"rep:excerpt\".equals(pr.propertyName)) {\n      continue;\n    }\n    String first=null;\n    if (pr.first != null) {\n      first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n    }\n    String last=null;\n    if (pr.last != null) {\n      last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n    }\n    String prField=configuration.getFieldForPropertyRestriction(pr);\n    CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n    if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n      queryBuilder.append(configuration.getPathField());\n      queryBuilder.append(':');\n      queryBuilder.append(first);\n    }\n else {\n      if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(first);\n      }\n else       if (pr.first == null && pr.last == null) {\n        if (!queryBuilder.toString().contains(fieldName + \":\")) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append('*');\n        }\n      }\n else       if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n      }\n else       if (pr.isLike) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n      }\n else {\n        throw new RuntimeException(\"[unexpected!] not handled case\");\n      }\n    }\n  }\n  queryBuilder.append(\" \");\n}\n",
                    "nodeType": "EnhancedForStatement",
                    "astNodeNumber": 560,
                    "astHeight": 21
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,thenStatement]",
                    "nodePosition": {
                        "charLength": 5705,
                        "startLineNumber": 121,
                        "startColumnNumber": 77,
                        "endLineNumber": 214,
                        "endColumnNumber": 9
                    },
                    "nodeContext": "{\n  for (  Filter.PropertyRestriction pr : propertyRestrictions) {\n    if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n      String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n      if (isSupportedHttpRequest(nativeQueryString)) {\n        String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n        if (!\"select\".equals(requestHandlerString)) {\n          if (requestHandlerString.charAt(0) != '/') {\n            requestHandlerString=\"/\" + requestHandlerString;\n          }\n          solrQuery.setRequestHandler(requestHandlerString);\n        }\n        String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n        for (        String param : parameterString.split(\"&\")) {\n          String[] kv=param.split(\"=\");\n          if (kv.length != 2) {\n            throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n          }\n else {\n            if (\"stream.body\".equals(kv[0])) {\n              kv[0]=\"q\";\n              String mltFlString=\"mlt.fl=\";\n              int mltFlIndex=parameterString.indexOf(mltFlString);\n              if (mltFlIndex > -1) {\n                int beginIndex=mltFlIndex + mltFlString.length();\n                int endIndex=parameterString.indexOf('&',beginIndex);\n                String fields;\n                if (endIndex > beginIndex) {\n                  fields=parameterString.substring(beginIndex,endIndex);\n                }\n else {\n                  fields=parameterString.substring(beginIndex);\n                }\n                kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n              }\n            }\n            solrQuery.setParam(kv[0],kv[1]);\n          }\n        }\n        return solrQuery;\n      }\n else {\n        queryBuilder.append(nativeQueryString);\n      }\n    }\n else {\n      if (pr.propertyName.contains(\"/\")) {\n        continue;\n      }\n      if (\"rep:excerpt\".equals(pr.propertyName)) {\n        continue;\n      }\n      String first=null;\n      if (pr.first != null) {\n        first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n      }\n      String last=null;\n      if (pr.last != null) {\n        last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n      }\n      String prField=configuration.getFieldForPropertyRestriction(pr);\n      CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n      if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n        queryBuilder.append(configuration.getPathField());\n        queryBuilder.append(':');\n        queryBuilder.append(first);\n      }\n else {\n        if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(first);\n        }\n else         if (pr.first == null && pr.last == null) {\n          if (!queryBuilder.toString().contains(fieldName + \":\")) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append('*');\n          }\n        }\n else         if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n        }\n else         if (pr.isLike) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n        }\n else {\n          throw new RuntimeException(\"[unexpected!] not handled case\");\n        }\n      }\n    }\n    queryBuilder.append(\" \");\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 561,
                    "astHeight": 22
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5774,
                        "startLineNumber": 121,
                        "startColumnNumber": 8,
                        "endLineNumber": 214,
                        "endColumnNumber": 9
                    },
                    "nodeContext": "if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n  for (  Filter.PropertyRestriction pr : propertyRestrictions) {\n    if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n      String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n      if (isSupportedHttpRequest(nativeQueryString)) {\n        String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n        if (!\"select\".equals(requestHandlerString)) {\n          if (requestHandlerString.charAt(0) != '/') {\n            requestHandlerString=\"/\" + requestHandlerString;\n          }\n          solrQuery.setRequestHandler(requestHandlerString);\n        }\n        String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n        for (        String param : parameterString.split(\"&\")) {\n          String[] kv=param.split(\"=\");\n          if (kv.length != 2) {\n            throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n          }\n else {\n            if (\"stream.body\".equals(kv[0])) {\n              kv[0]=\"q\";\n              String mltFlString=\"mlt.fl=\";\n              int mltFlIndex=parameterString.indexOf(mltFlString);\n              if (mltFlIndex > -1) {\n                int beginIndex=mltFlIndex + mltFlString.length();\n                int endIndex=parameterString.indexOf('&',beginIndex);\n                String fields;\n                if (endIndex > beginIndex) {\n                  fields=parameterString.substring(beginIndex,endIndex);\n                }\n else {\n                  fields=parameterString.substring(beginIndex);\n                }\n                kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n              }\n            }\n            solrQuery.setParam(kv[0],kv[1]);\n          }\n        }\n        return solrQuery;\n      }\n else {\n        queryBuilder.append(nativeQueryString);\n      }\n    }\n else {\n      if (pr.propertyName.contains(\"/\")) {\n        continue;\n      }\n      if (\"rep:excerpt\".equals(pr.propertyName)) {\n        continue;\n      }\n      String first=null;\n      if (pr.first != null) {\n        first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n      }\n      String last=null;\n      if (pr.last != null) {\n        last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n      }\n      String prField=configuration.getFieldForPropertyRestriction(pr);\n      CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n      if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n        queryBuilder.append(configuration.getPathField());\n        queryBuilder.append(':');\n        queryBuilder.append(first);\n      }\n else {\n        if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(first);\n        }\n else         if (pr.first == null && pr.last == null) {\n          if (!queryBuilder.toString().contains(fieldName + \":\")) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append('*');\n          }\n        }\n else         if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n        }\n else         if (pr.isLike) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n        }\n else {\n          throw new RuntimeException(\"[unexpected!] not handled case\");\n        }\n      }\n    }\n    queryBuilder.append(\" \");\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 570,
                    "astHeight": 23
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.MethodDeclaration,body]",
                    "nodePosition": {
                        "charLength": 7985,
                        "startLineNumber": 103,
                        "startColumnNumber": 46,
                        "endLineNumber": 255,
                        "endColumnNumber": 5
                    },
                    "nodeContext": "{\n  SolrQuery solrQuery=new SolrQuery();\n  setDefaults(solrQuery);\n  StringBuilder queryBuilder=new StringBuilder();\n  if (filter.getFullTextConstraint() != null) {\n    queryBuilder.append(getFullTextQuery(filter.getFullTextConstraint()));\n    queryBuilder.append(' ');\n  }\n else   if (filter.getFulltextConditions() != null) {\n    Collection<String> fulltextConditions=filter.getFulltextConditions();\n    for (    String fulltextCondition : fulltextConditions) {\n      queryBuilder.append(fulltextCondition).append(\" \");\n    }\n  }\n  Collection<Filter.PropertyRestriction> propertyRestrictions=filter.getPropertyRestrictions();\n  if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n    for (    Filter.PropertyRestriction pr : propertyRestrictions) {\n      if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n        String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n        if (isSupportedHttpRequest(nativeQueryString)) {\n          String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n          if (!\"select\".equals(requestHandlerString)) {\n            if (requestHandlerString.charAt(0) != '/') {\n              requestHandlerString=\"/\" + requestHandlerString;\n            }\n            solrQuery.setRequestHandler(requestHandlerString);\n          }\n          String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n          for (          String param : parameterString.split(\"&\")) {\n            String[] kv=param.split(\"=\");\n            if (kv.length != 2) {\n              throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n            }\n else {\n              if (\"stream.body\".equals(kv[0])) {\n                kv[0]=\"q\";\n                String mltFlString=\"mlt.fl=\";\n                int mltFlIndex=parameterString.indexOf(mltFlString);\n                if (mltFlIndex > -1) {\n                  int beginIndex=mltFlIndex + mltFlString.length();\n                  int endIndex=parameterString.indexOf('&',beginIndex);\n                  String fields;\n                  if (endIndex > beginIndex) {\n                    fields=parameterString.substring(beginIndex,endIndex);\n                  }\n else {\n                    fields=parameterString.substring(beginIndex);\n                  }\n                  kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n                }\n              }\n              solrQuery.setParam(kv[0],kv[1]);\n            }\n          }\n          return solrQuery;\n        }\n else {\n          queryBuilder.append(nativeQueryString);\n        }\n      }\n else {\n        if (pr.propertyName.contains(\"/\")) {\n          continue;\n        }\n        if (\"rep:excerpt\".equals(pr.propertyName)) {\n          continue;\n        }\n        String first=null;\n        if (pr.first != null) {\n          first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n        }\n        String last=null;\n        if (pr.last != null) {\n          last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n        }\n        String prField=configuration.getFieldForPropertyRestriction(pr);\n        CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n        if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n          queryBuilder.append(configuration.getPathField());\n          queryBuilder.append(':');\n          queryBuilder.append(first);\n        }\n else {\n          if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(first);\n          }\n else           if (pr.first == null && pr.last == null) {\n            if (!queryBuilder.toString().contains(fieldName + \":\")) {\n              queryBuilder.append(fieldName).append(':');\n              queryBuilder.append('*');\n            }\n          }\n else           if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n          }\n else           if (pr.isLike) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n          }\n else {\n            throw new RuntimeException(\"[unexpected!] not handled case\");\n          }\n        }\n      }\n      queryBuilder.append(\" \");\n    }\n  }\n  String[] pts=filter.getPrimaryTypes().toArray(new String[filter.getPrimaryTypes().size()]);\n  for (int i=0; i < pts.length; i++) {\n    String pt=pts[i];\n    if (i == 0) {\n      queryBuilder.append(\"(\");\n    }\n    if (i > 0 && i < pts.length) {\n      queryBuilder.append(\"OR \");\n    }\n    queryBuilder.append(\"jcr\\\\:primaryType\").append(':').append(partialEscape(pt)).append(\" \");\n    if (i == pts.length - 1) {\n      queryBuilder.append(\")\");\n      queryBuilder.append(' ');\n    }\n  }\n  Filter.PathRestriction pathRestriction=filter.getPathRestriction();\n  if (pathRestriction != null) {\n    String path=purgePath(filter);\n    String fieldName=configuration.getFieldForPathRestriction(pathRestriction);\n    if (fieldName != null) {\n      queryBuilder.append(fieldName);\n      queryBuilder.append(':');\n      queryBuilder.append(path);\n    }\n  }\n  if (queryBuilder.length() == 0) {\n    queryBuilder.append(\"*:*\");\n  }\n  String escapedQuery=queryBuilder.toString();\n  solrQuery.setQuery(escapedQuery);\n  if (log.isDebugEnabled()) {\n    log.debug(\"JCR query {} has been converted to Solr query {}\",filter.getQueryStatement(),solrQuery.toString());\n  }\n  return solrQuery;\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 858,
                    "astHeight": 24
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.TypeDeclaration,bodyDeclarations]",
                    "nodePosition": {
                        "charLength": 8027,
                        "startLineNumber": 103,
                        "startColumnNumber": 4,
                        "endLineNumber": 255,
                        "endColumnNumber": 5
                    },
                    "nodeContext": "private SolrQuery getQuery(Filter filter){\n  SolrQuery solrQuery=new SolrQuery();\n  setDefaults(solrQuery);\n  StringBuilder queryBuilder=new StringBuilder();\n  if (filter.getFullTextConstraint() != null) {\n    queryBuilder.append(getFullTextQuery(filter.getFullTextConstraint()));\n    queryBuilder.append(' ');\n  }\n else   if (filter.getFulltextConditions() != null) {\n    Collection<String> fulltextConditions=filter.getFulltextConditions();\n    for (    String fulltextCondition : fulltextConditions) {\n      queryBuilder.append(fulltextCondition).append(\" \");\n    }\n  }\n  Collection<Filter.PropertyRestriction> propertyRestrictions=filter.getPropertyRestrictions();\n  if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n    for (    Filter.PropertyRestriction pr : propertyRestrictions) {\n      if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n        String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n        if (isSupportedHttpRequest(nativeQueryString)) {\n          String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n          if (!\"select\".equals(requestHandlerString)) {\n            if (requestHandlerString.charAt(0) != '/') {\n              requestHandlerString=\"/\" + requestHandlerString;\n            }\n            solrQuery.setRequestHandler(requestHandlerString);\n          }\n          String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n          for (          String param : parameterString.split(\"&\")) {\n            String[] kv=param.split(\"=\");\n            if (kv.length != 2) {\n              throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n            }\n else {\n              if (\"stream.body\".equals(kv[0])) {\n                kv[0]=\"q\";\n                String mltFlString=\"mlt.fl=\";\n                int mltFlIndex=parameterString.indexOf(mltFlString);\n                if (mltFlIndex > -1) {\n                  int beginIndex=mltFlIndex + mltFlString.length();\n                  int endIndex=parameterString.indexOf('&',beginIndex);\n                  String fields;\n                  if (endIndex > beginIndex) {\n                    fields=parameterString.substring(beginIndex,endIndex);\n                  }\n else {\n                    fields=parameterString.substring(beginIndex);\n                  }\n                  kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n                }\n              }\n              solrQuery.setParam(kv[0],kv[1]);\n            }\n          }\n          return solrQuery;\n        }\n else {\n          queryBuilder.append(nativeQueryString);\n        }\n      }\n else {\n        if (pr.propertyName.contains(\"/\")) {\n          continue;\n        }\n        if (\"rep:excerpt\".equals(pr.propertyName)) {\n          continue;\n        }\n        String first=null;\n        if (pr.first != null) {\n          first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n        }\n        String last=null;\n        if (pr.last != null) {\n          last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n        }\n        String prField=configuration.getFieldForPropertyRestriction(pr);\n        CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n        if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n          queryBuilder.append(configuration.getPathField());\n          queryBuilder.append(':');\n          queryBuilder.append(first);\n        }\n else {\n          if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(first);\n          }\n else           if (pr.first == null && pr.last == null) {\n            if (!queryBuilder.toString().contains(fieldName + \":\")) {\n              queryBuilder.append(fieldName).append(':');\n              queryBuilder.append('*');\n            }\n          }\n else           if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n          }\n else           if (pr.isLike) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n          }\n else {\n            throw new RuntimeException(\"[unexpected!] not handled case\");\n          }\n        }\n      }\n      queryBuilder.append(\" \");\n    }\n  }\n  String[] pts=filter.getPrimaryTypes().toArray(new String[filter.getPrimaryTypes().size()]);\n  for (int i=0; i < pts.length; i++) {\n    String pt=pts[i];\n    if (i == 0) {\n      queryBuilder.append(\"(\");\n    }\n    if (i > 0 && i < pts.length) {\n      queryBuilder.append(\"OR \");\n    }\n    queryBuilder.append(\"jcr\\\\:primaryType\").append(':').append(partialEscape(pt)).append(\" \");\n    if (i == pts.length - 1) {\n      queryBuilder.append(\")\");\n      queryBuilder.append(' ');\n    }\n  }\n  Filter.PathRestriction pathRestriction=filter.getPathRestriction();\n  if (pathRestriction != null) {\n    String path=purgePath(filter);\n    String fieldName=configuration.getFieldForPathRestriction(pathRestriction);\n    if (fieldName != null) {\n      queryBuilder.append(fieldName);\n      queryBuilder.append(':');\n      queryBuilder.append(path);\n    }\n  }\n  if (queryBuilder.length() == 0) {\n    queryBuilder.append(\"*:*\");\n  }\n  String escapedQuery=queryBuilder.toString();\n  solrQuery.setQuery(escapedQuery);\n  if (log.isDebugEnabled()) {\n    log.debug(\"JCR query {} has been converted to Solr query {}\",filter.getQueryStatement(),solrQuery.toString());\n  }\n  return solrQuery;\n}\n",
                    "nodeType": "MethodDeclaration",
                    "astNodeNumber": 867,
                    "astHeight": 25
                }
            ],
            "currentLineData": {
                "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,expression]",
                "nodePosition": {
                    "charLength": 63,
                    "startLineNumber": 191,
                    "startColumnNumber": 28,
                    "endLineNumber": 191,
                    "endColumnNumber": 91
                },
                "nodeContext": "pr.first != null && pr.last != null && pr.first.equals(pr.last)",
                "nodeType": "InfixExpression",
                "astNodeNumber": 20,
                "astHeight": 5
            },
            "tokenLength": 1,
            "type": "org.apache.jackrabbit.oak.spi.query.Filter.PropertyRestriction"
        },
        {
            "nodeContext": "pr",
            "nodeType": "SimpleName",
            "nodePosition": {
                "charLength": 2,
                "startLineNumber": 191,
                "startColumnNumber": 48,
                "endLineNumber": 191,
                "endColumnNumber": 50
            },
            "astNodeNumber": 1,
            "astHeight": 1,
            "parentDataList": [
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.InfixExpression,leftOperand]",
                    "nodePosition": {
                        "charLength": 7,
                        "startLineNumber": 191,
                        "startColumnNumber": 48,
                        "endLineNumber": 191,
                        "endColumnNumber": 55
                    },
                    "nodeContext": "pr.last",
                    "nodeType": "QualifiedName",
                    "astNodeNumber": 3,
                    "astHeight": 2
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.InfixExpression,rightOperand]",
                    "nodePosition": {
                        "charLength": 15,
                        "startLineNumber": 191,
                        "startColumnNumber": 48,
                        "endLineNumber": 191,
                        "endColumnNumber": 63
                    },
                    "nodeContext": "pr.last != null",
                    "nodeType": "InfixExpression",
                    "astNodeNumber": 5,
                    "astHeight": 3
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.InfixExpression,leftOperand]",
                    "nodePosition": {
                        "charLength": 35,
                        "startLineNumber": 191,
                        "startColumnNumber": 28,
                        "endLineNumber": 191,
                        "endColumnNumber": 63
                    },
                    "nodeContext": "pr.first != null && pr.last != null",
                    "nodeType": "InfixExpression",
                    "astNodeNumber": 11,
                    "astHeight": 4
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,expression]",
                    "nodePosition": {
                        "charLength": 63,
                        "startLineNumber": 191,
                        "startColumnNumber": 28,
                        "endLineNumber": 191,
                        "endColumnNumber": 91
                    },
                    "nodeContext": "pr.first != null && pr.last != null && pr.first.equals(pr.last)",
                    "nodeType": "InfixExpression",
                    "astNodeNumber": 20,
                    "astHeight": 5
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 1490,
                        "startLineNumber": 191,
                        "startColumnNumber": 24,
                        "endLineNumber": 209,
                        "endColumnNumber": 25
                    },
                    "nodeContext": "if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(first);\n}\n else if (pr.first == null && pr.last == null) {\n  if (!queryBuilder.toString().contains(fieldName + \":\")) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append('*');\n  }\n}\n else if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n}\n else if (pr.isLike) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n}\n else {\n  throw new RuntimeException(\"[unexpected!] not handled case\");\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 177,
                    "astHeight": 15
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 1538,
                        "startLineNumber": 190,
                        "startColumnNumber": 27,
                        "endLineNumber": 210,
                        "endColumnNumber": 21
                    },
                    "nodeContext": "{\n  if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(first);\n  }\n else   if (pr.first == null && pr.last == null) {\n    if (!queryBuilder.toString().contains(fieldName + \":\")) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append('*');\n    }\n  }\n else   if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n  }\n else   if (pr.isLike) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n  }\n else {\n    throw new RuntimeException(\"[unexpected!] not handled case\");\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 178,
                    "astHeight": 16
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 1791,
                        "startLineNumber": 186,
                        "startColumnNumber": 20,
                        "endLineNumber": 210,
                        "endColumnNumber": 21
                    },
                    "nodeContext": "if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n  queryBuilder.append(configuration.getPathField());\n  queryBuilder.append(':');\n  queryBuilder.append(first);\n}\n else {\n  if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(first);\n  }\n else   if (pr.first == null && pr.last == null) {\n    if (!queryBuilder.toString().contains(fieldName + \":\")) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append('*');\n    }\n  }\n else   if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n  }\n else   if (pr.isLike) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n  }\n else {\n    throw new RuntimeException(\"[unexpected!] not handled case\");\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 203,
                    "astHeight": 17
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 2798,
                        "startLineNumber": 164,
                        "startColumnNumber": 23,
                        "endLineNumber": 211,
                        "endColumnNumber": 17
                    },
                    "nodeContext": "{\n  if (pr.propertyName.contains(\"/\")) {\n    continue;\n  }\n  if (\"rep:excerpt\".equals(pr.propertyName)) {\n    continue;\n  }\n  String first=null;\n  if (pr.first != null) {\n    first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n  }\n  String last=null;\n  if (pr.last != null) {\n    last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n  }\n  String prField=configuration.getFieldForPropertyRestriction(pr);\n  CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n  if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n    queryBuilder.append(configuration.getPathField());\n    queryBuilder.append(':');\n    queryBuilder.append(first);\n  }\n else {\n    if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(first);\n    }\n else     if (pr.first == null && pr.last == null) {\n      if (!queryBuilder.toString().contains(fieldName + \":\")) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append('*');\n      }\n    }\n else     if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n    }\n else     if (pr.isLike) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n    }\n else {\n      throw new RuntimeException(\"[unexpected!] not handled case\");\n    }\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 312,
                    "astHeight": 18
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5508,
                        "startLineNumber": 124,
                        "startColumnNumber": 16,
                        "endLineNumber": 211,
                        "endColumnNumber": 17
                    },
                    "nodeContext": "if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n  String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n  if (isSupportedHttpRequest(nativeQueryString)) {\n    String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n    if (!\"select\".equals(requestHandlerString)) {\n      if (requestHandlerString.charAt(0) != '/') {\n        requestHandlerString=\"/\" + requestHandlerString;\n      }\n      solrQuery.setRequestHandler(requestHandlerString);\n    }\n    String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n    for (    String param : parameterString.split(\"&\")) {\n      String[] kv=param.split(\"=\");\n      if (kv.length != 2) {\n        throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n      }\n else {\n        if (\"stream.body\".equals(kv[0])) {\n          kv[0]=\"q\";\n          String mltFlString=\"mlt.fl=\";\n          int mltFlIndex=parameterString.indexOf(mltFlString);\n          if (mltFlIndex > -1) {\n            int beginIndex=mltFlIndex + mltFlString.length();\n            int endIndex=parameterString.indexOf('&',beginIndex);\n            String fields;\n            if (endIndex > beginIndex) {\n              fields=parameterString.substring(beginIndex,endIndex);\n            }\n else {\n              fields=parameterString.substring(beginIndex);\n            }\n            kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n          }\n        }\n        solrQuery.setParam(kv[0],kv[1]);\n      }\n    }\n    return solrQuery;\n  }\n else {\n    queryBuilder.append(nativeQueryString);\n  }\n}\n else {\n  if (pr.propertyName.contains(\"/\")) {\n    continue;\n  }\n  if (\"rep:excerpt\".equals(pr.propertyName)) {\n    continue;\n  }\n  String first=null;\n  if (pr.first != null) {\n    first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n  }\n  String last=null;\n  if (pr.last != null) {\n    last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n  }\n  String prField=configuration.getFieldForPropertyRestriction(pr);\n  CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n  if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n    queryBuilder.append(configuration.getPathField());\n    queryBuilder.append(':');\n    queryBuilder.append(first);\n  }\n else {\n    if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(first);\n    }\n else     if (pr.first == null && pr.last == null) {\n      if (!queryBuilder.toString().contains(fieldName + \":\")) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append('*');\n      }\n    }\n else     if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n    }\n else     if (pr.isLike) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n    }\n else {\n      throw new RuntimeException(\"[unexpected!] not handled case\");\n    }\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 546,
                    "astHeight": 19
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.EnhancedForStatement,body]",
                    "nodePosition": {
                        "charLength": 5622,
                        "startLineNumber": 122,
                        "startColumnNumber": 71,
                        "endLineNumber": 213,
                        "endColumnNumber": 13
                    },
                    "nodeContext": "{\n  if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n    String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n    if (isSupportedHttpRequest(nativeQueryString)) {\n      String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n      if (!\"select\".equals(requestHandlerString)) {\n        if (requestHandlerString.charAt(0) != '/') {\n          requestHandlerString=\"/\" + requestHandlerString;\n        }\n        solrQuery.setRequestHandler(requestHandlerString);\n      }\n      String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n      for (      String param : parameterString.split(\"&\")) {\n        String[] kv=param.split(\"=\");\n        if (kv.length != 2) {\n          throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n        }\n else {\n          if (\"stream.body\".equals(kv[0])) {\n            kv[0]=\"q\";\n            String mltFlString=\"mlt.fl=\";\n            int mltFlIndex=parameterString.indexOf(mltFlString);\n            if (mltFlIndex > -1) {\n              int beginIndex=mltFlIndex + mltFlString.length();\n              int endIndex=parameterString.indexOf('&',beginIndex);\n              String fields;\n              if (endIndex > beginIndex) {\n                fields=parameterString.substring(beginIndex,endIndex);\n              }\n else {\n                fields=parameterString.substring(beginIndex);\n              }\n              kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n            }\n          }\n          solrQuery.setParam(kv[0],kv[1]);\n        }\n      }\n      return solrQuery;\n    }\n else {\n      queryBuilder.append(nativeQueryString);\n    }\n  }\n else {\n    if (pr.propertyName.contains(\"/\")) {\n      continue;\n    }\n    if (\"rep:excerpt\".equals(pr.propertyName)) {\n      continue;\n    }\n    String first=null;\n    if (pr.first != null) {\n      first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n    }\n    String last=null;\n    if (pr.last != null) {\n      last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n    }\n    String prField=configuration.getFieldForPropertyRestriction(pr);\n    CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n    if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n      queryBuilder.append(configuration.getPathField());\n      queryBuilder.append(':');\n      queryBuilder.append(first);\n    }\n else {\n      if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(first);\n      }\n else       if (pr.first == null && pr.last == null) {\n        if (!queryBuilder.toString().contains(fieldName + \":\")) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append('*');\n        }\n      }\n else       if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n      }\n else       if (pr.isLike) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n      }\n else {\n        throw new RuntimeException(\"[unexpected!] not handled case\");\n      }\n    }\n  }\n  queryBuilder.append(\" \");\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 552,
                    "astHeight": 20
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5681,
                        "startLineNumber": 122,
                        "startColumnNumber": 12,
                        "endLineNumber": 213,
                        "endColumnNumber": 13
                    },
                    "nodeContext": "for (Filter.PropertyRestriction pr : propertyRestrictions) {\n  if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n    String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n    if (isSupportedHttpRequest(nativeQueryString)) {\n      String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n      if (!\"select\".equals(requestHandlerString)) {\n        if (requestHandlerString.charAt(0) != '/') {\n          requestHandlerString=\"/\" + requestHandlerString;\n        }\n        solrQuery.setRequestHandler(requestHandlerString);\n      }\n      String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n      for (      String param : parameterString.split(\"&\")) {\n        String[] kv=param.split(\"=\");\n        if (kv.length != 2) {\n          throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n        }\n else {\n          if (\"stream.body\".equals(kv[0])) {\n            kv[0]=\"q\";\n            String mltFlString=\"mlt.fl=\";\n            int mltFlIndex=parameterString.indexOf(mltFlString);\n            if (mltFlIndex > -1) {\n              int beginIndex=mltFlIndex + mltFlString.length();\n              int endIndex=parameterString.indexOf('&',beginIndex);\n              String fields;\n              if (endIndex > beginIndex) {\n                fields=parameterString.substring(beginIndex,endIndex);\n              }\n else {\n                fields=parameterString.substring(beginIndex);\n              }\n              kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n            }\n          }\n          solrQuery.setParam(kv[0],kv[1]);\n        }\n      }\n      return solrQuery;\n    }\n else {\n      queryBuilder.append(nativeQueryString);\n    }\n  }\n else {\n    if (pr.propertyName.contains(\"/\")) {\n      continue;\n    }\n    if (\"rep:excerpt\".equals(pr.propertyName)) {\n      continue;\n    }\n    String first=null;\n    if (pr.first != null) {\n      first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n    }\n    String last=null;\n    if (pr.last != null) {\n      last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n    }\n    String prField=configuration.getFieldForPropertyRestriction(pr);\n    CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n    if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n      queryBuilder.append(configuration.getPathField());\n      queryBuilder.append(':');\n      queryBuilder.append(first);\n    }\n else {\n      if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(first);\n      }\n else       if (pr.first == null && pr.last == null) {\n        if (!queryBuilder.toString().contains(fieldName + \":\")) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append('*');\n        }\n      }\n else       if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n      }\n else       if (pr.isLike) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n      }\n else {\n        throw new RuntimeException(\"[unexpected!] not handled case\");\n      }\n    }\n  }\n  queryBuilder.append(\" \");\n}\n",
                    "nodeType": "EnhancedForStatement",
                    "astNodeNumber": 560,
                    "astHeight": 21
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,thenStatement]",
                    "nodePosition": {
                        "charLength": 5705,
                        "startLineNumber": 121,
                        "startColumnNumber": 77,
                        "endLineNumber": 214,
                        "endColumnNumber": 9
                    },
                    "nodeContext": "{\n  for (  Filter.PropertyRestriction pr : propertyRestrictions) {\n    if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n      String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n      if (isSupportedHttpRequest(nativeQueryString)) {\n        String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n        if (!\"select\".equals(requestHandlerString)) {\n          if (requestHandlerString.charAt(0) != '/') {\n            requestHandlerString=\"/\" + requestHandlerString;\n          }\n          solrQuery.setRequestHandler(requestHandlerString);\n        }\n        String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n        for (        String param : parameterString.split(\"&\")) {\n          String[] kv=param.split(\"=\");\n          if (kv.length != 2) {\n            throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n          }\n else {\n            if (\"stream.body\".equals(kv[0])) {\n              kv[0]=\"q\";\n              String mltFlString=\"mlt.fl=\";\n              int mltFlIndex=parameterString.indexOf(mltFlString);\n              if (mltFlIndex > -1) {\n                int beginIndex=mltFlIndex + mltFlString.length();\n                int endIndex=parameterString.indexOf('&',beginIndex);\n                String fields;\n                if (endIndex > beginIndex) {\n                  fields=parameterString.substring(beginIndex,endIndex);\n                }\n else {\n                  fields=parameterString.substring(beginIndex);\n                }\n                kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n              }\n            }\n            solrQuery.setParam(kv[0],kv[1]);\n          }\n        }\n        return solrQuery;\n      }\n else {\n        queryBuilder.append(nativeQueryString);\n      }\n    }\n else {\n      if (pr.propertyName.contains(\"/\")) {\n        continue;\n      }\n      if (\"rep:excerpt\".equals(pr.propertyName)) {\n        continue;\n      }\n      String first=null;\n      if (pr.first != null) {\n        first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n      }\n      String last=null;\n      if (pr.last != null) {\n        last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n      }\n      String prField=configuration.getFieldForPropertyRestriction(pr);\n      CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n      if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n        queryBuilder.append(configuration.getPathField());\n        queryBuilder.append(':');\n        queryBuilder.append(first);\n      }\n else {\n        if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(first);\n        }\n else         if (pr.first == null && pr.last == null) {\n          if (!queryBuilder.toString().contains(fieldName + \":\")) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append('*');\n          }\n        }\n else         if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n        }\n else         if (pr.isLike) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n        }\n else {\n          throw new RuntimeException(\"[unexpected!] not handled case\");\n        }\n      }\n    }\n    queryBuilder.append(\" \");\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 561,
                    "astHeight": 22
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5774,
                        "startLineNumber": 121,
                        "startColumnNumber": 8,
                        "endLineNumber": 214,
                        "endColumnNumber": 9
                    },
                    "nodeContext": "if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n  for (  Filter.PropertyRestriction pr : propertyRestrictions) {\n    if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n      String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n      if (isSupportedHttpRequest(nativeQueryString)) {\n        String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n        if (!\"select\".equals(requestHandlerString)) {\n          if (requestHandlerString.charAt(0) != '/') {\n            requestHandlerString=\"/\" + requestHandlerString;\n          }\n          solrQuery.setRequestHandler(requestHandlerString);\n        }\n        String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n        for (        String param : parameterString.split(\"&\")) {\n          String[] kv=param.split(\"=\");\n          if (kv.length != 2) {\n            throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n          }\n else {\n            if (\"stream.body\".equals(kv[0])) {\n              kv[0]=\"q\";\n              String mltFlString=\"mlt.fl=\";\n              int mltFlIndex=parameterString.indexOf(mltFlString);\n              if (mltFlIndex > -1) {\n                int beginIndex=mltFlIndex + mltFlString.length();\n                int endIndex=parameterString.indexOf('&',beginIndex);\n                String fields;\n                if (endIndex > beginIndex) {\n                  fields=parameterString.substring(beginIndex,endIndex);\n                }\n else {\n                  fields=parameterString.substring(beginIndex);\n                }\n                kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n              }\n            }\n            solrQuery.setParam(kv[0],kv[1]);\n          }\n        }\n        return solrQuery;\n      }\n else {\n        queryBuilder.append(nativeQueryString);\n      }\n    }\n else {\n      if (pr.propertyName.contains(\"/\")) {\n        continue;\n      }\n      if (\"rep:excerpt\".equals(pr.propertyName)) {\n        continue;\n      }\n      String first=null;\n      if (pr.first != null) {\n        first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n      }\n      String last=null;\n      if (pr.last != null) {\n        last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n      }\n      String prField=configuration.getFieldForPropertyRestriction(pr);\n      CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n      if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n        queryBuilder.append(configuration.getPathField());\n        queryBuilder.append(':');\n        queryBuilder.append(first);\n      }\n else {\n        if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(first);\n        }\n else         if (pr.first == null && pr.last == null) {\n          if (!queryBuilder.toString().contains(fieldName + \":\")) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append('*');\n          }\n        }\n else         if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n        }\n else         if (pr.isLike) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n        }\n else {\n          throw new RuntimeException(\"[unexpected!] not handled case\");\n        }\n      }\n    }\n    queryBuilder.append(\" \");\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 570,
                    "astHeight": 23
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.MethodDeclaration,body]",
                    "nodePosition": {
                        "charLength": 7985,
                        "startLineNumber": 103,
                        "startColumnNumber": 46,
                        "endLineNumber": 255,
                        "endColumnNumber": 5
                    },
                    "nodeContext": "{\n  SolrQuery solrQuery=new SolrQuery();\n  setDefaults(solrQuery);\n  StringBuilder queryBuilder=new StringBuilder();\n  if (filter.getFullTextConstraint() != null) {\n    queryBuilder.append(getFullTextQuery(filter.getFullTextConstraint()));\n    queryBuilder.append(' ');\n  }\n else   if (filter.getFulltextConditions() != null) {\n    Collection<String> fulltextConditions=filter.getFulltextConditions();\n    for (    String fulltextCondition : fulltextConditions) {\n      queryBuilder.append(fulltextCondition).append(\" \");\n    }\n  }\n  Collection<Filter.PropertyRestriction> propertyRestrictions=filter.getPropertyRestrictions();\n  if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n    for (    Filter.PropertyRestriction pr : propertyRestrictions) {\n      if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n        String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n        if (isSupportedHttpRequest(nativeQueryString)) {\n          String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n          if (!\"select\".equals(requestHandlerString)) {\n            if (requestHandlerString.charAt(0) != '/') {\n              requestHandlerString=\"/\" + requestHandlerString;\n            }\n            solrQuery.setRequestHandler(requestHandlerString);\n          }\n          String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n          for (          String param : parameterString.split(\"&\")) {\n            String[] kv=param.split(\"=\");\n            if (kv.length != 2) {\n              throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n            }\n else {\n              if (\"stream.body\".equals(kv[0])) {\n                kv[0]=\"q\";\n                String mltFlString=\"mlt.fl=\";\n                int mltFlIndex=parameterString.indexOf(mltFlString);\n                if (mltFlIndex > -1) {\n                  int beginIndex=mltFlIndex + mltFlString.length();\n                  int endIndex=parameterString.indexOf('&',beginIndex);\n                  String fields;\n                  if (endIndex > beginIndex) {\n                    fields=parameterString.substring(beginIndex,endIndex);\n                  }\n else {\n                    fields=parameterString.substring(beginIndex);\n                  }\n                  kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n                }\n              }\n              solrQuery.setParam(kv[0],kv[1]);\n            }\n          }\n          return solrQuery;\n        }\n else {\n          queryBuilder.append(nativeQueryString);\n        }\n      }\n else {\n        if (pr.propertyName.contains(\"/\")) {\n          continue;\n        }\n        if (\"rep:excerpt\".equals(pr.propertyName)) {\n          continue;\n        }\n        String first=null;\n        if (pr.first != null) {\n          first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n        }\n        String last=null;\n        if (pr.last != null) {\n          last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n        }\n        String prField=configuration.getFieldForPropertyRestriction(pr);\n        CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n        if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n          queryBuilder.append(configuration.getPathField());\n          queryBuilder.append(':');\n          queryBuilder.append(first);\n        }\n else {\n          if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(first);\n          }\n else           if (pr.first == null && pr.last == null) {\n            if (!queryBuilder.toString().contains(fieldName + \":\")) {\n              queryBuilder.append(fieldName).append(':');\n              queryBuilder.append('*');\n            }\n          }\n else           if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n          }\n else           if (pr.isLike) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n          }\n else {\n            throw new RuntimeException(\"[unexpected!] not handled case\");\n          }\n        }\n      }\n      queryBuilder.append(\" \");\n    }\n  }\n  String[] pts=filter.getPrimaryTypes().toArray(new String[filter.getPrimaryTypes().size()]);\n  for (int i=0; i < pts.length; i++) {\n    String pt=pts[i];\n    if (i == 0) {\n      queryBuilder.append(\"(\");\n    }\n    if (i > 0 && i < pts.length) {\n      queryBuilder.append(\"OR \");\n    }\n    queryBuilder.append(\"jcr\\\\:primaryType\").append(':').append(partialEscape(pt)).append(\" \");\n    if (i == pts.length - 1) {\n      queryBuilder.append(\")\");\n      queryBuilder.append(' ');\n    }\n  }\n  Filter.PathRestriction pathRestriction=filter.getPathRestriction();\n  if (pathRestriction != null) {\n    String path=purgePath(filter);\n    String fieldName=configuration.getFieldForPathRestriction(pathRestriction);\n    if (fieldName != null) {\n      queryBuilder.append(fieldName);\n      queryBuilder.append(':');\n      queryBuilder.append(path);\n    }\n  }\n  if (queryBuilder.length() == 0) {\n    queryBuilder.append(\"*:*\");\n  }\n  String escapedQuery=queryBuilder.toString();\n  solrQuery.setQuery(escapedQuery);\n  if (log.isDebugEnabled()) {\n    log.debug(\"JCR query {} has been converted to Solr query {}\",filter.getQueryStatement(),solrQuery.toString());\n  }\n  return solrQuery;\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 858,
                    "astHeight": 24
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.TypeDeclaration,bodyDeclarations]",
                    "nodePosition": {
                        "charLength": 8027,
                        "startLineNumber": 103,
                        "startColumnNumber": 4,
                        "endLineNumber": 255,
                        "endColumnNumber": 5
                    },
                    "nodeContext": "private SolrQuery getQuery(Filter filter){\n  SolrQuery solrQuery=new SolrQuery();\n  setDefaults(solrQuery);\n  StringBuilder queryBuilder=new StringBuilder();\n  if (filter.getFullTextConstraint() != null) {\n    queryBuilder.append(getFullTextQuery(filter.getFullTextConstraint()));\n    queryBuilder.append(' ');\n  }\n else   if (filter.getFulltextConditions() != null) {\n    Collection<String> fulltextConditions=filter.getFulltextConditions();\n    for (    String fulltextCondition : fulltextConditions) {\n      queryBuilder.append(fulltextCondition).append(\" \");\n    }\n  }\n  Collection<Filter.PropertyRestriction> propertyRestrictions=filter.getPropertyRestrictions();\n  if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n    for (    Filter.PropertyRestriction pr : propertyRestrictions) {\n      if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n        String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n        if (isSupportedHttpRequest(nativeQueryString)) {\n          String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n          if (!\"select\".equals(requestHandlerString)) {\n            if (requestHandlerString.charAt(0) != '/') {\n              requestHandlerString=\"/\" + requestHandlerString;\n            }\n            solrQuery.setRequestHandler(requestHandlerString);\n          }\n          String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n          for (          String param : parameterString.split(\"&\")) {\n            String[] kv=param.split(\"=\");\n            if (kv.length != 2) {\n              throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n            }\n else {\n              if (\"stream.body\".equals(kv[0])) {\n                kv[0]=\"q\";\n                String mltFlString=\"mlt.fl=\";\n                int mltFlIndex=parameterString.indexOf(mltFlString);\n                if (mltFlIndex > -1) {\n                  int beginIndex=mltFlIndex + mltFlString.length();\n                  int endIndex=parameterString.indexOf('&',beginIndex);\n                  String fields;\n                  if (endIndex > beginIndex) {\n                    fields=parameterString.substring(beginIndex,endIndex);\n                  }\n else {\n                    fields=parameterString.substring(beginIndex);\n                  }\n                  kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n                }\n              }\n              solrQuery.setParam(kv[0],kv[1]);\n            }\n          }\n          return solrQuery;\n        }\n else {\n          queryBuilder.append(nativeQueryString);\n        }\n      }\n else {\n        if (pr.propertyName.contains(\"/\")) {\n          continue;\n        }\n        if (\"rep:excerpt\".equals(pr.propertyName)) {\n          continue;\n        }\n        String first=null;\n        if (pr.first != null) {\n          first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n        }\n        String last=null;\n        if (pr.last != null) {\n          last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n        }\n        String prField=configuration.getFieldForPropertyRestriction(pr);\n        CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n        if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n          queryBuilder.append(configuration.getPathField());\n          queryBuilder.append(':');\n          queryBuilder.append(first);\n        }\n else {\n          if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(first);\n          }\n else           if (pr.first == null && pr.last == null) {\n            if (!queryBuilder.toString().contains(fieldName + \":\")) {\n              queryBuilder.append(fieldName).append(':');\n              queryBuilder.append('*');\n            }\n          }\n else           if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n          }\n else           if (pr.isLike) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n          }\n else {\n            throw new RuntimeException(\"[unexpected!] not handled case\");\n          }\n        }\n      }\n      queryBuilder.append(\" \");\n    }\n  }\n  String[] pts=filter.getPrimaryTypes().toArray(new String[filter.getPrimaryTypes().size()]);\n  for (int i=0; i < pts.length; i++) {\n    String pt=pts[i];\n    if (i == 0) {\n      queryBuilder.append(\"(\");\n    }\n    if (i > 0 && i < pts.length) {\n      queryBuilder.append(\"OR \");\n    }\n    queryBuilder.append(\"jcr\\\\:primaryType\").append(':').append(partialEscape(pt)).append(\" \");\n    if (i == pts.length - 1) {\n      queryBuilder.append(\")\");\n      queryBuilder.append(' ');\n    }\n  }\n  Filter.PathRestriction pathRestriction=filter.getPathRestriction();\n  if (pathRestriction != null) {\n    String path=purgePath(filter);\n    String fieldName=configuration.getFieldForPathRestriction(pathRestriction);\n    if (fieldName != null) {\n      queryBuilder.append(fieldName);\n      queryBuilder.append(':');\n      queryBuilder.append(path);\n    }\n  }\n  if (queryBuilder.length() == 0) {\n    queryBuilder.append(\"*:*\");\n  }\n  String escapedQuery=queryBuilder.toString();\n  solrQuery.setQuery(escapedQuery);\n  if (log.isDebugEnabled()) {\n    log.debug(\"JCR query {} has been converted to Solr query {}\",filter.getQueryStatement(),solrQuery.toString());\n  }\n  return solrQuery;\n}\n",
                    "nodeType": "MethodDeclaration",
                    "astNodeNumber": 867,
                    "astHeight": 25
                }
            ],
            "currentLineData": {
                "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,expression]",
                "nodePosition": {
                    "charLength": 63,
                    "startLineNumber": 191,
                    "startColumnNumber": 28,
                    "endLineNumber": 191,
                    "endColumnNumber": 91
                },
                "nodeContext": "pr.first != null && pr.last != null && pr.first.equals(pr.last)",
                "nodeType": "InfixExpression",
                "astNodeNumber": 20,
                "astHeight": 5
            },
            "tokenLength": 1,
            "type": "org.apache.jackrabbit.oak.spi.query.Filter.PropertyRestriction"
        },
        {
            "nodeContext": "pr",
            "nodeType": "SimpleName",
            "nodePosition": {
                "charLength": 2,
                "startLineNumber": 191,
                "startColumnNumber": 67,
                "endLineNumber": 191,
                "endColumnNumber": 69
            },
            "astNodeNumber": 1,
            "astHeight": 1,
            "parentDataList": [
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.MethodInvocation,expression]",
                    "nodePosition": {
                        "charLength": 8,
                        "startLineNumber": 191,
                        "startColumnNumber": 67,
                        "endLineNumber": 191,
                        "endColumnNumber": 75
                    },
                    "nodeContext": "pr.first",
                    "nodeType": "QualifiedName",
                    "astNodeNumber": 3,
                    "astHeight": 2
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.InfixExpression,rightOperand]",
                    "nodePosition": {
                        "charLength": 24,
                        "startLineNumber": 191,
                        "startColumnNumber": 67,
                        "endLineNumber": 191,
                        "endColumnNumber": 91
                    },
                    "nodeContext": "pr.first.equals(pr.last)",
                    "nodeType": "MethodInvocation",
                    "astNodeNumber": 8,
                    "astHeight": 3
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,expression]",
                    "nodePosition": {
                        "charLength": 63,
                        "startLineNumber": 191,
                        "startColumnNumber": 28,
                        "endLineNumber": 191,
                        "endColumnNumber": 91
                    },
                    "nodeContext": "pr.first != null && pr.last != null && pr.first.equals(pr.last)",
                    "nodeType": "InfixExpression",
                    "astNodeNumber": 20,
                    "astHeight": 5
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 1490,
                        "startLineNumber": 191,
                        "startColumnNumber": 24,
                        "endLineNumber": 209,
                        "endColumnNumber": 25
                    },
                    "nodeContext": "if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(first);\n}\n else if (pr.first == null && pr.last == null) {\n  if (!queryBuilder.toString().contains(fieldName + \":\")) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append('*');\n  }\n}\n else if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n}\n else if (pr.isLike) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n}\n else {\n  throw new RuntimeException(\"[unexpected!] not handled case\");\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 177,
                    "astHeight": 15
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 1538,
                        "startLineNumber": 190,
                        "startColumnNumber": 27,
                        "endLineNumber": 210,
                        "endColumnNumber": 21
                    },
                    "nodeContext": "{\n  if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(first);\n  }\n else   if (pr.first == null && pr.last == null) {\n    if (!queryBuilder.toString().contains(fieldName + \":\")) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append('*');\n    }\n  }\n else   if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n  }\n else   if (pr.isLike) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n  }\n else {\n    throw new RuntimeException(\"[unexpected!] not handled case\");\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 178,
                    "astHeight": 16
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 1791,
                        "startLineNumber": 186,
                        "startColumnNumber": 20,
                        "endLineNumber": 210,
                        "endColumnNumber": 21
                    },
                    "nodeContext": "if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n  queryBuilder.append(configuration.getPathField());\n  queryBuilder.append(':');\n  queryBuilder.append(first);\n}\n else {\n  if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(first);\n  }\n else   if (pr.first == null && pr.last == null) {\n    if (!queryBuilder.toString().contains(fieldName + \":\")) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append('*');\n    }\n  }\n else   if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n  }\n else   if (pr.isLike) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n  }\n else {\n    throw new RuntimeException(\"[unexpected!] not handled case\");\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 203,
                    "astHeight": 17
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 2798,
                        "startLineNumber": 164,
                        "startColumnNumber": 23,
                        "endLineNumber": 211,
                        "endColumnNumber": 17
                    },
                    "nodeContext": "{\n  if (pr.propertyName.contains(\"/\")) {\n    continue;\n  }\n  if (\"rep:excerpt\".equals(pr.propertyName)) {\n    continue;\n  }\n  String first=null;\n  if (pr.first != null) {\n    first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n  }\n  String last=null;\n  if (pr.last != null) {\n    last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n  }\n  String prField=configuration.getFieldForPropertyRestriction(pr);\n  CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n  if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n    queryBuilder.append(configuration.getPathField());\n    queryBuilder.append(':');\n    queryBuilder.append(first);\n  }\n else {\n    if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(first);\n    }\n else     if (pr.first == null && pr.last == null) {\n      if (!queryBuilder.toString().contains(fieldName + \":\")) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append('*');\n      }\n    }\n else     if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n    }\n else     if (pr.isLike) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n    }\n else {\n      throw new RuntimeException(\"[unexpected!] not handled case\");\n    }\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 312,
                    "astHeight": 18
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5508,
                        "startLineNumber": 124,
                        "startColumnNumber": 16,
                        "endLineNumber": 211,
                        "endColumnNumber": 17
                    },
                    "nodeContext": "if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n  String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n  if (isSupportedHttpRequest(nativeQueryString)) {\n    String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n    if (!\"select\".equals(requestHandlerString)) {\n      if (requestHandlerString.charAt(0) != '/') {\n        requestHandlerString=\"/\" + requestHandlerString;\n      }\n      solrQuery.setRequestHandler(requestHandlerString);\n    }\n    String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n    for (    String param : parameterString.split(\"&\")) {\n      String[] kv=param.split(\"=\");\n      if (kv.length != 2) {\n        throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n      }\n else {\n        if (\"stream.body\".equals(kv[0])) {\n          kv[0]=\"q\";\n          String mltFlString=\"mlt.fl=\";\n          int mltFlIndex=parameterString.indexOf(mltFlString);\n          if (mltFlIndex > -1) {\n            int beginIndex=mltFlIndex + mltFlString.length();\n            int endIndex=parameterString.indexOf('&',beginIndex);\n            String fields;\n            if (endIndex > beginIndex) {\n              fields=parameterString.substring(beginIndex,endIndex);\n            }\n else {\n              fields=parameterString.substring(beginIndex);\n            }\n            kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n          }\n        }\n        solrQuery.setParam(kv[0],kv[1]);\n      }\n    }\n    return solrQuery;\n  }\n else {\n    queryBuilder.append(nativeQueryString);\n  }\n}\n else {\n  if (pr.propertyName.contains(\"/\")) {\n    continue;\n  }\n  if (\"rep:excerpt\".equals(pr.propertyName)) {\n    continue;\n  }\n  String first=null;\n  if (pr.first != null) {\n    first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n  }\n  String last=null;\n  if (pr.last != null) {\n    last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n  }\n  String prField=configuration.getFieldForPropertyRestriction(pr);\n  CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n  if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n    queryBuilder.append(configuration.getPathField());\n    queryBuilder.append(':');\n    queryBuilder.append(first);\n  }\n else {\n    if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(first);\n    }\n else     if (pr.first == null && pr.last == null) {\n      if (!queryBuilder.toString().contains(fieldName + \":\")) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append('*');\n      }\n    }\n else     if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n    }\n else     if (pr.isLike) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n    }\n else {\n      throw new RuntimeException(\"[unexpected!] not handled case\");\n    }\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 546,
                    "astHeight": 19
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.EnhancedForStatement,body]",
                    "nodePosition": {
                        "charLength": 5622,
                        "startLineNumber": 122,
                        "startColumnNumber": 71,
                        "endLineNumber": 213,
                        "endColumnNumber": 13
                    },
                    "nodeContext": "{\n  if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n    String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n    if (isSupportedHttpRequest(nativeQueryString)) {\n      String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n      if (!\"select\".equals(requestHandlerString)) {\n        if (requestHandlerString.charAt(0) != '/') {\n          requestHandlerString=\"/\" + requestHandlerString;\n        }\n        solrQuery.setRequestHandler(requestHandlerString);\n      }\n      String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n      for (      String param : parameterString.split(\"&\")) {\n        String[] kv=param.split(\"=\");\n        if (kv.length != 2) {\n          throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n        }\n else {\n          if (\"stream.body\".equals(kv[0])) {\n            kv[0]=\"q\";\n            String mltFlString=\"mlt.fl=\";\n            int mltFlIndex=parameterString.indexOf(mltFlString);\n            if (mltFlIndex > -1) {\n              int beginIndex=mltFlIndex + mltFlString.length();\n              int endIndex=parameterString.indexOf('&',beginIndex);\n              String fields;\n              if (endIndex > beginIndex) {\n                fields=parameterString.substring(beginIndex,endIndex);\n              }\n else {\n                fields=parameterString.substring(beginIndex);\n              }\n              kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n            }\n          }\n          solrQuery.setParam(kv[0],kv[1]);\n        }\n      }\n      return solrQuery;\n    }\n else {\n      queryBuilder.append(nativeQueryString);\n    }\n  }\n else {\n    if (pr.propertyName.contains(\"/\")) {\n      continue;\n    }\n    if (\"rep:excerpt\".equals(pr.propertyName)) {\n      continue;\n    }\n    String first=null;\n    if (pr.first != null) {\n      first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n    }\n    String last=null;\n    if (pr.last != null) {\n      last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n    }\n    String prField=configuration.getFieldForPropertyRestriction(pr);\n    CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n    if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n      queryBuilder.append(configuration.getPathField());\n      queryBuilder.append(':');\n      queryBuilder.append(first);\n    }\n else {\n      if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(first);\n      }\n else       if (pr.first == null && pr.last == null) {\n        if (!queryBuilder.toString().contains(fieldName + \":\")) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append('*');\n        }\n      }\n else       if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n      }\n else       if (pr.isLike) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n      }\n else {\n        throw new RuntimeException(\"[unexpected!] not handled case\");\n      }\n    }\n  }\n  queryBuilder.append(\" \");\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 552,
                    "astHeight": 20
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5681,
                        "startLineNumber": 122,
                        "startColumnNumber": 12,
                        "endLineNumber": 213,
                        "endColumnNumber": 13
                    },
                    "nodeContext": "for (Filter.PropertyRestriction pr : propertyRestrictions) {\n  if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n    String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n    if (isSupportedHttpRequest(nativeQueryString)) {\n      String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n      if (!\"select\".equals(requestHandlerString)) {\n        if (requestHandlerString.charAt(0) != '/') {\n          requestHandlerString=\"/\" + requestHandlerString;\n        }\n        solrQuery.setRequestHandler(requestHandlerString);\n      }\n      String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n      for (      String param : parameterString.split(\"&\")) {\n        String[] kv=param.split(\"=\");\n        if (kv.length != 2) {\n          throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n        }\n else {\n          if (\"stream.body\".equals(kv[0])) {\n            kv[0]=\"q\";\n            String mltFlString=\"mlt.fl=\";\n            int mltFlIndex=parameterString.indexOf(mltFlString);\n            if (mltFlIndex > -1) {\n              int beginIndex=mltFlIndex + mltFlString.length();\n              int endIndex=parameterString.indexOf('&',beginIndex);\n              String fields;\n              if (endIndex > beginIndex) {\n                fields=parameterString.substring(beginIndex,endIndex);\n              }\n else {\n                fields=parameterString.substring(beginIndex);\n              }\n              kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n            }\n          }\n          solrQuery.setParam(kv[0],kv[1]);\n        }\n      }\n      return solrQuery;\n    }\n else {\n      queryBuilder.append(nativeQueryString);\n    }\n  }\n else {\n    if (pr.propertyName.contains(\"/\")) {\n      continue;\n    }\n    if (\"rep:excerpt\".equals(pr.propertyName)) {\n      continue;\n    }\n    String first=null;\n    if (pr.first != null) {\n      first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n    }\n    String last=null;\n    if (pr.last != null) {\n      last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n    }\n    String prField=configuration.getFieldForPropertyRestriction(pr);\n    CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n    if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n      queryBuilder.append(configuration.getPathField());\n      queryBuilder.append(':');\n      queryBuilder.append(first);\n    }\n else {\n      if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(first);\n      }\n else       if (pr.first == null && pr.last == null) {\n        if (!queryBuilder.toString().contains(fieldName + \":\")) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append('*');\n        }\n      }\n else       if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n      }\n else       if (pr.isLike) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n      }\n else {\n        throw new RuntimeException(\"[unexpected!] not handled case\");\n      }\n    }\n  }\n  queryBuilder.append(\" \");\n}\n",
                    "nodeType": "EnhancedForStatement",
                    "astNodeNumber": 560,
                    "astHeight": 21
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,thenStatement]",
                    "nodePosition": {
                        "charLength": 5705,
                        "startLineNumber": 121,
                        "startColumnNumber": 77,
                        "endLineNumber": 214,
                        "endColumnNumber": 9
                    },
                    "nodeContext": "{\n  for (  Filter.PropertyRestriction pr : propertyRestrictions) {\n    if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n      String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n      if (isSupportedHttpRequest(nativeQueryString)) {\n        String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n        if (!\"select\".equals(requestHandlerString)) {\n          if (requestHandlerString.charAt(0) != '/') {\n            requestHandlerString=\"/\" + requestHandlerString;\n          }\n          solrQuery.setRequestHandler(requestHandlerString);\n        }\n        String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n        for (        String param : parameterString.split(\"&\")) {\n          String[] kv=param.split(\"=\");\n          if (kv.length != 2) {\n            throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n          }\n else {\n            if (\"stream.body\".equals(kv[0])) {\n              kv[0]=\"q\";\n              String mltFlString=\"mlt.fl=\";\n              int mltFlIndex=parameterString.indexOf(mltFlString);\n              if (mltFlIndex > -1) {\n                int beginIndex=mltFlIndex + mltFlString.length();\n                int endIndex=parameterString.indexOf('&',beginIndex);\n                String fields;\n                if (endIndex > beginIndex) {\n                  fields=parameterString.substring(beginIndex,endIndex);\n                }\n else {\n                  fields=parameterString.substring(beginIndex);\n                }\n                kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n              }\n            }\n            solrQuery.setParam(kv[0],kv[1]);\n          }\n        }\n        return solrQuery;\n      }\n else {\n        queryBuilder.append(nativeQueryString);\n      }\n    }\n else {\n      if (pr.propertyName.contains(\"/\")) {\n        continue;\n      }\n      if (\"rep:excerpt\".equals(pr.propertyName)) {\n        continue;\n      }\n      String first=null;\n      if (pr.first != null) {\n        first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n      }\n      String last=null;\n      if (pr.last != null) {\n        last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n      }\n      String prField=configuration.getFieldForPropertyRestriction(pr);\n      CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n      if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n        queryBuilder.append(configuration.getPathField());\n        queryBuilder.append(':');\n        queryBuilder.append(first);\n      }\n else {\n        if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(first);\n        }\n else         if (pr.first == null && pr.last == null) {\n          if (!queryBuilder.toString().contains(fieldName + \":\")) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append('*');\n          }\n        }\n else         if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n        }\n else         if (pr.isLike) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n        }\n else {\n          throw new RuntimeException(\"[unexpected!] not handled case\");\n        }\n      }\n    }\n    queryBuilder.append(\" \");\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 561,
                    "astHeight": 22
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5774,
                        "startLineNumber": 121,
                        "startColumnNumber": 8,
                        "endLineNumber": 214,
                        "endColumnNumber": 9
                    },
                    "nodeContext": "if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n  for (  Filter.PropertyRestriction pr : propertyRestrictions) {\n    if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n      String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n      if (isSupportedHttpRequest(nativeQueryString)) {\n        String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n        if (!\"select\".equals(requestHandlerString)) {\n          if (requestHandlerString.charAt(0) != '/') {\n            requestHandlerString=\"/\" + requestHandlerString;\n          }\n          solrQuery.setRequestHandler(requestHandlerString);\n        }\n        String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n        for (        String param : parameterString.split(\"&\")) {\n          String[] kv=param.split(\"=\");\n          if (kv.length != 2) {\n            throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n          }\n else {\n            if (\"stream.body\".equals(kv[0])) {\n              kv[0]=\"q\";\n              String mltFlString=\"mlt.fl=\";\n              int mltFlIndex=parameterString.indexOf(mltFlString);\n              if (mltFlIndex > -1) {\n                int beginIndex=mltFlIndex + mltFlString.length();\n                int endIndex=parameterString.indexOf('&',beginIndex);\n                String fields;\n                if (endIndex > beginIndex) {\n                  fields=parameterString.substring(beginIndex,endIndex);\n                }\n else {\n                  fields=parameterString.substring(beginIndex);\n                }\n                kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n              }\n            }\n            solrQuery.setParam(kv[0],kv[1]);\n          }\n        }\n        return solrQuery;\n      }\n else {\n        queryBuilder.append(nativeQueryString);\n      }\n    }\n else {\n      if (pr.propertyName.contains(\"/\")) {\n        continue;\n      }\n      if (\"rep:excerpt\".equals(pr.propertyName)) {\n        continue;\n      }\n      String first=null;\n      if (pr.first != null) {\n        first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n      }\n      String last=null;\n      if (pr.last != null) {\n        last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n      }\n      String prField=configuration.getFieldForPropertyRestriction(pr);\n      CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n      if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n        queryBuilder.append(configuration.getPathField());\n        queryBuilder.append(':');\n        queryBuilder.append(first);\n      }\n else {\n        if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(first);\n        }\n else         if (pr.first == null && pr.last == null) {\n          if (!queryBuilder.toString().contains(fieldName + \":\")) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append('*');\n          }\n        }\n else         if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n        }\n else         if (pr.isLike) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n        }\n else {\n          throw new RuntimeException(\"[unexpected!] not handled case\");\n        }\n      }\n    }\n    queryBuilder.append(\" \");\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 570,
                    "astHeight": 23
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.MethodDeclaration,body]",
                    "nodePosition": {
                        "charLength": 7985,
                        "startLineNumber": 103,
                        "startColumnNumber": 46,
                        "endLineNumber": 255,
                        "endColumnNumber": 5
                    },
                    "nodeContext": "{\n  SolrQuery solrQuery=new SolrQuery();\n  setDefaults(solrQuery);\n  StringBuilder queryBuilder=new StringBuilder();\n  if (filter.getFullTextConstraint() != null) {\n    queryBuilder.append(getFullTextQuery(filter.getFullTextConstraint()));\n    queryBuilder.append(' ');\n  }\n else   if (filter.getFulltextConditions() != null) {\n    Collection<String> fulltextConditions=filter.getFulltextConditions();\n    for (    String fulltextCondition : fulltextConditions) {\n      queryBuilder.append(fulltextCondition).append(\" \");\n    }\n  }\n  Collection<Filter.PropertyRestriction> propertyRestrictions=filter.getPropertyRestrictions();\n  if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n    for (    Filter.PropertyRestriction pr : propertyRestrictions) {\n      if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n        String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n        if (isSupportedHttpRequest(nativeQueryString)) {\n          String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n          if (!\"select\".equals(requestHandlerString)) {\n            if (requestHandlerString.charAt(0) != '/') {\n              requestHandlerString=\"/\" + requestHandlerString;\n            }\n            solrQuery.setRequestHandler(requestHandlerString);\n          }\n          String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n          for (          String param : parameterString.split(\"&\")) {\n            String[] kv=param.split(\"=\");\n            if (kv.length != 2) {\n              throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n            }\n else {\n              if (\"stream.body\".equals(kv[0])) {\n                kv[0]=\"q\";\n                String mltFlString=\"mlt.fl=\";\n                int mltFlIndex=parameterString.indexOf(mltFlString);\n                if (mltFlIndex > -1) {\n                  int beginIndex=mltFlIndex + mltFlString.length();\n                  int endIndex=parameterString.indexOf('&',beginIndex);\n                  String fields;\n                  if (endIndex > beginIndex) {\n                    fields=parameterString.substring(beginIndex,endIndex);\n                  }\n else {\n                    fields=parameterString.substring(beginIndex);\n                  }\n                  kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n                }\n              }\n              solrQuery.setParam(kv[0],kv[1]);\n            }\n          }\n          return solrQuery;\n        }\n else {\n          queryBuilder.append(nativeQueryString);\n        }\n      }\n else {\n        if (pr.propertyName.contains(\"/\")) {\n          continue;\n        }\n        if (\"rep:excerpt\".equals(pr.propertyName)) {\n          continue;\n        }\n        String first=null;\n        if (pr.first != null) {\n          first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n        }\n        String last=null;\n        if (pr.last != null) {\n          last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n        }\n        String prField=configuration.getFieldForPropertyRestriction(pr);\n        CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n        if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n          queryBuilder.append(configuration.getPathField());\n          queryBuilder.append(':');\n          queryBuilder.append(first);\n        }\n else {\n          if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(first);\n          }\n else           if (pr.first == null && pr.last == null) {\n            if (!queryBuilder.toString().contains(fieldName + \":\")) {\n              queryBuilder.append(fieldName).append(':');\n              queryBuilder.append('*');\n            }\n          }\n else           if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n          }\n else           if (pr.isLike) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n          }\n else {\n            throw new RuntimeException(\"[unexpected!] not handled case\");\n          }\n        }\n      }\n      queryBuilder.append(\" \");\n    }\n  }\n  String[] pts=filter.getPrimaryTypes().toArray(new String[filter.getPrimaryTypes().size()]);\n  for (int i=0; i < pts.length; i++) {\n    String pt=pts[i];\n    if (i == 0) {\n      queryBuilder.append(\"(\");\n    }\n    if (i > 0 && i < pts.length) {\n      queryBuilder.append(\"OR \");\n    }\n    queryBuilder.append(\"jcr\\\\:primaryType\").append(':').append(partialEscape(pt)).append(\" \");\n    if (i == pts.length - 1) {\n      queryBuilder.append(\")\");\n      queryBuilder.append(' ');\n    }\n  }\n  Filter.PathRestriction pathRestriction=filter.getPathRestriction();\n  if (pathRestriction != null) {\n    String path=purgePath(filter);\n    String fieldName=configuration.getFieldForPathRestriction(pathRestriction);\n    if (fieldName != null) {\n      queryBuilder.append(fieldName);\n      queryBuilder.append(':');\n      queryBuilder.append(path);\n    }\n  }\n  if (queryBuilder.length() == 0) {\n    queryBuilder.append(\"*:*\");\n  }\n  String escapedQuery=queryBuilder.toString();\n  solrQuery.setQuery(escapedQuery);\n  if (log.isDebugEnabled()) {\n    log.debug(\"JCR query {} has been converted to Solr query {}\",filter.getQueryStatement(),solrQuery.toString());\n  }\n  return solrQuery;\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 858,
                    "astHeight": 24
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.TypeDeclaration,bodyDeclarations]",
                    "nodePosition": {
                        "charLength": 8027,
                        "startLineNumber": 103,
                        "startColumnNumber": 4,
                        "endLineNumber": 255,
                        "endColumnNumber": 5
                    },
                    "nodeContext": "private SolrQuery getQuery(Filter filter){\n  SolrQuery solrQuery=new SolrQuery();\n  setDefaults(solrQuery);\n  StringBuilder queryBuilder=new StringBuilder();\n  if (filter.getFullTextConstraint() != null) {\n    queryBuilder.append(getFullTextQuery(filter.getFullTextConstraint()));\n    queryBuilder.append(' ');\n  }\n else   if (filter.getFulltextConditions() != null) {\n    Collection<String> fulltextConditions=filter.getFulltextConditions();\n    for (    String fulltextCondition : fulltextConditions) {\n      queryBuilder.append(fulltextCondition).append(\" \");\n    }\n  }\n  Collection<Filter.PropertyRestriction> propertyRestrictions=filter.getPropertyRestrictions();\n  if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n    for (    Filter.PropertyRestriction pr : propertyRestrictions) {\n      if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n        String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n        if (isSupportedHttpRequest(nativeQueryString)) {\n          String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n          if (!\"select\".equals(requestHandlerString)) {\n            if (requestHandlerString.charAt(0) != '/') {\n              requestHandlerString=\"/\" + requestHandlerString;\n            }\n            solrQuery.setRequestHandler(requestHandlerString);\n          }\n          String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n          for (          String param : parameterString.split(\"&\")) {\n            String[] kv=param.split(\"=\");\n            if (kv.length != 2) {\n              throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n            }\n else {\n              if (\"stream.body\".equals(kv[0])) {\n                kv[0]=\"q\";\n                String mltFlString=\"mlt.fl=\";\n                int mltFlIndex=parameterString.indexOf(mltFlString);\n                if (mltFlIndex > -1) {\n                  int beginIndex=mltFlIndex + mltFlString.length();\n                  int endIndex=parameterString.indexOf('&',beginIndex);\n                  String fields;\n                  if (endIndex > beginIndex) {\n                    fields=parameterString.substring(beginIndex,endIndex);\n                  }\n else {\n                    fields=parameterString.substring(beginIndex);\n                  }\n                  kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n                }\n              }\n              solrQuery.setParam(kv[0],kv[1]);\n            }\n          }\n          return solrQuery;\n        }\n else {\n          queryBuilder.append(nativeQueryString);\n        }\n      }\n else {\n        if (pr.propertyName.contains(\"/\")) {\n          continue;\n        }\n        if (\"rep:excerpt\".equals(pr.propertyName)) {\n          continue;\n        }\n        String first=null;\n        if (pr.first != null) {\n          first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n        }\n        String last=null;\n        if (pr.last != null) {\n          last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n        }\n        String prField=configuration.getFieldForPropertyRestriction(pr);\n        CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n        if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n          queryBuilder.append(configuration.getPathField());\n          queryBuilder.append(':');\n          queryBuilder.append(first);\n        }\n else {\n          if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(first);\n          }\n else           if (pr.first == null && pr.last == null) {\n            if (!queryBuilder.toString().contains(fieldName + \":\")) {\n              queryBuilder.append(fieldName).append(':');\n              queryBuilder.append('*');\n            }\n          }\n else           if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n          }\n else           if (pr.isLike) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n          }\n else {\n            throw new RuntimeException(\"[unexpected!] not handled case\");\n          }\n        }\n      }\n      queryBuilder.append(\" \");\n    }\n  }\n  String[] pts=filter.getPrimaryTypes().toArray(new String[filter.getPrimaryTypes().size()]);\n  for (int i=0; i < pts.length; i++) {\n    String pt=pts[i];\n    if (i == 0) {\n      queryBuilder.append(\"(\");\n    }\n    if (i > 0 && i < pts.length) {\n      queryBuilder.append(\"OR \");\n    }\n    queryBuilder.append(\"jcr\\\\:primaryType\").append(':').append(partialEscape(pt)).append(\" \");\n    if (i == pts.length - 1) {\n      queryBuilder.append(\")\");\n      queryBuilder.append(' ');\n    }\n  }\n  Filter.PathRestriction pathRestriction=filter.getPathRestriction();\n  if (pathRestriction != null) {\n    String path=purgePath(filter);\n    String fieldName=configuration.getFieldForPathRestriction(pathRestriction);\n    if (fieldName != null) {\n      queryBuilder.append(fieldName);\n      queryBuilder.append(':');\n      queryBuilder.append(path);\n    }\n  }\n  if (queryBuilder.length() == 0) {\n    queryBuilder.append(\"*:*\");\n  }\n  String escapedQuery=queryBuilder.toString();\n  solrQuery.setQuery(escapedQuery);\n  if (log.isDebugEnabled()) {\n    log.debug(\"JCR query {} has been converted to Solr query {}\",filter.getQueryStatement(),solrQuery.toString());\n  }\n  return solrQuery;\n}\n",
                    "nodeType": "MethodDeclaration",
                    "astNodeNumber": 867,
                    "astHeight": 25
                }
            ],
            "currentLineData": {
                "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,expression]",
                "nodePosition": {
                    "charLength": 63,
                    "startLineNumber": 191,
                    "startColumnNumber": 28,
                    "endLineNumber": 191,
                    "endColumnNumber": 91
                },
                "nodeContext": "pr.first != null && pr.last != null && pr.first.equals(pr.last)",
                "nodeType": "InfixExpression",
                "astNodeNumber": 20,
                "astHeight": 5
            },
            "tokenLength": 1,
            "type": "org.apache.jackrabbit.oak.spi.query.Filter.PropertyRestriction"
        },
        {
            "nodeContext": "pr",
            "nodeType": "SimpleName",
            "nodePosition": {
                "charLength": 2,
                "startLineNumber": 191,
                "startColumnNumber": 83,
                "endLineNumber": 191,
                "endColumnNumber": 85
            },
            "astNodeNumber": 1,
            "astHeight": 1,
            "parentDataList": [
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.MethodInvocation,arguments]",
                    "nodePosition": {
                        "charLength": 7,
                        "startLineNumber": 191,
                        "startColumnNumber": 83,
                        "endLineNumber": 191,
                        "endColumnNumber": 90
                    },
                    "nodeContext": "pr.last",
                    "nodeType": "QualifiedName",
                    "astNodeNumber": 3,
                    "astHeight": 2
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.InfixExpression,rightOperand]",
                    "nodePosition": {
                        "charLength": 24,
                        "startLineNumber": 191,
                        "startColumnNumber": 67,
                        "endLineNumber": 191,
                        "endColumnNumber": 91
                    },
                    "nodeContext": "pr.first.equals(pr.last)",
                    "nodeType": "MethodInvocation",
                    "astNodeNumber": 8,
                    "astHeight": 3
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,expression]",
                    "nodePosition": {
                        "charLength": 63,
                        "startLineNumber": 191,
                        "startColumnNumber": 28,
                        "endLineNumber": 191,
                        "endColumnNumber": 91
                    },
                    "nodeContext": "pr.first != null && pr.last != null && pr.first.equals(pr.last)",
                    "nodeType": "InfixExpression",
                    "astNodeNumber": 20,
                    "astHeight": 5
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 1490,
                        "startLineNumber": 191,
                        "startColumnNumber": 24,
                        "endLineNumber": 209,
                        "endColumnNumber": 25
                    },
                    "nodeContext": "if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(first);\n}\n else if (pr.first == null && pr.last == null) {\n  if (!queryBuilder.toString().contains(fieldName + \":\")) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append('*');\n  }\n}\n else if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n}\n else if (pr.isLike) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n}\n else {\n  throw new RuntimeException(\"[unexpected!] not handled case\");\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 177,
                    "astHeight": 15
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 1538,
                        "startLineNumber": 190,
                        "startColumnNumber": 27,
                        "endLineNumber": 210,
                        "endColumnNumber": 21
                    },
                    "nodeContext": "{\n  if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(first);\n  }\n else   if (pr.first == null && pr.last == null) {\n    if (!queryBuilder.toString().contains(fieldName + \":\")) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append('*');\n    }\n  }\n else   if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n  }\n else   if (pr.isLike) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n  }\n else {\n    throw new RuntimeException(\"[unexpected!] not handled case\");\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 178,
                    "astHeight": 16
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 1791,
                        "startLineNumber": 186,
                        "startColumnNumber": 20,
                        "endLineNumber": 210,
                        "endColumnNumber": 21
                    },
                    "nodeContext": "if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n  queryBuilder.append(configuration.getPathField());\n  queryBuilder.append(':');\n  queryBuilder.append(first);\n}\n else {\n  if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(first);\n  }\n else   if (pr.first == null && pr.last == null) {\n    if (!queryBuilder.toString().contains(fieldName + \":\")) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append('*');\n    }\n  }\n else   if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n  }\n else   if (pr.isLike) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n  }\n else {\n    throw new RuntimeException(\"[unexpected!] not handled case\");\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 203,
                    "astHeight": 17
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 2798,
                        "startLineNumber": 164,
                        "startColumnNumber": 23,
                        "endLineNumber": 211,
                        "endColumnNumber": 17
                    },
                    "nodeContext": "{\n  if (pr.propertyName.contains(\"/\")) {\n    continue;\n  }\n  if (\"rep:excerpt\".equals(pr.propertyName)) {\n    continue;\n  }\n  String first=null;\n  if (pr.first != null) {\n    first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n  }\n  String last=null;\n  if (pr.last != null) {\n    last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n  }\n  String prField=configuration.getFieldForPropertyRestriction(pr);\n  CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n  if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n    queryBuilder.append(configuration.getPathField());\n    queryBuilder.append(':');\n    queryBuilder.append(first);\n  }\n else {\n    if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(first);\n    }\n else     if (pr.first == null && pr.last == null) {\n      if (!queryBuilder.toString().contains(fieldName + \":\")) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append('*');\n      }\n    }\n else     if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n    }\n else     if (pr.isLike) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n    }\n else {\n      throw new RuntimeException(\"[unexpected!] not handled case\");\n    }\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 312,
                    "astHeight": 18
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5508,
                        "startLineNumber": 124,
                        "startColumnNumber": 16,
                        "endLineNumber": 211,
                        "endColumnNumber": 17
                    },
                    "nodeContext": "if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n  String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n  if (isSupportedHttpRequest(nativeQueryString)) {\n    String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n    if (!\"select\".equals(requestHandlerString)) {\n      if (requestHandlerString.charAt(0) != '/') {\n        requestHandlerString=\"/\" + requestHandlerString;\n      }\n      solrQuery.setRequestHandler(requestHandlerString);\n    }\n    String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n    for (    String param : parameterString.split(\"&\")) {\n      String[] kv=param.split(\"=\");\n      if (kv.length != 2) {\n        throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n      }\n else {\n        if (\"stream.body\".equals(kv[0])) {\n          kv[0]=\"q\";\n          String mltFlString=\"mlt.fl=\";\n          int mltFlIndex=parameterString.indexOf(mltFlString);\n          if (mltFlIndex > -1) {\n            int beginIndex=mltFlIndex + mltFlString.length();\n            int endIndex=parameterString.indexOf('&',beginIndex);\n            String fields;\n            if (endIndex > beginIndex) {\n              fields=parameterString.substring(beginIndex,endIndex);\n            }\n else {\n              fields=parameterString.substring(beginIndex);\n            }\n            kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n          }\n        }\n        solrQuery.setParam(kv[0],kv[1]);\n      }\n    }\n    return solrQuery;\n  }\n else {\n    queryBuilder.append(nativeQueryString);\n  }\n}\n else {\n  if (pr.propertyName.contains(\"/\")) {\n    continue;\n  }\n  if (\"rep:excerpt\".equals(pr.propertyName)) {\n    continue;\n  }\n  String first=null;\n  if (pr.first != null) {\n    first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n  }\n  String last=null;\n  if (pr.last != null) {\n    last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n  }\n  String prField=configuration.getFieldForPropertyRestriction(pr);\n  CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n  if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n    queryBuilder.append(configuration.getPathField());\n    queryBuilder.append(':');\n    queryBuilder.append(first);\n  }\n else {\n    if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(first);\n    }\n else     if (pr.first == null && pr.last == null) {\n      if (!queryBuilder.toString().contains(fieldName + \":\")) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append('*');\n      }\n    }\n else     if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n    }\n else     if (pr.isLike) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n    }\n else {\n      throw new RuntimeException(\"[unexpected!] not handled case\");\n    }\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 546,
                    "astHeight": 19
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.EnhancedForStatement,body]",
                    "nodePosition": {
                        "charLength": 5622,
                        "startLineNumber": 122,
                        "startColumnNumber": 71,
                        "endLineNumber": 213,
                        "endColumnNumber": 13
                    },
                    "nodeContext": "{\n  if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n    String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n    if (isSupportedHttpRequest(nativeQueryString)) {\n      String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n      if (!\"select\".equals(requestHandlerString)) {\n        if (requestHandlerString.charAt(0) != '/') {\n          requestHandlerString=\"/\" + requestHandlerString;\n        }\n        solrQuery.setRequestHandler(requestHandlerString);\n      }\n      String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n      for (      String param : parameterString.split(\"&\")) {\n        String[] kv=param.split(\"=\");\n        if (kv.length != 2) {\n          throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n        }\n else {\n          if (\"stream.body\".equals(kv[0])) {\n            kv[0]=\"q\";\n            String mltFlString=\"mlt.fl=\";\n            int mltFlIndex=parameterString.indexOf(mltFlString);\n            if (mltFlIndex > -1) {\n              int beginIndex=mltFlIndex + mltFlString.length();\n              int endIndex=parameterString.indexOf('&',beginIndex);\n              String fields;\n              if (endIndex > beginIndex) {\n                fields=parameterString.substring(beginIndex,endIndex);\n              }\n else {\n                fields=parameterString.substring(beginIndex);\n              }\n              kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n            }\n          }\n          solrQuery.setParam(kv[0],kv[1]);\n        }\n      }\n      return solrQuery;\n    }\n else {\n      queryBuilder.append(nativeQueryString);\n    }\n  }\n else {\n    if (pr.propertyName.contains(\"/\")) {\n      continue;\n    }\n    if (\"rep:excerpt\".equals(pr.propertyName)) {\n      continue;\n    }\n    String first=null;\n    if (pr.first != null) {\n      first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n    }\n    String last=null;\n    if (pr.last != null) {\n      last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n    }\n    String prField=configuration.getFieldForPropertyRestriction(pr);\n    CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n    if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n      queryBuilder.append(configuration.getPathField());\n      queryBuilder.append(':');\n      queryBuilder.append(first);\n    }\n else {\n      if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(first);\n      }\n else       if (pr.first == null && pr.last == null) {\n        if (!queryBuilder.toString().contains(fieldName + \":\")) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append('*');\n        }\n      }\n else       if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n      }\n else       if (pr.isLike) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n      }\n else {\n        throw new RuntimeException(\"[unexpected!] not handled case\");\n      }\n    }\n  }\n  queryBuilder.append(\" \");\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 552,
                    "astHeight": 20
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5681,
                        "startLineNumber": 122,
                        "startColumnNumber": 12,
                        "endLineNumber": 213,
                        "endColumnNumber": 13
                    },
                    "nodeContext": "for (Filter.PropertyRestriction pr : propertyRestrictions) {\n  if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n    String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n    if (isSupportedHttpRequest(nativeQueryString)) {\n      String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n      if (!\"select\".equals(requestHandlerString)) {\n        if (requestHandlerString.charAt(0) != '/') {\n          requestHandlerString=\"/\" + requestHandlerString;\n        }\n        solrQuery.setRequestHandler(requestHandlerString);\n      }\n      String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n      for (      String param : parameterString.split(\"&\")) {\n        String[] kv=param.split(\"=\");\n        if (kv.length != 2) {\n          throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n        }\n else {\n          if (\"stream.body\".equals(kv[0])) {\n            kv[0]=\"q\";\n            String mltFlString=\"mlt.fl=\";\n            int mltFlIndex=parameterString.indexOf(mltFlString);\n            if (mltFlIndex > -1) {\n              int beginIndex=mltFlIndex + mltFlString.length();\n              int endIndex=parameterString.indexOf('&',beginIndex);\n              String fields;\n              if (endIndex > beginIndex) {\n                fields=parameterString.substring(beginIndex,endIndex);\n              }\n else {\n                fields=parameterString.substring(beginIndex);\n              }\n              kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n            }\n          }\n          solrQuery.setParam(kv[0],kv[1]);\n        }\n      }\n      return solrQuery;\n    }\n else {\n      queryBuilder.append(nativeQueryString);\n    }\n  }\n else {\n    if (pr.propertyName.contains(\"/\")) {\n      continue;\n    }\n    if (\"rep:excerpt\".equals(pr.propertyName)) {\n      continue;\n    }\n    String first=null;\n    if (pr.first != null) {\n      first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n    }\n    String last=null;\n    if (pr.last != null) {\n      last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n    }\n    String prField=configuration.getFieldForPropertyRestriction(pr);\n    CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n    if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n      queryBuilder.append(configuration.getPathField());\n      queryBuilder.append(':');\n      queryBuilder.append(first);\n    }\n else {\n      if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(first);\n      }\n else       if (pr.first == null && pr.last == null) {\n        if (!queryBuilder.toString().contains(fieldName + \":\")) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append('*');\n        }\n      }\n else       if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n      }\n else       if (pr.isLike) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n      }\n else {\n        throw new RuntimeException(\"[unexpected!] not handled case\");\n      }\n    }\n  }\n  queryBuilder.append(\" \");\n}\n",
                    "nodeType": "EnhancedForStatement",
                    "astNodeNumber": 560,
                    "astHeight": 21
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,thenStatement]",
                    "nodePosition": {
                        "charLength": 5705,
                        "startLineNumber": 121,
                        "startColumnNumber": 77,
                        "endLineNumber": 214,
                        "endColumnNumber": 9
                    },
                    "nodeContext": "{\n  for (  Filter.PropertyRestriction pr : propertyRestrictions) {\n    if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n      String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n      if (isSupportedHttpRequest(nativeQueryString)) {\n        String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n        if (!\"select\".equals(requestHandlerString)) {\n          if (requestHandlerString.charAt(0) != '/') {\n            requestHandlerString=\"/\" + requestHandlerString;\n          }\n          solrQuery.setRequestHandler(requestHandlerString);\n        }\n        String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n        for (        String param : parameterString.split(\"&\")) {\n          String[] kv=param.split(\"=\");\n          if (kv.length != 2) {\n            throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n          }\n else {\n            if (\"stream.body\".equals(kv[0])) {\n              kv[0]=\"q\";\n              String mltFlString=\"mlt.fl=\";\n              int mltFlIndex=parameterString.indexOf(mltFlString);\n              if (mltFlIndex > -1) {\n                int beginIndex=mltFlIndex + mltFlString.length();\n                int endIndex=parameterString.indexOf('&',beginIndex);\n                String fields;\n                if (endIndex > beginIndex) {\n                  fields=parameterString.substring(beginIndex,endIndex);\n                }\n else {\n                  fields=parameterString.substring(beginIndex);\n                }\n                kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n              }\n            }\n            solrQuery.setParam(kv[0],kv[1]);\n          }\n        }\n        return solrQuery;\n      }\n else {\n        queryBuilder.append(nativeQueryString);\n      }\n    }\n else {\n      if (pr.propertyName.contains(\"/\")) {\n        continue;\n      }\n      if (\"rep:excerpt\".equals(pr.propertyName)) {\n        continue;\n      }\n      String first=null;\n      if (pr.first != null) {\n        first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n      }\n      String last=null;\n      if (pr.last != null) {\n        last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n      }\n      String prField=configuration.getFieldForPropertyRestriction(pr);\n      CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n      if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n        queryBuilder.append(configuration.getPathField());\n        queryBuilder.append(':');\n        queryBuilder.append(first);\n      }\n else {\n        if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(first);\n        }\n else         if (pr.first == null && pr.last == null) {\n          if (!queryBuilder.toString().contains(fieldName + \":\")) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append('*');\n          }\n        }\n else         if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n        }\n else         if (pr.isLike) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n        }\n else {\n          throw new RuntimeException(\"[unexpected!] not handled case\");\n        }\n      }\n    }\n    queryBuilder.append(\" \");\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 561,
                    "astHeight": 22
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5774,
                        "startLineNumber": 121,
                        "startColumnNumber": 8,
                        "endLineNumber": 214,
                        "endColumnNumber": 9
                    },
                    "nodeContext": "if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n  for (  Filter.PropertyRestriction pr : propertyRestrictions) {\n    if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n      String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n      if (isSupportedHttpRequest(nativeQueryString)) {\n        String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n        if (!\"select\".equals(requestHandlerString)) {\n          if (requestHandlerString.charAt(0) != '/') {\n            requestHandlerString=\"/\" + requestHandlerString;\n          }\n          solrQuery.setRequestHandler(requestHandlerString);\n        }\n        String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n        for (        String param : parameterString.split(\"&\")) {\n          String[] kv=param.split(\"=\");\n          if (kv.length != 2) {\n            throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n          }\n else {\n            if (\"stream.body\".equals(kv[0])) {\n              kv[0]=\"q\";\n              String mltFlString=\"mlt.fl=\";\n              int mltFlIndex=parameterString.indexOf(mltFlString);\n              if (mltFlIndex > -1) {\n                int beginIndex=mltFlIndex + mltFlString.length();\n                int endIndex=parameterString.indexOf('&',beginIndex);\n                String fields;\n                if (endIndex > beginIndex) {\n                  fields=parameterString.substring(beginIndex,endIndex);\n                }\n else {\n                  fields=parameterString.substring(beginIndex);\n                }\n                kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n              }\n            }\n            solrQuery.setParam(kv[0],kv[1]);\n          }\n        }\n        return solrQuery;\n      }\n else {\n        queryBuilder.append(nativeQueryString);\n      }\n    }\n else {\n      if (pr.propertyName.contains(\"/\")) {\n        continue;\n      }\n      if (\"rep:excerpt\".equals(pr.propertyName)) {\n        continue;\n      }\n      String first=null;\n      if (pr.first != null) {\n        first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n      }\n      String last=null;\n      if (pr.last != null) {\n        last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n      }\n      String prField=configuration.getFieldForPropertyRestriction(pr);\n      CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n      if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n        queryBuilder.append(configuration.getPathField());\n        queryBuilder.append(':');\n        queryBuilder.append(first);\n      }\n else {\n        if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(first);\n        }\n else         if (pr.first == null && pr.last == null) {\n          if (!queryBuilder.toString().contains(fieldName + \":\")) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append('*');\n          }\n        }\n else         if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n        }\n else         if (pr.isLike) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n        }\n else {\n          throw new RuntimeException(\"[unexpected!] not handled case\");\n        }\n      }\n    }\n    queryBuilder.append(\" \");\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 570,
                    "astHeight": 23
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.MethodDeclaration,body]",
                    "nodePosition": {
                        "charLength": 7985,
                        "startLineNumber": 103,
                        "startColumnNumber": 46,
                        "endLineNumber": 255,
                        "endColumnNumber": 5
                    },
                    "nodeContext": "{\n  SolrQuery solrQuery=new SolrQuery();\n  setDefaults(solrQuery);\n  StringBuilder queryBuilder=new StringBuilder();\n  if (filter.getFullTextConstraint() != null) {\n    queryBuilder.append(getFullTextQuery(filter.getFullTextConstraint()));\n    queryBuilder.append(' ');\n  }\n else   if (filter.getFulltextConditions() != null) {\n    Collection<String> fulltextConditions=filter.getFulltextConditions();\n    for (    String fulltextCondition : fulltextConditions) {\n      queryBuilder.append(fulltextCondition).append(\" \");\n    }\n  }\n  Collection<Filter.PropertyRestriction> propertyRestrictions=filter.getPropertyRestrictions();\n  if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n    for (    Filter.PropertyRestriction pr : propertyRestrictions) {\n      if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n        String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n        if (isSupportedHttpRequest(nativeQueryString)) {\n          String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n          if (!\"select\".equals(requestHandlerString)) {\n            if (requestHandlerString.charAt(0) != '/') {\n              requestHandlerString=\"/\" + requestHandlerString;\n            }\n            solrQuery.setRequestHandler(requestHandlerString);\n          }\n          String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n          for (          String param : parameterString.split(\"&\")) {\n            String[] kv=param.split(\"=\");\n            if (kv.length != 2) {\n              throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n            }\n else {\n              if (\"stream.body\".equals(kv[0])) {\n                kv[0]=\"q\";\n                String mltFlString=\"mlt.fl=\";\n                int mltFlIndex=parameterString.indexOf(mltFlString);\n                if (mltFlIndex > -1) {\n                  int beginIndex=mltFlIndex + mltFlString.length();\n                  int endIndex=parameterString.indexOf('&',beginIndex);\n                  String fields;\n                  if (endIndex > beginIndex) {\n                    fields=parameterString.substring(beginIndex,endIndex);\n                  }\n else {\n                    fields=parameterString.substring(beginIndex);\n                  }\n                  kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n                }\n              }\n              solrQuery.setParam(kv[0],kv[1]);\n            }\n          }\n          return solrQuery;\n        }\n else {\n          queryBuilder.append(nativeQueryString);\n        }\n      }\n else {\n        if (pr.propertyName.contains(\"/\")) {\n          continue;\n        }\n        if (\"rep:excerpt\".equals(pr.propertyName)) {\n          continue;\n        }\n        String first=null;\n        if (pr.first != null) {\n          first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n        }\n        String last=null;\n        if (pr.last != null) {\n          last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n        }\n        String prField=configuration.getFieldForPropertyRestriction(pr);\n        CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n        if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n          queryBuilder.append(configuration.getPathField());\n          queryBuilder.append(':');\n          queryBuilder.append(first);\n        }\n else {\n          if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(first);\n          }\n else           if (pr.first == null && pr.last == null) {\n            if (!queryBuilder.toString().contains(fieldName + \":\")) {\n              queryBuilder.append(fieldName).append(':');\n              queryBuilder.append('*');\n            }\n          }\n else           if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n          }\n else           if (pr.isLike) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n          }\n else {\n            throw new RuntimeException(\"[unexpected!] not handled case\");\n          }\n        }\n      }\n      queryBuilder.append(\" \");\n    }\n  }\n  String[] pts=filter.getPrimaryTypes().toArray(new String[filter.getPrimaryTypes().size()]);\n  for (int i=0; i < pts.length; i++) {\n    String pt=pts[i];\n    if (i == 0) {\n      queryBuilder.append(\"(\");\n    }\n    if (i > 0 && i < pts.length) {\n      queryBuilder.append(\"OR \");\n    }\n    queryBuilder.append(\"jcr\\\\:primaryType\").append(':').append(partialEscape(pt)).append(\" \");\n    if (i == pts.length - 1) {\n      queryBuilder.append(\")\");\n      queryBuilder.append(' ');\n    }\n  }\n  Filter.PathRestriction pathRestriction=filter.getPathRestriction();\n  if (pathRestriction != null) {\n    String path=purgePath(filter);\n    String fieldName=configuration.getFieldForPathRestriction(pathRestriction);\n    if (fieldName != null) {\n      queryBuilder.append(fieldName);\n      queryBuilder.append(':');\n      queryBuilder.append(path);\n    }\n  }\n  if (queryBuilder.length() == 0) {\n    queryBuilder.append(\"*:*\");\n  }\n  String escapedQuery=queryBuilder.toString();\n  solrQuery.setQuery(escapedQuery);\n  if (log.isDebugEnabled()) {\n    log.debug(\"JCR query {} has been converted to Solr query {}\",filter.getQueryStatement(),solrQuery.toString());\n  }\n  return solrQuery;\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 858,
                    "astHeight": 24
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.TypeDeclaration,bodyDeclarations]",
                    "nodePosition": {
                        "charLength": 8027,
                        "startLineNumber": 103,
                        "startColumnNumber": 4,
                        "endLineNumber": 255,
                        "endColumnNumber": 5
                    },
                    "nodeContext": "private SolrQuery getQuery(Filter filter){\n  SolrQuery solrQuery=new SolrQuery();\n  setDefaults(solrQuery);\n  StringBuilder queryBuilder=new StringBuilder();\n  if (filter.getFullTextConstraint() != null) {\n    queryBuilder.append(getFullTextQuery(filter.getFullTextConstraint()));\n    queryBuilder.append(' ');\n  }\n else   if (filter.getFulltextConditions() != null) {\n    Collection<String> fulltextConditions=filter.getFulltextConditions();\n    for (    String fulltextCondition : fulltextConditions) {\n      queryBuilder.append(fulltextCondition).append(\" \");\n    }\n  }\n  Collection<Filter.PropertyRestriction> propertyRestrictions=filter.getPropertyRestrictions();\n  if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n    for (    Filter.PropertyRestriction pr : propertyRestrictions) {\n      if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n        String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n        if (isSupportedHttpRequest(nativeQueryString)) {\n          String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n          if (!\"select\".equals(requestHandlerString)) {\n            if (requestHandlerString.charAt(0) != '/') {\n              requestHandlerString=\"/\" + requestHandlerString;\n            }\n            solrQuery.setRequestHandler(requestHandlerString);\n          }\n          String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n          for (          String param : parameterString.split(\"&\")) {\n            String[] kv=param.split(\"=\");\n            if (kv.length != 2) {\n              throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n            }\n else {\n              if (\"stream.body\".equals(kv[0])) {\n                kv[0]=\"q\";\n                String mltFlString=\"mlt.fl=\";\n                int mltFlIndex=parameterString.indexOf(mltFlString);\n                if (mltFlIndex > -1) {\n                  int beginIndex=mltFlIndex + mltFlString.length();\n                  int endIndex=parameterString.indexOf('&',beginIndex);\n                  String fields;\n                  if (endIndex > beginIndex) {\n                    fields=parameterString.substring(beginIndex,endIndex);\n                  }\n else {\n                    fields=parameterString.substring(beginIndex);\n                  }\n                  kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n                }\n              }\n              solrQuery.setParam(kv[0],kv[1]);\n            }\n          }\n          return solrQuery;\n        }\n else {\n          queryBuilder.append(nativeQueryString);\n        }\n      }\n else {\n        if (pr.propertyName.contains(\"/\")) {\n          continue;\n        }\n        if (\"rep:excerpt\".equals(pr.propertyName)) {\n          continue;\n        }\n        String first=null;\n        if (pr.first != null) {\n          first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n        }\n        String last=null;\n        if (pr.last != null) {\n          last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n        }\n        String prField=configuration.getFieldForPropertyRestriction(pr);\n        CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n        if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n          queryBuilder.append(configuration.getPathField());\n          queryBuilder.append(':');\n          queryBuilder.append(first);\n        }\n else {\n          if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(first);\n          }\n else           if (pr.first == null && pr.last == null) {\n            if (!queryBuilder.toString().contains(fieldName + \":\")) {\n              queryBuilder.append(fieldName).append(':');\n              queryBuilder.append('*');\n            }\n          }\n else           if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n          }\n else           if (pr.isLike) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n          }\n else {\n            throw new RuntimeException(\"[unexpected!] not handled case\");\n          }\n        }\n      }\n      queryBuilder.append(\" \");\n    }\n  }\n  String[] pts=filter.getPrimaryTypes().toArray(new String[filter.getPrimaryTypes().size()]);\n  for (int i=0; i < pts.length; i++) {\n    String pt=pts[i];\n    if (i == 0) {\n      queryBuilder.append(\"(\");\n    }\n    if (i > 0 && i < pts.length) {\n      queryBuilder.append(\"OR \");\n    }\n    queryBuilder.append(\"jcr\\\\:primaryType\").append(':').append(partialEscape(pt)).append(\" \");\n    if (i == pts.length - 1) {\n      queryBuilder.append(\")\");\n      queryBuilder.append(' ');\n    }\n  }\n  Filter.PathRestriction pathRestriction=filter.getPathRestriction();\n  if (pathRestriction != null) {\n    String path=purgePath(filter);\n    String fieldName=configuration.getFieldForPathRestriction(pathRestriction);\n    if (fieldName != null) {\n      queryBuilder.append(fieldName);\n      queryBuilder.append(':');\n      queryBuilder.append(path);\n    }\n  }\n  if (queryBuilder.length() == 0) {\n    queryBuilder.append(\"*:*\");\n  }\n  String escapedQuery=queryBuilder.toString();\n  solrQuery.setQuery(escapedQuery);\n  if (log.isDebugEnabled()) {\n    log.debug(\"JCR query {} has been converted to Solr query {}\",filter.getQueryStatement(),solrQuery.toString());\n  }\n  return solrQuery;\n}\n",
                    "nodeType": "MethodDeclaration",
                    "astNodeNumber": 867,
                    "astHeight": 25
                }
            ],
            "currentLineData": {
                "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,expression]",
                "nodePosition": {
                    "charLength": 63,
                    "startLineNumber": 191,
                    "startColumnNumber": 28,
                    "endLineNumber": 191,
                    "endColumnNumber": 91
                },
                "nodeContext": "pr.first != null && pr.last != null && pr.first.equals(pr.last)",
                "nodeType": "InfixExpression",
                "astNodeNumber": 20,
                "astHeight": 5
            },
            "tokenLength": 1,
            "type": "org.apache.jackrabbit.oak.spi.query.Filter.PropertyRestriction"
        },
        {
            "nodeContext": "pr",
            "nodeType": "SimpleName",
            "nodePosition": {
                "charLength": 2,
                "startLineNumber": 194,
                "startColumnNumber": 35,
                "endLineNumber": 194,
                "endColumnNumber": 37
            },
            "astNodeNumber": 1,
            "astHeight": 1,
            "parentDataList": [
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.InfixExpression,leftOperand]",
                    "nodePosition": {
                        "charLength": 8,
                        "startLineNumber": 194,
                        "startColumnNumber": 35,
                        "endLineNumber": 194,
                        "endColumnNumber": 43
                    },
                    "nodeContext": "pr.first",
                    "nodeType": "QualifiedName",
                    "astNodeNumber": 3,
                    "astHeight": 2
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.InfixExpression,leftOperand]",
                    "nodePosition": {
                        "charLength": 16,
                        "startLineNumber": 194,
                        "startColumnNumber": 35,
                        "endLineNumber": 194,
                        "endColumnNumber": 51
                    },
                    "nodeContext": "pr.first == null",
                    "nodeType": "InfixExpression",
                    "astNodeNumber": 5,
                    "astHeight": 3
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,expression]",
                    "nodePosition": {
                        "charLength": 35,
                        "startLineNumber": 194,
                        "startColumnNumber": 35,
                        "endLineNumber": 194,
                        "endColumnNumber": 70
                    },
                    "nodeContext": "pr.first == null && pr.last == null",
                    "nodeType": "InfixExpression",
                    "astNodeNumber": 11,
                    "astHeight": 4
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 1260,
                        "startLineNumber": 194,
                        "startColumnNumber": 31,
                        "endLineNumber": 209,
                        "endColumnNumber": 25
                    },
                    "nodeContext": "if (pr.first == null && pr.last == null) {\n  if (!queryBuilder.toString().contains(fieldName + \":\")) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append('*');\n  }\n}\n else if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n}\n else if (pr.isLike) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n}\n else {\n  throw new RuntimeException(\"[unexpected!] not handled case\");\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 142,
                    "astHeight": 14
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 1490,
                        "startLineNumber": 191,
                        "startColumnNumber": 24,
                        "endLineNumber": 209,
                        "endColumnNumber": 25
                    },
                    "nodeContext": "if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(first);\n}\n else if (pr.first == null && pr.last == null) {\n  if (!queryBuilder.toString().contains(fieldName + \":\")) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append('*');\n  }\n}\n else if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n}\n else if (pr.isLike) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n}\n else {\n  throw new RuntimeException(\"[unexpected!] not handled case\");\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 177,
                    "astHeight": 15
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 1538,
                        "startLineNumber": 190,
                        "startColumnNumber": 27,
                        "endLineNumber": 210,
                        "endColumnNumber": 21
                    },
                    "nodeContext": "{\n  if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(first);\n  }\n else   if (pr.first == null && pr.last == null) {\n    if (!queryBuilder.toString().contains(fieldName + \":\")) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append('*');\n    }\n  }\n else   if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n  }\n else   if (pr.isLike) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n  }\n else {\n    throw new RuntimeException(\"[unexpected!] not handled case\");\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 178,
                    "astHeight": 16
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 1791,
                        "startLineNumber": 186,
                        "startColumnNumber": 20,
                        "endLineNumber": 210,
                        "endColumnNumber": 21
                    },
                    "nodeContext": "if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n  queryBuilder.append(configuration.getPathField());\n  queryBuilder.append(':');\n  queryBuilder.append(first);\n}\n else {\n  if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(first);\n  }\n else   if (pr.first == null && pr.last == null) {\n    if (!queryBuilder.toString().contains(fieldName + \":\")) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append('*');\n    }\n  }\n else   if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n  }\n else   if (pr.isLike) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n  }\n else {\n    throw new RuntimeException(\"[unexpected!] not handled case\");\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 203,
                    "astHeight": 17
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 2798,
                        "startLineNumber": 164,
                        "startColumnNumber": 23,
                        "endLineNumber": 211,
                        "endColumnNumber": 17
                    },
                    "nodeContext": "{\n  if (pr.propertyName.contains(\"/\")) {\n    continue;\n  }\n  if (\"rep:excerpt\".equals(pr.propertyName)) {\n    continue;\n  }\n  String first=null;\n  if (pr.first != null) {\n    first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n  }\n  String last=null;\n  if (pr.last != null) {\n    last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n  }\n  String prField=configuration.getFieldForPropertyRestriction(pr);\n  CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n  if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n    queryBuilder.append(configuration.getPathField());\n    queryBuilder.append(':');\n    queryBuilder.append(first);\n  }\n else {\n    if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(first);\n    }\n else     if (pr.first == null && pr.last == null) {\n      if (!queryBuilder.toString().contains(fieldName + \":\")) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append('*');\n      }\n    }\n else     if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n    }\n else     if (pr.isLike) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n    }\n else {\n      throw new RuntimeException(\"[unexpected!] not handled case\");\n    }\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 312,
                    "astHeight": 18
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5508,
                        "startLineNumber": 124,
                        "startColumnNumber": 16,
                        "endLineNumber": 211,
                        "endColumnNumber": 17
                    },
                    "nodeContext": "if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n  String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n  if (isSupportedHttpRequest(nativeQueryString)) {\n    String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n    if (!\"select\".equals(requestHandlerString)) {\n      if (requestHandlerString.charAt(0) != '/') {\n        requestHandlerString=\"/\" + requestHandlerString;\n      }\n      solrQuery.setRequestHandler(requestHandlerString);\n    }\n    String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n    for (    String param : parameterString.split(\"&\")) {\n      String[] kv=param.split(\"=\");\n      if (kv.length != 2) {\n        throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n      }\n else {\n        if (\"stream.body\".equals(kv[0])) {\n          kv[0]=\"q\";\n          String mltFlString=\"mlt.fl=\";\n          int mltFlIndex=parameterString.indexOf(mltFlString);\n          if (mltFlIndex > -1) {\n            int beginIndex=mltFlIndex + mltFlString.length();\n            int endIndex=parameterString.indexOf('&',beginIndex);\n            String fields;\n            if (endIndex > beginIndex) {\n              fields=parameterString.substring(beginIndex,endIndex);\n            }\n else {\n              fields=parameterString.substring(beginIndex);\n            }\n            kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n          }\n        }\n        solrQuery.setParam(kv[0],kv[1]);\n      }\n    }\n    return solrQuery;\n  }\n else {\n    queryBuilder.append(nativeQueryString);\n  }\n}\n else {\n  if (pr.propertyName.contains(\"/\")) {\n    continue;\n  }\n  if (\"rep:excerpt\".equals(pr.propertyName)) {\n    continue;\n  }\n  String first=null;\n  if (pr.first != null) {\n    first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n  }\n  String last=null;\n  if (pr.last != null) {\n    last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n  }\n  String prField=configuration.getFieldForPropertyRestriction(pr);\n  CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n  if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n    queryBuilder.append(configuration.getPathField());\n    queryBuilder.append(':');\n    queryBuilder.append(first);\n  }\n else {\n    if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(first);\n    }\n else     if (pr.first == null && pr.last == null) {\n      if (!queryBuilder.toString().contains(fieldName + \":\")) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append('*');\n      }\n    }\n else     if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n    }\n else     if (pr.isLike) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n    }\n else {\n      throw new RuntimeException(\"[unexpected!] not handled case\");\n    }\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 546,
                    "astHeight": 19
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.EnhancedForStatement,body]",
                    "nodePosition": {
                        "charLength": 5622,
                        "startLineNumber": 122,
                        "startColumnNumber": 71,
                        "endLineNumber": 213,
                        "endColumnNumber": 13
                    },
                    "nodeContext": "{\n  if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n    String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n    if (isSupportedHttpRequest(nativeQueryString)) {\n      String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n      if (!\"select\".equals(requestHandlerString)) {\n        if (requestHandlerString.charAt(0) != '/') {\n          requestHandlerString=\"/\" + requestHandlerString;\n        }\n        solrQuery.setRequestHandler(requestHandlerString);\n      }\n      String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n      for (      String param : parameterString.split(\"&\")) {\n        String[] kv=param.split(\"=\");\n        if (kv.length != 2) {\n          throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n        }\n else {\n          if (\"stream.body\".equals(kv[0])) {\n            kv[0]=\"q\";\n            String mltFlString=\"mlt.fl=\";\n            int mltFlIndex=parameterString.indexOf(mltFlString);\n            if (mltFlIndex > -1) {\n              int beginIndex=mltFlIndex + mltFlString.length();\n              int endIndex=parameterString.indexOf('&',beginIndex);\n              String fields;\n              if (endIndex > beginIndex) {\n                fields=parameterString.substring(beginIndex,endIndex);\n              }\n else {\n                fields=parameterString.substring(beginIndex);\n              }\n              kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n            }\n          }\n          solrQuery.setParam(kv[0],kv[1]);\n        }\n      }\n      return solrQuery;\n    }\n else {\n      queryBuilder.append(nativeQueryString);\n    }\n  }\n else {\n    if (pr.propertyName.contains(\"/\")) {\n      continue;\n    }\n    if (\"rep:excerpt\".equals(pr.propertyName)) {\n      continue;\n    }\n    String first=null;\n    if (pr.first != null) {\n      first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n    }\n    String last=null;\n    if (pr.last != null) {\n      last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n    }\n    String prField=configuration.getFieldForPropertyRestriction(pr);\n    CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n    if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n      queryBuilder.append(configuration.getPathField());\n      queryBuilder.append(':');\n      queryBuilder.append(first);\n    }\n else {\n      if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(first);\n      }\n else       if (pr.first == null && pr.last == null) {\n        if (!queryBuilder.toString().contains(fieldName + \":\")) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append('*');\n        }\n      }\n else       if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n      }\n else       if (pr.isLike) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n      }\n else {\n        throw new RuntimeException(\"[unexpected!] not handled case\");\n      }\n    }\n  }\n  queryBuilder.append(\" \");\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 552,
                    "astHeight": 20
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5681,
                        "startLineNumber": 122,
                        "startColumnNumber": 12,
                        "endLineNumber": 213,
                        "endColumnNumber": 13
                    },
                    "nodeContext": "for (Filter.PropertyRestriction pr : propertyRestrictions) {\n  if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n    String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n    if (isSupportedHttpRequest(nativeQueryString)) {\n      String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n      if (!\"select\".equals(requestHandlerString)) {\n        if (requestHandlerString.charAt(0) != '/') {\n          requestHandlerString=\"/\" + requestHandlerString;\n        }\n        solrQuery.setRequestHandler(requestHandlerString);\n      }\n      String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n      for (      String param : parameterString.split(\"&\")) {\n        String[] kv=param.split(\"=\");\n        if (kv.length != 2) {\n          throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n        }\n else {\n          if (\"stream.body\".equals(kv[0])) {\n            kv[0]=\"q\";\n            String mltFlString=\"mlt.fl=\";\n            int mltFlIndex=parameterString.indexOf(mltFlString);\n            if (mltFlIndex > -1) {\n              int beginIndex=mltFlIndex + mltFlString.length();\n              int endIndex=parameterString.indexOf('&',beginIndex);\n              String fields;\n              if (endIndex > beginIndex) {\n                fields=parameterString.substring(beginIndex,endIndex);\n              }\n else {\n                fields=parameterString.substring(beginIndex);\n              }\n              kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n            }\n          }\n          solrQuery.setParam(kv[0],kv[1]);\n        }\n      }\n      return solrQuery;\n    }\n else {\n      queryBuilder.append(nativeQueryString);\n    }\n  }\n else {\n    if (pr.propertyName.contains(\"/\")) {\n      continue;\n    }\n    if (\"rep:excerpt\".equals(pr.propertyName)) {\n      continue;\n    }\n    String first=null;\n    if (pr.first != null) {\n      first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n    }\n    String last=null;\n    if (pr.last != null) {\n      last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n    }\n    String prField=configuration.getFieldForPropertyRestriction(pr);\n    CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n    if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n      queryBuilder.append(configuration.getPathField());\n      queryBuilder.append(':');\n      queryBuilder.append(first);\n    }\n else {\n      if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(first);\n      }\n else       if (pr.first == null && pr.last == null) {\n        if (!queryBuilder.toString().contains(fieldName + \":\")) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append('*');\n        }\n      }\n else       if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n      }\n else       if (pr.isLike) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n      }\n else {\n        throw new RuntimeException(\"[unexpected!] not handled case\");\n      }\n    }\n  }\n  queryBuilder.append(\" \");\n}\n",
                    "nodeType": "EnhancedForStatement",
                    "astNodeNumber": 560,
                    "astHeight": 21
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,thenStatement]",
                    "nodePosition": {
                        "charLength": 5705,
                        "startLineNumber": 121,
                        "startColumnNumber": 77,
                        "endLineNumber": 214,
                        "endColumnNumber": 9
                    },
                    "nodeContext": "{\n  for (  Filter.PropertyRestriction pr : propertyRestrictions) {\n    if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n      String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n      if (isSupportedHttpRequest(nativeQueryString)) {\n        String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n        if (!\"select\".equals(requestHandlerString)) {\n          if (requestHandlerString.charAt(0) != '/') {\n            requestHandlerString=\"/\" + requestHandlerString;\n          }\n          solrQuery.setRequestHandler(requestHandlerString);\n        }\n        String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n        for (        String param : parameterString.split(\"&\")) {\n          String[] kv=param.split(\"=\");\n          if (kv.length != 2) {\n            throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n          }\n else {\n            if (\"stream.body\".equals(kv[0])) {\n              kv[0]=\"q\";\n              String mltFlString=\"mlt.fl=\";\n              int mltFlIndex=parameterString.indexOf(mltFlString);\n              if (mltFlIndex > -1) {\n                int beginIndex=mltFlIndex + mltFlString.length();\n                int endIndex=parameterString.indexOf('&',beginIndex);\n                String fields;\n                if (endIndex > beginIndex) {\n                  fields=parameterString.substring(beginIndex,endIndex);\n                }\n else {\n                  fields=parameterString.substring(beginIndex);\n                }\n                kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n              }\n            }\n            solrQuery.setParam(kv[0],kv[1]);\n          }\n        }\n        return solrQuery;\n      }\n else {\n        queryBuilder.append(nativeQueryString);\n      }\n    }\n else {\n      if (pr.propertyName.contains(\"/\")) {\n        continue;\n      }\n      if (\"rep:excerpt\".equals(pr.propertyName)) {\n        continue;\n      }\n      String first=null;\n      if (pr.first != null) {\n        first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n      }\n      String last=null;\n      if (pr.last != null) {\n        last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n      }\n      String prField=configuration.getFieldForPropertyRestriction(pr);\n      CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n      if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n        queryBuilder.append(configuration.getPathField());\n        queryBuilder.append(':');\n        queryBuilder.append(first);\n      }\n else {\n        if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(first);\n        }\n else         if (pr.first == null && pr.last == null) {\n          if (!queryBuilder.toString().contains(fieldName + \":\")) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append('*');\n          }\n        }\n else         if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n        }\n else         if (pr.isLike) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n        }\n else {\n          throw new RuntimeException(\"[unexpected!] not handled case\");\n        }\n      }\n    }\n    queryBuilder.append(\" \");\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 561,
                    "astHeight": 22
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5774,
                        "startLineNumber": 121,
                        "startColumnNumber": 8,
                        "endLineNumber": 214,
                        "endColumnNumber": 9
                    },
                    "nodeContext": "if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n  for (  Filter.PropertyRestriction pr : propertyRestrictions) {\n    if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n      String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n      if (isSupportedHttpRequest(nativeQueryString)) {\n        String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n        if (!\"select\".equals(requestHandlerString)) {\n          if (requestHandlerString.charAt(0) != '/') {\n            requestHandlerString=\"/\" + requestHandlerString;\n          }\n          solrQuery.setRequestHandler(requestHandlerString);\n        }\n        String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n        for (        String param : parameterString.split(\"&\")) {\n          String[] kv=param.split(\"=\");\n          if (kv.length != 2) {\n            throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n          }\n else {\n            if (\"stream.body\".equals(kv[0])) {\n              kv[0]=\"q\";\n              String mltFlString=\"mlt.fl=\";\n              int mltFlIndex=parameterString.indexOf(mltFlString);\n              if (mltFlIndex > -1) {\n                int beginIndex=mltFlIndex + mltFlString.length();\n                int endIndex=parameterString.indexOf('&',beginIndex);\n                String fields;\n                if (endIndex > beginIndex) {\n                  fields=parameterString.substring(beginIndex,endIndex);\n                }\n else {\n                  fields=parameterString.substring(beginIndex);\n                }\n                kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n              }\n            }\n            solrQuery.setParam(kv[0],kv[1]);\n          }\n        }\n        return solrQuery;\n      }\n else {\n        queryBuilder.append(nativeQueryString);\n      }\n    }\n else {\n      if (pr.propertyName.contains(\"/\")) {\n        continue;\n      }\n      if (\"rep:excerpt\".equals(pr.propertyName)) {\n        continue;\n      }\n      String first=null;\n      if (pr.first != null) {\n        first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n      }\n      String last=null;\n      if (pr.last != null) {\n        last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n      }\n      String prField=configuration.getFieldForPropertyRestriction(pr);\n      CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n      if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n        queryBuilder.append(configuration.getPathField());\n        queryBuilder.append(':');\n        queryBuilder.append(first);\n      }\n else {\n        if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(first);\n        }\n else         if (pr.first == null && pr.last == null) {\n          if (!queryBuilder.toString().contains(fieldName + \":\")) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append('*');\n          }\n        }\n else         if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n        }\n else         if (pr.isLike) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n        }\n else {\n          throw new RuntimeException(\"[unexpected!] not handled case\");\n        }\n      }\n    }\n    queryBuilder.append(\" \");\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 570,
                    "astHeight": 23
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.MethodDeclaration,body]",
                    "nodePosition": {
                        "charLength": 7985,
                        "startLineNumber": 103,
                        "startColumnNumber": 46,
                        "endLineNumber": 255,
                        "endColumnNumber": 5
                    },
                    "nodeContext": "{\n  SolrQuery solrQuery=new SolrQuery();\n  setDefaults(solrQuery);\n  StringBuilder queryBuilder=new StringBuilder();\n  if (filter.getFullTextConstraint() != null) {\n    queryBuilder.append(getFullTextQuery(filter.getFullTextConstraint()));\n    queryBuilder.append(' ');\n  }\n else   if (filter.getFulltextConditions() != null) {\n    Collection<String> fulltextConditions=filter.getFulltextConditions();\n    for (    String fulltextCondition : fulltextConditions) {\n      queryBuilder.append(fulltextCondition).append(\" \");\n    }\n  }\n  Collection<Filter.PropertyRestriction> propertyRestrictions=filter.getPropertyRestrictions();\n  if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n    for (    Filter.PropertyRestriction pr : propertyRestrictions) {\n      if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n        String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n        if (isSupportedHttpRequest(nativeQueryString)) {\n          String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n          if (!\"select\".equals(requestHandlerString)) {\n            if (requestHandlerString.charAt(0) != '/') {\n              requestHandlerString=\"/\" + requestHandlerString;\n            }\n            solrQuery.setRequestHandler(requestHandlerString);\n          }\n          String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n          for (          String param : parameterString.split(\"&\")) {\n            String[] kv=param.split(\"=\");\n            if (kv.length != 2) {\n              throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n            }\n else {\n              if (\"stream.body\".equals(kv[0])) {\n                kv[0]=\"q\";\n                String mltFlString=\"mlt.fl=\";\n                int mltFlIndex=parameterString.indexOf(mltFlString);\n                if (mltFlIndex > -1) {\n                  int beginIndex=mltFlIndex + mltFlString.length();\n                  int endIndex=parameterString.indexOf('&',beginIndex);\n                  String fields;\n                  if (endIndex > beginIndex) {\n                    fields=parameterString.substring(beginIndex,endIndex);\n                  }\n else {\n                    fields=parameterString.substring(beginIndex);\n                  }\n                  kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n                }\n              }\n              solrQuery.setParam(kv[0],kv[1]);\n            }\n          }\n          return solrQuery;\n        }\n else {\n          queryBuilder.append(nativeQueryString);\n        }\n      }\n else {\n        if (pr.propertyName.contains(\"/\")) {\n          continue;\n        }\n        if (\"rep:excerpt\".equals(pr.propertyName)) {\n          continue;\n        }\n        String first=null;\n        if (pr.first != null) {\n          first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n        }\n        String last=null;\n        if (pr.last != null) {\n          last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n        }\n        String prField=configuration.getFieldForPropertyRestriction(pr);\n        CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n        if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n          queryBuilder.append(configuration.getPathField());\n          queryBuilder.append(':');\n          queryBuilder.append(first);\n        }\n else {\n          if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(first);\n          }\n else           if (pr.first == null && pr.last == null) {\n            if (!queryBuilder.toString().contains(fieldName + \":\")) {\n              queryBuilder.append(fieldName).append(':');\n              queryBuilder.append('*');\n            }\n          }\n else           if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n          }\n else           if (pr.isLike) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n          }\n else {\n            throw new RuntimeException(\"[unexpected!] not handled case\");\n          }\n        }\n      }\n      queryBuilder.append(\" \");\n    }\n  }\n  String[] pts=filter.getPrimaryTypes().toArray(new String[filter.getPrimaryTypes().size()]);\n  for (int i=0; i < pts.length; i++) {\n    String pt=pts[i];\n    if (i == 0) {\n      queryBuilder.append(\"(\");\n    }\n    if (i > 0 && i < pts.length) {\n      queryBuilder.append(\"OR \");\n    }\n    queryBuilder.append(\"jcr\\\\:primaryType\").append(':').append(partialEscape(pt)).append(\" \");\n    if (i == pts.length - 1) {\n      queryBuilder.append(\")\");\n      queryBuilder.append(' ');\n    }\n  }\n  Filter.PathRestriction pathRestriction=filter.getPathRestriction();\n  if (pathRestriction != null) {\n    String path=purgePath(filter);\n    String fieldName=configuration.getFieldForPathRestriction(pathRestriction);\n    if (fieldName != null) {\n      queryBuilder.append(fieldName);\n      queryBuilder.append(':');\n      queryBuilder.append(path);\n    }\n  }\n  if (queryBuilder.length() == 0) {\n    queryBuilder.append(\"*:*\");\n  }\n  String escapedQuery=queryBuilder.toString();\n  solrQuery.setQuery(escapedQuery);\n  if (log.isDebugEnabled()) {\n    log.debug(\"JCR query {} has been converted to Solr query {}\",filter.getQueryStatement(),solrQuery.toString());\n  }\n  return solrQuery;\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 858,
                    "astHeight": 24
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.TypeDeclaration,bodyDeclarations]",
                    "nodePosition": {
                        "charLength": 8027,
                        "startLineNumber": 103,
                        "startColumnNumber": 4,
                        "endLineNumber": 255,
                        "endColumnNumber": 5
                    },
                    "nodeContext": "private SolrQuery getQuery(Filter filter){\n  SolrQuery solrQuery=new SolrQuery();\n  setDefaults(solrQuery);\n  StringBuilder queryBuilder=new StringBuilder();\n  if (filter.getFullTextConstraint() != null) {\n    queryBuilder.append(getFullTextQuery(filter.getFullTextConstraint()));\n    queryBuilder.append(' ');\n  }\n else   if (filter.getFulltextConditions() != null) {\n    Collection<String> fulltextConditions=filter.getFulltextConditions();\n    for (    String fulltextCondition : fulltextConditions) {\n      queryBuilder.append(fulltextCondition).append(\" \");\n    }\n  }\n  Collection<Filter.PropertyRestriction> propertyRestrictions=filter.getPropertyRestrictions();\n  if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n    for (    Filter.PropertyRestriction pr : propertyRestrictions) {\n      if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n        String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n        if (isSupportedHttpRequest(nativeQueryString)) {\n          String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n          if (!\"select\".equals(requestHandlerString)) {\n            if (requestHandlerString.charAt(0) != '/') {\n              requestHandlerString=\"/\" + requestHandlerString;\n            }\n            solrQuery.setRequestHandler(requestHandlerString);\n          }\n          String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n          for (          String param : parameterString.split(\"&\")) {\n            String[] kv=param.split(\"=\");\n            if (kv.length != 2) {\n              throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n            }\n else {\n              if (\"stream.body\".equals(kv[0])) {\n                kv[0]=\"q\";\n                String mltFlString=\"mlt.fl=\";\n                int mltFlIndex=parameterString.indexOf(mltFlString);\n                if (mltFlIndex > -1) {\n                  int beginIndex=mltFlIndex + mltFlString.length();\n                  int endIndex=parameterString.indexOf('&',beginIndex);\n                  String fields;\n                  if (endIndex > beginIndex) {\n                    fields=parameterString.substring(beginIndex,endIndex);\n                  }\n else {\n                    fields=parameterString.substring(beginIndex);\n                  }\n                  kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n                }\n              }\n              solrQuery.setParam(kv[0],kv[1]);\n            }\n          }\n          return solrQuery;\n        }\n else {\n          queryBuilder.append(nativeQueryString);\n        }\n      }\n else {\n        if (pr.propertyName.contains(\"/\")) {\n          continue;\n        }\n        if (\"rep:excerpt\".equals(pr.propertyName)) {\n          continue;\n        }\n        String first=null;\n        if (pr.first != null) {\n          first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n        }\n        String last=null;\n        if (pr.last != null) {\n          last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n        }\n        String prField=configuration.getFieldForPropertyRestriction(pr);\n        CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n        if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n          queryBuilder.append(configuration.getPathField());\n          queryBuilder.append(':');\n          queryBuilder.append(first);\n        }\n else {\n          if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(first);\n          }\n else           if (pr.first == null && pr.last == null) {\n            if (!queryBuilder.toString().contains(fieldName + \":\")) {\n              queryBuilder.append(fieldName).append(':');\n              queryBuilder.append('*');\n            }\n          }\n else           if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n          }\n else           if (pr.isLike) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n          }\n else {\n            throw new RuntimeException(\"[unexpected!] not handled case\");\n          }\n        }\n      }\n      queryBuilder.append(\" \");\n    }\n  }\n  String[] pts=filter.getPrimaryTypes().toArray(new String[filter.getPrimaryTypes().size()]);\n  for (int i=0; i < pts.length; i++) {\n    String pt=pts[i];\n    if (i == 0) {\n      queryBuilder.append(\"(\");\n    }\n    if (i > 0 && i < pts.length) {\n      queryBuilder.append(\"OR \");\n    }\n    queryBuilder.append(\"jcr\\\\:primaryType\").append(':').append(partialEscape(pt)).append(\" \");\n    if (i == pts.length - 1) {\n      queryBuilder.append(\")\");\n      queryBuilder.append(' ');\n    }\n  }\n  Filter.PathRestriction pathRestriction=filter.getPathRestriction();\n  if (pathRestriction != null) {\n    String path=purgePath(filter);\n    String fieldName=configuration.getFieldForPathRestriction(pathRestriction);\n    if (fieldName != null) {\n      queryBuilder.append(fieldName);\n      queryBuilder.append(':');\n      queryBuilder.append(path);\n    }\n  }\n  if (queryBuilder.length() == 0) {\n    queryBuilder.append(\"*:*\");\n  }\n  String escapedQuery=queryBuilder.toString();\n  solrQuery.setQuery(escapedQuery);\n  if (log.isDebugEnabled()) {\n    log.debug(\"JCR query {} has been converted to Solr query {}\",filter.getQueryStatement(),solrQuery.toString());\n  }\n  return solrQuery;\n}\n",
                    "nodeType": "MethodDeclaration",
                    "astNodeNumber": 867,
                    "astHeight": 25
                }
            ],
            "currentLineData": {
                "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,expression]",
                "nodePosition": {
                    "charLength": 35,
                    "startLineNumber": 194,
                    "startColumnNumber": 35,
                    "endLineNumber": 194,
                    "endColumnNumber": 70
                },
                "nodeContext": "pr.first == null && pr.last == null",
                "nodeType": "InfixExpression",
                "astNodeNumber": 11,
                "astHeight": 4
            },
            "tokenLength": 1,
            "type": "org.apache.jackrabbit.oak.spi.query.Filter.PropertyRestriction"
        },
        {
            "nodeContext": "pr",
            "nodeType": "SimpleName",
            "nodePosition": {
                "charLength": 2,
                "startLineNumber": 194,
                "startColumnNumber": 55,
                "endLineNumber": 194,
                "endColumnNumber": 57
            },
            "astNodeNumber": 1,
            "astHeight": 1,
            "parentDataList": [
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.InfixExpression,leftOperand]",
                    "nodePosition": {
                        "charLength": 7,
                        "startLineNumber": 194,
                        "startColumnNumber": 55,
                        "endLineNumber": 194,
                        "endColumnNumber": 62
                    },
                    "nodeContext": "pr.last",
                    "nodeType": "QualifiedName",
                    "astNodeNumber": 3,
                    "astHeight": 2
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.InfixExpression,rightOperand]",
                    "nodePosition": {
                        "charLength": 15,
                        "startLineNumber": 194,
                        "startColumnNumber": 55,
                        "endLineNumber": 194,
                        "endColumnNumber": 70
                    },
                    "nodeContext": "pr.last == null",
                    "nodeType": "InfixExpression",
                    "astNodeNumber": 5,
                    "astHeight": 3
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,expression]",
                    "nodePosition": {
                        "charLength": 35,
                        "startLineNumber": 194,
                        "startColumnNumber": 35,
                        "endLineNumber": 194,
                        "endColumnNumber": 70
                    },
                    "nodeContext": "pr.first == null && pr.last == null",
                    "nodeType": "InfixExpression",
                    "astNodeNumber": 11,
                    "astHeight": 4
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 1260,
                        "startLineNumber": 194,
                        "startColumnNumber": 31,
                        "endLineNumber": 209,
                        "endColumnNumber": 25
                    },
                    "nodeContext": "if (pr.first == null && pr.last == null) {\n  if (!queryBuilder.toString().contains(fieldName + \":\")) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append('*');\n  }\n}\n else if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n}\n else if (pr.isLike) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n}\n else {\n  throw new RuntimeException(\"[unexpected!] not handled case\");\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 142,
                    "astHeight": 14
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 1490,
                        "startLineNumber": 191,
                        "startColumnNumber": 24,
                        "endLineNumber": 209,
                        "endColumnNumber": 25
                    },
                    "nodeContext": "if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(first);\n}\n else if (pr.first == null && pr.last == null) {\n  if (!queryBuilder.toString().contains(fieldName + \":\")) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append('*');\n  }\n}\n else if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n}\n else if (pr.isLike) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n}\n else {\n  throw new RuntimeException(\"[unexpected!] not handled case\");\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 177,
                    "astHeight": 15
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 1538,
                        "startLineNumber": 190,
                        "startColumnNumber": 27,
                        "endLineNumber": 210,
                        "endColumnNumber": 21
                    },
                    "nodeContext": "{\n  if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(first);\n  }\n else   if (pr.first == null && pr.last == null) {\n    if (!queryBuilder.toString().contains(fieldName + \":\")) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append('*');\n    }\n  }\n else   if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n  }\n else   if (pr.isLike) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n  }\n else {\n    throw new RuntimeException(\"[unexpected!] not handled case\");\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 178,
                    "astHeight": 16
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 1791,
                        "startLineNumber": 186,
                        "startColumnNumber": 20,
                        "endLineNumber": 210,
                        "endColumnNumber": 21
                    },
                    "nodeContext": "if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n  queryBuilder.append(configuration.getPathField());\n  queryBuilder.append(':');\n  queryBuilder.append(first);\n}\n else {\n  if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(first);\n  }\n else   if (pr.first == null && pr.last == null) {\n    if (!queryBuilder.toString().contains(fieldName + \":\")) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append('*');\n    }\n  }\n else   if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n  }\n else   if (pr.isLike) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n  }\n else {\n    throw new RuntimeException(\"[unexpected!] not handled case\");\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 203,
                    "astHeight": 17
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 2798,
                        "startLineNumber": 164,
                        "startColumnNumber": 23,
                        "endLineNumber": 211,
                        "endColumnNumber": 17
                    },
                    "nodeContext": "{\n  if (pr.propertyName.contains(\"/\")) {\n    continue;\n  }\n  if (\"rep:excerpt\".equals(pr.propertyName)) {\n    continue;\n  }\n  String first=null;\n  if (pr.first != null) {\n    first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n  }\n  String last=null;\n  if (pr.last != null) {\n    last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n  }\n  String prField=configuration.getFieldForPropertyRestriction(pr);\n  CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n  if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n    queryBuilder.append(configuration.getPathField());\n    queryBuilder.append(':');\n    queryBuilder.append(first);\n  }\n else {\n    if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(first);\n    }\n else     if (pr.first == null && pr.last == null) {\n      if (!queryBuilder.toString().contains(fieldName + \":\")) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append('*');\n      }\n    }\n else     if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n    }\n else     if (pr.isLike) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n    }\n else {\n      throw new RuntimeException(\"[unexpected!] not handled case\");\n    }\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 312,
                    "astHeight": 18
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5508,
                        "startLineNumber": 124,
                        "startColumnNumber": 16,
                        "endLineNumber": 211,
                        "endColumnNumber": 17
                    },
                    "nodeContext": "if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n  String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n  if (isSupportedHttpRequest(nativeQueryString)) {\n    String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n    if (!\"select\".equals(requestHandlerString)) {\n      if (requestHandlerString.charAt(0) != '/') {\n        requestHandlerString=\"/\" + requestHandlerString;\n      }\n      solrQuery.setRequestHandler(requestHandlerString);\n    }\n    String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n    for (    String param : parameterString.split(\"&\")) {\n      String[] kv=param.split(\"=\");\n      if (kv.length != 2) {\n        throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n      }\n else {\n        if (\"stream.body\".equals(kv[0])) {\n          kv[0]=\"q\";\n          String mltFlString=\"mlt.fl=\";\n          int mltFlIndex=parameterString.indexOf(mltFlString);\n          if (mltFlIndex > -1) {\n            int beginIndex=mltFlIndex + mltFlString.length();\n            int endIndex=parameterString.indexOf('&',beginIndex);\n            String fields;\n            if (endIndex > beginIndex) {\n              fields=parameterString.substring(beginIndex,endIndex);\n            }\n else {\n              fields=parameterString.substring(beginIndex);\n            }\n            kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n          }\n        }\n        solrQuery.setParam(kv[0],kv[1]);\n      }\n    }\n    return solrQuery;\n  }\n else {\n    queryBuilder.append(nativeQueryString);\n  }\n}\n else {\n  if (pr.propertyName.contains(\"/\")) {\n    continue;\n  }\n  if (\"rep:excerpt\".equals(pr.propertyName)) {\n    continue;\n  }\n  String first=null;\n  if (pr.first != null) {\n    first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n  }\n  String last=null;\n  if (pr.last != null) {\n    last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n  }\n  String prField=configuration.getFieldForPropertyRestriction(pr);\n  CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n  if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n    queryBuilder.append(configuration.getPathField());\n    queryBuilder.append(':');\n    queryBuilder.append(first);\n  }\n else {\n    if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(first);\n    }\n else     if (pr.first == null && pr.last == null) {\n      if (!queryBuilder.toString().contains(fieldName + \":\")) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append('*');\n      }\n    }\n else     if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n    }\n else     if (pr.isLike) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n    }\n else {\n      throw new RuntimeException(\"[unexpected!] not handled case\");\n    }\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 546,
                    "astHeight": 19
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.EnhancedForStatement,body]",
                    "nodePosition": {
                        "charLength": 5622,
                        "startLineNumber": 122,
                        "startColumnNumber": 71,
                        "endLineNumber": 213,
                        "endColumnNumber": 13
                    },
                    "nodeContext": "{\n  if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n    String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n    if (isSupportedHttpRequest(nativeQueryString)) {\n      String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n      if (!\"select\".equals(requestHandlerString)) {\n        if (requestHandlerString.charAt(0) != '/') {\n          requestHandlerString=\"/\" + requestHandlerString;\n        }\n        solrQuery.setRequestHandler(requestHandlerString);\n      }\n      String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n      for (      String param : parameterString.split(\"&\")) {\n        String[] kv=param.split(\"=\");\n        if (kv.length != 2) {\n          throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n        }\n else {\n          if (\"stream.body\".equals(kv[0])) {\n            kv[0]=\"q\";\n            String mltFlString=\"mlt.fl=\";\n            int mltFlIndex=parameterString.indexOf(mltFlString);\n            if (mltFlIndex > -1) {\n              int beginIndex=mltFlIndex + mltFlString.length();\n              int endIndex=parameterString.indexOf('&',beginIndex);\n              String fields;\n              if (endIndex > beginIndex) {\n                fields=parameterString.substring(beginIndex,endIndex);\n              }\n else {\n                fields=parameterString.substring(beginIndex);\n              }\n              kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n            }\n          }\n          solrQuery.setParam(kv[0],kv[1]);\n        }\n      }\n      return solrQuery;\n    }\n else {\n      queryBuilder.append(nativeQueryString);\n    }\n  }\n else {\n    if (pr.propertyName.contains(\"/\")) {\n      continue;\n    }\n    if (\"rep:excerpt\".equals(pr.propertyName)) {\n      continue;\n    }\n    String first=null;\n    if (pr.first != null) {\n      first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n    }\n    String last=null;\n    if (pr.last != null) {\n      last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n    }\n    String prField=configuration.getFieldForPropertyRestriction(pr);\n    CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n    if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n      queryBuilder.append(configuration.getPathField());\n      queryBuilder.append(':');\n      queryBuilder.append(first);\n    }\n else {\n      if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(first);\n      }\n else       if (pr.first == null && pr.last == null) {\n        if (!queryBuilder.toString().contains(fieldName + \":\")) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append('*');\n        }\n      }\n else       if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n      }\n else       if (pr.isLike) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n      }\n else {\n        throw new RuntimeException(\"[unexpected!] not handled case\");\n      }\n    }\n  }\n  queryBuilder.append(\" \");\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 552,
                    "astHeight": 20
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5681,
                        "startLineNumber": 122,
                        "startColumnNumber": 12,
                        "endLineNumber": 213,
                        "endColumnNumber": 13
                    },
                    "nodeContext": "for (Filter.PropertyRestriction pr : propertyRestrictions) {\n  if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n    String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n    if (isSupportedHttpRequest(nativeQueryString)) {\n      String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n      if (!\"select\".equals(requestHandlerString)) {\n        if (requestHandlerString.charAt(0) != '/') {\n          requestHandlerString=\"/\" + requestHandlerString;\n        }\n        solrQuery.setRequestHandler(requestHandlerString);\n      }\n      String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n      for (      String param : parameterString.split(\"&\")) {\n        String[] kv=param.split(\"=\");\n        if (kv.length != 2) {\n          throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n        }\n else {\n          if (\"stream.body\".equals(kv[0])) {\n            kv[0]=\"q\";\n            String mltFlString=\"mlt.fl=\";\n            int mltFlIndex=parameterString.indexOf(mltFlString);\n            if (mltFlIndex > -1) {\n              int beginIndex=mltFlIndex + mltFlString.length();\n              int endIndex=parameterString.indexOf('&',beginIndex);\n              String fields;\n              if (endIndex > beginIndex) {\n                fields=parameterString.substring(beginIndex,endIndex);\n              }\n else {\n                fields=parameterString.substring(beginIndex);\n              }\n              kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n            }\n          }\n          solrQuery.setParam(kv[0],kv[1]);\n        }\n      }\n      return solrQuery;\n    }\n else {\n      queryBuilder.append(nativeQueryString);\n    }\n  }\n else {\n    if (pr.propertyName.contains(\"/\")) {\n      continue;\n    }\n    if (\"rep:excerpt\".equals(pr.propertyName)) {\n      continue;\n    }\n    String first=null;\n    if (pr.first != null) {\n      first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n    }\n    String last=null;\n    if (pr.last != null) {\n      last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n    }\n    String prField=configuration.getFieldForPropertyRestriction(pr);\n    CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n    if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n      queryBuilder.append(configuration.getPathField());\n      queryBuilder.append(':');\n      queryBuilder.append(first);\n    }\n else {\n      if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(first);\n      }\n else       if (pr.first == null && pr.last == null) {\n        if (!queryBuilder.toString().contains(fieldName + \":\")) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append('*');\n        }\n      }\n else       if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n      }\n else       if (pr.isLike) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n      }\n else {\n        throw new RuntimeException(\"[unexpected!] not handled case\");\n      }\n    }\n  }\n  queryBuilder.append(\" \");\n}\n",
                    "nodeType": "EnhancedForStatement",
                    "astNodeNumber": 560,
                    "astHeight": 21
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,thenStatement]",
                    "nodePosition": {
                        "charLength": 5705,
                        "startLineNumber": 121,
                        "startColumnNumber": 77,
                        "endLineNumber": 214,
                        "endColumnNumber": 9
                    },
                    "nodeContext": "{\n  for (  Filter.PropertyRestriction pr : propertyRestrictions) {\n    if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n      String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n      if (isSupportedHttpRequest(nativeQueryString)) {\n        String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n        if (!\"select\".equals(requestHandlerString)) {\n          if (requestHandlerString.charAt(0) != '/') {\n            requestHandlerString=\"/\" + requestHandlerString;\n          }\n          solrQuery.setRequestHandler(requestHandlerString);\n        }\n        String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n        for (        String param : parameterString.split(\"&\")) {\n          String[] kv=param.split(\"=\");\n          if (kv.length != 2) {\n            throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n          }\n else {\n            if (\"stream.body\".equals(kv[0])) {\n              kv[0]=\"q\";\n              String mltFlString=\"mlt.fl=\";\n              int mltFlIndex=parameterString.indexOf(mltFlString);\n              if (mltFlIndex > -1) {\n                int beginIndex=mltFlIndex + mltFlString.length();\n                int endIndex=parameterString.indexOf('&',beginIndex);\n                String fields;\n                if (endIndex > beginIndex) {\n                  fields=parameterString.substring(beginIndex,endIndex);\n                }\n else {\n                  fields=parameterString.substring(beginIndex);\n                }\n                kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n              }\n            }\n            solrQuery.setParam(kv[0],kv[1]);\n          }\n        }\n        return solrQuery;\n      }\n else {\n        queryBuilder.append(nativeQueryString);\n      }\n    }\n else {\n      if (pr.propertyName.contains(\"/\")) {\n        continue;\n      }\n      if (\"rep:excerpt\".equals(pr.propertyName)) {\n        continue;\n      }\n      String first=null;\n      if (pr.first != null) {\n        first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n      }\n      String last=null;\n      if (pr.last != null) {\n        last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n      }\n      String prField=configuration.getFieldForPropertyRestriction(pr);\n      CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n      if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n        queryBuilder.append(configuration.getPathField());\n        queryBuilder.append(':');\n        queryBuilder.append(first);\n      }\n else {\n        if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(first);\n        }\n else         if (pr.first == null && pr.last == null) {\n          if (!queryBuilder.toString().contains(fieldName + \":\")) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append('*');\n          }\n        }\n else         if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n        }\n else         if (pr.isLike) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n        }\n else {\n          throw new RuntimeException(\"[unexpected!] not handled case\");\n        }\n      }\n    }\n    queryBuilder.append(\" \");\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 561,
                    "astHeight": 22
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5774,
                        "startLineNumber": 121,
                        "startColumnNumber": 8,
                        "endLineNumber": 214,
                        "endColumnNumber": 9
                    },
                    "nodeContext": "if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n  for (  Filter.PropertyRestriction pr : propertyRestrictions) {\n    if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n      String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n      if (isSupportedHttpRequest(nativeQueryString)) {\n        String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n        if (!\"select\".equals(requestHandlerString)) {\n          if (requestHandlerString.charAt(0) != '/') {\n            requestHandlerString=\"/\" + requestHandlerString;\n          }\n          solrQuery.setRequestHandler(requestHandlerString);\n        }\n        String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n        for (        String param : parameterString.split(\"&\")) {\n          String[] kv=param.split(\"=\");\n          if (kv.length != 2) {\n            throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n          }\n else {\n            if (\"stream.body\".equals(kv[0])) {\n              kv[0]=\"q\";\n              String mltFlString=\"mlt.fl=\";\n              int mltFlIndex=parameterString.indexOf(mltFlString);\n              if (mltFlIndex > -1) {\n                int beginIndex=mltFlIndex + mltFlString.length();\n                int endIndex=parameterString.indexOf('&',beginIndex);\n                String fields;\n                if (endIndex > beginIndex) {\n                  fields=parameterString.substring(beginIndex,endIndex);\n                }\n else {\n                  fields=parameterString.substring(beginIndex);\n                }\n                kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n              }\n            }\n            solrQuery.setParam(kv[0],kv[1]);\n          }\n        }\n        return solrQuery;\n      }\n else {\n        queryBuilder.append(nativeQueryString);\n      }\n    }\n else {\n      if (pr.propertyName.contains(\"/\")) {\n        continue;\n      }\n      if (\"rep:excerpt\".equals(pr.propertyName)) {\n        continue;\n      }\n      String first=null;\n      if (pr.first != null) {\n        first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n      }\n      String last=null;\n      if (pr.last != null) {\n        last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n      }\n      String prField=configuration.getFieldForPropertyRestriction(pr);\n      CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n      if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n        queryBuilder.append(configuration.getPathField());\n        queryBuilder.append(':');\n        queryBuilder.append(first);\n      }\n else {\n        if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(first);\n        }\n else         if (pr.first == null && pr.last == null) {\n          if (!queryBuilder.toString().contains(fieldName + \":\")) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append('*');\n          }\n        }\n else         if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n        }\n else         if (pr.isLike) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n        }\n else {\n          throw new RuntimeException(\"[unexpected!] not handled case\");\n        }\n      }\n    }\n    queryBuilder.append(\" \");\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 570,
                    "astHeight": 23
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.MethodDeclaration,body]",
                    "nodePosition": {
                        "charLength": 7985,
                        "startLineNumber": 103,
                        "startColumnNumber": 46,
                        "endLineNumber": 255,
                        "endColumnNumber": 5
                    },
                    "nodeContext": "{\n  SolrQuery solrQuery=new SolrQuery();\n  setDefaults(solrQuery);\n  StringBuilder queryBuilder=new StringBuilder();\n  if (filter.getFullTextConstraint() != null) {\n    queryBuilder.append(getFullTextQuery(filter.getFullTextConstraint()));\n    queryBuilder.append(' ');\n  }\n else   if (filter.getFulltextConditions() != null) {\n    Collection<String> fulltextConditions=filter.getFulltextConditions();\n    for (    String fulltextCondition : fulltextConditions) {\n      queryBuilder.append(fulltextCondition).append(\" \");\n    }\n  }\n  Collection<Filter.PropertyRestriction> propertyRestrictions=filter.getPropertyRestrictions();\n  if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n    for (    Filter.PropertyRestriction pr : propertyRestrictions) {\n      if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n        String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n        if (isSupportedHttpRequest(nativeQueryString)) {\n          String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n          if (!\"select\".equals(requestHandlerString)) {\n            if (requestHandlerString.charAt(0) != '/') {\n              requestHandlerString=\"/\" + requestHandlerString;\n            }\n            solrQuery.setRequestHandler(requestHandlerString);\n          }\n          String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n          for (          String param : parameterString.split(\"&\")) {\n            String[] kv=param.split(\"=\");\n            if (kv.length != 2) {\n              throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n            }\n else {\n              if (\"stream.body\".equals(kv[0])) {\n                kv[0]=\"q\";\n                String mltFlString=\"mlt.fl=\";\n                int mltFlIndex=parameterString.indexOf(mltFlString);\n                if (mltFlIndex > -1) {\n                  int beginIndex=mltFlIndex + mltFlString.length();\n                  int endIndex=parameterString.indexOf('&',beginIndex);\n                  String fields;\n                  if (endIndex > beginIndex) {\n                    fields=parameterString.substring(beginIndex,endIndex);\n                  }\n else {\n                    fields=parameterString.substring(beginIndex);\n                  }\n                  kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n                }\n              }\n              solrQuery.setParam(kv[0],kv[1]);\n            }\n          }\n          return solrQuery;\n        }\n else {\n          queryBuilder.append(nativeQueryString);\n        }\n      }\n else {\n        if (pr.propertyName.contains(\"/\")) {\n          continue;\n        }\n        if (\"rep:excerpt\".equals(pr.propertyName)) {\n          continue;\n        }\n        String first=null;\n        if (pr.first != null) {\n          first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n        }\n        String last=null;\n        if (pr.last != null) {\n          last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n        }\n        String prField=configuration.getFieldForPropertyRestriction(pr);\n        CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n        if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n          queryBuilder.append(configuration.getPathField());\n          queryBuilder.append(':');\n          queryBuilder.append(first);\n        }\n else {\n          if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(first);\n          }\n else           if (pr.first == null && pr.last == null) {\n            if (!queryBuilder.toString().contains(fieldName + \":\")) {\n              queryBuilder.append(fieldName).append(':');\n              queryBuilder.append('*');\n            }\n          }\n else           if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n          }\n else           if (pr.isLike) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n          }\n else {\n            throw new RuntimeException(\"[unexpected!] not handled case\");\n          }\n        }\n      }\n      queryBuilder.append(\" \");\n    }\n  }\n  String[] pts=filter.getPrimaryTypes().toArray(new String[filter.getPrimaryTypes().size()]);\n  for (int i=0; i < pts.length; i++) {\n    String pt=pts[i];\n    if (i == 0) {\n      queryBuilder.append(\"(\");\n    }\n    if (i > 0 && i < pts.length) {\n      queryBuilder.append(\"OR \");\n    }\n    queryBuilder.append(\"jcr\\\\:primaryType\").append(':').append(partialEscape(pt)).append(\" \");\n    if (i == pts.length - 1) {\n      queryBuilder.append(\")\");\n      queryBuilder.append(' ');\n    }\n  }\n  Filter.PathRestriction pathRestriction=filter.getPathRestriction();\n  if (pathRestriction != null) {\n    String path=purgePath(filter);\n    String fieldName=configuration.getFieldForPathRestriction(pathRestriction);\n    if (fieldName != null) {\n      queryBuilder.append(fieldName);\n      queryBuilder.append(':');\n      queryBuilder.append(path);\n    }\n  }\n  if (queryBuilder.length() == 0) {\n    queryBuilder.append(\"*:*\");\n  }\n  String escapedQuery=queryBuilder.toString();\n  solrQuery.setQuery(escapedQuery);\n  if (log.isDebugEnabled()) {\n    log.debug(\"JCR query {} has been converted to Solr query {}\",filter.getQueryStatement(),solrQuery.toString());\n  }\n  return solrQuery;\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 858,
                    "astHeight": 24
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.TypeDeclaration,bodyDeclarations]",
                    "nodePosition": {
                        "charLength": 8027,
                        "startLineNumber": 103,
                        "startColumnNumber": 4,
                        "endLineNumber": 255,
                        "endColumnNumber": 5
                    },
                    "nodeContext": "private SolrQuery getQuery(Filter filter){\n  SolrQuery solrQuery=new SolrQuery();\n  setDefaults(solrQuery);\n  StringBuilder queryBuilder=new StringBuilder();\n  if (filter.getFullTextConstraint() != null) {\n    queryBuilder.append(getFullTextQuery(filter.getFullTextConstraint()));\n    queryBuilder.append(' ');\n  }\n else   if (filter.getFulltextConditions() != null) {\n    Collection<String> fulltextConditions=filter.getFulltextConditions();\n    for (    String fulltextCondition : fulltextConditions) {\n      queryBuilder.append(fulltextCondition).append(\" \");\n    }\n  }\n  Collection<Filter.PropertyRestriction> propertyRestrictions=filter.getPropertyRestrictions();\n  if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n    for (    Filter.PropertyRestriction pr : propertyRestrictions) {\n      if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n        String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n        if (isSupportedHttpRequest(nativeQueryString)) {\n          String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n          if (!\"select\".equals(requestHandlerString)) {\n            if (requestHandlerString.charAt(0) != '/') {\n              requestHandlerString=\"/\" + requestHandlerString;\n            }\n            solrQuery.setRequestHandler(requestHandlerString);\n          }\n          String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n          for (          String param : parameterString.split(\"&\")) {\n            String[] kv=param.split(\"=\");\n            if (kv.length != 2) {\n              throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n            }\n else {\n              if (\"stream.body\".equals(kv[0])) {\n                kv[0]=\"q\";\n                String mltFlString=\"mlt.fl=\";\n                int mltFlIndex=parameterString.indexOf(mltFlString);\n                if (mltFlIndex > -1) {\n                  int beginIndex=mltFlIndex + mltFlString.length();\n                  int endIndex=parameterString.indexOf('&',beginIndex);\n                  String fields;\n                  if (endIndex > beginIndex) {\n                    fields=parameterString.substring(beginIndex,endIndex);\n                  }\n else {\n                    fields=parameterString.substring(beginIndex);\n                  }\n                  kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n                }\n              }\n              solrQuery.setParam(kv[0],kv[1]);\n            }\n          }\n          return solrQuery;\n        }\n else {\n          queryBuilder.append(nativeQueryString);\n        }\n      }\n else {\n        if (pr.propertyName.contains(\"/\")) {\n          continue;\n        }\n        if (\"rep:excerpt\".equals(pr.propertyName)) {\n          continue;\n        }\n        String first=null;\n        if (pr.first != null) {\n          first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n        }\n        String last=null;\n        if (pr.last != null) {\n          last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n        }\n        String prField=configuration.getFieldForPropertyRestriction(pr);\n        CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n        if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n          queryBuilder.append(configuration.getPathField());\n          queryBuilder.append(':');\n          queryBuilder.append(first);\n        }\n else {\n          if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(first);\n          }\n else           if (pr.first == null && pr.last == null) {\n            if (!queryBuilder.toString().contains(fieldName + \":\")) {\n              queryBuilder.append(fieldName).append(':');\n              queryBuilder.append('*');\n            }\n          }\n else           if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n          }\n else           if (pr.isLike) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n          }\n else {\n            throw new RuntimeException(\"[unexpected!] not handled case\");\n          }\n        }\n      }\n      queryBuilder.append(\" \");\n    }\n  }\n  String[] pts=filter.getPrimaryTypes().toArray(new String[filter.getPrimaryTypes().size()]);\n  for (int i=0; i < pts.length; i++) {\n    String pt=pts[i];\n    if (i == 0) {\n      queryBuilder.append(\"(\");\n    }\n    if (i > 0 && i < pts.length) {\n      queryBuilder.append(\"OR \");\n    }\n    queryBuilder.append(\"jcr\\\\:primaryType\").append(':').append(partialEscape(pt)).append(\" \");\n    if (i == pts.length - 1) {\n      queryBuilder.append(\")\");\n      queryBuilder.append(' ');\n    }\n  }\n  Filter.PathRestriction pathRestriction=filter.getPathRestriction();\n  if (pathRestriction != null) {\n    String path=purgePath(filter);\n    String fieldName=configuration.getFieldForPathRestriction(pathRestriction);\n    if (fieldName != null) {\n      queryBuilder.append(fieldName);\n      queryBuilder.append(':');\n      queryBuilder.append(path);\n    }\n  }\n  if (queryBuilder.length() == 0) {\n    queryBuilder.append(\"*:*\");\n  }\n  String escapedQuery=queryBuilder.toString();\n  solrQuery.setQuery(escapedQuery);\n  if (log.isDebugEnabled()) {\n    log.debug(\"JCR query {} has been converted to Solr query {}\",filter.getQueryStatement(),solrQuery.toString());\n  }\n  return solrQuery;\n}\n",
                    "nodeType": "MethodDeclaration",
                    "astNodeNumber": 867,
                    "astHeight": 25
                }
            ],
            "currentLineData": {
                "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,expression]",
                "nodePosition": {
                    "charLength": 35,
                    "startLineNumber": 194,
                    "startColumnNumber": 35,
                    "endLineNumber": 194,
                    "endColumnNumber": 70
                },
                "nodeContext": "pr.first == null && pr.last == null",
                "nodeType": "InfixExpression",
                "astNodeNumber": 11,
                "astHeight": 4
            },
            "tokenLength": 1,
            "type": "org.apache.jackrabbit.oak.spi.query.Filter.PropertyRestriction"
        },
        {
            "nodeContext": "pr",
            "nodeType": "SimpleName",
            "nodePosition": {
                "charLength": 2,
                "startLineNumber": 199,
                "startColumnNumber": 36,
                "endLineNumber": 199,
                "endColumnNumber": 38
            },
            "astNodeNumber": 1,
            "astHeight": 1,
            "parentDataList": [
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.InfixExpression,leftOperand]",
                    "nodePosition": {
                        "charLength": 8,
                        "startLineNumber": 199,
                        "startColumnNumber": 36,
                        "endLineNumber": 199,
                        "endColumnNumber": 44
                    },
                    "nodeContext": "pr.first",
                    "nodeType": "QualifiedName",
                    "astNodeNumber": 3,
                    "astHeight": 2
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.InfixExpression,leftOperand]",
                    "nodePosition": {
                        "charLength": 16,
                        "startLineNumber": 199,
                        "startColumnNumber": 36,
                        "endLineNumber": 199,
                        "endColumnNumber": 52
                    },
                    "nodeContext": "pr.first != null",
                    "nodeType": "InfixExpression",
                    "astNodeNumber": 5,
                    "astHeight": 3
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.ParenthesizedExpression,expression]",
                    "nodePosition": {
                        "charLength": 35,
                        "startLineNumber": 199,
                        "startColumnNumber": 36,
                        "endLineNumber": 199,
                        "endColumnNumber": 71
                    },
                    "nodeContext": "pr.first != null && pr.last == null",
                    "nodeType": "InfixExpression",
                    "astNodeNumber": 11,
                    "astHeight": 4
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.InfixExpression,leftOperand]",
                    "nodePosition": {
                        "charLength": 37,
                        "startLineNumber": 199,
                        "startColumnNumber": 35,
                        "endLineNumber": 199,
                        "endColumnNumber": 72
                    },
                    "nodeContext": "(pr.first != null && pr.last == null)",
                    "nodeType": "ParenthesizedExpression",
                    "astNodeNumber": 12,
                    "astHeight": 5
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,expression]",
                    "nodePosition": {
                        "charLength": 109,
                        "startLineNumber": 199,
                        "startColumnNumber": 35,
                        "endLineNumber": 199,
                        "endColumnNumber": 144
                    },
                    "nodeContext": "(pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))",
                    "nodeType": "InfixExpression",
                    "astNodeNumber": 35,
                    "astHeight": 6
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 936,
                        "startLineNumber": 199,
                        "startColumnNumber": 31,
                        "endLineNumber": 209,
                        "endColumnNumber": 25
                    },
                    "nodeContext": "if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n}\n else if (pr.isLike) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n}\n else {\n  throw new RuntimeException(\"[unexpected!] not handled case\");\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 105,
                    "astHeight": 13
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 1260,
                        "startLineNumber": 194,
                        "startColumnNumber": 31,
                        "endLineNumber": 209,
                        "endColumnNumber": 25
                    },
                    "nodeContext": "if (pr.first == null && pr.last == null) {\n  if (!queryBuilder.toString().contains(fieldName + \":\")) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append('*');\n  }\n}\n else if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n}\n else if (pr.isLike) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n}\n else {\n  throw new RuntimeException(\"[unexpected!] not handled case\");\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 142,
                    "astHeight": 14
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 1490,
                        "startLineNumber": 191,
                        "startColumnNumber": 24,
                        "endLineNumber": 209,
                        "endColumnNumber": 25
                    },
                    "nodeContext": "if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(first);\n}\n else if (pr.first == null && pr.last == null) {\n  if (!queryBuilder.toString().contains(fieldName + \":\")) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append('*');\n  }\n}\n else if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n}\n else if (pr.isLike) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n}\n else {\n  throw new RuntimeException(\"[unexpected!] not handled case\");\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 177,
                    "astHeight": 15
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 1538,
                        "startLineNumber": 190,
                        "startColumnNumber": 27,
                        "endLineNumber": 210,
                        "endColumnNumber": 21
                    },
                    "nodeContext": "{\n  if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(first);\n  }\n else   if (pr.first == null && pr.last == null) {\n    if (!queryBuilder.toString().contains(fieldName + \":\")) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append('*');\n    }\n  }\n else   if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n  }\n else   if (pr.isLike) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n  }\n else {\n    throw new RuntimeException(\"[unexpected!] not handled case\");\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 178,
                    "astHeight": 16
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 1791,
                        "startLineNumber": 186,
                        "startColumnNumber": 20,
                        "endLineNumber": 210,
                        "endColumnNumber": 21
                    },
                    "nodeContext": "if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n  queryBuilder.append(configuration.getPathField());\n  queryBuilder.append(':');\n  queryBuilder.append(first);\n}\n else {\n  if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(first);\n  }\n else   if (pr.first == null && pr.last == null) {\n    if (!queryBuilder.toString().contains(fieldName + \":\")) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append('*');\n    }\n  }\n else   if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n  }\n else   if (pr.isLike) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n  }\n else {\n    throw new RuntimeException(\"[unexpected!] not handled case\");\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 203,
                    "astHeight": 17
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 2798,
                        "startLineNumber": 164,
                        "startColumnNumber": 23,
                        "endLineNumber": 211,
                        "endColumnNumber": 17
                    },
                    "nodeContext": "{\n  if (pr.propertyName.contains(\"/\")) {\n    continue;\n  }\n  if (\"rep:excerpt\".equals(pr.propertyName)) {\n    continue;\n  }\n  String first=null;\n  if (pr.first != null) {\n    first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n  }\n  String last=null;\n  if (pr.last != null) {\n    last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n  }\n  String prField=configuration.getFieldForPropertyRestriction(pr);\n  CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n  if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n    queryBuilder.append(configuration.getPathField());\n    queryBuilder.append(':');\n    queryBuilder.append(first);\n  }\n else {\n    if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(first);\n    }\n else     if (pr.first == null && pr.last == null) {\n      if (!queryBuilder.toString().contains(fieldName + \":\")) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append('*');\n      }\n    }\n else     if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n    }\n else     if (pr.isLike) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n    }\n else {\n      throw new RuntimeException(\"[unexpected!] not handled case\");\n    }\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 312,
                    "astHeight": 18
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5508,
                        "startLineNumber": 124,
                        "startColumnNumber": 16,
                        "endLineNumber": 211,
                        "endColumnNumber": 17
                    },
                    "nodeContext": "if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n  String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n  if (isSupportedHttpRequest(nativeQueryString)) {\n    String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n    if (!\"select\".equals(requestHandlerString)) {\n      if (requestHandlerString.charAt(0) != '/') {\n        requestHandlerString=\"/\" + requestHandlerString;\n      }\n      solrQuery.setRequestHandler(requestHandlerString);\n    }\n    String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n    for (    String param : parameterString.split(\"&\")) {\n      String[] kv=param.split(\"=\");\n      if (kv.length != 2) {\n        throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n      }\n else {\n        if (\"stream.body\".equals(kv[0])) {\n          kv[0]=\"q\";\n          String mltFlString=\"mlt.fl=\";\n          int mltFlIndex=parameterString.indexOf(mltFlString);\n          if (mltFlIndex > -1) {\n            int beginIndex=mltFlIndex + mltFlString.length();\n            int endIndex=parameterString.indexOf('&',beginIndex);\n            String fields;\n            if (endIndex > beginIndex) {\n              fields=parameterString.substring(beginIndex,endIndex);\n            }\n else {\n              fields=parameterString.substring(beginIndex);\n            }\n            kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n          }\n        }\n        solrQuery.setParam(kv[0],kv[1]);\n      }\n    }\n    return solrQuery;\n  }\n else {\n    queryBuilder.append(nativeQueryString);\n  }\n}\n else {\n  if (pr.propertyName.contains(\"/\")) {\n    continue;\n  }\n  if (\"rep:excerpt\".equals(pr.propertyName)) {\n    continue;\n  }\n  String first=null;\n  if (pr.first != null) {\n    first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n  }\n  String last=null;\n  if (pr.last != null) {\n    last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n  }\n  String prField=configuration.getFieldForPropertyRestriction(pr);\n  CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n  if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n    queryBuilder.append(configuration.getPathField());\n    queryBuilder.append(':');\n    queryBuilder.append(first);\n  }\n else {\n    if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(first);\n    }\n else     if (pr.first == null && pr.last == null) {\n      if (!queryBuilder.toString().contains(fieldName + \":\")) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append('*');\n      }\n    }\n else     if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n    }\n else     if (pr.isLike) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n    }\n else {\n      throw new RuntimeException(\"[unexpected!] not handled case\");\n    }\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 546,
                    "astHeight": 19
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.EnhancedForStatement,body]",
                    "nodePosition": {
                        "charLength": 5622,
                        "startLineNumber": 122,
                        "startColumnNumber": 71,
                        "endLineNumber": 213,
                        "endColumnNumber": 13
                    },
                    "nodeContext": "{\n  if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n    String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n    if (isSupportedHttpRequest(nativeQueryString)) {\n      String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n      if (!\"select\".equals(requestHandlerString)) {\n        if (requestHandlerString.charAt(0) != '/') {\n          requestHandlerString=\"/\" + requestHandlerString;\n        }\n        solrQuery.setRequestHandler(requestHandlerString);\n      }\n      String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n      for (      String param : parameterString.split(\"&\")) {\n        String[] kv=param.split(\"=\");\n        if (kv.length != 2) {\n          throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n        }\n else {\n          if (\"stream.body\".equals(kv[0])) {\n            kv[0]=\"q\";\n            String mltFlString=\"mlt.fl=\";\n            int mltFlIndex=parameterString.indexOf(mltFlString);\n            if (mltFlIndex > -1) {\n              int beginIndex=mltFlIndex + mltFlString.length();\n              int endIndex=parameterString.indexOf('&',beginIndex);\n              String fields;\n              if (endIndex > beginIndex) {\n                fields=parameterString.substring(beginIndex,endIndex);\n              }\n else {\n                fields=parameterString.substring(beginIndex);\n              }\n              kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n            }\n          }\n          solrQuery.setParam(kv[0],kv[1]);\n        }\n      }\n      return solrQuery;\n    }\n else {\n      queryBuilder.append(nativeQueryString);\n    }\n  }\n else {\n    if (pr.propertyName.contains(\"/\")) {\n      continue;\n    }\n    if (\"rep:excerpt\".equals(pr.propertyName)) {\n      continue;\n    }\n    String first=null;\n    if (pr.first != null) {\n      first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n    }\n    String last=null;\n    if (pr.last != null) {\n      last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n    }\n    String prField=configuration.getFieldForPropertyRestriction(pr);\n    CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n    if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n      queryBuilder.append(configuration.getPathField());\n      queryBuilder.append(':');\n      queryBuilder.append(first);\n    }\n else {\n      if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(first);\n      }\n else       if (pr.first == null && pr.last == null) {\n        if (!queryBuilder.toString().contains(fieldName + \":\")) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append('*');\n        }\n      }\n else       if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n      }\n else       if (pr.isLike) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n      }\n else {\n        throw new RuntimeException(\"[unexpected!] not handled case\");\n      }\n    }\n  }\n  queryBuilder.append(\" \");\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 552,
                    "astHeight": 20
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5681,
                        "startLineNumber": 122,
                        "startColumnNumber": 12,
                        "endLineNumber": 213,
                        "endColumnNumber": 13
                    },
                    "nodeContext": "for (Filter.PropertyRestriction pr : propertyRestrictions) {\n  if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n    String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n    if (isSupportedHttpRequest(nativeQueryString)) {\n      String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n      if (!\"select\".equals(requestHandlerString)) {\n        if (requestHandlerString.charAt(0) != '/') {\n          requestHandlerString=\"/\" + requestHandlerString;\n        }\n        solrQuery.setRequestHandler(requestHandlerString);\n      }\n      String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n      for (      String param : parameterString.split(\"&\")) {\n        String[] kv=param.split(\"=\");\n        if (kv.length != 2) {\n          throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n        }\n else {\n          if (\"stream.body\".equals(kv[0])) {\n            kv[0]=\"q\";\n            String mltFlString=\"mlt.fl=\";\n            int mltFlIndex=parameterString.indexOf(mltFlString);\n            if (mltFlIndex > -1) {\n              int beginIndex=mltFlIndex + mltFlString.length();\n              int endIndex=parameterString.indexOf('&',beginIndex);\n              String fields;\n              if (endIndex > beginIndex) {\n                fields=parameterString.substring(beginIndex,endIndex);\n              }\n else {\n                fields=parameterString.substring(beginIndex);\n              }\n              kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n            }\n          }\n          solrQuery.setParam(kv[0],kv[1]);\n        }\n      }\n      return solrQuery;\n    }\n else {\n      queryBuilder.append(nativeQueryString);\n    }\n  }\n else {\n    if (pr.propertyName.contains(\"/\")) {\n      continue;\n    }\n    if (\"rep:excerpt\".equals(pr.propertyName)) {\n      continue;\n    }\n    String first=null;\n    if (pr.first != null) {\n      first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n    }\n    String last=null;\n    if (pr.last != null) {\n      last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n    }\n    String prField=configuration.getFieldForPropertyRestriction(pr);\n    CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n    if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n      queryBuilder.append(configuration.getPathField());\n      queryBuilder.append(':');\n      queryBuilder.append(first);\n    }\n else {\n      if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(first);\n      }\n else       if (pr.first == null && pr.last == null) {\n        if (!queryBuilder.toString().contains(fieldName + \":\")) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append('*');\n        }\n      }\n else       if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n      }\n else       if (pr.isLike) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n      }\n else {\n        throw new RuntimeException(\"[unexpected!] not handled case\");\n      }\n    }\n  }\n  queryBuilder.append(\" \");\n}\n",
                    "nodeType": "EnhancedForStatement",
                    "astNodeNumber": 560,
                    "astHeight": 21
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,thenStatement]",
                    "nodePosition": {
                        "charLength": 5705,
                        "startLineNumber": 121,
                        "startColumnNumber": 77,
                        "endLineNumber": 214,
                        "endColumnNumber": 9
                    },
                    "nodeContext": "{\n  for (  Filter.PropertyRestriction pr : propertyRestrictions) {\n    if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n      String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n      if (isSupportedHttpRequest(nativeQueryString)) {\n        String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n        if (!\"select\".equals(requestHandlerString)) {\n          if (requestHandlerString.charAt(0) != '/') {\n            requestHandlerString=\"/\" + requestHandlerString;\n          }\n          solrQuery.setRequestHandler(requestHandlerString);\n        }\n        String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n        for (        String param : parameterString.split(\"&\")) {\n          String[] kv=param.split(\"=\");\n          if (kv.length != 2) {\n            throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n          }\n else {\n            if (\"stream.body\".equals(kv[0])) {\n              kv[0]=\"q\";\n              String mltFlString=\"mlt.fl=\";\n              int mltFlIndex=parameterString.indexOf(mltFlString);\n              if (mltFlIndex > -1) {\n                int beginIndex=mltFlIndex + mltFlString.length();\n                int endIndex=parameterString.indexOf('&',beginIndex);\n                String fields;\n                if (endIndex > beginIndex) {\n                  fields=parameterString.substring(beginIndex,endIndex);\n                }\n else {\n                  fields=parameterString.substring(beginIndex);\n                }\n                kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n              }\n            }\n            solrQuery.setParam(kv[0],kv[1]);\n          }\n        }\n        return solrQuery;\n      }\n else {\n        queryBuilder.append(nativeQueryString);\n      }\n    }\n else {\n      if (pr.propertyName.contains(\"/\")) {\n        continue;\n      }\n      if (\"rep:excerpt\".equals(pr.propertyName)) {\n        continue;\n      }\n      String first=null;\n      if (pr.first != null) {\n        first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n      }\n      String last=null;\n      if (pr.last != null) {\n        last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n      }\n      String prField=configuration.getFieldForPropertyRestriction(pr);\n      CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n      if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n        queryBuilder.append(configuration.getPathField());\n        queryBuilder.append(':');\n        queryBuilder.append(first);\n      }\n else {\n        if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(first);\n        }\n else         if (pr.first == null && pr.last == null) {\n          if (!queryBuilder.toString().contains(fieldName + \":\")) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append('*');\n          }\n        }\n else         if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n        }\n else         if (pr.isLike) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n        }\n else {\n          throw new RuntimeException(\"[unexpected!] not handled case\");\n        }\n      }\n    }\n    queryBuilder.append(\" \");\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 561,
                    "astHeight": 22
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5774,
                        "startLineNumber": 121,
                        "startColumnNumber": 8,
                        "endLineNumber": 214,
                        "endColumnNumber": 9
                    },
                    "nodeContext": "if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n  for (  Filter.PropertyRestriction pr : propertyRestrictions) {\n    if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n      String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n      if (isSupportedHttpRequest(nativeQueryString)) {\n        String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n        if (!\"select\".equals(requestHandlerString)) {\n          if (requestHandlerString.charAt(0) != '/') {\n            requestHandlerString=\"/\" + requestHandlerString;\n          }\n          solrQuery.setRequestHandler(requestHandlerString);\n        }\n        String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n        for (        String param : parameterString.split(\"&\")) {\n          String[] kv=param.split(\"=\");\n          if (kv.length != 2) {\n            throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n          }\n else {\n            if (\"stream.body\".equals(kv[0])) {\n              kv[0]=\"q\";\n              String mltFlString=\"mlt.fl=\";\n              int mltFlIndex=parameterString.indexOf(mltFlString);\n              if (mltFlIndex > -1) {\n                int beginIndex=mltFlIndex + mltFlString.length();\n                int endIndex=parameterString.indexOf('&',beginIndex);\n                String fields;\n                if (endIndex > beginIndex) {\n                  fields=parameterString.substring(beginIndex,endIndex);\n                }\n else {\n                  fields=parameterString.substring(beginIndex);\n                }\n                kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n              }\n            }\n            solrQuery.setParam(kv[0],kv[1]);\n          }\n        }\n        return solrQuery;\n      }\n else {\n        queryBuilder.append(nativeQueryString);\n      }\n    }\n else {\n      if (pr.propertyName.contains(\"/\")) {\n        continue;\n      }\n      if (\"rep:excerpt\".equals(pr.propertyName)) {\n        continue;\n      }\n      String first=null;\n      if (pr.first != null) {\n        first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n      }\n      String last=null;\n      if (pr.last != null) {\n        last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n      }\n      String prField=configuration.getFieldForPropertyRestriction(pr);\n      CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n      if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n        queryBuilder.append(configuration.getPathField());\n        queryBuilder.append(':');\n        queryBuilder.append(first);\n      }\n else {\n        if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(first);\n        }\n else         if (pr.first == null && pr.last == null) {\n          if (!queryBuilder.toString().contains(fieldName + \":\")) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append('*');\n          }\n        }\n else         if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n        }\n else         if (pr.isLike) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n        }\n else {\n          throw new RuntimeException(\"[unexpected!] not handled case\");\n        }\n      }\n    }\n    queryBuilder.append(\" \");\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 570,
                    "astHeight": 23
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.MethodDeclaration,body]",
                    "nodePosition": {
                        "charLength": 7985,
                        "startLineNumber": 103,
                        "startColumnNumber": 46,
                        "endLineNumber": 255,
                        "endColumnNumber": 5
                    },
                    "nodeContext": "{\n  SolrQuery solrQuery=new SolrQuery();\n  setDefaults(solrQuery);\n  StringBuilder queryBuilder=new StringBuilder();\n  if (filter.getFullTextConstraint() != null) {\n    queryBuilder.append(getFullTextQuery(filter.getFullTextConstraint()));\n    queryBuilder.append(' ');\n  }\n else   if (filter.getFulltextConditions() != null) {\n    Collection<String> fulltextConditions=filter.getFulltextConditions();\n    for (    String fulltextCondition : fulltextConditions) {\n      queryBuilder.append(fulltextCondition).append(\" \");\n    }\n  }\n  Collection<Filter.PropertyRestriction> propertyRestrictions=filter.getPropertyRestrictions();\n  if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n    for (    Filter.PropertyRestriction pr : propertyRestrictions) {\n      if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n        String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n        if (isSupportedHttpRequest(nativeQueryString)) {\n          String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n          if (!\"select\".equals(requestHandlerString)) {\n            if (requestHandlerString.charAt(0) != '/') {\n              requestHandlerString=\"/\" + requestHandlerString;\n            }\n            solrQuery.setRequestHandler(requestHandlerString);\n          }\n          String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n          for (          String param : parameterString.split(\"&\")) {\n            String[] kv=param.split(\"=\");\n            if (kv.length != 2) {\n              throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n            }\n else {\n              if (\"stream.body\".equals(kv[0])) {\n                kv[0]=\"q\";\n                String mltFlString=\"mlt.fl=\";\n                int mltFlIndex=parameterString.indexOf(mltFlString);\n                if (mltFlIndex > -1) {\n                  int beginIndex=mltFlIndex + mltFlString.length();\n                  int endIndex=parameterString.indexOf('&',beginIndex);\n                  String fields;\n                  if (endIndex > beginIndex) {\n                    fields=parameterString.substring(beginIndex,endIndex);\n                  }\n else {\n                    fields=parameterString.substring(beginIndex);\n                  }\n                  kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n                }\n              }\n              solrQuery.setParam(kv[0],kv[1]);\n            }\n          }\n          return solrQuery;\n        }\n else {\n          queryBuilder.append(nativeQueryString);\n        }\n      }\n else {\n        if (pr.propertyName.contains(\"/\")) {\n          continue;\n        }\n        if (\"rep:excerpt\".equals(pr.propertyName)) {\n          continue;\n        }\n        String first=null;\n        if (pr.first != null) {\n          first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n        }\n        String last=null;\n        if (pr.last != null) {\n          last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n        }\n        String prField=configuration.getFieldForPropertyRestriction(pr);\n        CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n        if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n          queryBuilder.append(configuration.getPathField());\n          queryBuilder.append(':');\n          queryBuilder.append(first);\n        }\n else {\n          if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(first);\n          }\n else           if (pr.first == null && pr.last == null) {\n            if (!queryBuilder.toString().contains(fieldName + \":\")) {\n              queryBuilder.append(fieldName).append(':');\n              queryBuilder.append('*');\n            }\n          }\n else           if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n          }\n else           if (pr.isLike) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n          }\n else {\n            throw new RuntimeException(\"[unexpected!] not handled case\");\n          }\n        }\n      }\n      queryBuilder.append(\" \");\n    }\n  }\n  String[] pts=filter.getPrimaryTypes().toArray(new String[filter.getPrimaryTypes().size()]);\n  for (int i=0; i < pts.length; i++) {\n    String pt=pts[i];\n    if (i == 0) {\n      queryBuilder.append(\"(\");\n    }\n    if (i > 0 && i < pts.length) {\n      queryBuilder.append(\"OR \");\n    }\n    queryBuilder.append(\"jcr\\\\:primaryType\").append(':').append(partialEscape(pt)).append(\" \");\n    if (i == pts.length - 1) {\n      queryBuilder.append(\")\");\n      queryBuilder.append(' ');\n    }\n  }\n  Filter.PathRestriction pathRestriction=filter.getPathRestriction();\n  if (pathRestriction != null) {\n    String path=purgePath(filter);\n    String fieldName=configuration.getFieldForPathRestriction(pathRestriction);\n    if (fieldName != null) {\n      queryBuilder.append(fieldName);\n      queryBuilder.append(':');\n      queryBuilder.append(path);\n    }\n  }\n  if (queryBuilder.length() == 0) {\n    queryBuilder.append(\"*:*\");\n  }\n  String escapedQuery=queryBuilder.toString();\n  solrQuery.setQuery(escapedQuery);\n  if (log.isDebugEnabled()) {\n    log.debug(\"JCR query {} has been converted to Solr query {}\",filter.getQueryStatement(),solrQuery.toString());\n  }\n  return solrQuery;\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 858,
                    "astHeight": 24
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.TypeDeclaration,bodyDeclarations]",
                    "nodePosition": {
                        "charLength": 8027,
                        "startLineNumber": 103,
                        "startColumnNumber": 4,
                        "endLineNumber": 255,
                        "endColumnNumber": 5
                    },
                    "nodeContext": "private SolrQuery getQuery(Filter filter){\n  SolrQuery solrQuery=new SolrQuery();\n  setDefaults(solrQuery);\n  StringBuilder queryBuilder=new StringBuilder();\n  if (filter.getFullTextConstraint() != null) {\n    queryBuilder.append(getFullTextQuery(filter.getFullTextConstraint()));\n    queryBuilder.append(' ');\n  }\n else   if (filter.getFulltextConditions() != null) {\n    Collection<String> fulltextConditions=filter.getFulltextConditions();\n    for (    String fulltextCondition : fulltextConditions) {\n      queryBuilder.append(fulltextCondition).append(\" \");\n    }\n  }\n  Collection<Filter.PropertyRestriction> propertyRestrictions=filter.getPropertyRestrictions();\n  if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n    for (    Filter.PropertyRestriction pr : propertyRestrictions) {\n      if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n        String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n        if (isSupportedHttpRequest(nativeQueryString)) {\n          String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n          if (!\"select\".equals(requestHandlerString)) {\n            if (requestHandlerString.charAt(0) != '/') {\n              requestHandlerString=\"/\" + requestHandlerString;\n            }\n            solrQuery.setRequestHandler(requestHandlerString);\n          }\n          String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n          for (          String param : parameterString.split(\"&\")) {\n            String[] kv=param.split(\"=\");\n            if (kv.length != 2) {\n              throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n            }\n else {\n              if (\"stream.body\".equals(kv[0])) {\n                kv[0]=\"q\";\n                String mltFlString=\"mlt.fl=\";\n                int mltFlIndex=parameterString.indexOf(mltFlString);\n                if (mltFlIndex > -1) {\n                  int beginIndex=mltFlIndex + mltFlString.length();\n                  int endIndex=parameterString.indexOf('&',beginIndex);\n                  String fields;\n                  if (endIndex > beginIndex) {\n                    fields=parameterString.substring(beginIndex,endIndex);\n                  }\n else {\n                    fields=parameterString.substring(beginIndex);\n                  }\n                  kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n                }\n              }\n              solrQuery.setParam(kv[0],kv[1]);\n            }\n          }\n          return solrQuery;\n        }\n else {\n          queryBuilder.append(nativeQueryString);\n        }\n      }\n else {\n        if (pr.propertyName.contains(\"/\")) {\n          continue;\n        }\n        if (\"rep:excerpt\".equals(pr.propertyName)) {\n          continue;\n        }\n        String first=null;\n        if (pr.first != null) {\n          first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n        }\n        String last=null;\n        if (pr.last != null) {\n          last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n        }\n        String prField=configuration.getFieldForPropertyRestriction(pr);\n        CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n        if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n          queryBuilder.append(configuration.getPathField());\n          queryBuilder.append(':');\n          queryBuilder.append(first);\n        }\n else {\n          if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(first);\n          }\n else           if (pr.first == null && pr.last == null) {\n            if (!queryBuilder.toString().contains(fieldName + \":\")) {\n              queryBuilder.append(fieldName).append(':');\n              queryBuilder.append('*');\n            }\n          }\n else           if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n          }\n else           if (pr.isLike) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n          }\n else {\n            throw new RuntimeException(\"[unexpected!] not handled case\");\n          }\n        }\n      }\n      queryBuilder.append(\" \");\n    }\n  }\n  String[] pts=filter.getPrimaryTypes().toArray(new String[filter.getPrimaryTypes().size()]);\n  for (int i=0; i < pts.length; i++) {\n    String pt=pts[i];\n    if (i == 0) {\n      queryBuilder.append(\"(\");\n    }\n    if (i > 0 && i < pts.length) {\n      queryBuilder.append(\"OR \");\n    }\n    queryBuilder.append(\"jcr\\\\:primaryType\").append(':').append(partialEscape(pt)).append(\" \");\n    if (i == pts.length - 1) {\n      queryBuilder.append(\")\");\n      queryBuilder.append(' ');\n    }\n  }\n  Filter.PathRestriction pathRestriction=filter.getPathRestriction();\n  if (pathRestriction != null) {\n    String path=purgePath(filter);\n    String fieldName=configuration.getFieldForPathRestriction(pathRestriction);\n    if (fieldName != null) {\n      queryBuilder.append(fieldName);\n      queryBuilder.append(':');\n      queryBuilder.append(path);\n    }\n  }\n  if (queryBuilder.length() == 0) {\n    queryBuilder.append(\"*:*\");\n  }\n  String escapedQuery=queryBuilder.toString();\n  solrQuery.setQuery(escapedQuery);\n  if (log.isDebugEnabled()) {\n    log.debug(\"JCR query {} has been converted to Solr query {}\",filter.getQueryStatement(),solrQuery.toString());\n  }\n  return solrQuery;\n}\n",
                    "nodeType": "MethodDeclaration",
                    "astNodeNumber": 867,
                    "astHeight": 25
                }
            ],
            "currentLineData": {
                "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,expression]",
                "nodePosition": {
                    "charLength": 109,
                    "startLineNumber": 199,
                    "startColumnNumber": 35,
                    "endLineNumber": 199,
                    "endColumnNumber": 144
                },
                "nodeContext": "(pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))",
                "nodeType": "InfixExpression",
                "astNodeNumber": 35,
                "astHeight": 6
            },
            "tokenLength": 1,
            "type": "org.apache.jackrabbit.oak.spi.query.Filter.PropertyRestriction"
        },
        {
            "nodeContext": "pr",
            "nodeType": "SimpleName",
            "nodePosition": {
                "charLength": 2,
                "startLineNumber": 199,
                "startColumnNumber": 56,
                "endLineNumber": 199,
                "endColumnNumber": 58
            },
            "astNodeNumber": 1,
            "astHeight": 1,
            "parentDataList": [
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.InfixExpression,leftOperand]",
                    "nodePosition": {
                        "charLength": 7,
                        "startLineNumber": 199,
                        "startColumnNumber": 56,
                        "endLineNumber": 199,
                        "endColumnNumber": 63
                    },
                    "nodeContext": "pr.last",
                    "nodeType": "QualifiedName",
                    "astNodeNumber": 3,
                    "astHeight": 2
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.InfixExpression,rightOperand]",
                    "nodePosition": {
                        "charLength": 15,
                        "startLineNumber": 199,
                        "startColumnNumber": 56,
                        "endLineNumber": 199,
                        "endColumnNumber": 71
                    },
                    "nodeContext": "pr.last == null",
                    "nodeType": "InfixExpression",
                    "astNodeNumber": 5,
                    "astHeight": 3
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.ParenthesizedExpression,expression]",
                    "nodePosition": {
                        "charLength": 35,
                        "startLineNumber": 199,
                        "startColumnNumber": 36,
                        "endLineNumber": 199,
                        "endColumnNumber": 71
                    },
                    "nodeContext": "pr.first != null && pr.last == null",
                    "nodeType": "InfixExpression",
                    "astNodeNumber": 11,
                    "astHeight": 4
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.InfixExpression,leftOperand]",
                    "nodePosition": {
                        "charLength": 37,
                        "startLineNumber": 199,
                        "startColumnNumber": 35,
                        "endLineNumber": 199,
                        "endColumnNumber": 72
                    },
                    "nodeContext": "(pr.first != null && pr.last == null)",
                    "nodeType": "ParenthesizedExpression",
                    "astNodeNumber": 12,
                    "astHeight": 5
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,expression]",
                    "nodePosition": {
                        "charLength": 109,
                        "startLineNumber": 199,
                        "startColumnNumber": 35,
                        "endLineNumber": 199,
                        "endColumnNumber": 144
                    },
                    "nodeContext": "(pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))",
                    "nodeType": "InfixExpression",
                    "astNodeNumber": 35,
                    "astHeight": 6
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 936,
                        "startLineNumber": 199,
                        "startColumnNumber": 31,
                        "endLineNumber": 209,
                        "endColumnNumber": 25
                    },
                    "nodeContext": "if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n}\n else if (pr.isLike) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n}\n else {\n  throw new RuntimeException(\"[unexpected!] not handled case\");\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 105,
                    "astHeight": 13
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 1260,
                        "startLineNumber": 194,
                        "startColumnNumber": 31,
                        "endLineNumber": 209,
                        "endColumnNumber": 25
                    },
                    "nodeContext": "if (pr.first == null && pr.last == null) {\n  if (!queryBuilder.toString().contains(fieldName + \":\")) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append('*');\n  }\n}\n else if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n}\n else if (pr.isLike) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n}\n else {\n  throw new RuntimeException(\"[unexpected!] not handled case\");\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 142,
                    "astHeight": 14
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 1490,
                        "startLineNumber": 191,
                        "startColumnNumber": 24,
                        "endLineNumber": 209,
                        "endColumnNumber": 25
                    },
                    "nodeContext": "if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(first);\n}\n else if (pr.first == null && pr.last == null) {\n  if (!queryBuilder.toString().contains(fieldName + \":\")) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append('*');\n  }\n}\n else if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n}\n else if (pr.isLike) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n}\n else {\n  throw new RuntimeException(\"[unexpected!] not handled case\");\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 177,
                    "astHeight": 15
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 1538,
                        "startLineNumber": 190,
                        "startColumnNumber": 27,
                        "endLineNumber": 210,
                        "endColumnNumber": 21
                    },
                    "nodeContext": "{\n  if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(first);\n  }\n else   if (pr.first == null && pr.last == null) {\n    if (!queryBuilder.toString().contains(fieldName + \":\")) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append('*');\n    }\n  }\n else   if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n  }\n else   if (pr.isLike) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n  }\n else {\n    throw new RuntimeException(\"[unexpected!] not handled case\");\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 178,
                    "astHeight": 16
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 1791,
                        "startLineNumber": 186,
                        "startColumnNumber": 20,
                        "endLineNumber": 210,
                        "endColumnNumber": 21
                    },
                    "nodeContext": "if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n  queryBuilder.append(configuration.getPathField());\n  queryBuilder.append(':');\n  queryBuilder.append(first);\n}\n else {\n  if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(first);\n  }\n else   if (pr.first == null && pr.last == null) {\n    if (!queryBuilder.toString().contains(fieldName + \":\")) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append('*');\n    }\n  }\n else   if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n  }\n else   if (pr.isLike) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n  }\n else {\n    throw new RuntimeException(\"[unexpected!] not handled case\");\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 203,
                    "astHeight": 17
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 2798,
                        "startLineNumber": 164,
                        "startColumnNumber": 23,
                        "endLineNumber": 211,
                        "endColumnNumber": 17
                    },
                    "nodeContext": "{\n  if (pr.propertyName.contains(\"/\")) {\n    continue;\n  }\n  if (\"rep:excerpt\".equals(pr.propertyName)) {\n    continue;\n  }\n  String first=null;\n  if (pr.first != null) {\n    first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n  }\n  String last=null;\n  if (pr.last != null) {\n    last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n  }\n  String prField=configuration.getFieldForPropertyRestriction(pr);\n  CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n  if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n    queryBuilder.append(configuration.getPathField());\n    queryBuilder.append(':');\n    queryBuilder.append(first);\n  }\n else {\n    if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(first);\n    }\n else     if (pr.first == null && pr.last == null) {\n      if (!queryBuilder.toString().contains(fieldName + \":\")) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append('*');\n      }\n    }\n else     if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n    }\n else     if (pr.isLike) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n    }\n else {\n      throw new RuntimeException(\"[unexpected!] not handled case\");\n    }\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 312,
                    "astHeight": 18
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5508,
                        "startLineNumber": 124,
                        "startColumnNumber": 16,
                        "endLineNumber": 211,
                        "endColumnNumber": 17
                    },
                    "nodeContext": "if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n  String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n  if (isSupportedHttpRequest(nativeQueryString)) {\n    String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n    if (!\"select\".equals(requestHandlerString)) {\n      if (requestHandlerString.charAt(0) != '/') {\n        requestHandlerString=\"/\" + requestHandlerString;\n      }\n      solrQuery.setRequestHandler(requestHandlerString);\n    }\n    String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n    for (    String param : parameterString.split(\"&\")) {\n      String[] kv=param.split(\"=\");\n      if (kv.length != 2) {\n        throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n      }\n else {\n        if (\"stream.body\".equals(kv[0])) {\n          kv[0]=\"q\";\n          String mltFlString=\"mlt.fl=\";\n          int mltFlIndex=parameterString.indexOf(mltFlString);\n          if (mltFlIndex > -1) {\n            int beginIndex=mltFlIndex + mltFlString.length();\n            int endIndex=parameterString.indexOf('&',beginIndex);\n            String fields;\n            if (endIndex > beginIndex) {\n              fields=parameterString.substring(beginIndex,endIndex);\n            }\n else {\n              fields=parameterString.substring(beginIndex);\n            }\n            kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n          }\n        }\n        solrQuery.setParam(kv[0],kv[1]);\n      }\n    }\n    return solrQuery;\n  }\n else {\n    queryBuilder.append(nativeQueryString);\n  }\n}\n else {\n  if (pr.propertyName.contains(\"/\")) {\n    continue;\n  }\n  if (\"rep:excerpt\".equals(pr.propertyName)) {\n    continue;\n  }\n  String first=null;\n  if (pr.first != null) {\n    first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n  }\n  String last=null;\n  if (pr.last != null) {\n    last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n  }\n  String prField=configuration.getFieldForPropertyRestriction(pr);\n  CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n  if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n    queryBuilder.append(configuration.getPathField());\n    queryBuilder.append(':');\n    queryBuilder.append(first);\n  }\n else {\n    if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(first);\n    }\n else     if (pr.first == null && pr.last == null) {\n      if (!queryBuilder.toString().contains(fieldName + \":\")) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append('*');\n      }\n    }\n else     if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n    }\n else     if (pr.isLike) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n    }\n else {\n      throw new RuntimeException(\"[unexpected!] not handled case\");\n    }\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 546,
                    "astHeight": 19
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.EnhancedForStatement,body]",
                    "nodePosition": {
                        "charLength": 5622,
                        "startLineNumber": 122,
                        "startColumnNumber": 71,
                        "endLineNumber": 213,
                        "endColumnNumber": 13
                    },
                    "nodeContext": "{\n  if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n    String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n    if (isSupportedHttpRequest(nativeQueryString)) {\n      String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n      if (!\"select\".equals(requestHandlerString)) {\n        if (requestHandlerString.charAt(0) != '/') {\n          requestHandlerString=\"/\" + requestHandlerString;\n        }\n        solrQuery.setRequestHandler(requestHandlerString);\n      }\n      String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n      for (      String param : parameterString.split(\"&\")) {\n        String[] kv=param.split(\"=\");\n        if (kv.length != 2) {\n          throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n        }\n else {\n          if (\"stream.body\".equals(kv[0])) {\n            kv[0]=\"q\";\n            String mltFlString=\"mlt.fl=\";\n            int mltFlIndex=parameterString.indexOf(mltFlString);\n            if (mltFlIndex > -1) {\n              int beginIndex=mltFlIndex + mltFlString.length();\n              int endIndex=parameterString.indexOf('&',beginIndex);\n              String fields;\n              if (endIndex > beginIndex) {\n                fields=parameterString.substring(beginIndex,endIndex);\n              }\n else {\n                fields=parameterString.substring(beginIndex);\n              }\n              kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n            }\n          }\n          solrQuery.setParam(kv[0],kv[1]);\n        }\n      }\n      return solrQuery;\n    }\n else {\n      queryBuilder.append(nativeQueryString);\n    }\n  }\n else {\n    if (pr.propertyName.contains(\"/\")) {\n      continue;\n    }\n    if (\"rep:excerpt\".equals(pr.propertyName)) {\n      continue;\n    }\n    String first=null;\n    if (pr.first != null) {\n      first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n    }\n    String last=null;\n    if (pr.last != null) {\n      last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n    }\n    String prField=configuration.getFieldForPropertyRestriction(pr);\n    CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n    if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n      queryBuilder.append(configuration.getPathField());\n      queryBuilder.append(':');\n      queryBuilder.append(first);\n    }\n else {\n      if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(first);\n      }\n else       if (pr.first == null && pr.last == null) {\n        if (!queryBuilder.toString().contains(fieldName + \":\")) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append('*');\n        }\n      }\n else       if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n      }\n else       if (pr.isLike) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n      }\n else {\n        throw new RuntimeException(\"[unexpected!] not handled case\");\n      }\n    }\n  }\n  queryBuilder.append(\" \");\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 552,
                    "astHeight": 20
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5681,
                        "startLineNumber": 122,
                        "startColumnNumber": 12,
                        "endLineNumber": 213,
                        "endColumnNumber": 13
                    },
                    "nodeContext": "for (Filter.PropertyRestriction pr : propertyRestrictions) {\n  if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n    String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n    if (isSupportedHttpRequest(nativeQueryString)) {\n      String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n      if (!\"select\".equals(requestHandlerString)) {\n        if (requestHandlerString.charAt(0) != '/') {\n          requestHandlerString=\"/\" + requestHandlerString;\n        }\n        solrQuery.setRequestHandler(requestHandlerString);\n      }\n      String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n      for (      String param : parameterString.split(\"&\")) {\n        String[] kv=param.split(\"=\");\n        if (kv.length != 2) {\n          throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n        }\n else {\n          if (\"stream.body\".equals(kv[0])) {\n            kv[0]=\"q\";\n            String mltFlString=\"mlt.fl=\";\n            int mltFlIndex=parameterString.indexOf(mltFlString);\n            if (mltFlIndex > -1) {\n              int beginIndex=mltFlIndex + mltFlString.length();\n              int endIndex=parameterString.indexOf('&',beginIndex);\n              String fields;\n              if (endIndex > beginIndex) {\n                fields=parameterString.substring(beginIndex,endIndex);\n              }\n else {\n                fields=parameterString.substring(beginIndex);\n              }\n              kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n            }\n          }\n          solrQuery.setParam(kv[0],kv[1]);\n        }\n      }\n      return solrQuery;\n    }\n else {\n      queryBuilder.append(nativeQueryString);\n    }\n  }\n else {\n    if (pr.propertyName.contains(\"/\")) {\n      continue;\n    }\n    if (\"rep:excerpt\".equals(pr.propertyName)) {\n      continue;\n    }\n    String first=null;\n    if (pr.first != null) {\n      first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n    }\n    String last=null;\n    if (pr.last != null) {\n      last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n    }\n    String prField=configuration.getFieldForPropertyRestriction(pr);\n    CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n    if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n      queryBuilder.append(configuration.getPathField());\n      queryBuilder.append(':');\n      queryBuilder.append(first);\n    }\n else {\n      if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(first);\n      }\n else       if (pr.first == null && pr.last == null) {\n        if (!queryBuilder.toString().contains(fieldName + \":\")) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append('*');\n        }\n      }\n else       if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n      }\n else       if (pr.isLike) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n      }\n else {\n        throw new RuntimeException(\"[unexpected!] not handled case\");\n      }\n    }\n  }\n  queryBuilder.append(\" \");\n}\n",
                    "nodeType": "EnhancedForStatement",
                    "astNodeNumber": 560,
                    "astHeight": 21
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,thenStatement]",
                    "nodePosition": {
                        "charLength": 5705,
                        "startLineNumber": 121,
                        "startColumnNumber": 77,
                        "endLineNumber": 214,
                        "endColumnNumber": 9
                    },
                    "nodeContext": "{\n  for (  Filter.PropertyRestriction pr : propertyRestrictions) {\n    if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n      String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n      if (isSupportedHttpRequest(nativeQueryString)) {\n        String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n        if (!\"select\".equals(requestHandlerString)) {\n          if (requestHandlerString.charAt(0) != '/') {\n            requestHandlerString=\"/\" + requestHandlerString;\n          }\n          solrQuery.setRequestHandler(requestHandlerString);\n        }\n        String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n        for (        String param : parameterString.split(\"&\")) {\n          String[] kv=param.split(\"=\");\n          if (kv.length != 2) {\n            throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n          }\n else {\n            if (\"stream.body\".equals(kv[0])) {\n              kv[0]=\"q\";\n              String mltFlString=\"mlt.fl=\";\n              int mltFlIndex=parameterString.indexOf(mltFlString);\n              if (mltFlIndex > -1) {\n                int beginIndex=mltFlIndex + mltFlString.length();\n                int endIndex=parameterString.indexOf('&',beginIndex);\n                String fields;\n                if (endIndex > beginIndex) {\n                  fields=parameterString.substring(beginIndex,endIndex);\n                }\n else {\n                  fields=parameterString.substring(beginIndex);\n                }\n                kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n              }\n            }\n            solrQuery.setParam(kv[0],kv[1]);\n          }\n        }\n        return solrQuery;\n      }\n else {\n        queryBuilder.append(nativeQueryString);\n      }\n    }\n else {\n      if (pr.propertyName.contains(\"/\")) {\n        continue;\n      }\n      if (\"rep:excerpt\".equals(pr.propertyName)) {\n        continue;\n      }\n      String first=null;\n      if (pr.first != null) {\n        first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n      }\n      String last=null;\n      if (pr.last != null) {\n        last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n      }\n      String prField=configuration.getFieldForPropertyRestriction(pr);\n      CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n      if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n        queryBuilder.append(configuration.getPathField());\n        queryBuilder.append(':');\n        queryBuilder.append(first);\n      }\n else {\n        if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(first);\n        }\n else         if (pr.first == null && pr.last == null) {\n          if (!queryBuilder.toString().contains(fieldName + \":\")) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append('*');\n          }\n        }\n else         if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n        }\n else         if (pr.isLike) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n        }\n else {\n          throw new RuntimeException(\"[unexpected!] not handled case\");\n        }\n      }\n    }\n    queryBuilder.append(\" \");\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 561,
                    "astHeight": 22
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5774,
                        "startLineNumber": 121,
                        "startColumnNumber": 8,
                        "endLineNumber": 214,
                        "endColumnNumber": 9
                    },
                    "nodeContext": "if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n  for (  Filter.PropertyRestriction pr : propertyRestrictions) {\n    if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n      String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n      if (isSupportedHttpRequest(nativeQueryString)) {\n        String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n        if (!\"select\".equals(requestHandlerString)) {\n          if (requestHandlerString.charAt(0) != '/') {\n            requestHandlerString=\"/\" + requestHandlerString;\n          }\n          solrQuery.setRequestHandler(requestHandlerString);\n        }\n        String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n        for (        String param : parameterString.split(\"&\")) {\n          String[] kv=param.split(\"=\");\n          if (kv.length != 2) {\n            throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n          }\n else {\n            if (\"stream.body\".equals(kv[0])) {\n              kv[0]=\"q\";\n              String mltFlString=\"mlt.fl=\";\n              int mltFlIndex=parameterString.indexOf(mltFlString);\n              if (mltFlIndex > -1) {\n                int beginIndex=mltFlIndex + mltFlString.length();\n                int endIndex=parameterString.indexOf('&',beginIndex);\n                String fields;\n                if (endIndex > beginIndex) {\n                  fields=parameterString.substring(beginIndex,endIndex);\n                }\n else {\n                  fields=parameterString.substring(beginIndex);\n                }\n                kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n              }\n            }\n            solrQuery.setParam(kv[0],kv[1]);\n          }\n        }\n        return solrQuery;\n      }\n else {\n        queryBuilder.append(nativeQueryString);\n      }\n    }\n else {\n      if (pr.propertyName.contains(\"/\")) {\n        continue;\n      }\n      if (\"rep:excerpt\".equals(pr.propertyName)) {\n        continue;\n      }\n      String first=null;\n      if (pr.first != null) {\n        first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n      }\n      String last=null;\n      if (pr.last != null) {\n        last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n      }\n      String prField=configuration.getFieldForPropertyRestriction(pr);\n      CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n      if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n        queryBuilder.append(configuration.getPathField());\n        queryBuilder.append(':');\n        queryBuilder.append(first);\n      }\n else {\n        if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(first);\n        }\n else         if (pr.first == null && pr.last == null) {\n          if (!queryBuilder.toString().contains(fieldName + \":\")) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append('*');\n          }\n        }\n else         if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n        }\n else         if (pr.isLike) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n        }\n else {\n          throw new RuntimeException(\"[unexpected!] not handled case\");\n        }\n      }\n    }\n    queryBuilder.append(\" \");\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 570,
                    "astHeight": 23
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.MethodDeclaration,body]",
                    "nodePosition": {
                        "charLength": 7985,
                        "startLineNumber": 103,
                        "startColumnNumber": 46,
                        "endLineNumber": 255,
                        "endColumnNumber": 5
                    },
                    "nodeContext": "{\n  SolrQuery solrQuery=new SolrQuery();\n  setDefaults(solrQuery);\n  StringBuilder queryBuilder=new StringBuilder();\n  if (filter.getFullTextConstraint() != null) {\n    queryBuilder.append(getFullTextQuery(filter.getFullTextConstraint()));\n    queryBuilder.append(' ');\n  }\n else   if (filter.getFulltextConditions() != null) {\n    Collection<String> fulltextConditions=filter.getFulltextConditions();\n    for (    String fulltextCondition : fulltextConditions) {\n      queryBuilder.append(fulltextCondition).append(\" \");\n    }\n  }\n  Collection<Filter.PropertyRestriction> propertyRestrictions=filter.getPropertyRestrictions();\n  if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n    for (    Filter.PropertyRestriction pr : propertyRestrictions) {\n      if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n        String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n        if (isSupportedHttpRequest(nativeQueryString)) {\n          String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n          if (!\"select\".equals(requestHandlerString)) {\n            if (requestHandlerString.charAt(0) != '/') {\n              requestHandlerString=\"/\" + requestHandlerString;\n            }\n            solrQuery.setRequestHandler(requestHandlerString);\n          }\n          String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n          for (          String param : parameterString.split(\"&\")) {\n            String[] kv=param.split(\"=\");\n            if (kv.length != 2) {\n              throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n            }\n else {\n              if (\"stream.body\".equals(kv[0])) {\n                kv[0]=\"q\";\n                String mltFlString=\"mlt.fl=\";\n                int mltFlIndex=parameterString.indexOf(mltFlString);\n                if (mltFlIndex > -1) {\n                  int beginIndex=mltFlIndex + mltFlString.length();\n                  int endIndex=parameterString.indexOf('&',beginIndex);\n                  String fields;\n                  if (endIndex > beginIndex) {\n                    fields=parameterString.substring(beginIndex,endIndex);\n                  }\n else {\n                    fields=parameterString.substring(beginIndex);\n                  }\n                  kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n                }\n              }\n              solrQuery.setParam(kv[0],kv[1]);\n            }\n          }\n          return solrQuery;\n        }\n else {\n          queryBuilder.append(nativeQueryString);\n        }\n      }\n else {\n        if (pr.propertyName.contains(\"/\")) {\n          continue;\n        }\n        if (\"rep:excerpt\".equals(pr.propertyName)) {\n          continue;\n        }\n        String first=null;\n        if (pr.first != null) {\n          first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n        }\n        String last=null;\n        if (pr.last != null) {\n          last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n        }\n        String prField=configuration.getFieldForPropertyRestriction(pr);\n        CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n        if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n          queryBuilder.append(configuration.getPathField());\n          queryBuilder.append(':');\n          queryBuilder.append(first);\n        }\n else {\n          if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(first);\n          }\n else           if (pr.first == null && pr.last == null) {\n            if (!queryBuilder.toString().contains(fieldName + \":\")) {\n              queryBuilder.append(fieldName).append(':');\n              queryBuilder.append('*');\n            }\n          }\n else           if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n          }\n else           if (pr.isLike) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n          }\n else {\n            throw new RuntimeException(\"[unexpected!] not handled case\");\n          }\n        }\n      }\n      queryBuilder.append(\" \");\n    }\n  }\n  String[] pts=filter.getPrimaryTypes().toArray(new String[filter.getPrimaryTypes().size()]);\n  for (int i=0; i < pts.length; i++) {\n    String pt=pts[i];\n    if (i == 0) {\n      queryBuilder.append(\"(\");\n    }\n    if (i > 0 && i < pts.length) {\n      queryBuilder.append(\"OR \");\n    }\n    queryBuilder.append(\"jcr\\\\:primaryType\").append(':').append(partialEscape(pt)).append(\" \");\n    if (i == pts.length - 1) {\n      queryBuilder.append(\")\");\n      queryBuilder.append(' ');\n    }\n  }\n  Filter.PathRestriction pathRestriction=filter.getPathRestriction();\n  if (pathRestriction != null) {\n    String path=purgePath(filter);\n    String fieldName=configuration.getFieldForPathRestriction(pathRestriction);\n    if (fieldName != null) {\n      queryBuilder.append(fieldName);\n      queryBuilder.append(':');\n      queryBuilder.append(path);\n    }\n  }\n  if (queryBuilder.length() == 0) {\n    queryBuilder.append(\"*:*\");\n  }\n  String escapedQuery=queryBuilder.toString();\n  solrQuery.setQuery(escapedQuery);\n  if (log.isDebugEnabled()) {\n    log.debug(\"JCR query {} has been converted to Solr query {}\",filter.getQueryStatement(),solrQuery.toString());\n  }\n  return solrQuery;\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 858,
                    "astHeight": 24
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.TypeDeclaration,bodyDeclarations]",
                    "nodePosition": {
                        "charLength": 8027,
                        "startLineNumber": 103,
                        "startColumnNumber": 4,
                        "endLineNumber": 255,
                        "endColumnNumber": 5
                    },
                    "nodeContext": "private SolrQuery getQuery(Filter filter){\n  SolrQuery solrQuery=new SolrQuery();\n  setDefaults(solrQuery);\n  StringBuilder queryBuilder=new StringBuilder();\n  if (filter.getFullTextConstraint() != null) {\n    queryBuilder.append(getFullTextQuery(filter.getFullTextConstraint()));\n    queryBuilder.append(' ');\n  }\n else   if (filter.getFulltextConditions() != null) {\n    Collection<String> fulltextConditions=filter.getFulltextConditions();\n    for (    String fulltextCondition : fulltextConditions) {\n      queryBuilder.append(fulltextCondition).append(\" \");\n    }\n  }\n  Collection<Filter.PropertyRestriction> propertyRestrictions=filter.getPropertyRestrictions();\n  if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n    for (    Filter.PropertyRestriction pr : propertyRestrictions) {\n      if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n        String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n        if (isSupportedHttpRequest(nativeQueryString)) {\n          String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n          if (!\"select\".equals(requestHandlerString)) {\n            if (requestHandlerString.charAt(0) != '/') {\n              requestHandlerString=\"/\" + requestHandlerString;\n            }\n            solrQuery.setRequestHandler(requestHandlerString);\n          }\n          String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n          for (          String param : parameterString.split(\"&\")) {\n            String[] kv=param.split(\"=\");\n            if (kv.length != 2) {\n              throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n            }\n else {\n              if (\"stream.body\".equals(kv[0])) {\n                kv[0]=\"q\";\n                String mltFlString=\"mlt.fl=\";\n                int mltFlIndex=parameterString.indexOf(mltFlString);\n                if (mltFlIndex > -1) {\n                  int beginIndex=mltFlIndex + mltFlString.length();\n                  int endIndex=parameterString.indexOf('&',beginIndex);\n                  String fields;\n                  if (endIndex > beginIndex) {\n                    fields=parameterString.substring(beginIndex,endIndex);\n                  }\n else {\n                    fields=parameterString.substring(beginIndex);\n                  }\n                  kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n                }\n              }\n              solrQuery.setParam(kv[0],kv[1]);\n            }\n          }\n          return solrQuery;\n        }\n else {\n          queryBuilder.append(nativeQueryString);\n        }\n      }\n else {\n        if (pr.propertyName.contains(\"/\")) {\n          continue;\n        }\n        if (\"rep:excerpt\".equals(pr.propertyName)) {\n          continue;\n        }\n        String first=null;\n        if (pr.first != null) {\n          first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n        }\n        String last=null;\n        if (pr.last != null) {\n          last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n        }\n        String prField=configuration.getFieldForPropertyRestriction(pr);\n        CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n        if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n          queryBuilder.append(configuration.getPathField());\n          queryBuilder.append(':');\n          queryBuilder.append(first);\n        }\n else {\n          if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(first);\n          }\n else           if (pr.first == null && pr.last == null) {\n            if (!queryBuilder.toString().contains(fieldName + \":\")) {\n              queryBuilder.append(fieldName).append(':');\n              queryBuilder.append('*');\n            }\n          }\n else           if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n          }\n else           if (pr.isLike) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n          }\n else {\n            throw new RuntimeException(\"[unexpected!] not handled case\");\n          }\n        }\n      }\n      queryBuilder.append(\" \");\n    }\n  }\n  String[] pts=filter.getPrimaryTypes().toArray(new String[filter.getPrimaryTypes().size()]);\n  for (int i=0; i < pts.length; i++) {\n    String pt=pts[i];\n    if (i == 0) {\n      queryBuilder.append(\"(\");\n    }\n    if (i > 0 && i < pts.length) {\n      queryBuilder.append(\"OR \");\n    }\n    queryBuilder.append(\"jcr\\\\:primaryType\").append(':').append(partialEscape(pt)).append(\" \");\n    if (i == pts.length - 1) {\n      queryBuilder.append(\")\");\n      queryBuilder.append(' ');\n    }\n  }\n  Filter.PathRestriction pathRestriction=filter.getPathRestriction();\n  if (pathRestriction != null) {\n    String path=purgePath(filter);\n    String fieldName=configuration.getFieldForPathRestriction(pathRestriction);\n    if (fieldName != null) {\n      queryBuilder.append(fieldName);\n      queryBuilder.append(':');\n      queryBuilder.append(path);\n    }\n  }\n  if (queryBuilder.length() == 0) {\n    queryBuilder.append(\"*:*\");\n  }\n  String escapedQuery=queryBuilder.toString();\n  solrQuery.setQuery(escapedQuery);\n  if (log.isDebugEnabled()) {\n    log.debug(\"JCR query {} has been converted to Solr query {}\",filter.getQueryStatement(),solrQuery.toString());\n  }\n  return solrQuery;\n}\n",
                    "nodeType": "MethodDeclaration",
                    "astNodeNumber": 867,
                    "astHeight": 25
                }
            ],
            "currentLineData": {
                "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,expression]",
                "nodePosition": {
                    "charLength": 109,
                    "startLineNumber": 199,
                    "startColumnNumber": 35,
                    "endLineNumber": 199,
                    "endColumnNumber": 144
                },
                "nodeContext": "(pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))",
                "nodeType": "InfixExpression",
                "astNodeNumber": 35,
                "astHeight": 6
            },
            "tokenLength": 1,
            "type": "org.apache.jackrabbit.oak.spi.query.Filter.PropertyRestriction"
        },
        {
            "nodeContext": "pr",
            "nodeType": "SimpleName",
            "nodePosition": {
                "charLength": 2,
                "startLineNumber": 199,
                "startColumnNumber": 77,
                "endLineNumber": 199,
                "endColumnNumber": 79
            },
            "astNodeNumber": 1,
            "astHeight": 1,
            "parentDataList": [
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.InfixExpression,leftOperand]",
                    "nodePosition": {
                        "charLength": 7,
                        "startLineNumber": 199,
                        "startColumnNumber": 77,
                        "endLineNumber": 199,
                        "endColumnNumber": 84
                    },
                    "nodeContext": "pr.last",
                    "nodeType": "QualifiedName",
                    "astNodeNumber": 3,
                    "astHeight": 2
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.InfixExpression,leftOperand]",
                    "nodePosition": {
                        "charLength": 15,
                        "startLineNumber": 199,
                        "startColumnNumber": 77,
                        "endLineNumber": 199,
                        "endColumnNumber": 92
                    },
                    "nodeContext": "pr.last != null",
                    "nodeType": "InfixExpression",
                    "astNodeNumber": 5,
                    "astHeight": 3
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.ParenthesizedExpression,expression]",
                    "nodePosition": {
                        "charLength": 35,
                        "startLineNumber": 199,
                        "startColumnNumber": 77,
                        "endLineNumber": 199,
                        "endColumnNumber": 112
                    },
                    "nodeContext": "pr.last != null && pr.first == null",
                    "nodeType": "InfixExpression",
                    "astNodeNumber": 11,
                    "astHeight": 4
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.InfixExpression,rightOperand]",
                    "nodePosition": {
                        "charLength": 37,
                        "startLineNumber": 199,
                        "startColumnNumber": 76,
                        "endLineNumber": 199,
                        "endColumnNumber": 113
                    },
                    "nodeContext": "(pr.last != null && pr.first == null)",
                    "nodeType": "ParenthesizedExpression",
                    "astNodeNumber": 12,
                    "astHeight": 5
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,expression]",
                    "nodePosition": {
                        "charLength": 109,
                        "startLineNumber": 199,
                        "startColumnNumber": 35,
                        "endLineNumber": 199,
                        "endColumnNumber": 144
                    },
                    "nodeContext": "(pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))",
                    "nodeType": "InfixExpression",
                    "astNodeNumber": 35,
                    "astHeight": 6
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 936,
                        "startLineNumber": 199,
                        "startColumnNumber": 31,
                        "endLineNumber": 209,
                        "endColumnNumber": 25
                    },
                    "nodeContext": "if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n}\n else if (pr.isLike) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n}\n else {\n  throw new RuntimeException(\"[unexpected!] not handled case\");\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 105,
                    "astHeight": 13
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 1260,
                        "startLineNumber": 194,
                        "startColumnNumber": 31,
                        "endLineNumber": 209,
                        "endColumnNumber": 25
                    },
                    "nodeContext": "if (pr.first == null && pr.last == null) {\n  if (!queryBuilder.toString().contains(fieldName + \":\")) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append('*');\n  }\n}\n else if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n}\n else if (pr.isLike) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n}\n else {\n  throw new RuntimeException(\"[unexpected!] not handled case\");\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 142,
                    "astHeight": 14
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 1490,
                        "startLineNumber": 191,
                        "startColumnNumber": 24,
                        "endLineNumber": 209,
                        "endColumnNumber": 25
                    },
                    "nodeContext": "if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(first);\n}\n else if (pr.first == null && pr.last == null) {\n  if (!queryBuilder.toString().contains(fieldName + \":\")) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append('*');\n  }\n}\n else if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n}\n else if (pr.isLike) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n}\n else {\n  throw new RuntimeException(\"[unexpected!] not handled case\");\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 177,
                    "astHeight": 15
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 1538,
                        "startLineNumber": 190,
                        "startColumnNumber": 27,
                        "endLineNumber": 210,
                        "endColumnNumber": 21
                    },
                    "nodeContext": "{\n  if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(first);\n  }\n else   if (pr.first == null && pr.last == null) {\n    if (!queryBuilder.toString().contains(fieldName + \":\")) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append('*');\n    }\n  }\n else   if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n  }\n else   if (pr.isLike) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n  }\n else {\n    throw new RuntimeException(\"[unexpected!] not handled case\");\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 178,
                    "astHeight": 16
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 1791,
                        "startLineNumber": 186,
                        "startColumnNumber": 20,
                        "endLineNumber": 210,
                        "endColumnNumber": 21
                    },
                    "nodeContext": "if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n  queryBuilder.append(configuration.getPathField());\n  queryBuilder.append(':');\n  queryBuilder.append(first);\n}\n else {\n  if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(first);\n  }\n else   if (pr.first == null && pr.last == null) {\n    if (!queryBuilder.toString().contains(fieldName + \":\")) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append('*');\n    }\n  }\n else   if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n  }\n else   if (pr.isLike) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n  }\n else {\n    throw new RuntimeException(\"[unexpected!] not handled case\");\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 203,
                    "astHeight": 17
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 2798,
                        "startLineNumber": 164,
                        "startColumnNumber": 23,
                        "endLineNumber": 211,
                        "endColumnNumber": 17
                    },
                    "nodeContext": "{\n  if (pr.propertyName.contains(\"/\")) {\n    continue;\n  }\n  if (\"rep:excerpt\".equals(pr.propertyName)) {\n    continue;\n  }\n  String first=null;\n  if (pr.first != null) {\n    first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n  }\n  String last=null;\n  if (pr.last != null) {\n    last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n  }\n  String prField=configuration.getFieldForPropertyRestriction(pr);\n  CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n  if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n    queryBuilder.append(configuration.getPathField());\n    queryBuilder.append(':');\n    queryBuilder.append(first);\n  }\n else {\n    if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(first);\n    }\n else     if (pr.first == null && pr.last == null) {\n      if (!queryBuilder.toString().contains(fieldName + \":\")) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append('*');\n      }\n    }\n else     if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n    }\n else     if (pr.isLike) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n    }\n else {\n      throw new RuntimeException(\"[unexpected!] not handled case\");\n    }\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 312,
                    "astHeight": 18
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5508,
                        "startLineNumber": 124,
                        "startColumnNumber": 16,
                        "endLineNumber": 211,
                        "endColumnNumber": 17
                    },
                    "nodeContext": "if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n  String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n  if (isSupportedHttpRequest(nativeQueryString)) {\n    String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n    if (!\"select\".equals(requestHandlerString)) {\n      if (requestHandlerString.charAt(0) != '/') {\n        requestHandlerString=\"/\" + requestHandlerString;\n      }\n      solrQuery.setRequestHandler(requestHandlerString);\n    }\n    String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n    for (    String param : parameterString.split(\"&\")) {\n      String[] kv=param.split(\"=\");\n      if (kv.length != 2) {\n        throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n      }\n else {\n        if (\"stream.body\".equals(kv[0])) {\n          kv[0]=\"q\";\n          String mltFlString=\"mlt.fl=\";\n          int mltFlIndex=parameterString.indexOf(mltFlString);\n          if (mltFlIndex > -1) {\n            int beginIndex=mltFlIndex + mltFlString.length();\n            int endIndex=parameterString.indexOf('&',beginIndex);\n            String fields;\n            if (endIndex > beginIndex) {\n              fields=parameterString.substring(beginIndex,endIndex);\n            }\n else {\n              fields=parameterString.substring(beginIndex);\n            }\n            kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n          }\n        }\n        solrQuery.setParam(kv[0],kv[1]);\n      }\n    }\n    return solrQuery;\n  }\n else {\n    queryBuilder.append(nativeQueryString);\n  }\n}\n else {\n  if (pr.propertyName.contains(\"/\")) {\n    continue;\n  }\n  if (\"rep:excerpt\".equals(pr.propertyName)) {\n    continue;\n  }\n  String first=null;\n  if (pr.first != null) {\n    first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n  }\n  String last=null;\n  if (pr.last != null) {\n    last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n  }\n  String prField=configuration.getFieldForPropertyRestriction(pr);\n  CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n  if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n    queryBuilder.append(configuration.getPathField());\n    queryBuilder.append(':');\n    queryBuilder.append(first);\n  }\n else {\n    if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(first);\n    }\n else     if (pr.first == null && pr.last == null) {\n      if (!queryBuilder.toString().contains(fieldName + \":\")) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append('*');\n      }\n    }\n else     if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n    }\n else     if (pr.isLike) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n    }\n else {\n      throw new RuntimeException(\"[unexpected!] not handled case\");\n    }\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 546,
                    "astHeight": 19
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.EnhancedForStatement,body]",
                    "nodePosition": {
                        "charLength": 5622,
                        "startLineNumber": 122,
                        "startColumnNumber": 71,
                        "endLineNumber": 213,
                        "endColumnNumber": 13
                    },
                    "nodeContext": "{\n  if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n    String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n    if (isSupportedHttpRequest(nativeQueryString)) {\n      String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n      if (!\"select\".equals(requestHandlerString)) {\n        if (requestHandlerString.charAt(0) != '/') {\n          requestHandlerString=\"/\" + requestHandlerString;\n        }\n        solrQuery.setRequestHandler(requestHandlerString);\n      }\n      String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n      for (      String param : parameterString.split(\"&\")) {\n        String[] kv=param.split(\"=\");\n        if (kv.length != 2) {\n          throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n        }\n else {\n          if (\"stream.body\".equals(kv[0])) {\n            kv[0]=\"q\";\n            String mltFlString=\"mlt.fl=\";\n            int mltFlIndex=parameterString.indexOf(mltFlString);\n            if (mltFlIndex > -1) {\n              int beginIndex=mltFlIndex + mltFlString.length();\n              int endIndex=parameterString.indexOf('&',beginIndex);\n              String fields;\n              if (endIndex > beginIndex) {\n                fields=parameterString.substring(beginIndex,endIndex);\n              }\n else {\n                fields=parameterString.substring(beginIndex);\n              }\n              kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n            }\n          }\n          solrQuery.setParam(kv[0],kv[1]);\n        }\n      }\n      return solrQuery;\n    }\n else {\n      queryBuilder.append(nativeQueryString);\n    }\n  }\n else {\n    if (pr.propertyName.contains(\"/\")) {\n      continue;\n    }\n    if (\"rep:excerpt\".equals(pr.propertyName)) {\n      continue;\n    }\n    String first=null;\n    if (pr.first != null) {\n      first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n    }\n    String last=null;\n    if (pr.last != null) {\n      last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n    }\n    String prField=configuration.getFieldForPropertyRestriction(pr);\n    CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n    if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n      queryBuilder.append(configuration.getPathField());\n      queryBuilder.append(':');\n      queryBuilder.append(first);\n    }\n else {\n      if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(first);\n      }\n else       if (pr.first == null && pr.last == null) {\n        if (!queryBuilder.toString().contains(fieldName + \":\")) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append('*');\n        }\n      }\n else       if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n      }\n else       if (pr.isLike) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n      }\n else {\n        throw new RuntimeException(\"[unexpected!] not handled case\");\n      }\n    }\n  }\n  queryBuilder.append(\" \");\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 552,
                    "astHeight": 20
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5681,
                        "startLineNumber": 122,
                        "startColumnNumber": 12,
                        "endLineNumber": 213,
                        "endColumnNumber": 13
                    },
                    "nodeContext": "for (Filter.PropertyRestriction pr : propertyRestrictions) {\n  if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n    String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n    if (isSupportedHttpRequest(nativeQueryString)) {\n      String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n      if (!\"select\".equals(requestHandlerString)) {\n        if (requestHandlerString.charAt(0) != '/') {\n          requestHandlerString=\"/\" + requestHandlerString;\n        }\n        solrQuery.setRequestHandler(requestHandlerString);\n      }\n      String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n      for (      String param : parameterString.split(\"&\")) {\n        String[] kv=param.split(\"=\");\n        if (kv.length != 2) {\n          throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n        }\n else {\n          if (\"stream.body\".equals(kv[0])) {\n            kv[0]=\"q\";\n            String mltFlString=\"mlt.fl=\";\n            int mltFlIndex=parameterString.indexOf(mltFlString);\n            if (mltFlIndex > -1) {\n              int beginIndex=mltFlIndex + mltFlString.length();\n              int endIndex=parameterString.indexOf('&',beginIndex);\n              String fields;\n              if (endIndex > beginIndex) {\n                fields=parameterString.substring(beginIndex,endIndex);\n              }\n else {\n                fields=parameterString.substring(beginIndex);\n              }\n              kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n            }\n          }\n          solrQuery.setParam(kv[0],kv[1]);\n        }\n      }\n      return solrQuery;\n    }\n else {\n      queryBuilder.append(nativeQueryString);\n    }\n  }\n else {\n    if (pr.propertyName.contains(\"/\")) {\n      continue;\n    }\n    if (\"rep:excerpt\".equals(pr.propertyName)) {\n      continue;\n    }\n    String first=null;\n    if (pr.first != null) {\n      first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n    }\n    String last=null;\n    if (pr.last != null) {\n      last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n    }\n    String prField=configuration.getFieldForPropertyRestriction(pr);\n    CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n    if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n      queryBuilder.append(configuration.getPathField());\n      queryBuilder.append(':');\n      queryBuilder.append(first);\n    }\n else {\n      if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(first);\n      }\n else       if (pr.first == null && pr.last == null) {\n        if (!queryBuilder.toString().contains(fieldName + \":\")) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append('*');\n        }\n      }\n else       if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n      }\n else       if (pr.isLike) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n      }\n else {\n        throw new RuntimeException(\"[unexpected!] not handled case\");\n      }\n    }\n  }\n  queryBuilder.append(\" \");\n}\n",
                    "nodeType": "EnhancedForStatement",
                    "astNodeNumber": 560,
                    "astHeight": 21
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,thenStatement]",
                    "nodePosition": {
                        "charLength": 5705,
                        "startLineNumber": 121,
                        "startColumnNumber": 77,
                        "endLineNumber": 214,
                        "endColumnNumber": 9
                    },
                    "nodeContext": "{\n  for (  Filter.PropertyRestriction pr : propertyRestrictions) {\n    if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n      String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n      if (isSupportedHttpRequest(nativeQueryString)) {\n        String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n        if (!\"select\".equals(requestHandlerString)) {\n          if (requestHandlerString.charAt(0) != '/') {\n            requestHandlerString=\"/\" + requestHandlerString;\n          }\n          solrQuery.setRequestHandler(requestHandlerString);\n        }\n        String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n        for (        String param : parameterString.split(\"&\")) {\n          String[] kv=param.split(\"=\");\n          if (kv.length != 2) {\n            throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n          }\n else {\n            if (\"stream.body\".equals(kv[0])) {\n              kv[0]=\"q\";\n              String mltFlString=\"mlt.fl=\";\n              int mltFlIndex=parameterString.indexOf(mltFlString);\n              if (mltFlIndex > -1) {\n                int beginIndex=mltFlIndex + mltFlString.length();\n                int endIndex=parameterString.indexOf('&',beginIndex);\n                String fields;\n                if (endIndex > beginIndex) {\n                  fields=parameterString.substring(beginIndex,endIndex);\n                }\n else {\n                  fields=parameterString.substring(beginIndex);\n                }\n                kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n              }\n            }\n            solrQuery.setParam(kv[0],kv[1]);\n          }\n        }\n        return solrQuery;\n      }\n else {\n        queryBuilder.append(nativeQueryString);\n      }\n    }\n else {\n      if (pr.propertyName.contains(\"/\")) {\n        continue;\n      }\n      if (\"rep:excerpt\".equals(pr.propertyName)) {\n        continue;\n      }\n      String first=null;\n      if (pr.first != null) {\n        first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n      }\n      String last=null;\n      if (pr.last != null) {\n        last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n      }\n      String prField=configuration.getFieldForPropertyRestriction(pr);\n      CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n      if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n        queryBuilder.append(configuration.getPathField());\n        queryBuilder.append(':');\n        queryBuilder.append(first);\n      }\n else {\n        if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(first);\n        }\n else         if (pr.first == null && pr.last == null) {\n          if (!queryBuilder.toString().contains(fieldName + \":\")) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append('*');\n          }\n        }\n else         if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n        }\n else         if (pr.isLike) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n        }\n else {\n          throw new RuntimeException(\"[unexpected!] not handled case\");\n        }\n      }\n    }\n    queryBuilder.append(\" \");\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 561,
                    "astHeight": 22
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5774,
                        "startLineNumber": 121,
                        "startColumnNumber": 8,
                        "endLineNumber": 214,
                        "endColumnNumber": 9
                    },
                    "nodeContext": "if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n  for (  Filter.PropertyRestriction pr : propertyRestrictions) {\n    if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n      String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n      if (isSupportedHttpRequest(nativeQueryString)) {\n        String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n        if (!\"select\".equals(requestHandlerString)) {\n          if (requestHandlerString.charAt(0) != '/') {\n            requestHandlerString=\"/\" + requestHandlerString;\n          }\n          solrQuery.setRequestHandler(requestHandlerString);\n        }\n        String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n        for (        String param : parameterString.split(\"&\")) {\n          String[] kv=param.split(\"=\");\n          if (kv.length != 2) {\n            throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n          }\n else {\n            if (\"stream.body\".equals(kv[0])) {\n              kv[0]=\"q\";\n              String mltFlString=\"mlt.fl=\";\n              int mltFlIndex=parameterString.indexOf(mltFlString);\n              if (mltFlIndex > -1) {\n                int beginIndex=mltFlIndex + mltFlString.length();\n                int endIndex=parameterString.indexOf('&',beginIndex);\n                String fields;\n                if (endIndex > beginIndex) {\n                  fields=parameterString.substring(beginIndex,endIndex);\n                }\n else {\n                  fields=parameterString.substring(beginIndex);\n                }\n                kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n              }\n            }\n            solrQuery.setParam(kv[0],kv[1]);\n          }\n        }\n        return solrQuery;\n      }\n else {\n        queryBuilder.append(nativeQueryString);\n      }\n    }\n else {\n      if (pr.propertyName.contains(\"/\")) {\n        continue;\n      }\n      if (\"rep:excerpt\".equals(pr.propertyName)) {\n        continue;\n      }\n      String first=null;\n      if (pr.first != null) {\n        first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n      }\n      String last=null;\n      if (pr.last != null) {\n        last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n      }\n      String prField=configuration.getFieldForPropertyRestriction(pr);\n      CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n      if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n        queryBuilder.append(configuration.getPathField());\n        queryBuilder.append(':');\n        queryBuilder.append(first);\n      }\n else {\n        if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(first);\n        }\n else         if (pr.first == null && pr.last == null) {\n          if (!queryBuilder.toString().contains(fieldName + \":\")) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append('*');\n          }\n        }\n else         if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n        }\n else         if (pr.isLike) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n        }\n else {\n          throw new RuntimeException(\"[unexpected!] not handled case\");\n        }\n      }\n    }\n    queryBuilder.append(\" \");\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 570,
                    "astHeight": 23
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.MethodDeclaration,body]",
                    "nodePosition": {
                        "charLength": 7985,
                        "startLineNumber": 103,
                        "startColumnNumber": 46,
                        "endLineNumber": 255,
                        "endColumnNumber": 5
                    },
                    "nodeContext": "{\n  SolrQuery solrQuery=new SolrQuery();\n  setDefaults(solrQuery);\n  StringBuilder queryBuilder=new StringBuilder();\n  if (filter.getFullTextConstraint() != null) {\n    queryBuilder.append(getFullTextQuery(filter.getFullTextConstraint()));\n    queryBuilder.append(' ');\n  }\n else   if (filter.getFulltextConditions() != null) {\n    Collection<String> fulltextConditions=filter.getFulltextConditions();\n    for (    String fulltextCondition : fulltextConditions) {\n      queryBuilder.append(fulltextCondition).append(\" \");\n    }\n  }\n  Collection<Filter.PropertyRestriction> propertyRestrictions=filter.getPropertyRestrictions();\n  if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n    for (    Filter.PropertyRestriction pr : propertyRestrictions) {\n      if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n        String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n        if (isSupportedHttpRequest(nativeQueryString)) {\n          String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n          if (!\"select\".equals(requestHandlerString)) {\n            if (requestHandlerString.charAt(0) != '/') {\n              requestHandlerString=\"/\" + requestHandlerString;\n            }\n            solrQuery.setRequestHandler(requestHandlerString);\n          }\n          String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n          for (          String param : parameterString.split(\"&\")) {\n            String[] kv=param.split(\"=\");\n            if (kv.length != 2) {\n              throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n            }\n else {\n              if (\"stream.body\".equals(kv[0])) {\n                kv[0]=\"q\";\n                String mltFlString=\"mlt.fl=\";\n                int mltFlIndex=parameterString.indexOf(mltFlString);\n                if (mltFlIndex > -1) {\n                  int beginIndex=mltFlIndex + mltFlString.length();\n                  int endIndex=parameterString.indexOf('&',beginIndex);\n                  String fields;\n                  if (endIndex > beginIndex) {\n                    fields=parameterString.substring(beginIndex,endIndex);\n                  }\n else {\n                    fields=parameterString.substring(beginIndex);\n                  }\n                  kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n                }\n              }\n              solrQuery.setParam(kv[0],kv[1]);\n            }\n          }\n          return solrQuery;\n        }\n else {\n          queryBuilder.append(nativeQueryString);\n        }\n      }\n else {\n        if (pr.propertyName.contains(\"/\")) {\n          continue;\n        }\n        if (\"rep:excerpt\".equals(pr.propertyName)) {\n          continue;\n        }\n        String first=null;\n        if (pr.first != null) {\n          first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n        }\n        String last=null;\n        if (pr.last != null) {\n          last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n        }\n        String prField=configuration.getFieldForPropertyRestriction(pr);\n        CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n        if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n          queryBuilder.append(configuration.getPathField());\n          queryBuilder.append(':');\n          queryBuilder.append(first);\n        }\n else {\n          if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(first);\n          }\n else           if (pr.first == null && pr.last == null) {\n            if (!queryBuilder.toString().contains(fieldName + \":\")) {\n              queryBuilder.append(fieldName).append(':');\n              queryBuilder.append('*');\n            }\n          }\n else           if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n          }\n else           if (pr.isLike) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n          }\n else {\n            throw new RuntimeException(\"[unexpected!] not handled case\");\n          }\n        }\n      }\n      queryBuilder.append(\" \");\n    }\n  }\n  String[] pts=filter.getPrimaryTypes().toArray(new String[filter.getPrimaryTypes().size()]);\n  for (int i=0; i < pts.length; i++) {\n    String pt=pts[i];\n    if (i == 0) {\n      queryBuilder.append(\"(\");\n    }\n    if (i > 0 && i < pts.length) {\n      queryBuilder.append(\"OR \");\n    }\n    queryBuilder.append(\"jcr\\\\:primaryType\").append(':').append(partialEscape(pt)).append(\" \");\n    if (i == pts.length - 1) {\n      queryBuilder.append(\")\");\n      queryBuilder.append(' ');\n    }\n  }\n  Filter.PathRestriction pathRestriction=filter.getPathRestriction();\n  if (pathRestriction != null) {\n    String path=purgePath(filter);\n    String fieldName=configuration.getFieldForPathRestriction(pathRestriction);\n    if (fieldName != null) {\n      queryBuilder.append(fieldName);\n      queryBuilder.append(':');\n      queryBuilder.append(path);\n    }\n  }\n  if (queryBuilder.length() == 0) {\n    queryBuilder.append(\"*:*\");\n  }\n  String escapedQuery=queryBuilder.toString();\n  solrQuery.setQuery(escapedQuery);\n  if (log.isDebugEnabled()) {\n    log.debug(\"JCR query {} has been converted to Solr query {}\",filter.getQueryStatement(),solrQuery.toString());\n  }\n  return solrQuery;\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 858,
                    "astHeight": 24
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.TypeDeclaration,bodyDeclarations]",
                    "nodePosition": {
                        "charLength": 8027,
                        "startLineNumber": 103,
                        "startColumnNumber": 4,
                        "endLineNumber": 255,
                        "endColumnNumber": 5
                    },
                    "nodeContext": "private SolrQuery getQuery(Filter filter){\n  SolrQuery solrQuery=new SolrQuery();\n  setDefaults(solrQuery);\n  StringBuilder queryBuilder=new StringBuilder();\n  if (filter.getFullTextConstraint() != null) {\n    queryBuilder.append(getFullTextQuery(filter.getFullTextConstraint()));\n    queryBuilder.append(' ');\n  }\n else   if (filter.getFulltextConditions() != null) {\n    Collection<String> fulltextConditions=filter.getFulltextConditions();\n    for (    String fulltextCondition : fulltextConditions) {\n      queryBuilder.append(fulltextCondition).append(\" \");\n    }\n  }\n  Collection<Filter.PropertyRestriction> propertyRestrictions=filter.getPropertyRestrictions();\n  if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n    for (    Filter.PropertyRestriction pr : propertyRestrictions) {\n      if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n        String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n        if (isSupportedHttpRequest(nativeQueryString)) {\n          String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n          if (!\"select\".equals(requestHandlerString)) {\n            if (requestHandlerString.charAt(0) != '/') {\n              requestHandlerString=\"/\" + requestHandlerString;\n            }\n            solrQuery.setRequestHandler(requestHandlerString);\n          }\n          String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n          for (          String param : parameterString.split(\"&\")) {\n            String[] kv=param.split(\"=\");\n            if (kv.length != 2) {\n              throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n            }\n else {\n              if (\"stream.body\".equals(kv[0])) {\n                kv[0]=\"q\";\n                String mltFlString=\"mlt.fl=\";\n                int mltFlIndex=parameterString.indexOf(mltFlString);\n                if (mltFlIndex > -1) {\n                  int beginIndex=mltFlIndex + mltFlString.length();\n                  int endIndex=parameterString.indexOf('&',beginIndex);\n                  String fields;\n                  if (endIndex > beginIndex) {\n                    fields=parameterString.substring(beginIndex,endIndex);\n                  }\n else {\n                    fields=parameterString.substring(beginIndex);\n                  }\n                  kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n                }\n              }\n              solrQuery.setParam(kv[0],kv[1]);\n            }\n          }\n          return solrQuery;\n        }\n else {\n          queryBuilder.append(nativeQueryString);\n        }\n      }\n else {\n        if (pr.propertyName.contains(\"/\")) {\n          continue;\n        }\n        if (\"rep:excerpt\".equals(pr.propertyName)) {\n          continue;\n        }\n        String first=null;\n        if (pr.first != null) {\n          first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n        }\n        String last=null;\n        if (pr.last != null) {\n          last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n        }\n        String prField=configuration.getFieldForPropertyRestriction(pr);\n        CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n        if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n          queryBuilder.append(configuration.getPathField());\n          queryBuilder.append(':');\n          queryBuilder.append(first);\n        }\n else {\n          if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(first);\n          }\n else           if (pr.first == null && pr.last == null) {\n            if (!queryBuilder.toString().contains(fieldName + \":\")) {\n              queryBuilder.append(fieldName).append(':');\n              queryBuilder.append('*');\n            }\n          }\n else           if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n          }\n else           if (pr.isLike) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n          }\n else {\n            throw new RuntimeException(\"[unexpected!] not handled case\");\n          }\n        }\n      }\n      queryBuilder.append(\" \");\n    }\n  }\n  String[] pts=filter.getPrimaryTypes().toArray(new String[filter.getPrimaryTypes().size()]);\n  for (int i=0; i < pts.length; i++) {\n    String pt=pts[i];\n    if (i == 0) {\n      queryBuilder.append(\"(\");\n    }\n    if (i > 0 && i < pts.length) {\n      queryBuilder.append(\"OR \");\n    }\n    queryBuilder.append(\"jcr\\\\:primaryType\").append(':').append(partialEscape(pt)).append(\" \");\n    if (i == pts.length - 1) {\n      queryBuilder.append(\")\");\n      queryBuilder.append(' ');\n    }\n  }\n  Filter.PathRestriction pathRestriction=filter.getPathRestriction();\n  if (pathRestriction != null) {\n    String path=purgePath(filter);\n    String fieldName=configuration.getFieldForPathRestriction(pathRestriction);\n    if (fieldName != null) {\n      queryBuilder.append(fieldName);\n      queryBuilder.append(':');\n      queryBuilder.append(path);\n    }\n  }\n  if (queryBuilder.length() == 0) {\n    queryBuilder.append(\"*:*\");\n  }\n  String escapedQuery=queryBuilder.toString();\n  solrQuery.setQuery(escapedQuery);\n  if (log.isDebugEnabled()) {\n    log.debug(\"JCR query {} has been converted to Solr query {}\",filter.getQueryStatement(),solrQuery.toString());\n  }\n  return solrQuery;\n}\n",
                    "nodeType": "MethodDeclaration",
                    "astNodeNumber": 867,
                    "astHeight": 25
                }
            ],
            "currentLineData": {
                "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,expression]",
                "nodePosition": {
                    "charLength": 109,
                    "startLineNumber": 199,
                    "startColumnNumber": 35,
                    "endLineNumber": 199,
                    "endColumnNumber": 144
                },
                "nodeContext": "(pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))",
                "nodeType": "InfixExpression",
                "astNodeNumber": 35,
                "astHeight": 6
            },
            "tokenLength": 1,
            "type": "org.apache.jackrabbit.oak.spi.query.Filter.PropertyRestriction"
        },
        {
            "nodeContext": "pr",
            "nodeType": "SimpleName",
            "nodePosition": {
                "charLength": 2,
                "startLineNumber": 199,
                "startColumnNumber": 96,
                "endLineNumber": 199,
                "endColumnNumber": 98
            },
            "astNodeNumber": 1,
            "astHeight": 1,
            "parentDataList": [
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.InfixExpression,leftOperand]",
                    "nodePosition": {
                        "charLength": 8,
                        "startLineNumber": 199,
                        "startColumnNumber": 96,
                        "endLineNumber": 199,
                        "endColumnNumber": 104
                    },
                    "nodeContext": "pr.first",
                    "nodeType": "QualifiedName",
                    "astNodeNumber": 3,
                    "astHeight": 2
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.InfixExpression,rightOperand]",
                    "nodePosition": {
                        "charLength": 16,
                        "startLineNumber": 199,
                        "startColumnNumber": 96,
                        "endLineNumber": 199,
                        "endColumnNumber": 112
                    },
                    "nodeContext": "pr.first == null",
                    "nodeType": "InfixExpression",
                    "astNodeNumber": 5,
                    "astHeight": 3
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.ParenthesizedExpression,expression]",
                    "nodePosition": {
                        "charLength": 35,
                        "startLineNumber": 199,
                        "startColumnNumber": 77,
                        "endLineNumber": 199,
                        "endColumnNumber": 112
                    },
                    "nodeContext": "pr.last != null && pr.first == null",
                    "nodeType": "InfixExpression",
                    "astNodeNumber": 11,
                    "astHeight": 4
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.InfixExpression,rightOperand]",
                    "nodePosition": {
                        "charLength": 37,
                        "startLineNumber": 199,
                        "startColumnNumber": 76,
                        "endLineNumber": 199,
                        "endColumnNumber": 113
                    },
                    "nodeContext": "(pr.last != null && pr.first == null)",
                    "nodeType": "ParenthesizedExpression",
                    "astNodeNumber": 12,
                    "astHeight": 5
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,expression]",
                    "nodePosition": {
                        "charLength": 109,
                        "startLineNumber": 199,
                        "startColumnNumber": 35,
                        "endLineNumber": 199,
                        "endColumnNumber": 144
                    },
                    "nodeContext": "(pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))",
                    "nodeType": "InfixExpression",
                    "astNodeNumber": 35,
                    "astHeight": 6
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 936,
                        "startLineNumber": 199,
                        "startColumnNumber": 31,
                        "endLineNumber": 209,
                        "endColumnNumber": 25
                    },
                    "nodeContext": "if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n}\n else if (pr.isLike) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n}\n else {\n  throw new RuntimeException(\"[unexpected!] not handled case\");\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 105,
                    "astHeight": 13
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 1260,
                        "startLineNumber": 194,
                        "startColumnNumber": 31,
                        "endLineNumber": 209,
                        "endColumnNumber": 25
                    },
                    "nodeContext": "if (pr.first == null && pr.last == null) {\n  if (!queryBuilder.toString().contains(fieldName + \":\")) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append('*');\n  }\n}\n else if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n}\n else if (pr.isLike) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n}\n else {\n  throw new RuntimeException(\"[unexpected!] not handled case\");\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 142,
                    "astHeight": 14
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 1490,
                        "startLineNumber": 191,
                        "startColumnNumber": 24,
                        "endLineNumber": 209,
                        "endColumnNumber": 25
                    },
                    "nodeContext": "if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(first);\n}\n else if (pr.first == null && pr.last == null) {\n  if (!queryBuilder.toString().contains(fieldName + \":\")) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append('*');\n  }\n}\n else if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n}\n else if (pr.isLike) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n}\n else {\n  throw new RuntimeException(\"[unexpected!] not handled case\");\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 177,
                    "astHeight": 15
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 1538,
                        "startLineNumber": 190,
                        "startColumnNumber": 27,
                        "endLineNumber": 210,
                        "endColumnNumber": 21
                    },
                    "nodeContext": "{\n  if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(first);\n  }\n else   if (pr.first == null && pr.last == null) {\n    if (!queryBuilder.toString().contains(fieldName + \":\")) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append('*');\n    }\n  }\n else   if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n  }\n else   if (pr.isLike) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n  }\n else {\n    throw new RuntimeException(\"[unexpected!] not handled case\");\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 178,
                    "astHeight": 16
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 1791,
                        "startLineNumber": 186,
                        "startColumnNumber": 20,
                        "endLineNumber": 210,
                        "endColumnNumber": 21
                    },
                    "nodeContext": "if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n  queryBuilder.append(configuration.getPathField());\n  queryBuilder.append(':');\n  queryBuilder.append(first);\n}\n else {\n  if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(first);\n  }\n else   if (pr.first == null && pr.last == null) {\n    if (!queryBuilder.toString().contains(fieldName + \":\")) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append('*');\n    }\n  }\n else   if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n  }\n else   if (pr.isLike) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n  }\n else {\n    throw new RuntimeException(\"[unexpected!] not handled case\");\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 203,
                    "astHeight": 17
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 2798,
                        "startLineNumber": 164,
                        "startColumnNumber": 23,
                        "endLineNumber": 211,
                        "endColumnNumber": 17
                    },
                    "nodeContext": "{\n  if (pr.propertyName.contains(\"/\")) {\n    continue;\n  }\n  if (\"rep:excerpt\".equals(pr.propertyName)) {\n    continue;\n  }\n  String first=null;\n  if (pr.first != null) {\n    first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n  }\n  String last=null;\n  if (pr.last != null) {\n    last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n  }\n  String prField=configuration.getFieldForPropertyRestriction(pr);\n  CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n  if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n    queryBuilder.append(configuration.getPathField());\n    queryBuilder.append(':');\n    queryBuilder.append(first);\n  }\n else {\n    if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(first);\n    }\n else     if (pr.first == null && pr.last == null) {\n      if (!queryBuilder.toString().contains(fieldName + \":\")) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append('*');\n      }\n    }\n else     if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n    }\n else     if (pr.isLike) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n    }\n else {\n      throw new RuntimeException(\"[unexpected!] not handled case\");\n    }\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 312,
                    "astHeight": 18
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5508,
                        "startLineNumber": 124,
                        "startColumnNumber": 16,
                        "endLineNumber": 211,
                        "endColumnNumber": 17
                    },
                    "nodeContext": "if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n  String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n  if (isSupportedHttpRequest(nativeQueryString)) {\n    String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n    if (!\"select\".equals(requestHandlerString)) {\n      if (requestHandlerString.charAt(0) != '/') {\n        requestHandlerString=\"/\" + requestHandlerString;\n      }\n      solrQuery.setRequestHandler(requestHandlerString);\n    }\n    String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n    for (    String param : parameterString.split(\"&\")) {\n      String[] kv=param.split(\"=\");\n      if (kv.length != 2) {\n        throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n      }\n else {\n        if (\"stream.body\".equals(kv[0])) {\n          kv[0]=\"q\";\n          String mltFlString=\"mlt.fl=\";\n          int mltFlIndex=parameterString.indexOf(mltFlString);\n          if (mltFlIndex > -1) {\n            int beginIndex=mltFlIndex + mltFlString.length();\n            int endIndex=parameterString.indexOf('&',beginIndex);\n            String fields;\n            if (endIndex > beginIndex) {\n              fields=parameterString.substring(beginIndex,endIndex);\n            }\n else {\n              fields=parameterString.substring(beginIndex);\n            }\n            kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n          }\n        }\n        solrQuery.setParam(kv[0],kv[1]);\n      }\n    }\n    return solrQuery;\n  }\n else {\n    queryBuilder.append(nativeQueryString);\n  }\n}\n else {\n  if (pr.propertyName.contains(\"/\")) {\n    continue;\n  }\n  if (\"rep:excerpt\".equals(pr.propertyName)) {\n    continue;\n  }\n  String first=null;\n  if (pr.first != null) {\n    first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n  }\n  String last=null;\n  if (pr.last != null) {\n    last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n  }\n  String prField=configuration.getFieldForPropertyRestriction(pr);\n  CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n  if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n    queryBuilder.append(configuration.getPathField());\n    queryBuilder.append(':');\n    queryBuilder.append(first);\n  }\n else {\n    if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(first);\n    }\n else     if (pr.first == null && pr.last == null) {\n      if (!queryBuilder.toString().contains(fieldName + \":\")) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append('*');\n      }\n    }\n else     if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n    }\n else     if (pr.isLike) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n    }\n else {\n      throw new RuntimeException(\"[unexpected!] not handled case\");\n    }\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 546,
                    "astHeight": 19
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.EnhancedForStatement,body]",
                    "nodePosition": {
                        "charLength": 5622,
                        "startLineNumber": 122,
                        "startColumnNumber": 71,
                        "endLineNumber": 213,
                        "endColumnNumber": 13
                    },
                    "nodeContext": "{\n  if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n    String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n    if (isSupportedHttpRequest(nativeQueryString)) {\n      String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n      if (!\"select\".equals(requestHandlerString)) {\n        if (requestHandlerString.charAt(0) != '/') {\n          requestHandlerString=\"/\" + requestHandlerString;\n        }\n        solrQuery.setRequestHandler(requestHandlerString);\n      }\n      String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n      for (      String param : parameterString.split(\"&\")) {\n        String[] kv=param.split(\"=\");\n        if (kv.length != 2) {\n          throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n        }\n else {\n          if (\"stream.body\".equals(kv[0])) {\n            kv[0]=\"q\";\n            String mltFlString=\"mlt.fl=\";\n            int mltFlIndex=parameterString.indexOf(mltFlString);\n            if (mltFlIndex > -1) {\n              int beginIndex=mltFlIndex + mltFlString.length();\n              int endIndex=parameterString.indexOf('&',beginIndex);\n              String fields;\n              if (endIndex > beginIndex) {\n                fields=parameterString.substring(beginIndex,endIndex);\n              }\n else {\n                fields=parameterString.substring(beginIndex);\n              }\n              kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n            }\n          }\n          solrQuery.setParam(kv[0],kv[1]);\n        }\n      }\n      return solrQuery;\n    }\n else {\n      queryBuilder.append(nativeQueryString);\n    }\n  }\n else {\n    if (pr.propertyName.contains(\"/\")) {\n      continue;\n    }\n    if (\"rep:excerpt\".equals(pr.propertyName)) {\n      continue;\n    }\n    String first=null;\n    if (pr.first != null) {\n      first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n    }\n    String last=null;\n    if (pr.last != null) {\n      last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n    }\n    String prField=configuration.getFieldForPropertyRestriction(pr);\n    CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n    if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n      queryBuilder.append(configuration.getPathField());\n      queryBuilder.append(':');\n      queryBuilder.append(first);\n    }\n else {\n      if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(first);\n      }\n else       if (pr.first == null && pr.last == null) {\n        if (!queryBuilder.toString().contains(fieldName + \":\")) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append('*');\n        }\n      }\n else       if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n      }\n else       if (pr.isLike) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n      }\n else {\n        throw new RuntimeException(\"[unexpected!] not handled case\");\n      }\n    }\n  }\n  queryBuilder.append(\" \");\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 552,
                    "astHeight": 20
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5681,
                        "startLineNumber": 122,
                        "startColumnNumber": 12,
                        "endLineNumber": 213,
                        "endColumnNumber": 13
                    },
                    "nodeContext": "for (Filter.PropertyRestriction pr : propertyRestrictions) {\n  if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n    String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n    if (isSupportedHttpRequest(nativeQueryString)) {\n      String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n      if (!\"select\".equals(requestHandlerString)) {\n        if (requestHandlerString.charAt(0) != '/') {\n          requestHandlerString=\"/\" + requestHandlerString;\n        }\n        solrQuery.setRequestHandler(requestHandlerString);\n      }\n      String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n      for (      String param : parameterString.split(\"&\")) {\n        String[] kv=param.split(\"=\");\n        if (kv.length != 2) {\n          throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n        }\n else {\n          if (\"stream.body\".equals(kv[0])) {\n            kv[0]=\"q\";\n            String mltFlString=\"mlt.fl=\";\n            int mltFlIndex=parameterString.indexOf(mltFlString);\n            if (mltFlIndex > -1) {\n              int beginIndex=mltFlIndex + mltFlString.length();\n              int endIndex=parameterString.indexOf('&',beginIndex);\n              String fields;\n              if (endIndex > beginIndex) {\n                fields=parameterString.substring(beginIndex,endIndex);\n              }\n else {\n                fields=parameterString.substring(beginIndex);\n              }\n              kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n            }\n          }\n          solrQuery.setParam(kv[0],kv[1]);\n        }\n      }\n      return solrQuery;\n    }\n else {\n      queryBuilder.append(nativeQueryString);\n    }\n  }\n else {\n    if (pr.propertyName.contains(\"/\")) {\n      continue;\n    }\n    if (\"rep:excerpt\".equals(pr.propertyName)) {\n      continue;\n    }\n    String first=null;\n    if (pr.first != null) {\n      first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n    }\n    String last=null;\n    if (pr.last != null) {\n      last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n    }\n    String prField=configuration.getFieldForPropertyRestriction(pr);\n    CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n    if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n      queryBuilder.append(configuration.getPathField());\n      queryBuilder.append(':');\n      queryBuilder.append(first);\n    }\n else {\n      if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(first);\n      }\n else       if (pr.first == null && pr.last == null) {\n        if (!queryBuilder.toString().contains(fieldName + \":\")) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append('*');\n        }\n      }\n else       if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n      }\n else       if (pr.isLike) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n      }\n else {\n        throw new RuntimeException(\"[unexpected!] not handled case\");\n      }\n    }\n  }\n  queryBuilder.append(\" \");\n}\n",
                    "nodeType": "EnhancedForStatement",
                    "astNodeNumber": 560,
                    "astHeight": 21
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,thenStatement]",
                    "nodePosition": {
                        "charLength": 5705,
                        "startLineNumber": 121,
                        "startColumnNumber": 77,
                        "endLineNumber": 214,
                        "endColumnNumber": 9
                    },
                    "nodeContext": "{\n  for (  Filter.PropertyRestriction pr : propertyRestrictions) {\n    if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n      String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n      if (isSupportedHttpRequest(nativeQueryString)) {\n        String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n        if (!\"select\".equals(requestHandlerString)) {\n          if (requestHandlerString.charAt(0) != '/') {\n            requestHandlerString=\"/\" + requestHandlerString;\n          }\n          solrQuery.setRequestHandler(requestHandlerString);\n        }\n        String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n        for (        String param : parameterString.split(\"&\")) {\n          String[] kv=param.split(\"=\");\n          if (kv.length != 2) {\n            throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n          }\n else {\n            if (\"stream.body\".equals(kv[0])) {\n              kv[0]=\"q\";\n              String mltFlString=\"mlt.fl=\";\n              int mltFlIndex=parameterString.indexOf(mltFlString);\n              if (mltFlIndex > -1) {\n                int beginIndex=mltFlIndex + mltFlString.length();\n                int endIndex=parameterString.indexOf('&',beginIndex);\n                String fields;\n                if (endIndex > beginIndex) {\n                  fields=parameterString.substring(beginIndex,endIndex);\n                }\n else {\n                  fields=parameterString.substring(beginIndex);\n                }\n                kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n              }\n            }\n            solrQuery.setParam(kv[0],kv[1]);\n          }\n        }\n        return solrQuery;\n      }\n else {\n        queryBuilder.append(nativeQueryString);\n      }\n    }\n else {\n      if (pr.propertyName.contains(\"/\")) {\n        continue;\n      }\n      if (\"rep:excerpt\".equals(pr.propertyName)) {\n        continue;\n      }\n      String first=null;\n      if (pr.first != null) {\n        first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n      }\n      String last=null;\n      if (pr.last != null) {\n        last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n      }\n      String prField=configuration.getFieldForPropertyRestriction(pr);\n      CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n      if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n        queryBuilder.append(configuration.getPathField());\n        queryBuilder.append(':');\n        queryBuilder.append(first);\n      }\n else {\n        if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(first);\n        }\n else         if (pr.first == null && pr.last == null) {\n          if (!queryBuilder.toString().contains(fieldName + \":\")) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append('*');\n          }\n        }\n else         if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n        }\n else         if (pr.isLike) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n        }\n else {\n          throw new RuntimeException(\"[unexpected!] not handled case\");\n        }\n      }\n    }\n    queryBuilder.append(\" \");\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 561,
                    "astHeight": 22
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5774,
                        "startLineNumber": 121,
                        "startColumnNumber": 8,
                        "endLineNumber": 214,
                        "endColumnNumber": 9
                    },
                    "nodeContext": "if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n  for (  Filter.PropertyRestriction pr : propertyRestrictions) {\n    if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n      String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n      if (isSupportedHttpRequest(nativeQueryString)) {\n        String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n        if (!\"select\".equals(requestHandlerString)) {\n          if (requestHandlerString.charAt(0) != '/') {\n            requestHandlerString=\"/\" + requestHandlerString;\n          }\n          solrQuery.setRequestHandler(requestHandlerString);\n        }\n        String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n        for (        String param : parameterString.split(\"&\")) {\n          String[] kv=param.split(\"=\");\n          if (kv.length != 2) {\n            throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n          }\n else {\n            if (\"stream.body\".equals(kv[0])) {\n              kv[0]=\"q\";\n              String mltFlString=\"mlt.fl=\";\n              int mltFlIndex=parameterString.indexOf(mltFlString);\n              if (mltFlIndex > -1) {\n                int beginIndex=mltFlIndex + mltFlString.length();\n                int endIndex=parameterString.indexOf('&',beginIndex);\n                String fields;\n                if (endIndex > beginIndex) {\n                  fields=parameterString.substring(beginIndex,endIndex);\n                }\n else {\n                  fields=parameterString.substring(beginIndex);\n                }\n                kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n              }\n            }\n            solrQuery.setParam(kv[0],kv[1]);\n          }\n        }\n        return solrQuery;\n      }\n else {\n        queryBuilder.append(nativeQueryString);\n      }\n    }\n else {\n      if (pr.propertyName.contains(\"/\")) {\n        continue;\n      }\n      if (\"rep:excerpt\".equals(pr.propertyName)) {\n        continue;\n      }\n      String first=null;\n      if (pr.first != null) {\n        first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n      }\n      String last=null;\n      if (pr.last != null) {\n        last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n      }\n      String prField=configuration.getFieldForPropertyRestriction(pr);\n      CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n      if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n        queryBuilder.append(configuration.getPathField());\n        queryBuilder.append(':');\n        queryBuilder.append(first);\n      }\n else {\n        if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(first);\n        }\n else         if (pr.first == null && pr.last == null) {\n          if (!queryBuilder.toString().contains(fieldName + \":\")) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append('*');\n          }\n        }\n else         if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n        }\n else         if (pr.isLike) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n        }\n else {\n          throw new RuntimeException(\"[unexpected!] not handled case\");\n        }\n      }\n    }\n    queryBuilder.append(\" \");\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 570,
                    "astHeight": 23
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.MethodDeclaration,body]",
                    "nodePosition": {
                        "charLength": 7985,
                        "startLineNumber": 103,
                        "startColumnNumber": 46,
                        "endLineNumber": 255,
                        "endColumnNumber": 5
                    },
                    "nodeContext": "{\n  SolrQuery solrQuery=new SolrQuery();\n  setDefaults(solrQuery);\n  StringBuilder queryBuilder=new StringBuilder();\n  if (filter.getFullTextConstraint() != null) {\n    queryBuilder.append(getFullTextQuery(filter.getFullTextConstraint()));\n    queryBuilder.append(' ');\n  }\n else   if (filter.getFulltextConditions() != null) {\n    Collection<String> fulltextConditions=filter.getFulltextConditions();\n    for (    String fulltextCondition : fulltextConditions) {\n      queryBuilder.append(fulltextCondition).append(\" \");\n    }\n  }\n  Collection<Filter.PropertyRestriction> propertyRestrictions=filter.getPropertyRestrictions();\n  if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n    for (    Filter.PropertyRestriction pr : propertyRestrictions) {\n      if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n        String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n        if (isSupportedHttpRequest(nativeQueryString)) {\n          String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n          if (!\"select\".equals(requestHandlerString)) {\n            if (requestHandlerString.charAt(0) != '/') {\n              requestHandlerString=\"/\" + requestHandlerString;\n            }\n            solrQuery.setRequestHandler(requestHandlerString);\n          }\n          String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n          for (          String param : parameterString.split(\"&\")) {\n            String[] kv=param.split(\"=\");\n            if (kv.length != 2) {\n              throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n            }\n else {\n              if (\"stream.body\".equals(kv[0])) {\n                kv[0]=\"q\";\n                String mltFlString=\"mlt.fl=\";\n                int mltFlIndex=parameterString.indexOf(mltFlString);\n                if (mltFlIndex > -1) {\n                  int beginIndex=mltFlIndex + mltFlString.length();\n                  int endIndex=parameterString.indexOf('&',beginIndex);\n                  String fields;\n                  if (endIndex > beginIndex) {\n                    fields=parameterString.substring(beginIndex,endIndex);\n                  }\n else {\n                    fields=parameterString.substring(beginIndex);\n                  }\n                  kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n                }\n              }\n              solrQuery.setParam(kv[0],kv[1]);\n            }\n          }\n          return solrQuery;\n        }\n else {\n          queryBuilder.append(nativeQueryString);\n        }\n      }\n else {\n        if (pr.propertyName.contains(\"/\")) {\n          continue;\n        }\n        if (\"rep:excerpt\".equals(pr.propertyName)) {\n          continue;\n        }\n        String first=null;\n        if (pr.first != null) {\n          first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n        }\n        String last=null;\n        if (pr.last != null) {\n          last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n        }\n        String prField=configuration.getFieldForPropertyRestriction(pr);\n        CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n        if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n          queryBuilder.append(configuration.getPathField());\n          queryBuilder.append(':');\n          queryBuilder.append(first);\n        }\n else {\n          if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(first);\n          }\n else           if (pr.first == null && pr.last == null) {\n            if (!queryBuilder.toString().contains(fieldName + \":\")) {\n              queryBuilder.append(fieldName).append(':');\n              queryBuilder.append('*');\n            }\n          }\n else           if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n          }\n else           if (pr.isLike) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n          }\n else {\n            throw new RuntimeException(\"[unexpected!] not handled case\");\n          }\n        }\n      }\n      queryBuilder.append(\" \");\n    }\n  }\n  String[] pts=filter.getPrimaryTypes().toArray(new String[filter.getPrimaryTypes().size()]);\n  for (int i=0; i < pts.length; i++) {\n    String pt=pts[i];\n    if (i == 0) {\n      queryBuilder.append(\"(\");\n    }\n    if (i > 0 && i < pts.length) {\n      queryBuilder.append(\"OR \");\n    }\n    queryBuilder.append(\"jcr\\\\:primaryType\").append(':').append(partialEscape(pt)).append(\" \");\n    if (i == pts.length - 1) {\n      queryBuilder.append(\")\");\n      queryBuilder.append(' ');\n    }\n  }\n  Filter.PathRestriction pathRestriction=filter.getPathRestriction();\n  if (pathRestriction != null) {\n    String path=purgePath(filter);\n    String fieldName=configuration.getFieldForPathRestriction(pathRestriction);\n    if (fieldName != null) {\n      queryBuilder.append(fieldName);\n      queryBuilder.append(':');\n      queryBuilder.append(path);\n    }\n  }\n  if (queryBuilder.length() == 0) {\n    queryBuilder.append(\"*:*\");\n  }\n  String escapedQuery=queryBuilder.toString();\n  solrQuery.setQuery(escapedQuery);\n  if (log.isDebugEnabled()) {\n    log.debug(\"JCR query {} has been converted to Solr query {}\",filter.getQueryStatement(),solrQuery.toString());\n  }\n  return solrQuery;\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 858,
                    "astHeight": 24
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.TypeDeclaration,bodyDeclarations]",
                    "nodePosition": {
                        "charLength": 8027,
                        "startLineNumber": 103,
                        "startColumnNumber": 4,
                        "endLineNumber": 255,
                        "endColumnNumber": 5
                    },
                    "nodeContext": "private SolrQuery getQuery(Filter filter){\n  SolrQuery solrQuery=new SolrQuery();\n  setDefaults(solrQuery);\n  StringBuilder queryBuilder=new StringBuilder();\n  if (filter.getFullTextConstraint() != null) {\n    queryBuilder.append(getFullTextQuery(filter.getFullTextConstraint()));\n    queryBuilder.append(' ');\n  }\n else   if (filter.getFulltextConditions() != null) {\n    Collection<String> fulltextConditions=filter.getFulltextConditions();\n    for (    String fulltextCondition : fulltextConditions) {\n      queryBuilder.append(fulltextCondition).append(\" \");\n    }\n  }\n  Collection<Filter.PropertyRestriction> propertyRestrictions=filter.getPropertyRestrictions();\n  if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n    for (    Filter.PropertyRestriction pr : propertyRestrictions) {\n      if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n        String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n        if (isSupportedHttpRequest(nativeQueryString)) {\n          String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n          if (!\"select\".equals(requestHandlerString)) {\n            if (requestHandlerString.charAt(0) != '/') {\n              requestHandlerString=\"/\" + requestHandlerString;\n            }\n            solrQuery.setRequestHandler(requestHandlerString);\n          }\n          String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n          for (          String param : parameterString.split(\"&\")) {\n            String[] kv=param.split(\"=\");\n            if (kv.length != 2) {\n              throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n            }\n else {\n              if (\"stream.body\".equals(kv[0])) {\n                kv[0]=\"q\";\n                String mltFlString=\"mlt.fl=\";\n                int mltFlIndex=parameterString.indexOf(mltFlString);\n                if (mltFlIndex > -1) {\n                  int beginIndex=mltFlIndex + mltFlString.length();\n                  int endIndex=parameterString.indexOf('&',beginIndex);\n                  String fields;\n                  if (endIndex > beginIndex) {\n                    fields=parameterString.substring(beginIndex,endIndex);\n                  }\n else {\n                    fields=parameterString.substring(beginIndex);\n                  }\n                  kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n                }\n              }\n              solrQuery.setParam(kv[0],kv[1]);\n            }\n          }\n          return solrQuery;\n        }\n else {\n          queryBuilder.append(nativeQueryString);\n        }\n      }\n else {\n        if (pr.propertyName.contains(\"/\")) {\n          continue;\n        }\n        if (\"rep:excerpt\".equals(pr.propertyName)) {\n          continue;\n        }\n        String first=null;\n        if (pr.first != null) {\n          first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n        }\n        String last=null;\n        if (pr.last != null) {\n          last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n        }\n        String prField=configuration.getFieldForPropertyRestriction(pr);\n        CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n        if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n          queryBuilder.append(configuration.getPathField());\n          queryBuilder.append(':');\n          queryBuilder.append(first);\n        }\n else {\n          if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(first);\n          }\n else           if (pr.first == null && pr.last == null) {\n            if (!queryBuilder.toString().contains(fieldName + \":\")) {\n              queryBuilder.append(fieldName).append(':');\n              queryBuilder.append('*');\n            }\n          }\n else           if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n          }\n else           if (pr.isLike) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n          }\n else {\n            throw new RuntimeException(\"[unexpected!] not handled case\");\n          }\n        }\n      }\n      queryBuilder.append(\" \");\n    }\n  }\n  String[] pts=filter.getPrimaryTypes().toArray(new String[filter.getPrimaryTypes().size()]);\n  for (int i=0; i < pts.length; i++) {\n    String pt=pts[i];\n    if (i == 0) {\n      queryBuilder.append(\"(\");\n    }\n    if (i > 0 && i < pts.length) {\n      queryBuilder.append(\"OR \");\n    }\n    queryBuilder.append(\"jcr\\\\:primaryType\").append(':').append(partialEscape(pt)).append(\" \");\n    if (i == pts.length - 1) {\n      queryBuilder.append(\")\");\n      queryBuilder.append(' ');\n    }\n  }\n  Filter.PathRestriction pathRestriction=filter.getPathRestriction();\n  if (pathRestriction != null) {\n    String path=purgePath(filter);\n    String fieldName=configuration.getFieldForPathRestriction(pathRestriction);\n    if (fieldName != null) {\n      queryBuilder.append(fieldName);\n      queryBuilder.append(':');\n      queryBuilder.append(path);\n    }\n  }\n  if (queryBuilder.length() == 0) {\n    queryBuilder.append(\"*:*\");\n  }\n  String escapedQuery=queryBuilder.toString();\n  solrQuery.setQuery(escapedQuery);\n  if (log.isDebugEnabled()) {\n    log.debug(\"JCR query {} has been converted to Solr query {}\",filter.getQueryStatement(),solrQuery.toString());\n  }\n  return solrQuery;\n}\n",
                    "nodeType": "MethodDeclaration",
                    "astNodeNumber": 867,
                    "astHeight": 25
                }
            ],
            "currentLineData": {
                "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,expression]",
                "nodePosition": {
                    "charLength": 109,
                    "startLineNumber": 199,
                    "startColumnNumber": 35,
                    "endLineNumber": 199,
                    "endColumnNumber": 144
                },
                "nodeContext": "(pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))",
                "nodeType": "InfixExpression",
                "astNodeNumber": 35,
                "astHeight": 6
            },
            "tokenLength": 1,
            "type": "org.apache.jackrabbit.oak.spi.query.Filter.PropertyRestriction"
        },
        {
            "nodeContext": "pr",
            "nodeType": "SimpleName",
            "nodePosition": {
                "charLength": 2,
                "startLineNumber": 199,
                "startColumnNumber": 119,
                "endLineNumber": 199,
                "endColumnNumber": 121
            },
            "astNodeNumber": 1,
            "astHeight": 1,
            "parentDataList": [
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.MethodInvocation,expression]",
                    "nodePosition": {
                        "charLength": 8,
                        "startLineNumber": 199,
                        "startColumnNumber": 119,
                        "endLineNumber": 199,
                        "endColumnNumber": 127
                    },
                    "nodeContext": "pr.first",
                    "nodeType": "QualifiedName",
                    "astNodeNumber": 3,
                    "astHeight": 2
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.PrefixExpression,operand]",
                    "nodePosition": {
                        "charLength": 24,
                        "startLineNumber": 199,
                        "startColumnNumber": 119,
                        "endLineNumber": 199,
                        "endColumnNumber": 143
                    },
                    "nodeContext": "pr.first.equals(pr.last)",
                    "nodeType": "MethodInvocation",
                    "astNodeNumber": 8,
                    "astHeight": 3
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.ParenthesizedExpression,expression]",
                    "nodePosition": {
                        "charLength": 25,
                        "startLineNumber": 199,
                        "startColumnNumber": 118,
                        "endLineNumber": 199,
                        "endColumnNumber": 143
                    },
                    "nodeContext": "!pr.first.equals(pr.last)",
                    "nodeType": "PrefixExpression",
                    "astNodeNumber": 9,
                    "astHeight": 4
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.InfixExpression,extendedOperands]",
                    "nodePosition": {
                        "charLength": 27,
                        "startLineNumber": 199,
                        "startColumnNumber": 117,
                        "endLineNumber": 199,
                        "endColumnNumber": 144
                    },
                    "nodeContext": "(!pr.first.equals(pr.last))",
                    "nodeType": "ParenthesizedExpression",
                    "astNodeNumber": 10,
                    "astHeight": 5
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,expression]",
                    "nodePosition": {
                        "charLength": 109,
                        "startLineNumber": 199,
                        "startColumnNumber": 35,
                        "endLineNumber": 199,
                        "endColumnNumber": 144
                    },
                    "nodeContext": "(pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))",
                    "nodeType": "InfixExpression",
                    "astNodeNumber": 35,
                    "astHeight": 6
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 936,
                        "startLineNumber": 199,
                        "startColumnNumber": 31,
                        "endLineNumber": 209,
                        "endColumnNumber": 25
                    },
                    "nodeContext": "if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n}\n else if (pr.isLike) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n}\n else {\n  throw new RuntimeException(\"[unexpected!] not handled case\");\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 105,
                    "astHeight": 13
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 1260,
                        "startLineNumber": 194,
                        "startColumnNumber": 31,
                        "endLineNumber": 209,
                        "endColumnNumber": 25
                    },
                    "nodeContext": "if (pr.first == null && pr.last == null) {\n  if (!queryBuilder.toString().contains(fieldName + \":\")) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append('*');\n  }\n}\n else if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n}\n else if (pr.isLike) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n}\n else {\n  throw new RuntimeException(\"[unexpected!] not handled case\");\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 142,
                    "astHeight": 14
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 1490,
                        "startLineNumber": 191,
                        "startColumnNumber": 24,
                        "endLineNumber": 209,
                        "endColumnNumber": 25
                    },
                    "nodeContext": "if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(first);\n}\n else if (pr.first == null && pr.last == null) {\n  if (!queryBuilder.toString().contains(fieldName + \":\")) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append('*');\n  }\n}\n else if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n}\n else if (pr.isLike) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n}\n else {\n  throw new RuntimeException(\"[unexpected!] not handled case\");\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 177,
                    "astHeight": 15
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 1538,
                        "startLineNumber": 190,
                        "startColumnNumber": 27,
                        "endLineNumber": 210,
                        "endColumnNumber": 21
                    },
                    "nodeContext": "{\n  if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(first);\n  }\n else   if (pr.first == null && pr.last == null) {\n    if (!queryBuilder.toString().contains(fieldName + \":\")) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append('*');\n    }\n  }\n else   if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n  }\n else   if (pr.isLike) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n  }\n else {\n    throw new RuntimeException(\"[unexpected!] not handled case\");\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 178,
                    "astHeight": 16
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 1791,
                        "startLineNumber": 186,
                        "startColumnNumber": 20,
                        "endLineNumber": 210,
                        "endColumnNumber": 21
                    },
                    "nodeContext": "if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n  queryBuilder.append(configuration.getPathField());\n  queryBuilder.append(':');\n  queryBuilder.append(first);\n}\n else {\n  if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(first);\n  }\n else   if (pr.first == null && pr.last == null) {\n    if (!queryBuilder.toString().contains(fieldName + \":\")) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append('*');\n    }\n  }\n else   if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n  }\n else   if (pr.isLike) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n  }\n else {\n    throw new RuntimeException(\"[unexpected!] not handled case\");\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 203,
                    "astHeight": 17
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 2798,
                        "startLineNumber": 164,
                        "startColumnNumber": 23,
                        "endLineNumber": 211,
                        "endColumnNumber": 17
                    },
                    "nodeContext": "{\n  if (pr.propertyName.contains(\"/\")) {\n    continue;\n  }\n  if (\"rep:excerpt\".equals(pr.propertyName)) {\n    continue;\n  }\n  String first=null;\n  if (pr.first != null) {\n    first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n  }\n  String last=null;\n  if (pr.last != null) {\n    last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n  }\n  String prField=configuration.getFieldForPropertyRestriction(pr);\n  CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n  if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n    queryBuilder.append(configuration.getPathField());\n    queryBuilder.append(':');\n    queryBuilder.append(first);\n  }\n else {\n    if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(first);\n    }\n else     if (pr.first == null && pr.last == null) {\n      if (!queryBuilder.toString().contains(fieldName + \":\")) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append('*');\n      }\n    }\n else     if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n    }\n else     if (pr.isLike) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n    }\n else {\n      throw new RuntimeException(\"[unexpected!] not handled case\");\n    }\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 312,
                    "astHeight": 18
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5508,
                        "startLineNumber": 124,
                        "startColumnNumber": 16,
                        "endLineNumber": 211,
                        "endColumnNumber": 17
                    },
                    "nodeContext": "if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n  String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n  if (isSupportedHttpRequest(nativeQueryString)) {\n    String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n    if (!\"select\".equals(requestHandlerString)) {\n      if (requestHandlerString.charAt(0) != '/') {\n        requestHandlerString=\"/\" + requestHandlerString;\n      }\n      solrQuery.setRequestHandler(requestHandlerString);\n    }\n    String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n    for (    String param : parameterString.split(\"&\")) {\n      String[] kv=param.split(\"=\");\n      if (kv.length != 2) {\n        throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n      }\n else {\n        if (\"stream.body\".equals(kv[0])) {\n          kv[0]=\"q\";\n          String mltFlString=\"mlt.fl=\";\n          int mltFlIndex=parameterString.indexOf(mltFlString);\n          if (mltFlIndex > -1) {\n            int beginIndex=mltFlIndex + mltFlString.length();\n            int endIndex=parameterString.indexOf('&',beginIndex);\n            String fields;\n            if (endIndex > beginIndex) {\n              fields=parameterString.substring(beginIndex,endIndex);\n            }\n else {\n              fields=parameterString.substring(beginIndex);\n            }\n            kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n          }\n        }\n        solrQuery.setParam(kv[0],kv[1]);\n      }\n    }\n    return solrQuery;\n  }\n else {\n    queryBuilder.append(nativeQueryString);\n  }\n}\n else {\n  if (pr.propertyName.contains(\"/\")) {\n    continue;\n  }\n  if (\"rep:excerpt\".equals(pr.propertyName)) {\n    continue;\n  }\n  String first=null;\n  if (pr.first != null) {\n    first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n  }\n  String last=null;\n  if (pr.last != null) {\n    last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n  }\n  String prField=configuration.getFieldForPropertyRestriction(pr);\n  CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n  if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n    queryBuilder.append(configuration.getPathField());\n    queryBuilder.append(':');\n    queryBuilder.append(first);\n  }\n else {\n    if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(first);\n    }\n else     if (pr.first == null && pr.last == null) {\n      if (!queryBuilder.toString().contains(fieldName + \":\")) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append('*');\n      }\n    }\n else     if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n    }\n else     if (pr.isLike) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n    }\n else {\n      throw new RuntimeException(\"[unexpected!] not handled case\");\n    }\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 546,
                    "astHeight": 19
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.EnhancedForStatement,body]",
                    "nodePosition": {
                        "charLength": 5622,
                        "startLineNumber": 122,
                        "startColumnNumber": 71,
                        "endLineNumber": 213,
                        "endColumnNumber": 13
                    },
                    "nodeContext": "{\n  if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n    String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n    if (isSupportedHttpRequest(nativeQueryString)) {\n      String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n      if (!\"select\".equals(requestHandlerString)) {\n        if (requestHandlerString.charAt(0) != '/') {\n          requestHandlerString=\"/\" + requestHandlerString;\n        }\n        solrQuery.setRequestHandler(requestHandlerString);\n      }\n      String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n      for (      String param : parameterString.split(\"&\")) {\n        String[] kv=param.split(\"=\");\n        if (kv.length != 2) {\n          throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n        }\n else {\n          if (\"stream.body\".equals(kv[0])) {\n            kv[0]=\"q\";\n            String mltFlString=\"mlt.fl=\";\n            int mltFlIndex=parameterString.indexOf(mltFlString);\n            if (mltFlIndex > -1) {\n              int beginIndex=mltFlIndex + mltFlString.length();\n              int endIndex=parameterString.indexOf('&',beginIndex);\n              String fields;\n              if (endIndex > beginIndex) {\n                fields=parameterString.substring(beginIndex,endIndex);\n              }\n else {\n                fields=parameterString.substring(beginIndex);\n              }\n              kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n            }\n          }\n          solrQuery.setParam(kv[0],kv[1]);\n        }\n      }\n      return solrQuery;\n    }\n else {\n      queryBuilder.append(nativeQueryString);\n    }\n  }\n else {\n    if (pr.propertyName.contains(\"/\")) {\n      continue;\n    }\n    if (\"rep:excerpt\".equals(pr.propertyName)) {\n      continue;\n    }\n    String first=null;\n    if (pr.first != null) {\n      first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n    }\n    String last=null;\n    if (pr.last != null) {\n      last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n    }\n    String prField=configuration.getFieldForPropertyRestriction(pr);\n    CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n    if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n      queryBuilder.append(configuration.getPathField());\n      queryBuilder.append(':');\n      queryBuilder.append(first);\n    }\n else {\n      if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(first);\n      }\n else       if (pr.first == null && pr.last == null) {\n        if (!queryBuilder.toString().contains(fieldName + \":\")) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append('*');\n        }\n      }\n else       if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n      }\n else       if (pr.isLike) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n      }\n else {\n        throw new RuntimeException(\"[unexpected!] not handled case\");\n      }\n    }\n  }\n  queryBuilder.append(\" \");\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 552,
                    "astHeight": 20
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5681,
                        "startLineNumber": 122,
                        "startColumnNumber": 12,
                        "endLineNumber": 213,
                        "endColumnNumber": 13
                    },
                    "nodeContext": "for (Filter.PropertyRestriction pr : propertyRestrictions) {\n  if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n    String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n    if (isSupportedHttpRequest(nativeQueryString)) {\n      String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n      if (!\"select\".equals(requestHandlerString)) {\n        if (requestHandlerString.charAt(0) != '/') {\n          requestHandlerString=\"/\" + requestHandlerString;\n        }\n        solrQuery.setRequestHandler(requestHandlerString);\n      }\n      String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n      for (      String param : parameterString.split(\"&\")) {\n        String[] kv=param.split(\"=\");\n        if (kv.length != 2) {\n          throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n        }\n else {\n          if (\"stream.body\".equals(kv[0])) {\n            kv[0]=\"q\";\n            String mltFlString=\"mlt.fl=\";\n            int mltFlIndex=parameterString.indexOf(mltFlString);\n            if (mltFlIndex > -1) {\n              int beginIndex=mltFlIndex + mltFlString.length();\n              int endIndex=parameterString.indexOf('&',beginIndex);\n              String fields;\n              if (endIndex > beginIndex) {\n                fields=parameterString.substring(beginIndex,endIndex);\n              }\n else {\n                fields=parameterString.substring(beginIndex);\n              }\n              kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n            }\n          }\n          solrQuery.setParam(kv[0],kv[1]);\n        }\n      }\n      return solrQuery;\n    }\n else {\n      queryBuilder.append(nativeQueryString);\n    }\n  }\n else {\n    if (pr.propertyName.contains(\"/\")) {\n      continue;\n    }\n    if (\"rep:excerpt\".equals(pr.propertyName)) {\n      continue;\n    }\n    String first=null;\n    if (pr.first != null) {\n      first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n    }\n    String last=null;\n    if (pr.last != null) {\n      last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n    }\n    String prField=configuration.getFieldForPropertyRestriction(pr);\n    CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n    if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n      queryBuilder.append(configuration.getPathField());\n      queryBuilder.append(':');\n      queryBuilder.append(first);\n    }\n else {\n      if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(first);\n      }\n else       if (pr.first == null && pr.last == null) {\n        if (!queryBuilder.toString().contains(fieldName + \":\")) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append('*');\n        }\n      }\n else       if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n      }\n else       if (pr.isLike) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n      }\n else {\n        throw new RuntimeException(\"[unexpected!] not handled case\");\n      }\n    }\n  }\n  queryBuilder.append(\" \");\n}\n",
                    "nodeType": "EnhancedForStatement",
                    "astNodeNumber": 560,
                    "astHeight": 21
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,thenStatement]",
                    "nodePosition": {
                        "charLength": 5705,
                        "startLineNumber": 121,
                        "startColumnNumber": 77,
                        "endLineNumber": 214,
                        "endColumnNumber": 9
                    },
                    "nodeContext": "{\n  for (  Filter.PropertyRestriction pr : propertyRestrictions) {\n    if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n      String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n      if (isSupportedHttpRequest(nativeQueryString)) {\n        String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n        if (!\"select\".equals(requestHandlerString)) {\n          if (requestHandlerString.charAt(0) != '/') {\n            requestHandlerString=\"/\" + requestHandlerString;\n          }\n          solrQuery.setRequestHandler(requestHandlerString);\n        }\n        String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n        for (        String param : parameterString.split(\"&\")) {\n          String[] kv=param.split(\"=\");\n          if (kv.length != 2) {\n            throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n          }\n else {\n            if (\"stream.body\".equals(kv[0])) {\n              kv[0]=\"q\";\n              String mltFlString=\"mlt.fl=\";\n              int mltFlIndex=parameterString.indexOf(mltFlString);\n              if (mltFlIndex > -1) {\n                int beginIndex=mltFlIndex + mltFlString.length();\n                int endIndex=parameterString.indexOf('&',beginIndex);\n                String fields;\n                if (endIndex > beginIndex) {\n                  fields=parameterString.substring(beginIndex,endIndex);\n                }\n else {\n                  fields=parameterString.substring(beginIndex);\n                }\n                kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n              }\n            }\n            solrQuery.setParam(kv[0],kv[1]);\n          }\n        }\n        return solrQuery;\n      }\n else {\n        queryBuilder.append(nativeQueryString);\n      }\n    }\n else {\n      if (pr.propertyName.contains(\"/\")) {\n        continue;\n      }\n      if (\"rep:excerpt\".equals(pr.propertyName)) {\n        continue;\n      }\n      String first=null;\n      if (pr.first != null) {\n        first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n      }\n      String last=null;\n      if (pr.last != null) {\n        last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n      }\n      String prField=configuration.getFieldForPropertyRestriction(pr);\n      CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n      if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n        queryBuilder.append(configuration.getPathField());\n        queryBuilder.append(':');\n        queryBuilder.append(first);\n      }\n else {\n        if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(first);\n        }\n else         if (pr.first == null && pr.last == null) {\n          if (!queryBuilder.toString().contains(fieldName + \":\")) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append('*');\n          }\n        }\n else         if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n        }\n else         if (pr.isLike) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n        }\n else {\n          throw new RuntimeException(\"[unexpected!] not handled case\");\n        }\n      }\n    }\n    queryBuilder.append(\" \");\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 561,
                    "astHeight": 22
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5774,
                        "startLineNumber": 121,
                        "startColumnNumber": 8,
                        "endLineNumber": 214,
                        "endColumnNumber": 9
                    },
                    "nodeContext": "if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n  for (  Filter.PropertyRestriction pr : propertyRestrictions) {\n    if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n      String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n      if (isSupportedHttpRequest(nativeQueryString)) {\n        String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n        if (!\"select\".equals(requestHandlerString)) {\n          if (requestHandlerString.charAt(0) != '/') {\n            requestHandlerString=\"/\" + requestHandlerString;\n          }\n          solrQuery.setRequestHandler(requestHandlerString);\n        }\n        String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n        for (        String param : parameterString.split(\"&\")) {\n          String[] kv=param.split(\"=\");\n          if (kv.length != 2) {\n            throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n          }\n else {\n            if (\"stream.body\".equals(kv[0])) {\n              kv[0]=\"q\";\n              String mltFlString=\"mlt.fl=\";\n              int mltFlIndex=parameterString.indexOf(mltFlString);\n              if (mltFlIndex > -1) {\n                int beginIndex=mltFlIndex + mltFlString.length();\n                int endIndex=parameterString.indexOf('&',beginIndex);\n                String fields;\n                if (endIndex > beginIndex) {\n                  fields=parameterString.substring(beginIndex,endIndex);\n                }\n else {\n                  fields=parameterString.substring(beginIndex);\n                }\n                kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n              }\n            }\n            solrQuery.setParam(kv[0],kv[1]);\n          }\n        }\n        return solrQuery;\n      }\n else {\n        queryBuilder.append(nativeQueryString);\n      }\n    }\n else {\n      if (pr.propertyName.contains(\"/\")) {\n        continue;\n      }\n      if (\"rep:excerpt\".equals(pr.propertyName)) {\n        continue;\n      }\n      String first=null;\n      if (pr.first != null) {\n        first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n      }\n      String last=null;\n      if (pr.last != null) {\n        last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n      }\n      String prField=configuration.getFieldForPropertyRestriction(pr);\n      CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n      if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n        queryBuilder.append(configuration.getPathField());\n        queryBuilder.append(':');\n        queryBuilder.append(first);\n      }\n else {\n        if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(first);\n        }\n else         if (pr.first == null && pr.last == null) {\n          if (!queryBuilder.toString().contains(fieldName + \":\")) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append('*');\n          }\n        }\n else         if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n        }\n else         if (pr.isLike) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n        }\n else {\n          throw new RuntimeException(\"[unexpected!] not handled case\");\n        }\n      }\n    }\n    queryBuilder.append(\" \");\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 570,
                    "astHeight": 23
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.MethodDeclaration,body]",
                    "nodePosition": {
                        "charLength": 7985,
                        "startLineNumber": 103,
                        "startColumnNumber": 46,
                        "endLineNumber": 255,
                        "endColumnNumber": 5
                    },
                    "nodeContext": "{\n  SolrQuery solrQuery=new SolrQuery();\n  setDefaults(solrQuery);\n  StringBuilder queryBuilder=new StringBuilder();\n  if (filter.getFullTextConstraint() != null) {\n    queryBuilder.append(getFullTextQuery(filter.getFullTextConstraint()));\n    queryBuilder.append(' ');\n  }\n else   if (filter.getFulltextConditions() != null) {\n    Collection<String> fulltextConditions=filter.getFulltextConditions();\n    for (    String fulltextCondition : fulltextConditions) {\n      queryBuilder.append(fulltextCondition).append(\" \");\n    }\n  }\n  Collection<Filter.PropertyRestriction> propertyRestrictions=filter.getPropertyRestrictions();\n  if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n    for (    Filter.PropertyRestriction pr : propertyRestrictions) {\n      if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n        String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n        if (isSupportedHttpRequest(nativeQueryString)) {\n          String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n          if (!\"select\".equals(requestHandlerString)) {\n            if (requestHandlerString.charAt(0) != '/') {\n              requestHandlerString=\"/\" + requestHandlerString;\n            }\n            solrQuery.setRequestHandler(requestHandlerString);\n          }\n          String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n          for (          String param : parameterString.split(\"&\")) {\n            String[] kv=param.split(\"=\");\n            if (kv.length != 2) {\n              throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n            }\n else {\n              if (\"stream.body\".equals(kv[0])) {\n                kv[0]=\"q\";\n                String mltFlString=\"mlt.fl=\";\n                int mltFlIndex=parameterString.indexOf(mltFlString);\n                if (mltFlIndex > -1) {\n                  int beginIndex=mltFlIndex + mltFlString.length();\n                  int endIndex=parameterString.indexOf('&',beginIndex);\n                  String fields;\n                  if (endIndex > beginIndex) {\n                    fields=parameterString.substring(beginIndex,endIndex);\n                  }\n else {\n                    fields=parameterString.substring(beginIndex);\n                  }\n                  kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n                }\n              }\n              solrQuery.setParam(kv[0],kv[1]);\n            }\n          }\n          return solrQuery;\n        }\n else {\n          queryBuilder.append(nativeQueryString);\n        }\n      }\n else {\n        if (pr.propertyName.contains(\"/\")) {\n          continue;\n        }\n        if (\"rep:excerpt\".equals(pr.propertyName)) {\n          continue;\n        }\n        String first=null;\n        if (pr.first != null) {\n          first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n        }\n        String last=null;\n        if (pr.last != null) {\n          last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n        }\n        String prField=configuration.getFieldForPropertyRestriction(pr);\n        CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n        if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n          queryBuilder.append(configuration.getPathField());\n          queryBuilder.append(':');\n          queryBuilder.append(first);\n        }\n else {\n          if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(first);\n          }\n else           if (pr.first == null && pr.last == null) {\n            if (!queryBuilder.toString().contains(fieldName + \":\")) {\n              queryBuilder.append(fieldName).append(':');\n              queryBuilder.append('*');\n            }\n          }\n else           if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n          }\n else           if (pr.isLike) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n          }\n else {\n            throw new RuntimeException(\"[unexpected!] not handled case\");\n          }\n        }\n      }\n      queryBuilder.append(\" \");\n    }\n  }\n  String[] pts=filter.getPrimaryTypes().toArray(new String[filter.getPrimaryTypes().size()]);\n  for (int i=0; i < pts.length; i++) {\n    String pt=pts[i];\n    if (i == 0) {\n      queryBuilder.append(\"(\");\n    }\n    if (i > 0 && i < pts.length) {\n      queryBuilder.append(\"OR \");\n    }\n    queryBuilder.append(\"jcr\\\\:primaryType\").append(':').append(partialEscape(pt)).append(\" \");\n    if (i == pts.length - 1) {\n      queryBuilder.append(\")\");\n      queryBuilder.append(' ');\n    }\n  }\n  Filter.PathRestriction pathRestriction=filter.getPathRestriction();\n  if (pathRestriction != null) {\n    String path=purgePath(filter);\n    String fieldName=configuration.getFieldForPathRestriction(pathRestriction);\n    if (fieldName != null) {\n      queryBuilder.append(fieldName);\n      queryBuilder.append(':');\n      queryBuilder.append(path);\n    }\n  }\n  if (queryBuilder.length() == 0) {\n    queryBuilder.append(\"*:*\");\n  }\n  String escapedQuery=queryBuilder.toString();\n  solrQuery.setQuery(escapedQuery);\n  if (log.isDebugEnabled()) {\n    log.debug(\"JCR query {} has been converted to Solr query {}\",filter.getQueryStatement(),solrQuery.toString());\n  }\n  return solrQuery;\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 858,
                    "astHeight": 24
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.TypeDeclaration,bodyDeclarations]",
                    "nodePosition": {
                        "charLength": 8027,
                        "startLineNumber": 103,
                        "startColumnNumber": 4,
                        "endLineNumber": 255,
                        "endColumnNumber": 5
                    },
                    "nodeContext": "private SolrQuery getQuery(Filter filter){\n  SolrQuery solrQuery=new SolrQuery();\n  setDefaults(solrQuery);\n  StringBuilder queryBuilder=new StringBuilder();\n  if (filter.getFullTextConstraint() != null) {\n    queryBuilder.append(getFullTextQuery(filter.getFullTextConstraint()));\n    queryBuilder.append(' ');\n  }\n else   if (filter.getFulltextConditions() != null) {\n    Collection<String> fulltextConditions=filter.getFulltextConditions();\n    for (    String fulltextCondition : fulltextConditions) {\n      queryBuilder.append(fulltextCondition).append(\" \");\n    }\n  }\n  Collection<Filter.PropertyRestriction> propertyRestrictions=filter.getPropertyRestrictions();\n  if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n    for (    Filter.PropertyRestriction pr : propertyRestrictions) {\n      if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n        String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n        if (isSupportedHttpRequest(nativeQueryString)) {\n          String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n          if (!\"select\".equals(requestHandlerString)) {\n            if (requestHandlerString.charAt(0) != '/') {\n              requestHandlerString=\"/\" + requestHandlerString;\n            }\n            solrQuery.setRequestHandler(requestHandlerString);\n          }\n          String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n          for (          String param : parameterString.split(\"&\")) {\n            String[] kv=param.split(\"=\");\n            if (kv.length != 2) {\n              throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n            }\n else {\n              if (\"stream.body\".equals(kv[0])) {\n                kv[0]=\"q\";\n                String mltFlString=\"mlt.fl=\";\n                int mltFlIndex=parameterString.indexOf(mltFlString);\n                if (mltFlIndex > -1) {\n                  int beginIndex=mltFlIndex + mltFlString.length();\n                  int endIndex=parameterString.indexOf('&',beginIndex);\n                  String fields;\n                  if (endIndex > beginIndex) {\n                    fields=parameterString.substring(beginIndex,endIndex);\n                  }\n else {\n                    fields=parameterString.substring(beginIndex);\n                  }\n                  kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n                }\n              }\n              solrQuery.setParam(kv[0],kv[1]);\n            }\n          }\n          return solrQuery;\n        }\n else {\n          queryBuilder.append(nativeQueryString);\n        }\n      }\n else {\n        if (pr.propertyName.contains(\"/\")) {\n          continue;\n        }\n        if (\"rep:excerpt\".equals(pr.propertyName)) {\n          continue;\n        }\n        String first=null;\n        if (pr.first != null) {\n          first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n        }\n        String last=null;\n        if (pr.last != null) {\n          last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n        }\n        String prField=configuration.getFieldForPropertyRestriction(pr);\n        CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n        if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n          queryBuilder.append(configuration.getPathField());\n          queryBuilder.append(':');\n          queryBuilder.append(first);\n        }\n else {\n          if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(first);\n          }\n else           if (pr.first == null && pr.last == null) {\n            if (!queryBuilder.toString().contains(fieldName + \":\")) {\n              queryBuilder.append(fieldName).append(':');\n              queryBuilder.append('*');\n            }\n          }\n else           if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n          }\n else           if (pr.isLike) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n          }\n else {\n            throw new RuntimeException(\"[unexpected!] not handled case\");\n          }\n        }\n      }\n      queryBuilder.append(\" \");\n    }\n  }\n  String[] pts=filter.getPrimaryTypes().toArray(new String[filter.getPrimaryTypes().size()]);\n  for (int i=0; i < pts.length; i++) {\n    String pt=pts[i];\n    if (i == 0) {\n      queryBuilder.append(\"(\");\n    }\n    if (i > 0 && i < pts.length) {\n      queryBuilder.append(\"OR \");\n    }\n    queryBuilder.append(\"jcr\\\\:primaryType\").append(':').append(partialEscape(pt)).append(\" \");\n    if (i == pts.length - 1) {\n      queryBuilder.append(\")\");\n      queryBuilder.append(' ');\n    }\n  }\n  Filter.PathRestriction pathRestriction=filter.getPathRestriction();\n  if (pathRestriction != null) {\n    String path=purgePath(filter);\n    String fieldName=configuration.getFieldForPathRestriction(pathRestriction);\n    if (fieldName != null) {\n      queryBuilder.append(fieldName);\n      queryBuilder.append(':');\n      queryBuilder.append(path);\n    }\n  }\n  if (queryBuilder.length() == 0) {\n    queryBuilder.append(\"*:*\");\n  }\n  String escapedQuery=queryBuilder.toString();\n  solrQuery.setQuery(escapedQuery);\n  if (log.isDebugEnabled()) {\n    log.debug(\"JCR query {} has been converted to Solr query {}\",filter.getQueryStatement(),solrQuery.toString());\n  }\n  return solrQuery;\n}\n",
                    "nodeType": "MethodDeclaration",
                    "astNodeNumber": 867,
                    "astHeight": 25
                }
            ],
            "currentLineData": {
                "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,expression]",
                "nodePosition": {
                    "charLength": 109,
                    "startLineNumber": 199,
                    "startColumnNumber": 35,
                    "endLineNumber": 199,
                    "endColumnNumber": 144
                },
                "nodeContext": "(pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))",
                "nodeType": "InfixExpression",
                "astNodeNumber": 35,
                "astHeight": 6
            },
            "tokenLength": 1,
            "type": "org.apache.jackrabbit.oak.spi.query.Filter.PropertyRestriction"
        },
        {
            "nodeContext": "pr",
            "nodeType": "SimpleName",
            "nodePosition": {
                "charLength": 2,
                "startLineNumber": 199,
                "startColumnNumber": 135,
                "endLineNumber": 199,
                "endColumnNumber": 137
            },
            "astNodeNumber": 1,
            "astHeight": 1,
            "parentDataList": [
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.MethodInvocation,arguments]",
                    "nodePosition": {
                        "charLength": 7,
                        "startLineNumber": 199,
                        "startColumnNumber": 135,
                        "endLineNumber": 199,
                        "endColumnNumber": 142
                    },
                    "nodeContext": "pr.last",
                    "nodeType": "QualifiedName",
                    "astNodeNumber": 3,
                    "astHeight": 2
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.PrefixExpression,operand]",
                    "nodePosition": {
                        "charLength": 24,
                        "startLineNumber": 199,
                        "startColumnNumber": 119,
                        "endLineNumber": 199,
                        "endColumnNumber": 143
                    },
                    "nodeContext": "pr.first.equals(pr.last)",
                    "nodeType": "MethodInvocation",
                    "astNodeNumber": 8,
                    "astHeight": 3
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.ParenthesizedExpression,expression]",
                    "nodePosition": {
                        "charLength": 25,
                        "startLineNumber": 199,
                        "startColumnNumber": 118,
                        "endLineNumber": 199,
                        "endColumnNumber": 143
                    },
                    "nodeContext": "!pr.first.equals(pr.last)",
                    "nodeType": "PrefixExpression",
                    "astNodeNumber": 9,
                    "astHeight": 4
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.InfixExpression,extendedOperands]",
                    "nodePosition": {
                        "charLength": 27,
                        "startLineNumber": 199,
                        "startColumnNumber": 117,
                        "endLineNumber": 199,
                        "endColumnNumber": 144
                    },
                    "nodeContext": "(!pr.first.equals(pr.last))",
                    "nodeType": "ParenthesizedExpression",
                    "astNodeNumber": 10,
                    "astHeight": 5
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,expression]",
                    "nodePosition": {
                        "charLength": 109,
                        "startLineNumber": 199,
                        "startColumnNumber": 35,
                        "endLineNumber": 199,
                        "endColumnNumber": 144
                    },
                    "nodeContext": "(pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))",
                    "nodeType": "InfixExpression",
                    "astNodeNumber": 35,
                    "astHeight": 6
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 936,
                        "startLineNumber": 199,
                        "startColumnNumber": 31,
                        "endLineNumber": 209,
                        "endColumnNumber": 25
                    },
                    "nodeContext": "if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n}\n else if (pr.isLike) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n}\n else {\n  throw new RuntimeException(\"[unexpected!] not handled case\");\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 105,
                    "astHeight": 13
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 1260,
                        "startLineNumber": 194,
                        "startColumnNumber": 31,
                        "endLineNumber": 209,
                        "endColumnNumber": 25
                    },
                    "nodeContext": "if (pr.first == null && pr.last == null) {\n  if (!queryBuilder.toString().contains(fieldName + \":\")) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append('*');\n  }\n}\n else if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n}\n else if (pr.isLike) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n}\n else {\n  throw new RuntimeException(\"[unexpected!] not handled case\");\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 142,
                    "astHeight": 14
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 1490,
                        "startLineNumber": 191,
                        "startColumnNumber": 24,
                        "endLineNumber": 209,
                        "endColumnNumber": 25
                    },
                    "nodeContext": "if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(first);\n}\n else if (pr.first == null && pr.last == null) {\n  if (!queryBuilder.toString().contains(fieldName + \":\")) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append('*');\n  }\n}\n else if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n}\n else if (pr.isLike) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n}\n else {\n  throw new RuntimeException(\"[unexpected!] not handled case\");\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 177,
                    "astHeight": 15
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 1538,
                        "startLineNumber": 190,
                        "startColumnNumber": 27,
                        "endLineNumber": 210,
                        "endColumnNumber": 21
                    },
                    "nodeContext": "{\n  if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(first);\n  }\n else   if (pr.first == null && pr.last == null) {\n    if (!queryBuilder.toString().contains(fieldName + \":\")) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append('*');\n    }\n  }\n else   if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n  }\n else   if (pr.isLike) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n  }\n else {\n    throw new RuntimeException(\"[unexpected!] not handled case\");\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 178,
                    "astHeight": 16
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 1791,
                        "startLineNumber": 186,
                        "startColumnNumber": 20,
                        "endLineNumber": 210,
                        "endColumnNumber": 21
                    },
                    "nodeContext": "if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n  queryBuilder.append(configuration.getPathField());\n  queryBuilder.append(':');\n  queryBuilder.append(first);\n}\n else {\n  if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(first);\n  }\n else   if (pr.first == null && pr.last == null) {\n    if (!queryBuilder.toString().contains(fieldName + \":\")) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append('*');\n    }\n  }\n else   if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n  }\n else   if (pr.isLike) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n  }\n else {\n    throw new RuntimeException(\"[unexpected!] not handled case\");\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 203,
                    "astHeight": 17
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 2798,
                        "startLineNumber": 164,
                        "startColumnNumber": 23,
                        "endLineNumber": 211,
                        "endColumnNumber": 17
                    },
                    "nodeContext": "{\n  if (pr.propertyName.contains(\"/\")) {\n    continue;\n  }\n  if (\"rep:excerpt\".equals(pr.propertyName)) {\n    continue;\n  }\n  String first=null;\n  if (pr.first != null) {\n    first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n  }\n  String last=null;\n  if (pr.last != null) {\n    last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n  }\n  String prField=configuration.getFieldForPropertyRestriction(pr);\n  CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n  if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n    queryBuilder.append(configuration.getPathField());\n    queryBuilder.append(':');\n    queryBuilder.append(first);\n  }\n else {\n    if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(first);\n    }\n else     if (pr.first == null && pr.last == null) {\n      if (!queryBuilder.toString().contains(fieldName + \":\")) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append('*');\n      }\n    }\n else     if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n    }\n else     if (pr.isLike) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n    }\n else {\n      throw new RuntimeException(\"[unexpected!] not handled case\");\n    }\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 312,
                    "astHeight": 18
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5508,
                        "startLineNumber": 124,
                        "startColumnNumber": 16,
                        "endLineNumber": 211,
                        "endColumnNumber": 17
                    },
                    "nodeContext": "if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n  String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n  if (isSupportedHttpRequest(nativeQueryString)) {\n    String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n    if (!\"select\".equals(requestHandlerString)) {\n      if (requestHandlerString.charAt(0) != '/') {\n        requestHandlerString=\"/\" + requestHandlerString;\n      }\n      solrQuery.setRequestHandler(requestHandlerString);\n    }\n    String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n    for (    String param : parameterString.split(\"&\")) {\n      String[] kv=param.split(\"=\");\n      if (kv.length != 2) {\n        throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n      }\n else {\n        if (\"stream.body\".equals(kv[0])) {\n          kv[0]=\"q\";\n          String mltFlString=\"mlt.fl=\";\n          int mltFlIndex=parameterString.indexOf(mltFlString);\n          if (mltFlIndex > -1) {\n            int beginIndex=mltFlIndex + mltFlString.length();\n            int endIndex=parameterString.indexOf('&',beginIndex);\n            String fields;\n            if (endIndex > beginIndex) {\n              fields=parameterString.substring(beginIndex,endIndex);\n            }\n else {\n              fields=parameterString.substring(beginIndex);\n            }\n            kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n          }\n        }\n        solrQuery.setParam(kv[0],kv[1]);\n      }\n    }\n    return solrQuery;\n  }\n else {\n    queryBuilder.append(nativeQueryString);\n  }\n}\n else {\n  if (pr.propertyName.contains(\"/\")) {\n    continue;\n  }\n  if (\"rep:excerpt\".equals(pr.propertyName)) {\n    continue;\n  }\n  String first=null;\n  if (pr.first != null) {\n    first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n  }\n  String last=null;\n  if (pr.last != null) {\n    last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n  }\n  String prField=configuration.getFieldForPropertyRestriction(pr);\n  CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n  if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n    queryBuilder.append(configuration.getPathField());\n    queryBuilder.append(':');\n    queryBuilder.append(first);\n  }\n else {\n    if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(first);\n    }\n else     if (pr.first == null && pr.last == null) {\n      if (!queryBuilder.toString().contains(fieldName + \":\")) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append('*');\n      }\n    }\n else     if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n    }\n else     if (pr.isLike) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n    }\n else {\n      throw new RuntimeException(\"[unexpected!] not handled case\");\n    }\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 546,
                    "astHeight": 19
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.EnhancedForStatement,body]",
                    "nodePosition": {
                        "charLength": 5622,
                        "startLineNumber": 122,
                        "startColumnNumber": 71,
                        "endLineNumber": 213,
                        "endColumnNumber": 13
                    },
                    "nodeContext": "{\n  if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n    String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n    if (isSupportedHttpRequest(nativeQueryString)) {\n      String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n      if (!\"select\".equals(requestHandlerString)) {\n        if (requestHandlerString.charAt(0) != '/') {\n          requestHandlerString=\"/\" + requestHandlerString;\n        }\n        solrQuery.setRequestHandler(requestHandlerString);\n      }\n      String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n      for (      String param : parameterString.split(\"&\")) {\n        String[] kv=param.split(\"=\");\n        if (kv.length != 2) {\n          throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n        }\n else {\n          if (\"stream.body\".equals(kv[0])) {\n            kv[0]=\"q\";\n            String mltFlString=\"mlt.fl=\";\n            int mltFlIndex=parameterString.indexOf(mltFlString);\n            if (mltFlIndex > -1) {\n              int beginIndex=mltFlIndex + mltFlString.length();\n              int endIndex=parameterString.indexOf('&',beginIndex);\n              String fields;\n              if (endIndex > beginIndex) {\n                fields=parameterString.substring(beginIndex,endIndex);\n              }\n else {\n                fields=parameterString.substring(beginIndex);\n              }\n              kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n            }\n          }\n          solrQuery.setParam(kv[0],kv[1]);\n        }\n      }\n      return solrQuery;\n    }\n else {\n      queryBuilder.append(nativeQueryString);\n    }\n  }\n else {\n    if (pr.propertyName.contains(\"/\")) {\n      continue;\n    }\n    if (\"rep:excerpt\".equals(pr.propertyName)) {\n      continue;\n    }\n    String first=null;\n    if (pr.first != null) {\n      first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n    }\n    String last=null;\n    if (pr.last != null) {\n      last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n    }\n    String prField=configuration.getFieldForPropertyRestriction(pr);\n    CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n    if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n      queryBuilder.append(configuration.getPathField());\n      queryBuilder.append(':');\n      queryBuilder.append(first);\n    }\n else {\n      if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(first);\n      }\n else       if (pr.first == null && pr.last == null) {\n        if (!queryBuilder.toString().contains(fieldName + \":\")) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append('*');\n        }\n      }\n else       if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n      }\n else       if (pr.isLike) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n      }\n else {\n        throw new RuntimeException(\"[unexpected!] not handled case\");\n      }\n    }\n  }\n  queryBuilder.append(\" \");\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 552,
                    "astHeight": 20
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5681,
                        "startLineNumber": 122,
                        "startColumnNumber": 12,
                        "endLineNumber": 213,
                        "endColumnNumber": 13
                    },
                    "nodeContext": "for (Filter.PropertyRestriction pr : propertyRestrictions) {\n  if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n    String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n    if (isSupportedHttpRequest(nativeQueryString)) {\n      String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n      if (!\"select\".equals(requestHandlerString)) {\n        if (requestHandlerString.charAt(0) != '/') {\n          requestHandlerString=\"/\" + requestHandlerString;\n        }\n        solrQuery.setRequestHandler(requestHandlerString);\n      }\n      String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n      for (      String param : parameterString.split(\"&\")) {\n        String[] kv=param.split(\"=\");\n        if (kv.length != 2) {\n          throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n        }\n else {\n          if (\"stream.body\".equals(kv[0])) {\n            kv[0]=\"q\";\n            String mltFlString=\"mlt.fl=\";\n            int mltFlIndex=parameterString.indexOf(mltFlString);\n            if (mltFlIndex > -1) {\n              int beginIndex=mltFlIndex + mltFlString.length();\n              int endIndex=parameterString.indexOf('&',beginIndex);\n              String fields;\n              if (endIndex > beginIndex) {\n                fields=parameterString.substring(beginIndex,endIndex);\n              }\n else {\n                fields=parameterString.substring(beginIndex);\n              }\n              kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n            }\n          }\n          solrQuery.setParam(kv[0],kv[1]);\n        }\n      }\n      return solrQuery;\n    }\n else {\n      queryBuilder.append(nativeQueryString);\n    }\n  }\n else {\n    if (pr.propertyName.contains(\"/\")) {\n      continue;\n    }\n    if (\"rep:excerpt\".equals(pr.propertyName)) {\n      continue;\n    }\n    String first=null;\n    if (pr.first != null) {\n      first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n    }\n    String last=null;\n    if (pr.last != null) {\n      last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n    }\n    String prField=configuration.getFieldForPropertyRestriction(pr);\n    CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n    if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n      queryBuilder.append(configuration.getPathField());\n      queryBuilder.append(':');\n      queryBuilder.append(first);\n    }\n else {\n      if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(first);\n      }\n else       if (pr.first == null && pr.last == null) {\n        if (!queryBuilder.toString().contains(fieldName + \":\")) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append('*');\n        }\n      }\n else       if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n      }\n else       if (pr.isLike) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n      }\n else {\n        throw new RuntimeException(\"[unexpected!] not handled case\");\n      }\n    }\n  }\n  queryBuilder.append(\" \");\n}\n",
                    "nodeType": "EnhancedForStatement",
                    "astNodeNumber": 560,
                    "astHeight": 21
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,thenStatement]",
                    "nodePosition": {
                        "charLength": 5705,
                        "startLineNumber": 121,
                        "startColumnNumber": 77,
                        "endLineNumber": 214,
                        "endColumnNumber": 9
                    },
                    "nodeContext": "{\n  for (  Filter.PropertyRestriction pr : propertyRestrictions) {\n    if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n      String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n      if (isSupportedHttpRequest(nativeQueryString)) {\n        String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n        if (!\"select\".equals(requestHandlerString)) {\n          if (requestHandlerString.charAt(0) != '/') {\n            requestHandlerString=\"/\" + requestHandlerString;\n          }\n          solrQuery.setRequestHandler(requestHandlerString);\n        }\n        String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n        for (        String param : parameterString.split(\"&\")) {\n          String[] kv=param.split(\"=\");\n          if (kv.length != 2) {\n            throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n          }\n else {\n            if (\"stream.body\".equals(kv[0])) {\n              kv[0]=\"q\";\n              String mltFlString=\"mlt.fl=\";\n              int mltFlIndex=parameterString.indexOf(mltFlString);\n              if (mltFlIndex > -1) {\n                int beginIndex=mltFlIndex + mltFlString.length();\n                int endIndex=parameterString.indexOf('&',beginIndex);\n                String fields;\n                if (endIndex > beginIndex) {\n                  fields=parameterString.substring(beginIndex,endIndex);\n                }\n else {\n                  fields=parameterString.substring(beginIndex);\n                }\n                kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n              }\n            }\n            solrQuery.setParam(kv[0],kv[1]);\n          }\n        }\n        return solrQuery;\n      }\n else {\n        queryBuilder.append(nativeQueryString);\n      }\n    }\n else {\n      if (pr.propertyName.contains(\"/\")) {\n        continue;\n      }\n      if (\"rep:excerpt\".equals(pr.propertyName)) {\n        continue;\n      }\n      String first=null;\n      if (pr.first != null) {\n        first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n      }\n      String last=null;\n      if (pr.last != null) {\n        last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n      }\n      String prField=configuration.getFieldForPropertyRestriction(pr);\n      CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n      if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n        queryBuilder.append(configuration.getPathField());\n        queryBuilder.append(':');\n        queryBuilder.append(first);\n      }\n else {\n        if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(first);\n        }\n else         if (pr.first == null && pr.last == null) {\n          if (!queryBuilder.toString().contains(fieldName + \":\")) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append('*');\n          }\n        }\n else         if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n        }\n else         if (pr.isLike) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n        }\n else {\n          throw new RuntimeException(\"[unexpected!] not handled case\");\n        }\n      }\n    }\n    queryBuilder.append(\" \");\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 561,
                    "astHeight": 22
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5774,
                        "startLineNumber": 121,
                        "startColumnNumber": 8,
                        "endLineNumber": 214,
                        "endColumnNumber": 9
                    },
                    "nodeContext": "if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n  for (  Filter.PropertyRestriction pr : propertyRestrictions) {\n    if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n      String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n      if (isSupportedHttpRequest(nativeQueryString)) {\n        String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n        if (!\"select\".equals(requestHandlerString)) {\n          if (requestHandlerString.charAt(0) != '/') {\n            requestHandlerString=\"/\" + requestHandlerString;\n          }\n          solrQuery.setRequestHandler(requestHandlerString);\n        }\n        String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n        for (        String param : parameterString.split(\"&\")) {\n          String[] kv=param.split(\"=\");\n          if (kv.length != 2) {\n            throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n          }\n else {\n            if (\"stream.body\".equals(kv[0])) {\n              kv[0]=\"q\";\n              String mltFlString=\"mlt.fl=\";\n              int mltFlIndex=parameterString.indexOf(mltFlString);\n              if (mltFlIndex > -1) {\n                int beginIndex=mltFlIndex + mltFlString.length();\n                int endIndex=parameterString.indexOf('&',beginIndex);\n                String fields;\n                if (endIndex > beginIndex) {\n                  fields=parameterString.substring(beginIndex,endIndex);\n                }\n else {\n                  fields=parameterString.substring(beginIndex);\n                }\n                kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n              }\n            }\n            solrQuery.setParam(kv[0],kv[1]);\n          }\n        }\n        return solrQuery;\n      }\n else {\n        queryBuilder.append(nativeQueryString);\n      }\n    }\n else {\n      if (pr.propertyName.contains(\"/\")) {\n        continue;\n      }\n      if (\"rep:excerpt\".equals(pr.propertyName)) {\n        continue;\n      }\n      String first=null;\n      if (pr.first != null) {\n        first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n      }\n      String last=null;\n      if (pr.last != null) {\n        last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n      }\n      String prField=configuration.getFieldForPropertyRestriction(pr);\n      CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n      if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n        queryBuilder.append(configuration.getPathField());\n        queryBuilder.append(':');\n        queryBuilder.append(first);\n      }\n else {\n        if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(first);\n        }\n else         if (pr.first == null && pr.last == null) {\n          if (!queryBuilder.toString().contains(fieldName + \":\")) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append('*');\n          }\n        }\n else         if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n        }\n else         if (pr.isLike) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n        }\n else {\n          throw new RuntimeException(\"[unexpected!] not handled case\");\n        }\n      }\n    }\n    queryBuilder.append(\" \");\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 570,
                    "astHeight": 23
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.MethodDeclaration,body]",
                    "nodePosition": {
                        "charLength": 7985,
                        "startLineNumber": 103,
                        "startColumnNumber": 46,
                        "endLineNumber": 255,
                        "endColumnNumber": 5
                    },
                    "nodeContext": "{\n  SolrQuery solrQuery=new SolrQuery();\n  setDefaults(solrQuery);\n  StringBuilder queryBuilder=new StringBuilder();\n  if (filter.getFullTextConstraint() != null) {\n    queryBuilder.append(getFullTextQuery(filter.getFullTextConstraint()));\n    queryBuilder.append(' ');\n  }\n else   if (filter.getFulltextConditions() != null) {\n    Collection<String> fulltextConditions=filter.getFulltextConditions();\n    for (    String fulltextCondition : fulltextConditions) {\n      queryBuilder.append(fulltextCondition).append(\" \");\n    }\n  }\n  Collection<Filter.PropertyRestriction> propertyRestrictions=filter.getPropertyRestrictions();\n  if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n    for (    Filter.PropertyRestriction pr : propertyRestrictions) {\n      if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n        String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n        if (isSupportedHttpRequest(nativeQueryString)) {\n          String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n          if (!\"select\".equals(requestHandlerString)) {\n            if (requestHandlerString.charAt(0) != '/') {\n              requestHandlerString=\"/\" + requestHandlerString;\n            }\n            solrQuery.setRequestHandler(requestHandlerString);\n          }\n          String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n          for (          String param : parameterString.split(\"&\")) {\n            String[] kv=param.split(\"=\");\n            if (kv.length != 2) {\n              throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n            }\n else {\n              if (\"stream.body\".equals(kv[0])) {\n                kv[0]=\"q\";\n                String mltFlString=\"mlt.fl=\";\n                int mltFlIndex=parameterString.indexOf(mltFlString);\n                if (mltFlIndex > -1) {\n                  int beginIndex=mltFlIndex + mltFlString.length();\n                  int endIndex=parameterString.indexOf('&',beginIndex);\n                  String fields;\n                  if (endIndex > beginIndex) {\n                    fields=parameterString.substring(beginIndex,endIndex);\n                  }\n else {\n                    fields=parameterString.substring(beginIndex);\n                  }\n                  kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n                }\n              }\n              solrQuery.setParam(kv[0],kv[1]);\n            }\n          }\n          return solrQuery;\n        }\n else {\n          queryBuilder.append(nativeQueryString);\n        }\n      }\n else {\n        if (pr.propertyName.contains(\"/\")) {\n          continue;\n        }\n        if (\"rep:excerpt\".equals(pr.propertyName)) {\n          continue;\n        }\n        String first=null;\n        if (pr.first != null) {\n          first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n        }\n        String last=null;\n        if (pr.last != null) {\n          last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n        }\n        String prField=configuration.getFieldForPropertyRestriction(pr);\n        CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n        if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n          queryBuilder.append(configuration.getPathField());\n          queryBuilder.append(':');\n          queryBuilder.append(first);\n        }\n else {\n          if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(first);\n          }\n else           if (pr.first == null && pr.last == null) {\n            if (!queryBuilder.toString().contains(fieldName + \":\")) {\n              queryBuilder.append(fieldName).append(':');\n              queryBuilder.append('*');\n            }\n          }\n else           if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n          }\n else           if (pr.isLike) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n          }\n else {\n            throw new RuntimeException(\"[unexpected!] not handled case\");\n          }\n        }\n      }\n      queryBuilder.append(\" \");\n    }\n  }\n  String[] pts=filter.getPrimaryTypes().toArray(new String[filter.getPrimaryTypes().size()]);\n  for (int i=0; i < pts.length; i++) {\n    String pt=pts[i];\n    if (i == 0) {\n      queryBuilder.append(\"(\");\n    }\n    if (i > 0 && i < pts.length) {\n      queryBuilder.append(\"OR \");\n    }\n    queryBuilder.append(\"jcr\\\\:primaryType\").append(':').append(partialEscape(pt)).append(\" \");\n    if (i == pts.length - 1) {\n      queryBuilder.append(\")\");\n      queryBuilder.append(' ');\n    }\n  }\n  Filter.PathRestriction pathRestriction=filter.getPathRestriction();\n  if (pathRestriction != null) {\n    String path=purgePath(filter);\n    String fieldName=configuration.getFieldForPathRestriction(pathRestriction);\n    if (fieldName != null) {\n      queryBuilder.append(fieldName);\n      queryBuilder.append(':');\n      queryBuilder.append(path);\n    }\n  }\n  if (queryBuilder.length() == 0) {\n    queryBuilder.append(\"*:*\");\n  }\n  String escapedQuery=queryBuilder.toString();\n  solrQuery.setQuery(escapedQuery);\n  if (log.isDebugEnabled()) {\n    log.debug(\"JCR query {} has been converted to Solr query {}\",filter.getQueryStatement(),solrQuery.toString());\n  }\n  return solrQuery;\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 858,
                    "astHeight": 24
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.TypeDeclaration,bodyDeclarations]",
                    "nodePosition": {
                        "charLength": 8027,
                        "startLineNumber": 103,
                        "startColumnNumber": 4,
                        "endLineNumber": 255,
                        "endColumnNumber": 5
                    },
                    "nodeContext": "private SolrQuery getQuery(Filter filter){\n  SolrQuery solrQuery=new SolrQuery();\n  setDefaults(solrQuery);\n  StringBuilder queryBuilder=new StringBuilder();\n  if (filter.getFullTextConstraint() != null) {\n    queryBuilder.append(getFullTextQuery(filter.getFullTextConstraint()));\n    queryBuilder.append(' ');\n  }\n else   if (filter.getFulltextConditions() != null) {\n    Collection<String> fulltextConditions=filter.getFulltextConditions();\n    for (    String fulltextCondition : fulltextConditions) {\n      queryBuilder.append(fulltextCondition).append(\" \");\n    }\n  }\n  Collection<Filter.PropertyRestriction> propertyRestrictions=filter.getPropertyRestrictions();\n  if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n    for (    Filter.PropertyRestriction pr : propertyRestrictions) {\n      if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n        String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n        if (isSupportedHttpRequest(nativeQueryString)) {\n          String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n          if (!\"select\".equals(requestHandlerString)) {\n            if (requestHandlerString.charAt(0) != '/') {\n              requestHandlerString=\"/\" + requestHandlerString;\n            }\n            solrQuery.setRequestHandler(requestHandlerString);\n          }\n          String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n          for (          String param : parameterString.split(\"&\")) {\n            String[] kv=param.split(\"=\");\n            if (kv.length != 2) {\n              throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n            }\n else {\n              if (\"stream.body\".equals(kv[0])) {\n                kv[0]=\"q\";\n                String mltFlString=\"mlt.fl=\";\n                int mltFlIndex=parameterString.indexOf(mltFlString);\n                if (mltFlIndex > -1) {\n                  int beginIndex=mltFlIndex + mltFlString.length();\n                  int endIndex=parameterString.indexOf('&',beginIndex);\n                  String fields;\n                  if (endIndex > beginIndex) {\n                    fields=parameterString.substring(beginIndex,endIndex);\n                  }\n else {\n                    fields=parameterString.substring(beginIndex);\n                  }\n                  kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n                }\n              }\n              solrQuery.setParam(kv[0],kv[1]);\n            }\n          }\n          return solrQuery;\n        }\n else {\n          queryBuilder.append(nativeQueryString);\n        }\n      }\n else {\n        if (pr.propertyName.contains(\"/\")) {\n          continue;\n        }\n        if (\"rep:excerpt\".equals(pr.propertyName)) {\n          continue;\n        }\n        String first=null;\n        if (pr.first != null) {\n          first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n        }\n        String last=null;\n        if (pr.last != null) {\n          last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n        }\n        String prField=configuration.getFieldForPropertyRestriction(pr);\n        CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n        if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n          queryBuilder.append(configuration.getPathField());\n          queryBuilder.append(':');\n          queryBuilder.append(first);\n        }\n else {\n          if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(first);\n          }\n else           if (pr.first == null && pr.last == null) {\n            if (!queryBuilder.toString().contains(fieldName + \":\")) {\n              queryBuilder.append(fieldName).append(':');\n              queryBuilder.append('*');\n            }\n          }\n else           if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n          }\n else           if (pr.isLike) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n          }\n else {\n            throw new RuntimeException(\"[unexpected!] not handled case\");\n          }\n        }\n      }\n      queryBuilder.append(\" \");\n    }\n  }\n  String[] pts=filter.getPrimaryTypes().toArray(new String[filter.getPrimaryTypes().size()]);\n  for (int i=0; i < pts.length; i++) {\n    String pt=pts[i];\n    if (i == 0) {\n      queryBuilder.append(\"(\");\n    }\n    if (i > 0 && i < pts.length) {\n      queryBuilder.append(\"OR \");\n    }\n    queryBuilder.append(\"jcr\\\\:primaryType\").append(':').append(partialEscape(pt)).append(\" \");\n    if (i == pts.length - 1) {\n      queryBuilder.append(\")\");\n      queryBuilder.append(' ');\n    }\n  }\n  Filter.PathRestriction pathRestriction=filter.getPathRestriction();\n  if (pathRestriction != null) {\n    String path=purgePath(filter);\n    String fieldName=configuration.getFieldForPathRestriction(pathRestriction);\n    if (fieldName != null) {\n      queryBuilder.append(fieldName);\n      queryBuilder.append(':');\n      queryBuilder.append(path);\n    }\n  }\n  if (queryBuilder.length() == 0) {\n    queryBuilder.append(\"*:*\");\n  }\n  String escapedQuery=queryBuilder.toString();\n  solrQuery.setQuery(escapedQuery);\n  if (log.isDebugEnabled()) {\n    log.debug(\"JCR query {} has been converted to Solr query {}\",filter.getQueryStatement(),solrQuery.toString());\n  }\n  return solrQuery;\n}\n",
                    "nodeType": "MethodDeclaration",
                    "astNodeNumber": 867,
                    "astHeight": 25
                }
            ],
            "currentLineData": {
                "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,expression]",
                "nodePosition": {
                    "charLength": 109,
                    "startLineNumber": 199,
                    "startColumnNumber": 35,
                    "endLineNumber": 199,
                    "endColumnNumber": 144
                },
                "nodeContext": "(pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))",
                "nodeType": "InfixExpression",
                "astNodeNumber": 35,
                "astHeight": 6
            },
            "tokenLength": 1,
            "type": "org.apache.jackrabbit.oak.spi.query.Filter.PropertyRestriction"
        },
        {
            "nodeContext": "pr",
            "nodeType": "SimpleName",
            "nodePosition": {
                "charLength": 2,
                "startLineNumber": 202,
                "startColumnNumber": 78,
                "endLineNumber": 202,
                "endColumnNumber": 80
            },
            "astNodeNumber": 1,
            "astHeight": 1,
            "parentDataList": [
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.MethodInvocation,arguments]",
                    "nodePosition": {
                        "charLength": 17,
                        "startLineNumber": 202,
                        "startColumnNumber": 78,
                        "endLineNumber": 202,
                        "endColumnNumber": 95
                    },
                    "nodeContext": "pr.firstIncluding",
                    "nodeType": "QualifiedName",
                    "astNodeNumber": 3,
                    "astHeight": 2
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.MethodInvocation,arguments]",
                    "nodePosition": {
                        "charLength": 66,
                        "startLineNumber": 202,
                        "startColumnNumber": 48,
                        "endLineNumber": 202,
                        "endColumnNumber": 114
                    },
                    "nodeContext": "createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding)",
                    "nodeType": "MethodInvocation",
                    "astNodeNumber": 10,
                    "astHeight": 3
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.ExpressionStatement,expression]",
                    "nodePosition": {
                        "charLength": 87,
                        "startLineNumber": 202,
                        "startColumnNumber": 28,
                        "endLineNumber": 202,
                        "endColumnNumber": 115
                    },
                    "nodeContext": "queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding))",
                    "nodeType": "MethodInvocation",
                    "astNodeNumber": 13,
                    "astHeight": 4
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 88,
                        "startLineNumber": 202,
                        "startColumnNumber": 28,
                        "endLineNumber": 202,
                        "endColumnNumber": 116
                    },
                    "nodeContext": "queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n",
                    "nodeType": "ExpressionStatement",
                    "astNodeNumber": 14,
                    "astHeight": 5
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,thenStatement]",
                    "nodePosition": {
                        "charLength": 321,
                        "startLineNumber": 199,
                        "startColumnNumber": 146,
                        "endLineNumber": 203,
                        "endColumnNumber": 25
                    },
                    "nodeContext": "{\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 23,
                    "astHeight": 6
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 936,
                        "startLineNumber": 199,
                        "startColumnNumber": 31,
                        "endLineNumber": 209,
                        "endColumnNumber": 25
                    },
                    "nodeContext": "if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n}\n else if (pr.isLike) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n}\n else {\n  throw new RuntimeException(\"[unexpected!] not handled case\");\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 105,
                    "astHeight": 13
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 1260,
                        "startLineNumber": 194,
                        "startColumnNumber": 31,
                        "endLineNumber": 209,
                        "endColumnNumber": 25
                    },
                    "nodeContext": "if (pr.first == null && pr.last == null) {\n  if (!queryBuilder.toString().contains(fieldName + \":\")) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append('*');\n  }\n}\n else if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n}\n else if (pr.isLike) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n}\n else {\n  throw new RuntimeException(\"[unexpected!] not handled case\");\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 142,
                    "astHeight": 14
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 1490,
                        "startLineNumber": 191,
                        "startColumnNumber": 24,
                        "endLineNumber": 209,
                        "endColumnNumber": 25
                    },
                    "nodeContext": "if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(first);\n}\n else if (pr.first == null && pr.last == null) {\n  if (!queryBuilder.toString().contains(fieldName + \":\")) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append('*');\n  }\n}\n else if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n}\n else if (pr.isLike) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n}\n else {\n  throw new RuntimeException(\"[unexpected!] not handled case\");\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 177,
                    "astHeight": 15
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 1538,
                        "startLineNumber": 190,
                        "startColumnNumber": 27,
                        "endLineNumber": 210,
                        "endColumnNumber": 21
                    },
                    "nodeContext": "{\n  if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(first);\n  }\n else   if (pr.first == null && pr.last == null) {\n    if (!queryBuilder.toString().contains(fieldName + \":\")) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append('*');\n    }\n  }\n else   if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n  }\n else   if (pr.isLike) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n  }\n else {\n    throw new RuntimeException(\"[unexpected!] not handled case\");\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 178,
                    "astHeight": 16
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 1791,
                        "startLineNumber": 186,
                        "startColumnNumber": 20,
                        "endLineNumber": 210,
                        "endColumnNumber": 21
                    },
                    "nodeContext": "if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n  queryBuilder.append(configuration.getPathField());\n  queryBuilder.append(':');\n  queryBuilder.append(first);\n}\n else {\n  if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(first);\n  }\n else   if (pr.first == null && pr.last == null) {\n    if (!queryBuilder.toString().contains(fieldName + \":\")) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append('*');\n    }\n  }\n else   if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n  }\n else   if (pr.isLike) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n  }\n else {\n    throw new RuntimeException(\"[unexpected!] not handled case\");\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 203,
                    "astHeight": 17
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 2798,
                        "startLineNumber": 164,
                        "startColumnNumber": 23,
                        "endLineNumber": 211,
                        "endColumnNumber": 17
                    },
                    "nodeContext": "{\n  if (pr.propertyName.contains(\"/\")) {\n    continue;\n  }\n  if (\"rep:excerpt\".equals(pr.propertyName)) {\n    continue;\n  }\n  String first=null;\n  if (pr.first != null) {\n    first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n  }\n  String last=null;\n  if (pr.last != null) {\n    last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n  }\n  String prField=configuration.getFieldForPropertyRestriction(pr);\n  CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n  if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n    queryBuilder.append(configuration.getPathField());\n    queryBuilder.append(':');\n    queryBuilder.append(first);\n  }\n else {\n    if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(first);\n    }\n else     if (pr.first == null && pr.last == null) {\n      if (!queryBuilder.toString().contains(fieldName + \":\")) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append('*');\n      }\n    }\n else     if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n    }\n else     if (pr.isLike) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n    }\n else {\n      throw new RuntimeException(\"[unexpected!] not handled case\");\n    }\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 312,
                    "astHeight": 18
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5508,
                        "startLineNumber": 124,
                        "startColumnNumber": 16,
                        "endLineNumber": 211,
                        "endColumnNumber": 17
                    },
                    "nodeContext": "if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n  String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n  if (isSupportedHttpRequest(nativeQueryString)) {\n    String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n    if (!\"select\".equals(requestHandlerString)) {\n      if (requestHandlerString.charAt(0) != '/') {\n        requestHandlerString=\"/\" + requestHandlerString;\n      }\n      solrQuery.setRequestHandler(requestHandlerString);\n    }\n    String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n    for (    String param : parameterString.split(\"&\")) {\n      String[] kv=param.split(\"=\");\n      if (kv.length != 2) {\n        throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n      }\n else {\n        if (\"stream.body\".equals(kv[0])) {\n          kv[0]=\"q\";\n          String mltFlString=\"mlt.fl=\";\n          int mltFlIndex=parameterString.indexOf(mltFlString);\n          if (mltFlIndex > -1) {\n            int beginIndex=mltFlIndex + mltFlString.length();\n            int endIndex=parameterString.indexOf('&',beginIndex);\n            String fields;\n            if (endIndex > beginIndex) {\n              fields=parameterString.substring(beginIndex,endIndex);\n            }\n else {\n              fields=parameterString.substring(beginIndex);\n            }\n            kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n          }\n        }\n        solrQuery.setParam(kv[0],kv[1]);\n      }\n    }\n    return solrQuery;\n  }\n else {\n    queryBuilder.append(nativeQueryString);\n  }\n}\n else {\n  if (pr.propertyName.contains(\"/\")) {\n    continue;\n  }\n  if (\"rep:excerpt\".equals(pr.propertyName)) {\n    continue;\n  }\n  String first=null;\n  if (pr.first != null) {\n    first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n  }\n  String last=null;\n  if (pr.last != null) {\n    last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n  }\n  String prField=configuration.getFieldForPropertyRestriction(pr);\n  CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n  if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n    queryBuilder.append(configuration.getPathField());\n    queryBuilder.append(':');\n    queryBuilder.append(first);\n  }\n else {\n    if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(first);\n    }\n else     if (pr.first == null && pr.last == null) {\n      if (!queryBuilder.toString().contains(fieldName + \":\")) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append('*');\n      }\n    }\n else     if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n    }\n else     if (pr.isLike) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n    }\n else {\n      throw new RuntimeException(\"[unexpected!] not handled case\");\n    }\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 546,
                    "astHeight": 19
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.EnhancedForStatement,body]",
                    "nodePosition": {
                        "charLength": 5622,
                        "startLineNumber": 122,
                        "startColumnNumber": 71,
                        "endLineNumber": 213,
                        "endColumnNumber": 13
                    },
                    "nodeContext": "{\n  if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n    String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n    if (isSupportedHttpRequest(nativeQueryString)) {\n      String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n      if (!\"select\".equals(requestHandlerString)) {\n        if (requestHandlerString.charAt(0) != '/') {\n          requestHandlerString=\"/\" + requestHandlerString;\n        }\n        solrQuery.setRequestHandler(requestHandlerString);\n      }\n      String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n      for (      String param : parameterString.split(\"&\")) {\n        String[] kv=param.split(\"=\");\n        if (kv.length != 2) {\n          throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n        }\n else {\n          if (\"stream.body\".equals(kv[0])) {\n            kv[0]=\"q\";\n            String mltFlString=\"mlt.fl=\";\n            int mltFlIndex=parameterString.indexOf(mltFlString);\n            if (mltFlIndex > -1) {\n              int beginIndex=mltFlIndex + mltFlString.length();\n              int endIndex=parameterString.indexOf('&',beginIndex);\n              String fields;\n              if (endIndex > beginIndex) {\n                fields=parameterString.substring(beginIndex,endIndex);\n              }\n else {\n                fields=parameterString.substring(beginIndex);\n              }\n              kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n            }\n          }\n          solrQuery.setParam(kv[0],kv[1]);\n        }\n      }\n      return solrQuery;\n    }\n else {\n      queryBuilder.append(nativeQueryString);\n    }\n  }\n else {\n    if (pr.propertyName.contains(\"/\")) {\n      continue;\n    }\n    if (\"rep:excerpt\".equals(pr.propertyName)) {\n      continue;\n    }\n    String first=null;\n    if (pr.first != null) {\n      first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n    }\n    String last=null;\n    if (pr.last != null) {\n      last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n    }\n    String prField=configuration.getFieldForPropertyRestriction(pr);\n    CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n    if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n      queryBuilder.append(configuration.getPathField());\n      queryBuilder.append(':');\n      queryBuilder.append(first);\n    }\n else {\n      if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(first);\n      }\n else       if (pr.first == null && pr.last == null) {\n        if (!queryBuilder.toString().contains(fieldName + \":\")) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append('*');\n        }\n      }\n else       if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n      }\n else       if (pr.isLike) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n      }\n else {\n        throw new RuntimeException(\"[unexpected!] not handled case\");\n      }\n    }\n  }\n  queryBuilder.append(\" \");\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 552,
                    "astHeight": 20
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5681,
                        "startLineNumber": 122,
                        "startColumnNumber": 12,
                        "endLineNumber": 213,
                        "endColumnNumber": 13
                    },
                    "nodeContext": "for (Filter.PropertyRestriction pr : propertyRestrictions) {\n  if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n    String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n    if (isSupportedHttpRequest(nativeQueryString)) {\n      String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n      if (!\"select\".equals(requestHandlerString)) {\n        if (requestHandlerString.charAt(0) != '/') {\n          requestHandlerString=\"/\" + requestHandlerString;\n        }\n        solrQuery.setRequestHandler(requestHandlerString);\n      }\n      String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n      for (      String param : parameterString.split(\"&\")) {\n        String[] kv=param.split(\"=\");\n        if (kv.length != 2) {\n          throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n        }\n else {\n          if (\"stream.body\".equals(kv[0])) {\n            kv[0]=\"q\";\n            String mltFlString=\"mlt.fl=\";\n            int mltFlIndex=parameterString.indexOf(mltFlString);\n            if (mltFlIndex > -1) {\n              int beginIndex=mltFlIndex + mltFlString.length();\n              int endIndex=parameterString.indexOf('&',beginIndex);\n              String fields;\n              if (endIndex > beginIndex) {\n                fields=parameterString.substring(beginIndex,endIndex);\n              }\n else {\n                fields=parameterString.substring(beginIndex);\n              }\n              kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n            }\n          }\n          solrQuery.setParam(kv[0],kv[1]);\n        }\n      }\n      return solrQuery;\n    }\n else {\n      queryBuilder.append(nativeQueryString);\n    }\n  }\n else {\n    if (pr.propertyName.contains(\"/\")) {\n      continue;\n    }\n    if (\"rep:excerpt\".equals(pr.propertyName)) {\n      continue;\n    }\n    String first=null;\n    if (pr.first != null) {\n      first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n    }\n    String last=null;\n    if (pr.last != null) {\n      last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n    }\n    String prField=configuration.getFieldForPropertyRestriction(pr);\n    CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n    if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n      queryBuilder.append(configuration.getPathField());\n      queryBuilder.append(':');\n      queryBuilder.append(first);\n    }\n else {\n      if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(first);\n      }\n else       if (pr.first == null && pr.last == null) {\n        if (!queryBuilder.toString().contains(fieldName + \":\")) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append('*');\n        }\n      }\n else       if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n      }\n else       if (pr.isLike) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n      }\n else {\n        throw new RuntimeException(\"[unexpected!] not handled case\");\n      }\n    }\n  }\n  queryBuilder.append(\" \");\n}\n",
                    "nodeType": "EnhancedForStatement",
                    "astNodeNumber": 560,
                    "astHeight": 21
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,thenStatement]",
                    "nodePosition": {
                        "charLength": 5705,
                        "startLineNumber": 121,
                        "startColumnNumber": 77,
                        "endLineNumber": 214,
                        "endColumnNumber": 9
                    },
                    "nodeContext": "{\n  for (  Filter.PropertyRestriction pr : propertyRestrictions) {\n    if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n      String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n      if (isSupportedHttpRequest(nativeQueryString)) {\n        String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n        if (!\"select\".equals(requestHandlerString)) {\n          if (requestHandlerString.charAt(0) != '/') {\n            requestHandlerString=\"/\" + requestHandlerString;\n          }\n          solrQuery.setRequestHandler(requestHandlerString);\n        }\n        String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n        for (        String param : parameterString.split(\"&\")) {\n          String[] kv=param.split(\"=\");\n          if (kv.length != 2) {\n            throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n          }\n else {\n            if (\"stream.body\".equals(kv[0])) {\n              kv[0]=\"q\";\n              String mltFlString=\"mlt.fl=\";\n              int mltFlIndex=parameterString.indexOf(mltFlString);\n              if (mltFlIndex > -1) {\n                int beginIndex=mltFlIndex + mltFlString.length();\n                int endIndex=parameterString.indexOf('&',beginIndex);\n                String fields;\n                if (endIndex > beginIndex) {\n                  fields=parameterString.substring(beginIndex,endIndex);\n                }\n else {\n                  fields=parameterString.substring(beginIndex);\n                }\n                kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n              }\n            }\n            solrQuery.setParam(kv[0],kv[1]);\n          }\n        }\n        return solrQuery;\n      }\n else {\n        queryBuilder.append(nativeQueryString);\n      }\n    }\n else {\n      if (pr.propertyName.contains(\"/\")) {\n        continue;\n      }\n      if (\"rep:excerpt\".equals(pr.propertyName)) {\n        continue;\n      }\n      String first=null;\n      if (pr.first != null) {\n        first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n      }\n      String last=null;\n      if (pr.last != null) {\n        last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n      }\n      String prField=configuration.getFieldForPropertyRestriction(pr);\n      CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n      if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n        queryBuilder.append(configuration.getPathField());\n        queryBuilder.append(':');\n        queryBuilder.append(first);\n      }\n else {\n        if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(first);\n        }\n else         if (pr.first == null && pr.last == null) {\n          if (!queryBuilder.toString().contains(fieldName + \":\")) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append('*');\n          }\n        }\n else         if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n        }\n else         if (pr.isLike) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n        }\n else {\n          throw new RuntimeException(\"[unexpected!] not handled case\");\n        }\n      }\n    }\n    queryBuilder.append(\" \");\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 561,
                    "astHeight": 22
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5774,
                        "startLineNumber": 121,
                        "startColumnNumber": 8,
                        "endLineNumber": 214,
                        "endColumnNumber": 9
                    },
                    "nodeContext": "if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n  for (  Filter.PropertyRestriction pr : propertyRestrictions) {\n    if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n      String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n      if (isSupportedHttpRequest(nativeQueryString)) {\n        String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n        if (!\"select\".equals(requestHandlerString)) {\n          if (requestHandlerString.charAt(0) != '/') {\n            requestHandlerString=\"/\" + requestHandlerString;\n          }\n          solrQuery.setRequestHandler(requestHandlerString);\n        }\n        String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n        for (        String param : parameterString.split(\"&\")) {\n          String[] kv=param.split(\"=\");\n          if (kv.length != 2) {\n            throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n          }\n else {\n            if (\"stream.body\".equals(kv[0])) {\n              kv[0]=\"q\";\n              String mltFlString=\"mlt.fl=\";\n              int mltFlIndex=parameterString.indexOf(mltFlString);\n              if (mltFlIndex > -1) {\n                int beginIndex=mltFlIndex + mltFlString.length();\n                int endIndex=parameterString.indexOf('&',beginIndex);\n                String fields;\n                if (endIndex > beginIndex) {\n                  fields=parameterString.substring(beginIndex,endIndex);\n                }\n else {\n                  fields=parameterString.substring(beginIndex);\n                }\n                kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n              }\n            }\n            solrQuery.setParam(kv[0],kv[1]);\n          }\n        }\n        return solrQuery;\n      }\n else {\n        queryBuilder.append(nativeQueryString);\n      }\n    }\n else {\n      if (pr.propertyName.contains(\"/\")) {\n        continue;\n      }\n      if (\"rep:excerpt\".equals(pr.propertyName)) {\n        continue;\n      }\n      String first=null;\n      if (pr.first != null) {\n        first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n      }\n      String last=null;\n      if (pr.last != null) {\n        last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n      }\n      String prField=configuration.getFieldForPropertyRestriction(pr);\n      CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n      if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n        queryBuilder.append(configuration.getPathField());\n        queryBuilder.append(':');\n        queryBuilder.append(first);\n      }\n else {\n        if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(first);\n        }\n else         if (pr.first == null && pr.last == null) {\n          if (!queryBuilder.toString().contains(fieldName + \":\")) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append('*');\n          }\n        }\n else         if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n        }\n else         if (pr.isLike) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n        }\n else {\n          throw new RuntimeException(\"[unexpected!] not handled case\");\n        }\n      }\n    }\n    queryBuilder.append(\" \");\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 570,
                    "astHeight": 23
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.MethodDeclaration,body]",
                    "nodePosition": {
                        "charLength": 7985,
                        "startLineNumber": 103,
                        "startColumnNumber": 46,
                        "endLineNumber": 255,
                        "endColumnNumber": 5
                    },
                    "nodeContext": "{\n  SolrQuery solrQuery=new SolrQuery();\n  setDefaults(solrQuery);\n  StringBuilder queryBuilder=new StringBuilder();\n  if (filter.getFullTextConstraint() != null) {\n    queryBuilder.append(getFullTextQuery(filter.getFullTextConstraint()));\n    queryBuilder.append(' ');\n  }\n else   if (filter.getFulltextConditions() != null) {\n    Collection<String> fulltextConditions=filter.getFulltextConditions();\n    for (    String fulltextCondition : fulltextConditions) {\n      queryBuilder.append(fulltextCondition).append(\" \");\n    }\n  }\n  Collection<Filter.PropertyRestriction> propertyRestrictions=filter.getPropertyRestrictions();\n  if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n    for (    Filter.PropertyRestriction pr : propertyRestrictions) {\n      if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n        String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n        if (isSupportedHttpRequest(nativeQueryString)) {\n          String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n          if (!\"select\".equals(requestHandlerString)) {\n            if (requestHandlerString.charAt(0) != '/') {\n              requestHandlerString=\"/\" + requestHandlerString;\n            }\n            solrQuery.setRequestHandler(requestHandlerString);\n          }\n          String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n          for (          String param : parameterString.split(\"&\")) {\n            String[] kv=param.split(\"=\");\n            if (kv.length != 2) {\n              throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n            }\n else {\n              if (\"stream.body\".equals(kv[0])) {\n                kv[0]=\"q\";\n                String mltFlString=\"mlt.fl=\";\n                int mltFlIndex=parameterString.indexOf(mltFlString);\n                if (mltFlIndex > -1) {\n                  int beginIndex=mltFlIndex + mltFlString.length();\n                  int endIndex=parameterString.indexOf('&',beginIndex);\n                  String fields;\n                  if (endIndex > beginIndex) {\n                    fields=parameterString.substring(beginIndex,endIndex);\n                  }\n else {\n                    fields=parameterString.substring(beginIndex);\n                  }\n                  kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n                }\n              }\n              solrQuery.setParam(kv[0],kv[1]);\n            }\n          }\n          return solrQuery;\n        }\n else {\n          queryBuilder.append(nativeQueryString);\n        }\n      }\n else {\n        if (pr.propertyName.contains(\"/\")) {\n          continue;\n        }\n        if (\"rep:excerpt\".equals(pr.propertyName)) {\n          continue;\n        }\n        String first=null;\n        if (pr.first != null) {\n          first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n        }\n        String last=null;\n        if (pr.last != null) {\n          last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n        }\n        String prField=configuration.getFieldForPropertyRestriction(pr);\n        CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n        if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n          queryBuilder.append(configuration.getPathField());\n          queryBuilder.append(':');\n          queryBuilder.append(first);\n        }\n else {\n          if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(first);\n          }\n else           if (pr.first == null && pr.last == null) {\n            if (!queryBuilder.toString().contains(fieldName + \":\")) {\n              queryBuilder.append(fieldName).append(':');\n              queryBuilder.append('*');\n            }\n          }\n else           if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n          }\n else           if (pr.isLike) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n          }\n else {\n            throw new RuntimeException(\"[unexpected!] not handled case\");\n          }\n        }\n      }\n      queryBuilder.append(\" \");\n    }\n  }\n  String[] pts=filter.getPrimaryTypes().toArray(new String[filter.getPrimaryTypes().size()]);\n  for (int i=0; i < pts.length; i++) {\n    String pt=pts[i];\n    if (i == 0) {\n      queryBuilder.append(\"(\");\n    }\n    if (i > 0 && i < pts.length) {\n      queryBuilder.append(\"OR \");\n    }\n    queryBuilder.append(\"jcr\\\\:primaryType\").append(':').append(partialEscape(pt)).append(\" \");\n    if (i == pts.length - 1) {\n      queryBuilder.append(\")\");\n      queryBuilder.append(' ');\n    }\n  }\n  Filter.PathRestriction pathRestriction=filter.getPathRestriction();\n  if (pathRestriction != null) {\n    String path=purgePath(filter);\n    String fieldName=configuration.getFieldForPathRestriction(pathRestriction);\n    if (fieldName != null) {\n      queryBuilder.append(fieldName);\n      queryBuilder.append(':');\n      queryBuilder.append(path);\n    }\n  }\n  if (queryBuilder.length() == 0) {\n    queryBuilder.append(\"*:*\");\n  }\n  String escapedQuery=queryBuilder.toString();\n  solrQuery.setQuery(escapedQuery);\n  if (log.isDebugEnabled()) {\n    log.debug(\"JCR query {} has been converted to Solr query {}\",filter.getQueryStatement(),solrQuery.toString());\n  }\n  return solrQuery;\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 858,
                    "astHeight": 24
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.TypeDeclaration,bodyDeclarations]",
                    "nodePosition": {
                        "charLength": 8027,
                        "startLineNumber": 103,
                        "startColumnNumber": 4,
                        "endLineNumber": 255,
                        "endColumnNumber": 5
                    },
                    "nodeContext": "private SolrQuery getQuery(Filter filter){\n  SolrQuery solrQuery=new SolrQuery();\n  setDefaults(solrQuery);\n  StringBuilder queryBuilder=new StringBuilder();\n  if (filter.getFullTextConstraint() != null) {\n    queryBuilder.append(getFullTextQuery(filter.getFullTextConstraint()));\n    queryBuilder.append(' ');\n  }\n else   if (filter.getFulltextConditions() != null) {\n    Collection<String> fulltextConditions=filter.getFulltextConditions();\n    for (    String fulltextCondition : fulltextConditions) {\n      queryBuilder.append(fulltextCondition).append(\" \");\n    }\n  }\n  Collection<Filter.PropertyRestriction> propertyRestrictions=filter.getPropertyRestrictions();\n  if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n    for (    Filter.PropertyRestriction pr : propertyRestrictions) {\n      if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n        String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n        if (isSupportedHttpRequest(nativeQueryString)) {\n          String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n          if (!\"select\".equals(requestHandlerString)) {\n            if (requestHandlerString.charAt(0) != '/') {\n              requestHandlerString=\"/\" + requestHandlerString;\n            }\n            solrQuery.setRequestHandler(requestHandlerString);\n          }\n          String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n          for (          String param : parameterString.split(\"&\")) {\n            String[] kv=param.split(\"=\");\n            if (kv.length != 2) {\n              throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n            }\n else {\n              if (\"stream.body\".equals(kv[0])) {\n                kv[0]=\"q\";\n                String mltFlString=\"mlt.fl=\";\n                int mltFlIndex=parameterString.indexOf(mltFlString);\n                if (mltFlIndex > -1) {\n                  int beginIndex=mltFlIndex + mltFlString.length();\n                  int endIndex=parameterString.indexOf('&',beginIndex);\n                  String fields;\n                  if (endIndex > beginIndex) {\n                    fields=parameterString.substring(beginIndex,endIndex);\n                  }\n else {\n                    fields=parameterString.substring(beginIndex);\n                  }\n                  kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n                }\n              }\n              solrQuery.setParam(kv[0],kv[1]);\n            }\n          }\n          return solrQuery;\n        }\n else {\n          queryBuilder.append(nativeQueryString);\n        }\n      }\n else {\n        if (pr.propertyName.contains(\"/\")) {\n          continue;\n        }\n        if (\"rep:excerpt\".equals(pr.propertyName)) {\n          continue;\n        }\n        String first=null;\n        if (pr.first != null) {\n          first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n        }\n        String last=null;\n        if (pr.last != null) {\n          last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n        }\n        String prField=configuration.getFieldForPropertyRestriction(pr);\n        CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n        if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n          queryBuilder.append(configuration.getPathField());\n          queryBuilder.append(':');\n          queryBuilder.append(first);\n        }\n else {\n          if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(first);\n          }\n else           if (pr.first == null && pr.last == null) {\n            if (!queryBuilder.toString().contains(fieldName + \":\")) {\n              queryBuilder.append(fieldName).append(':');\n              queryBuilder.append('*');\n            }\n          }\n else           if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n          }\n else           if (pr.isLike) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n          }\n else {\n            throw new RuntimeException(\"[unexpected!] not handled case\");\n          }\n        }\n      }\n      queryBuilder.append(\" \");\n    }\n  }\n  String[] pts=filter.getPrimaryTypes().toArray(new String[filter.getPrimaryTypes().size()]);\n  for (int i=0; i < pts.length; i++) {\n    String pt=pts[i];\n    if (i == 0) {\n      queryBuilder.append(\"(\");\n    }\n    if (i > 0 && i < pts.length) {\n      queryBuilder.append(\"OR \");\n    }\n    queryBuilder.append(\"jcr\\\\:primaryType\").append(':').append(partialEscape(pt)).append(\" \");\n    if (i == pts.length - 1) {\n      queryBuilder.append(\")\");\n      queryBuilder.append(' ');\n    }\n  }\n  Filter.PathRestriction pathRestriction=filter.getPathRestriction();\n  if (pathRestriction != null) {\n    String path=purgePath(filter);\n    String fieldName=configuration.getFieldForPathRestriction(pathRestriction);\n    if (fieldName != null) {\n      queryBuilder.append(fieldName);\n      queryBuilder.append(':');\n      queryBuilder.append(path);\n    }\n  }\n  if (queryBuilder.length() == 0) {\n    queryBuilder.append(\"*:*\");\n  }\n  String escapedQuery=queryBuilder.toString();\n  solrQuery.setQuery(escapedQuery);\n  if (log.isDebugEnabled()) {\n    log.debug(\"JCR query {} has been converted to Solr query {}\",filter.getQueryStatement(),solrQuery.toString());\n  }\n  return solrQuery;\n}\n",
                    "nodeType": "MethodDeclaration",
                    "astNodeNumber": 867,
                    "astHeight": 25
                }
            ],
            "currentLineData": {
                "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                "nodePosition": {
                    "charLength": 88,
                    "startLineNumber": 202,
                    "startColumnNumber": 28,
                    "endLineNumber": 202,
                    "endColumnNumber": 116
                },
                "nodeContext": "queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n",
                "nodeType": "ExpressionStatement",
                "astNodeNumber": 14,
                "astHeight": 5
            },
            "tokenLength": 1,
            "type": "org.apache.jackrabbit.oak.spi.query.Filter.PropertyRestriction"
        },
        {
            "nodeContext": "pr",
            "nodeType": "SimpleName",
            "nodePosition": {
                "charLength": 2,
                "startLineNumber": 202,
                "startColumnNumber": 97,
                "endLineNumber": 202,
                "endColumnNumber": 99
            },
            "astNodeNumber": 1,
            "astHeight": 1,
            "parentDataList": [
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.MethodInvocation,arguments]",
                    "nodePosition": {
                        "charLength": 16,
                        "startLineNumber": 202,
                        "startColumnNumber": 97,
                        "endLineNumber": 202,
                        "endColumnNumber": 113
                    },
                    "nodeContext": "pr.lastIncluding",
                    "nodeType": "QualifiedName",
                    "astNodeNumber": 3,
                    "astHeight": 2
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.MethodInvocation,arguments]",
                    "nodePosition": {
                        "charLength": 66,
                        "startLineNumber": 202,
                        "startColumnNumber": 48,
                        "endLineNumber": 202,
                        "endColumnNumber": 114
                    },
                    "nodeContext": "createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding)",
                    "nodeType": "MethodInvocation",
                    "astNodeNumber": 10,
                    "astHeight": 3
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.ExpressionStatement,expression]",
                    "nodePosition": {
                        "charLength": 87,
                        "startLineNumber": 202,
                        "startColumnNumber": 28,
                        "endLineNumber": 202,
                        "endColumnNumber": 115
                    },
                    "nodeContext": "queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding))",
                    "nodeType": "MethodInvocation",
                    "astNodeNumber": 13,
                    "astHeight": 4
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 88,
                        "startLineNumber": 202,
                        "startColumnNumber": 28,
                        "endLineNumber": 202,
                        "endColumnNumber": 116
                    },
                    "nodeContext": "queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n",
                    "nodeType": "ExpressionStatement",
                    "astNodeNumber": 14,
                    "astHeight": 5
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,thenStatement]",
                    "nodePosition": {
                        "charLength": 321,
                        "startLineNumber": 199,
                        "startColumnNumber": 146,
                        "endLineNumber": 203,
                        "endColumnNumber": 25
                    },
                    "nodeContext": "{\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 23,
                    "astHeight": 6
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 936,
                        "startLineNumber": 199,
                        "startColumnNumber": 31,
                        "endLineNumber": 209,
                        "endColumnNumber": 25
                    },
                    "nodeContext": "if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n}\n else if (pr.isLike) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n}\n else {\n  throw new RuntimeException(\"[unexpected!] not handled case\");\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 105,
                    "astHeight": 13
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 1260,
                        "startLineNumber": 194,
                        "startColumnNumber": 31,
                        "endLineNumber": 209,
                        "endColumnNumber": 25
                    },
                    "nodeContext": "if (pr.first == null && pr.last == null) {\n  if (!queryBuilder.toString().contains(fieldName + \":\")) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append('*');\n  }\n}\n else if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n}\n else if (pr.isLike) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n}\n else {\n  throw new RuntimeException(\"[unexpected!] not handled case\");\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 142,
                    "astHeight": 14
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 1490,
                        "startLineNumber": 191,
                        "startColumnNumber": 24,
                        "endLineNumber": 209,
                        "endColumnNumber": 25
                    },
                    "nodeContext": "if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(first);\n}\n else if (pr.first == null && pr.last == null) {\n  if (!queryBuilder.toString().contains(fieldName + \":\")) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append('*');\n  }\n}\n else if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n}\n else if (pr.isLike) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n}\n else {\n  throw new RuntimeException(\"[unexpected!] not handled case\");\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 177,
                    "astHeight": 15
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 1538,
                        "startLineNumber": 190,
                        "startColumnNumber": 27,
                        "endLineNumber": 210,
                        "endColumnNumber": 21
                    },
                    "nodeContext": "{\n  if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(first);\n  }\n else   if (pr.first == null && pr.last == null) {\n    if (!queryBuilder.toString().contains(fieldName + \":\")) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append('*');\n    }\n  }\n else   if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n  }\n else   if (pr.isLike) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n  }\n else {\n    throw new RuntimeException(\"[unexpected!] not handled case\");\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 178,
                    "astHeight": 16
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 1791,
                        "startLineNumber": 186,
                        "startColumnNumber": 20,
                        "endLineNumber": 210,
                        "endColumnNumber": 21
                    },
                    "nodeContext": "if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n  queryBuilder.append(configuration.getPathField());\n  queryBuilder.append(':');\n  queryBuilder.append(first);\n}\n else {\n  if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(first);\n  }\n else   if (pr.first == null && pr.last == null) {\n    if (!queryBuilder.toString().contains(fieldName + \":\")) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append('*');\n    }\n  }\n else   if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n  }\n else   if (pr.isLike) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n  }\n else {\n    throw new RuntimeException(\"[unexpected!] not handled case\");\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 203,
                    "astHeight": 17
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 2798,
                        "startLineNumber": 164,
                        "startColumnNumber": 23,
                        "endLineNumber": 211,
                        "endColumnNumber": 17
                    },
                    "nodeContext": "{\n  if (pr.propertyName.contains(\"/\")) {\n    continue;\n  }\n  if (\"rep:excerpt\".equals(pr.propertyName)) {\n    continue;\n  }\n  String first=null;\n  if (pr.first != null) {\n    first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n  }\n  String last=null;\n  if (pr.last != null) {\n    last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n  }\n  String prField=configuration.getFieldForPropertyRestriction(pr);\n  CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n  if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n    queryBuilder.append(configuration.getPathField());\n    queryBuilder.append(':');\n    queryBuilder.append(first);\n  }\n else {\n    if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(first);\n    }\n else     if (pr.first == null && pr.last == null) {\n      if (!queryBuilder.toString().contains(fieldName + \":\")) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append('*');\n      }\n    }\n else     if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n    }\n else     if (pr.isLike) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n    }\n else {\n      throw new RuntimeException(\"[unexpected!] not handled case\");\n    }\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 312,
                    "astHeight": 18
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5508,
                        "startLineNumber": 124,
                        "startColumnNumber": 16,
                        "endLineNumber": 211,
                        "endColumnNumber": 17
                    },
                    "nodeContext": "if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n  String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n  if (isSupportedHttpRequest(nativeQueryString)) {\n    String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n    if (!\"select\".equals(requestHandlerString)) {\n      if (requestHandlerString.charAt(0) != '/') {\n        requestHandlerString=\"/\" + requestHandlerString;\n      }\n      solrQuery.setRequestHandler(requestHandlerString);\n    }\n    String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n    for (    String param : parameterString.split(\"&\")) {\n      String[] kv=param.split(\"=\");\n      if (kv.length != 2) {\n        throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n      }\n else {\n        if (\"stream.body\".equals(kv[0])) {\n          kv[0]=\"q\";\n          String mltFlString=\"mlt.fl=\";\n          int mltFlIndex=parameterString.indexOf(mltFlString);\n          if (mltFlIndex > -1) {\n            int beginIndex=mltFlIndex + mltFlString.length();\n            int endIndex=parameterString.indexOf('&',beginIndex);\n            String fields;\n            if (endIndex > beginIndex) {\n              fields=parameterString.substring(beginIndex,endIndex);\n            }\n else {\n              fields=parameterString.substring(beginIndex);\n            }\n            kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n          }\n        }\n        solrQuery.setParam(kv[0],kv[1]);\n      }\n    }\n    return solrQuery;\n  }\n else {\n    queryBuilder.append(nativeQueryString);\n  }\n}\n else {\n  if (pr.propertyName.contains(\"/\")) {\n    continue;\n  }\n  if (\"rep:excerpt\".equals(pr.propertyName)) {\n    continue;\n  }\n  String first=null;\n  if (pr.first != null) {\n    first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n  }\n  String last=null;\n  if (pr.last != null) {\n    last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n  }\n  String prField=configuration.getFieldForPropertyRestriction(pr);\n  CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n  if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n    queryBuilder.append(configuration.getPathField());\n    queryBuilder.append(':');\n    queryBuilder.append(first);\n  }\n else {\n    if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(first);\n    }\n else     if (pr.first == null && pr.last == null) {\n      if (!queryBuilder.toString().contains(fieldName + \":\")) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append('*');\n      }\n    }\n else     if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n    }\n else     if (pr.isLike) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n    }\n else {\n      throw new RuntimeException(\"[unexpected!] not handled case\");\n    }\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 546,
                    "astHeight": 19
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.EnhancedForStatement,body]",
                    "nodePosition": {
                        "charLength": 5622,
                        "startLineNumber": 122,
                        "startColumnNumber": 71,
                        "endLineNumber": 213,
                        "endColumnNumber": 13
                    },
                    "nodeContext": "{\n  if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n    String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n    if (isSupportedHttpRequest(nativeQueryString)) {\n      String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n      if (!\"select\".equals(requestHandlerString)) {\n        if (requestHandlerString.charAt(0) != '/') {\n          requestHandlerString=\"/\" + requestHandlerString;\n        }\n        solrQuery.setRequestHandler(requestHandlerString);\n      }\n      String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n      for (      String param : parameterString.split(\"&\")) {\n        String[] kv=param.split(\"=\");\n        if (kv.length != 2) {\n          throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n        }\n else {\n          if (\"stream.body\".equals(kv[0])) {\n            kv[0]=\"q\";\n            String mltFlString=\"mlt.fl=\";\n            int mltFlIndex=parameterString.indexOf(mltFlString);\n            if (mltFlIndex > -1) {\n              int beginIndex=mltFlIndex + mltFlString.length();\n              int endIndex=parameterString.indexOf('&',beginIndex);\n              String fields;\n              if (endIndex > beginIndex) {\n                fields=parameterString.substring(beginIndex,endIndex);\n              }\n else {\n                fields=parameterString.substring(beginIndex);\n              }\n              kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n            }\n          }\n          solrQuery.setParam(kv[0],kv[1]);\n        }\n      }\n      return solrQuery;\n    }\n else {\n      queryBuilder.append(nativeQueryString);\n    }\n  }\n else {\n    if (pr.propertyName.contains(\"/\")) {\n      continue;\n    }\n    if (\"rep:excerpt\".equals(pr.propertyName)) {\n      continue;\n    }\n    String first=null;\n    if (pr.first != null) {\n      first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n    }\n    String last=null;\n    if (pr.last != null) {\n      last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n    }\n    String prField=configuration.getFieldForPropertyRestriction(pr);\n    CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n    if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n      queryBuilder.append(configuration.getPathField());\n      queryBuilder.append(':');\n      queryBuilder.append(first);\n    }\n else {\n      if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(first);\n      }\n else       if (pr.first == null && pr.last == null) {\n        if (!queryBuilder.toString().contains(fieldName + \":\")) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append('*');\n        }\n      }\n else       if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n      }\n else       if (pr.isLike) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n      }\n else {\n        throw new RuntimeException(\"[unexpected!] not handled case\");\n      }\n    }\n  }\n  queryBuilder.append(\" \");\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 552,
                    "astHeight": 20
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5681,
                        "startLineNumber": 122,
                        "startColumnNumber": 12,
                        "endLineNumber": 213,
                        "endColumnNumber": 13
                    },
                    "nodeContext": "for (Filter.PropertyRestriction pr : propertyRestrictions) {\n  if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n    String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n    if (isSupportedHttpRequest(nativeQueryString)) {\n      String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n      if (!\"select\".equals(requestHandlerString)) {\n        if (requestHandlerString.charAt(0) != '/') {\n          requestHandlerString=\"/\" + requestHandlerString;\n        }\n        solrQuery.setRequestHandler(requestHandlerString);\n      }\n      String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n      for (      String param : parameterString.split(\"&\")) {\n        String[] kv=param.split(\"=\");\n        if (kv.length != 2) {\n          throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n        }\n else {\n          if (\"stream.body\".equals(kv[0])) {\n            kv[0]=\"q\";\n            String mltFlString=\"mlt.fl=\";\n            int mltFlIndex=parameterString.indexOf(mltFlString);\n            if (mltFlIndex > -1) {\n              int beginIndex=mltFlIndex + mltFlString.length();\n              int endIndex=parameterString.indexOf('&',beginIndex);\n              String fields;\n              if (endIndex > beginIndex) {\n                fields=parameterString.substring(beginIndex,endIndex);\n              }\n else {\n                fields=parameterString.substring(beginIndex);\n              }\n              kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n            }\n          }\n          solrQuery.setParam(kv[0],kv[1]);\n        }\n      }\n      return solrQuery;\n    }\n else {\n      queryBuilder.append(nativeQueryString);\n    }\n  }\n else {\n    if (pr.propertyName.contains(\"/\")) {\n      continue;\n    }\n    if (\"rep:excerpt\".equals(pr.propertyName)) {\n      continue;\n    }\n    String first=null;\n    if (pr.first != null) {\n      first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n    }\n    String last=null;\n    if (pr.last != null) {\n      last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n    }\n    String prField=configuration.getFieldForPropertyRestriction(pr);\n    CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n    if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n      queryBuilder.append(configuration.getPathField());\n      queryBuilder.append(':');\n      queryBuilder.append(first);\n    }\n else {\n      if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(first);\n      }\n else       if (pr.first == null && pr.last == null) {\n        if (!queryBuilder.toString().contains(fieldName + \":\")) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append('*');\n        }\n      }\n else       if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n      }\n else       if (pr.isLike) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n      }\n else {\n        throw new RuntimeException(\"[unexpected!] not handled case\");\n      }\n    }\n  }\n  queryBuilder.append(\" \");\n}\n",
                    "nodeType": "EnhancedForStatement",
                    "astNodeNumber": 560,
                    "astHeight": 21
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,thenStatement]",
                    "nodePosition": {
                        "charLength": 5705,
                        "startLineNumber": 121,
                        "startColumnNumber": 77,
                        "endLineNumber": 214,
                        "endColumnNumber": 9
                    },
                    "nodeContext": "{\n  for (  Filter.PropertyRestriction pr : propertyRestrictions) {\n    if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n      String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n      if (isSupportedHttpRequest(nativeQueryString)) {\n        String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n        if (!\"select\".equals(requestHandlerString)) {\n          if (requestHandlerString.charAt(0) != '/') {\n            requestHandlerString=\"/\" + requestHandlerString;\n          }\n          solrQuery.setRequestHandler(requestHandlerString);\n        }\n        String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n        for (        String param : parameterString.split(\"&\")) {\n          String[] kv=param.split(\"=\");\n          if (kv.length != 2) {\n            throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n          }\n else {\n            if (\"stream.body\".equals(kv[0])) {\n              kv[0]=\"q\";\n              String mltFlString=\"mlt.fl=\";\n              int mltFlIndex=parameterString.indexOf(mltFlString);\n              if (mltFlIndex > -1) {\n                int beginIndex=mltFlIndex + mltFlString.length();\n                int endIndex=parameterString.indexOf('&',beginIndex);\n                String fields;\n                if (endIndex > beginIndex) {\n                  fields=parameterString.substring(beginIndex,endIndex);\n                }\n else {\n                  fields=parameterString.substring(beginIndex);\n                }\n                kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n              }\n            }\n            solrQuery.setParam(kv[0],kv[1]);\n          }\n        }\n        return solrQuery;\n      }\n else {\n        queryBuilder.append(nativeQueryString);\n      }\n    }\n else {\n      if (pr.propertyName.contains(\"/\")) {\n        continue;\n      }\n      if (\"rep:excerpt\".equals(pr.propertyName)) {\n        continue;\n      }\n      String first=null;\n      if (pr.first != null) {\n        first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n      }\n      String last=null;\n      if (pr.last != null) {\n        last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n      }\n      String prField=configuration.getFieldForPropertyRestriction(pr);\n      CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n      if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n        queryBuilder.append(configuration.getPathField());\n        queryBuilder.append(':');\n        queryBuilder.append(first);\n      }\n else {\n        if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(first);\n        }\n else         if (pr.first == null && pr.last == null) {\n          if (!queryBuilder.toString().contains(fieldName + \":\")) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append('*');\n          }\n        }\n else         if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n        }\n else         if (pr.isLike) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n        }\n else {\n          throw new RuntimeException(\"[unexpected!] not handled case\");\n        }\n      }\n    }\n    queryBuilder.append(\" \");\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 561,
                    "astHeight": 22
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5774,
                        "startLineNumber": 121,
                        "startColumnNumber": 8,
                        "endLineNumber": 214,
                        "endColumnNumber": 9
                    },
                    "nodeContext": "if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n  for (  Filter.PropertyRestriction pr : propertyRestrictions) {\n    if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n      String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n      if (isSupportedHttpRequest(nativeQueryString)) {\n        String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n        if (!\"select\".equals(requestHandlerString)) {\n          if (requestHandlerString.charAt(0) != '/') {\n            requestHandlerString=\"/\" + requestHandlerString;\n          }\n          solrQuery.setRequestHandler(requestHandlerString);\n        }\n        String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n        for (        String param : parameterString.split(\"&\")) {\n          String[] kv=param.split(\"=\");\n          if (kv.length != 2) {\n            throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n          }\n else {\n            if (\"stream.body\".equals(kv[0])) {\n              kv[0]=\"q\";\n              String mltFlString=\"mlt.fl=\";\n              int mltFlIndex=parameterString.indexOf(mltFlString);\n              if (mltFlIndex > -1) {\n                int beginIndex=mltFlIndex + mltFlString.length();\n                int endIndex=parameterString.indexOf('&',beginIndex);\n                String fields;\n                if (endIndex > beginIndex) {\n                  fields=parameterString.substring(beginIndex,endIndex);\n                }\n else {\n                  fields=parameterString.substring(beginIndex);\n                }\n                kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n              }\n            }\n            solrQuery.setParam(kv[0],kv[1]);\n          }\n        }\n        return solrQuery;\n      }\n else {\n        queryBuilder.append(nativeQueryString);\n      }\n    }\n else {\n      if (pr.propertyName.contains(\"/\")) {\n        continue;\n      }\n      if (\"rep:excerpt\".equals(pr.propertyName)) {\n        continue;\n      }\n      String first=null;\n      if (pr.first != null) {\n        first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n      }\n      String last=null;\n      if (pr.last != null) {\n        last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n      }\n      String prField=configuration.getFieldForPropertyRestriction(pr);\n      CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n      if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n        queryBuilder.append(configuration.getPathField());\n        queryBuilder.append(':');\n        queryBuilder.append(first);\n      }\n else {\n        if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(first);\n        }\n else         if (pr.first == null && pr.last == null) {\n          if (!queryBuilder.toString().contains(fieldName + \":\")) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append('*');\n          }\n        }\n else         if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n        }\n else         if (pr.isLike) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n        }\n else {\n          throw new RuntimeException(\"[unexpected!] not handled case\");\n        }\n      }\n    }\n    queryBuilder.append(\" \");\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 570,
                    "astHeight": 23
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.MethodDeclaration,body]",
                    "nodePosition": {
                        "charLength": 7985,
                        "startLineNumber": 103,
                        "startColumnNumber": 46,
                        "endLineNumber": 255,
                        "endColumnNumber": 5
                    },
                    "nodeContext": "{\n  SolrQuery solrQuery=new SolrQuery();\n  setDefaults(solrQuery);\n  StringBuilder queryBuilder=new StringBuilder();\n  if (filter.getFullTextConstraint() != null) {\n    queryBuilder.append(getFullTextQuery(filter.getFullTextConstraint()));\n    queryBuilder.append(' ');\n  }\n else   if (filter.getFulltextConditions() != null) {\n    Collection<String> fulltextConditions=filter.getFulltextConditions();\n    for (    String fulltextCondition : fulltextConditions) {\n      queryBuilder.append(fulltextCondition).append(\" \");\n    }\n  }\n  Collection<Filter.PropertyRestriction> propertyRestrictions=filter.getPropertyRestrictions();\n  if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n    for (    Filter.PropertyRestriction pr : propertyRestrictions) {\n      if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n        String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n        if (isSupportedHttpRequest(nativeQueryString)) {\n          String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n          if (!\"select\".equals(requestHandlerString)) {\n            if (requestHandlerString.charAt(0) != '/') {\n              requestHandlerString=\"/\" + requestHandlerString;\n            }\n            solrQuery.setRequestHandler(requestHandlerString);\n          }\n          String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n          for (          String param : parameterString.split(\"&\")) {\n            String[] kv=param.split(\"=\");\n            if (kv.length != 2) {\n              throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n            }\n else {\n              if (\"stream.body\".equals(kv[0])) {\n                kv[0]=\"q\";\n                String mltFlString=\"mlt.fl=\";\n                int mltFlIndex=parameterString.indexOf(mltFlString);\n                if (mltFlIndex > -1) {\n                  int beginIndex=mltFlIndex + mltFlString.length();\n                  int endIndex=parameterString.indexOf('&',beginIndex);\n                  String fields;\n                  if (endIndex > beginIndex) {\n                    fields=parameterString.substring(beginIndex,endIndex);\n                  }\n else {\n                    fields=parameterString.substring(beginIndex);\n                  }\n                  kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n                }\n              }\n              solrQuery.setParam(kv[0],kv[1]);\n            }\n          }\n          return solrQuery;\n        }\n else {\n          queryBuilder.append(nativeQueryString);\n        }\n      }\n else {\n        if (pr.propertyName.contains(\"/\")) {\n          continue;\n        }\n        if (\"rep:excerpt\".equals(pr.propertyName)) {\n          continue;\n        }\n        String first=null;\n        if (pr.first != null) {\n          first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n        }\n        String last=null;\n        if (pr.last != null) {\n          last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n        }\n        String prField=configuration.getFieldForPropertyRestriction(pr);\n        CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n        if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n          queryBuilder.append(configuration.getPathField());\n          queryBuilder.append(':');\n          queryBuilder.append(first);\n        }\n else {\n          if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(first);\n          }\n else           if (pr.first == null && pr.last == null) {\n            if (!queryBuilder.toString().contains(fieldName + \":\")) {\n              queryBuilder.append(fieldName).append(':');\n              queryBuilder.append('*');\n            }\n          }\n else           if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n          }\n else           if (pr.isLike) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n          }\n else {\n            throw new RuntimeException(\"[unexpected!] not handled case\");\n          }\n        }\n      }\n      queryBuilder.append(\" \");\n    }\n  }\n  String[] pts=filter.getPrimaryTypes().toArray(new String[filter.getPrimaryTypes().size()]);\n  for (int i=0; i < pts.length; i++) {\n    String pt=pts[i];\n    if (i == 0) {\n      queryBuilder.append(\"(\");\n    }\n    if (i > 0 && i < pts.length) {\n      queryBuilder.append(\"OR \");\n    }\n    queryBuilder.append(\"jcr\\\\:primaryType\").append(':').append(partialEscape(pt)).append(\" \");\n    if (i == pts.length - 1) {\n      queryBuilder.append(\")\");\n      queryBuilder.append(' ');\n    }\n  }\n  Filter.PathRestriction pathRestriction=filter.getPathRestriction();\n  if (pathRestriction != null) {\n    String path=purgePath(filter);\n    String fieldName=configuration.getFieldForPathRestriction(pathRestriction);\n    if (fieldName != null) {\n      queryBuilder.append(fieldName);\n      queryBuilder.append(':');\n      queryBuilder.append(path);\n    }\n  }\n  if (queryBuilder.length() == 0) {\n    queryBuilder.append(\"*:*\");\n  }\n  String escapedQuery=queryBuilder.toString();\n  solrQuery.setQuery(escapedQuery);\n  if (log.isDebugEnabled()) {\n    log.debug(\"JCR query {} has been converted to Solr query {}\",filter.getQueryStatement(),solrQuery.toString());\n  }\n  return solrQuery;\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 858,
                    "astHeight": 24
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.TypeDeclaration,bodyDeclarations]",
                    "nodePosition": {
                        "charLength": 8027,
                        "startLineNumber": 103,
                        "startColumnNumber": 4,
                        "endLineNumber": 255,
                        "endColumnNumber": 5
                    },
                    "nodeContext": "private SolrQuery getQuery(Filter filter){\n  SolrQuery solrQuery=new SolrQuery();\n  setDefaults(solrQuery);\n  StringBuilder queryBuilder=new StringBuilder();\n  if (filter.getFullTextConstraint() != null) {\n    queryBuilder.append(getFullTextQuery(filter.getFullTextConstraint()));\n    queryBuilder.append(' ');\n  }\n else   if (filter.getFulltextConditions() != null) {\n    Collection<String> fulltextConditions=filter.getFulltextConditions();\n    for (    String fulltextCondition : fulltextConditions) {\n      queryBuilder.append(fulltextCondition).append(\" \");\n    }\n  }\n  Collection<Filter.PropertyRestriction> propertyRestrictions=filter.getPropertyRestrictions();\n  if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n    for (    Filter.PropertyRestriction pr : propertyRestrictions) {\n      if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n        String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n        if (isSupportedHttpRequest(nativeQueryString)) {\n          String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n          if (!\"select\".equals(requestHandlerString)) {\n            if (requestHandlerString.charAt(0) != '/') {\n              requestHandlerString=\"/\" + requestHandlerString;\n            }\n            solrQuery.setRequestHandler(requestHandlerString);\n          }\n          String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n          for (          String param : parameterString.split(\"&\")) {\n            String[] kv=param.split(\"=\");\n            if (kv.length != 2) {\n              throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n            }\n else {\n              if (\"stream.body\".equals(kv[0])) {\n                kv[0]=\"q\";\n                String mltFlString=\"mlt.fl=\";\n                int mltFlIndex=parameterString.indexOf(mltFlString);\n                if (mltFlIndex > -1) {\n                  int beginIndex=mltFlIndex + mltFlString.length();\n                  int endIndex=parameterString.indexOf('&',beginIndex);\n                  String fields;\n                  if (endIndex > beginIndex) {\n                    fields=parameterString.substring(beginIndex,endIndex);\n                  }\n else {\n                    fields=parameterString.substring(beginIndex);\n                  }\n                  kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n                }\n              }\n              solrQuery.setParam(kv[0],kv[1]);\n            }\n          }\n          return solrQuery;\n        }\n else {\n          queryBuilder.append(nativeQueryString);\n        }\n      }\n else {\n        if (pr.propertyName.contains(\"/\")) {\n          continue;\n        }\n        if (\"rep:excerpt\".equals(pr.propertyName)) {\n          continue;\n        }\n        String first=null;\n        if (pr.first != null) {\n          first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n        }\n        String last=null;\n        if (pr.last != null) {\n          last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n        }\n        String prField=configuration.getFieldForPropertyRestriction(pr);\n        CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n        if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n          queryBuilder.append(configuration.getPathField());\n          queryBuilder.append(':');\n          queryBuilder.append(first);\n        }\n else {\n          if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(first);\n          }\n else           if (pr.first == null && pr.last == null) {\n            if (!queryBuilder.toString().contains(fieldName + \":\")) {\n              queryBuilder.append(fieldName).append(':');\n              queryBuilder.append('*');\n            }\n          }\n else           if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n          }\n else           if (pr.isLike) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n          }\n else {\n            throw new RuntimeException(\"[unexpected!] not handled case\");\n          }\n        }\n      }\n      queryBuilder.append(\" \");\n    }\n  }\n  String[] pts=filter.getPrimaryTypes().toArray(new String[filter.getPrimaryTypes().size()]);\n  for (int i=0; i < pts.length; i++) {\n    String pt=pts[i];\n    if (i == 0) {\n      queryBuilder.append(\"(\");\n    }\n    if (i > 0 && i < pts.length) {\n      queryBuilder.append(\"OR \");\n    }\n    queryBuilder.append(\"jcr\\\\:primaryType\").append(':').append(partialEscape(pt)).append(\" \");\n    if (i == pts.length - 1) {\n      queryBuilder.append(\")\");\n      queryBuilder.append(' ');\n    }\n  }\n  Filter.PathRestriction pathRestriction=filter.getPathRestriction();\n  if (pathRestriction != null) {\n    String path=purgePath(filter);\n    String fieldName=configuration.getFieldForPathRestriction(pathRestriction);\n    if (fieldName != null) {\n      queryBuilder.append(fieldName);\n      queryBuilder.append(':');\n      queryBuilder.append(path);\n    }\n  }\n  if (queryBuilder.length() == 0) {\n    queryBuilder.append(\"*:*\");\n  }\n  String escapedQuery=queryBuilder.toString();\n  solrQuery.setQuery(escapedQuery);\n  if (log.isDebugEnabled()) {\n    log.debug(\"JCR query {} has been converted to Solr query {}\",filter.getQueryStatement(),solrQuery.toString());\n  }\n  return solrQuery;\n}\n",
                    "nodeType": "MethodDeclaration",
                    "astNodeNumber": 867,
                    "astHeight": 25
                }
            ],
            "currentLineData": {
                "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                "nodePosition": {
                    "charLength": 88,
                    "startLineNumber": 202,
                    "startColumnNumber": 28,
                    "endLineNumber": 202,
                    "endColumnNumber": 116
                },
                "nodeContext": "queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n",
                "nodeType": "ExpressionStatement",
                "astNodeNumber": 14,
                "astHeight": 5
            },
            "tokenLength": 1,
            "type": "org.apache.jackrabbit.oak.spi.query.Filter.PropertyRestriction"
        },
        {
            "nodeContext": "pr",
            "nodeType": "SimpleName",
            "nodePosition": {
                "charLength": 2,
                "startLineNumber": 203,
                "startColumnNumber": 35,
                "endLineNumber": 203,
                "endColumnNumber": 37
            },
            "astNodeNumber": 1,
            "astHeight": 1,
            "parentDataList": [
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,expression]",
                    "nodePosition": {
                        "charLength": 9,
                        "startLineNumber": 203,
                        "startColumnNumber": 35,
                        "endLineNumber": 203,
                        "endColumnNumber": 44
                    },
                    "nodeContext": "pr.isLike",
                    "nodeType": "QualifiedName",
                    "astNodeNumber": 3,
                    "astHeight": 2
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 494,
                        "startLineNumber": 203,
                        "startColumnNumber": 31,
                        "endLineNumber": 209,
                        "endColumnNumber": 25
                    },
                    "nodeContext": "if (pr.isLike) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n}\n else {\n  throw new RuntimeException(\"[unexpected!] not handled case\");\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 46,
                    "astHeight": 12
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 936,
                        "startLineNumber": 199,
                        "startColumnNumber": 31,
                        "endLineNumber": 209,
                        "endColumnNumber": 25
                    },
                    "nodeContext": "if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n}\n else if (pr.isLike) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n}\n else {\n  throw new RuntimeException(\"[unexpected!] not handled case\");\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 105,
                    "astHeight": 13
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 1260,
                        "startLineNumber": 194,
                        "startColumnNumber": 31,
                        "endLineNumber": 209,
                        "endColumnNumber": 25
                    },
                    "nodeContext": "if (pr.first == null && pr.last == null) {\n  if (!queryBuilder.toString().contains(fieldName + \":\")) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append('*');\n  }\n}\n else if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n}\n else if (pr.isLike) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n}\n else {\n  throw new RuntimeException(\"[unexpected!] not handled case\");\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 142,
                    "astHeight": 14
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 1490,
                        "startLineNumber": 191,
                        "startColumnNumber": 24,
                        "endLineNumber": 209,
                        "endColumnNumber": 25
                    },
                    "nodeContext": "if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(first);\n}\n else if (pr.first == null && pr.last == null) {\n  if (!queryBuilder.toString().contains(fieldName + \":\")) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append('*');\n  }\n}\n else if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n}\n else if (pr.isLike) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n}\n else {\n  throw new RuntimeException(\"[unexpected!] not handled case\");\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 177,
                    "astHeight": 15
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 1538,
                        "startLineNumber": 190,
                        "startColumnNumber": 27,
                        "endLineNumber": 210,
                        "endColumnNumber": 21
                    },
                    "nodeContext": "{\n  if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(first);\n  }\n else   if (pr.first == null && pr.last == null) {\n    if (!queryBuilder.toString().contains(fieldName + \":\")) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append('*');\n    }\n  }\n else   if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n  }\n else   if (pr.isLike) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n  }\n else {\n    throw new RuntimeException(\"[unexpected!] not handled case\");\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 178,
                    "astHeight": 16
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 1791,
                        "startLineNumber": 186,
                        "startColumnNumber": 20,
                        "endLineNumber": 210,
                        "endColumnNumber": 21
                    },
                    "nodeContext": "if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n  queryBuilder.append(configuration.getPathField());\n  queryBuilder.append(':');\n  queryBuilder.append(first);\n}\n else {\n  if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(first);\n  }\n else   if (pr.first == null && pr.last == null) {\n    if (!queryBuilder.toString().contains(fieldName + \":\")) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append('*');\n    }\n  }\n else   if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n  }\n else   if (pr.isLike) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n  }\n else {\n    throw new RuntimeException(\"[unexpected!] not handled case\");\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 203,
                    "astHeight": 17
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 2798,
                        "startLineNumber": 164,
                        "startColumnNumber": 23,
                        "endLineNumber": 211,
                        "endColumnNumber": 17
                    },
                    "nodeContext": "{\n  if (pr.propertyName.contains(\"/\")) {\n    continue;\n  }\n  if (\"rep:excerpt\".equals(pr.propertyName)) {\n    continue;\n  }\n  String first=null;\n  if (pr.first != null) {\n    first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n  }\n  String last=null;\n  if (pr.last != null) {\n    last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n  }\n  String prField=configuration.getFieldForPropertyRestriction(pr);\n  CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n  if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n    queryBuilder.append(configuration.getPathField());\n    queryBuilder.append(':');\n    queryBuilder.append(first);\n  }\n else {\n    if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(first);\n    }\n else     if (pr.first == null && pr.last == null) {\n      if (!queryBuilder.toString().contains(fieldName + \":\")) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append('*');\n      }\n    }\n else     if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n    }\n else     if (pr.isLike) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n    }\n else {\n      throw new RuntimeException(\"[unexpected!] not handled case\");\n    }\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 312,
                    "astHeight": 18
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5508,
                        "startLineNumber": 124,
                        "startColumnNumber": 16,
                        "endLineNumber": 211,
                        "endColumnNumber": 17
                    },
                    "nodeContext": "if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n  String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n  if (isSupportedHttpRequest(nativeQueryString)) {\n    String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n    if (!\"select\".equals(requestHandlerString)) {\n      if (requestHandlerString.charAt(0) != '/') {\n        requestHandlerString=\"/\" + requestHandlerString;\n      }\n      solrQuery.setRequestHandler(requestHandlerString);\n    }\n    String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n    for (    String param : parameterString.split(\"&\")) {\n      String[] kv=param.split(\"=\");\n      if (kv.length != 2) {\n        throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n      }\n else {\n        if (\"stream.body\".equals(kv[0])) {\n          kv[0]=\"q\";\n          String mltFlString=\"mlt.fl=\";\n          int mltFlIndex=parameterString.indexOf(mltFlString);\n          if (mltFlIndex > -1) {\n            int beginIndex=mltFlIndex + mltFlString.length();\n            int endIndex=parameterString.indexOf('&',beginIndex);\n            String fields;\n            if (endIndex > beginIndex) {\n              fields=parameterString.substring(beginIndex,endIndex);\n            }\n else {\n              fields=parameterString.substring(beginIndex);\n            }\n            kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n          }\n        }\n        solrQuery.setParam(kv[0],kv[1]);\n      }\n    }\n    return solrQuery;\n  }\n else {\n    queryBuilder.append(nativeQueryString);\n  }\n}\n else {\n  if (pr.propertyName.contains(\"/\")) {\n    continue;\n  }\n  if (\"rep:excerpt\".equals(pr.propertyName)) {\n    continue;\n  }\n  String first=null;\n  if (pr.first != null) {\n    first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n  }\n  String last=null;\n  if (pr.last != null) {\n    last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n  }\n  String prField=configuration.getFieldForPropertyRestriction(pr);\n  CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n  if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n    queryBuilder.append(configuration.getPathField());\n    queryBuilder.append(':');\n    queryBuilder.append(first);\n  }\n else {\n    if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(first);\n    }\n else     if (pr.first == null && pr.last == null) {\n      if (!queryBuilder.toString().contains(fieldName + \":\")) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append('*');\n      }\n    }\n else     if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n    }\n else     if (pr.isLike) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n    }\n else {\n      throw new RuntimeException(\"[unexpected!] not handled case\");\n    }\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 546,
                    "astHeight": 19
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.EnhancedForStatement,body]",
                    "nodePosition": {
                        "charLength": 5622,
                        "startLineNumber": 122,
                        "startColumnNumber": 71,
                        "endLineNumber": 213,
                        "endColumnNumber": 13
                    },
                    "nodeContext": "{\n  if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n    String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n    if (isSupportedHttpRequest(nativeQueryString)) {\n      String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n      if (!\"select\".equals(requestHandlerString)) {\n        if (requestHandlerString.charAt(0) != '/') {\n          requestHandlerString=\"/\" + requestHandlerString;\n        }\n        solrQuery.setRequestHandler(requestHandlerString);\n      }\n      String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n      for (      String param : parameterString.split(\"&\")) {\n        String[] kv=param.split(\"=\");\n        if (kv.length != 2) {\n          throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n        }\n else {\n          if (\"stream.body\".equals(kv[0])) {\n            kv[0]=\"q\";\n            String mltFlString=\"mlt.fl=\";\n            int mltFlIndex=parameterString.indexOf(mltFlString);\n            if (mltFlIndex > -1) {\n              int beginIndex=mltFlIndex + mltFlString.length();\n              int endIndex=parameterString.indexOf('&',beginIndex);\n              String fields;\n              if (endIndex > beginIndex) {\n                fields=parameterString.substring(beginIndex,endIndex);\n              }\n else {\n                fields=parameterString.substring(beginIndex);\n              }\n              kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n            }\n          }\n          solrQuery.setParam(kv[0],kv[1]);\n        }\n      }\n      return solrQuery;\n    }\n else {\n      queryBuilder.append(nativeQueryString);\n    }\n  }\n else {\n    if (pr.propertyName.contains(\"/\")) {\n      continue;\n    }\n    if (\"rep:excerpt\".equals(pr.propertyName)) {\n      continue;\n    }\n    String first=null;\n    if (pr.first != null) {\n      first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n    }\n    String last=null;\n    if (pr.last != null) {\n      last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n    }\n    String prField=configuration.getFieldForPropertyRestriction(pr);\n    CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n    if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n      queryBuilder.append(configuration.getPathField());\n      queryBuilder.append(':');\n      queryBuilder.append(first);\n    }\n else {\n      if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(first);\n      }\n else       if (pr.first == null && pr.last == null) {\n        if (!queryBuilder.toString().contains(fieldName + \":\")) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append('*');\n        }\n      }\n else       if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n      }\n else       if (pr.isLike) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n      }\n else {\n        throw new RuntimeException(\"[unexpected!] not handled case\");\n      }\n    }\n  }\n  queryBuilder.append(\" \");\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 552,
                    "astHeight": 20
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5681,
                        "startLineNumber": 122,
                        "startColumnNumber": 12,
                        "endLineNumber": 213,
                        "endColumnNumber": 13
                    },
                    "nodeContext": "for (Filter.PropertyRestriction pr : propertyRestrictions) {\n  if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n    String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n    if (isSupportedHttpRequest(nativeQueryString)) {\n      String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n      if (!\"select\".equals(requestHandlerString)) {\n        if (requestHandlerString.charAt(0) != '/') {\n          requestHandlerString=\"/\" + requestHandlerString;\n        }\n        solrQuery.setRequestHandler(requestHandlerString);\n      }\n      String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n      for (      String param : parameterString.split(\"&\")) {\n        String[] kv=param.split(\"=\");\n        if (kv.length != 2) {\n          throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n        }\n else {\n          if (\"stream.body\".equals(kv[0])) {\n            kv[0]=\"q\";\n            String mltFlString=\"mlt.fl=\";\n            int mltFlIndex=parameterString.indexOf(mltFlString);\n            if (mltFlIndex > -1) {\n              int beginIndex=mltFlIndex + mltFlString.length();\n              int endIndex=parameterString.indexOf('&',beginIndex);\n              String fields;\n              if (endIndex > beginIndex) {\n                fields=parameterString.substring(beginIndex,endIndex);\n              }\n else {\n                fields=parameterString.substring(beginIndex);\n              }\n              kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n            }\n          }\n          solrQuery.setParam(kv[0],kv[1]);\n        }\n      }\n      return solrQuery;\n    }\n else {\n      queryBuilder.append(nativeQueryString);\n    }\n  }\n else {\n    if (pr.propertyName.contains(\"/\")) {\n      continue;\n    }\n    if (\"rep:excerpt\".equals(pr.propertyName)) {\n      continue;\n    }\n    String first=null;\n    if (pr.first != null) {\n      first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n    }\n    String last=null;\n    if (pr.last != null) {\n      last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n    }\n    String prField=configuration.getFieldForPropertyRestriction(pr);\n    CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n    if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n      queryBuilder.append(configuration.getPathField());\n      queryBuilder.append(':');\n      queryBuilder.append(first);\n    }\n else {\n      if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(first);\n      }\n else       if (pr.first == null && pr.last == null) {\n        if (!queryBuilder.toString().contains(fieldName + \":\")) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append('*');\n        }\n      }\n else       if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n      }\n else       if (pr.isLike) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n      }\n else {\n        throw new RuntimeException(\"[unexpected!] not handled case\");\n      }\n    }\n  }\n  queryBuilder.append(\" \");\n}\n",
                    "nodeType": "EnhancedForStatement",
                    "astNodeNumber": 560,
                    "astHeight": 21
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,thenStatement]",
                    "nodePosition": {
                        "charLength": 5705,
                        "startLineNumber": 121,
                        "startColumnNumber": 77,
                        "endLineNumber": 214,
                        "endColumnNumber": 9
                    },
                    "nodeContext": "{\n  for (  Filter.PropertyRestriction pr : propertyRestrictions) {\n    if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n      String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n      if (isSupportedHttpRequest(nativeQueryString)) {\n        String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n        if (!\"select\".equals(requestHandlerString)) {\n          if (requestHandlerString.charAt(0) != '/') {\n            requestHandlerString=\"/\" + requestHandlerString;\n          }\n          solrQuery.setRequestHandler(requestHandlerString);\n        }\n        String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n        for (        String param : parameterString.split(\"&\")) {\n          String[] kv=param.split(\"=\");\n          if (kv.length != 2) {\n            throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n          }\n else {\n            if (\"stream.body\".equals(kv[0])) {\n              kv[0]=\"q\";\n              String mltFlString=\"mlt.fl=\";\n              int mltFlIndex=parameterString.indexOf(mltFlString);\n              if (mltFlIndex > -1) {\n                int beginIndex=mltFlIndex + mltFlString.length();\n                int endIndex=parameterString.indexOf('&',beginIndex);\n                String fields;\n                if (endIndex > beginIndex) {\n                  fields=parameterString.substring(beginIndex,endIndex);\n                }\n else {\n                  fields=parameterString.substring(beginIndex);\n                }\n                kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n              }\n            }\n            solrQuery.setParam(kv[0],kv[1]);\n          }\n        }\n        return solrQuery;\n      }\n else {\n        queryBuilder.append(nativeQueryString);\n      }\n    }\n else {\n      if (pr.propertyName.contains(\"/\")) {\n        continue;\n      }\n      if (\"rep:excerpt\".equals(pr.propertyName)) {\n        continue;\n      }\n      String first=null;\n      if (pr.first != null) {\n        first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n      }\n      String last=null;\n      if (pr.last != null) {\n        last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n      }\n      String prField=configuration.getFieldForPropertyRestriction(pr);\n      CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n      if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n        queryBuilder.append(configuration.getPathField());\n        queryBuilder.append(':');\n        queryBuilder.append(first);\n      }\n else {\n        if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(first);\n        }\n else         if (pr.first == null && pr.last == null) {\n          if (!queryBuilder.toString().contains(fieldName + \":\")) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append('*');\n          }\n        }\n else         if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n        }\n else         if (pr.isLike) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n        }\n else {\n          throw new RuntimeException(\"[unexpected!] not handled case\");\n        }\n      }\n    }\n    queryBuilder.append(\" \");\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 561,
                    "astHeight": 22
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5774,
                        "startLineNumber": 121,
                        "startColumnNumber": 8,
                        "endLineNumber": 214,
                        "endColumnNumber": 9
                    },
                    "nodeContext": "if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n  for (  Filter.PropertyRestriction pr : propertyRestrictions) {\n    if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n      String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n      if (isSupportedHttpRequest(nativeQueryString)) {\n        String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n        if (!\"select\".equals(requestHandlerString)) {\n          if (requestHandlerString.charAt(0) != '/') {\n            requestHandlerString=\"/\" + requestHandlerString;\n          }\n          solrQuery.setRequestHandler(requestHandlerString);\n        }\n        String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n        for (        String param : parameterString.split(\"&\")) {\n          String[] kv=param.split(\"=\");\n          if (kv.length != 2) {\n            throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n          }\n else {\n            if (\"stream.body\".equals(kv[0])) {\n              kv[0]=\"q\";\n              String mltFlString=\"mlt.fl=\";\n              int mltFlIndex=parameterString.indexOf(mltFlString);\n              if (mltFlIndex > -1) {\n                int beginIndex=mltFlIndex + mltFlString.length();\n                int endIndex=parameterString.indexOf('&',beginIndex);\n                String fields;\n                if (endIndex > beginIndex) {\n                  fields=parameterString.substring(beginIndex,endIndex);\n                }\n else {\n                  fields=parameterString.substring(beginIndex);\n                }\n                kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n              }\n            }\n            solrQuery.setParam(kv[0],kv[1]);\n          }\n        }\n        return solrQuery;\n      }\n else {\n        queryBuilder.append(nativeQueryString);\n      }\n    }\n else {\n      if (pr.propertyName.contains(\"/\")) {\n        continue;\n      }\n      if (\"rep:excerpt\".equals(pr.propertyName)) {\n        continue;\n      }\n      String first=null;\n      if (pr.first != null) {\n        first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n      }\n      String last=null;\n      if (pr.last != null) {\n        last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n      }\n      String prField=configuration.getFieldForPropertyRestriction(pr);\n      CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n      if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n        queryBuilder.append(configuration.getPathField());\n        queryBuilder.append(':');\n        queryBuilder.append(first);\n      }\n else {\n        if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(first);\n        }\n else         if (pr.first == null && pr.last == null) {\n          if (!queryBuilder.toString().contains(fieldName + \":\")) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append('*');\n          }\n        }\n else         if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n        }\n else         if (pr.isLike) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n        }\n else {\n          throw new RuntimeException(\"[unexpected!] not handled case\");\n        }\n      }\n    }\n    queryBuilder.append(\" \");\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 570,
                    "astHeight": 23
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.MethodDeclaration,body]",
                    "nodePosition": {
                        "charLength": 7985,
                        "startLineNumber": 103,
                        "startColumnNumber": 46,
                        "endLineNumber": 255,
                        "endColumnNumber": 5
                    },
                    "nodeContext": "{\n  SolrQuery solrQuery=new SolrQuery();\n  setDefaults(solrQuery);\n  StringBuilder queryBuilder=new StringBuilder();\n  if (filter.getFullTextConstraint() != null) {\n    queryBuilder.append(getFullTextQuery(filter.getFullTextConstraint()));\n    queryBuilder.append(' ');\n  }\n else   if (filter.getFulltextConditions() != null) {\n    Collection<String> fulltextConditions=filter.getFulltextConditions();\n    for (    String fulltextCondition : fulltextConditions) {\n      queryBuilder.append(fulltextCondition).append(\" \");\n    }\n  }\n  Collection<Filter.PropertyRestriction> propertyRestrictions=filter.getPropertyRestrictions();\n  if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n    for (    Filter.PropertyRestriction pr : propertyRestrictions) {\n      if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n        String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n        if (isSupportedHttpRequest(nativeQueryString)) {\n          String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n          if (!\"select\".equals(requestHandlerString)) {\n            if (requestHandlerString.charAt(0) != '/') {\n              requestHandlerString=\"/\" + requestHandlerString;\n            }\n            solrQuery.setRequestHandler(requestHandlerString);\n          }\n          String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n          for (          String param : parameterString.split(\"&\")) {\n            String[] kv=param.split(\"=\");\n            if (kv.length != 2) {\n              throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n            }\n else {\n              if (\"stream.body\".equals(kv[0])) {\n                kv[0]=\"q\";\n                String mltFlString=\"mlt.fl=\";\n                int mltFlIndex=parameterString.indexOf(mltFlString);\n                if (mltFlIndex > -1) {\n                  int beginIndex=mltFlIndex + mltFlString.length();\n                  int endIndex=parameterString.indexOf('&',beginIndex);\n                  String fields;\n                  if (endIndex > beginIndex) {\n                    fields=parameterString.substring(beginIndex,endIndex);\n                  }\n else {\n                    fields=parameterString.substring(beginIndex);\n                  }\n                  kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n                }\n              }\n              solrQuery.setParam(kv[0],kv[1]);\n            }\n          }\n          return solrQuery;\n        }\n else {\n          queryBuilder.append(nativeQueryString);\n        }\n      }\n else {\n        if (pr.propertyName.contains(\"/\")) {\n          continue;\n        }\n        if (\"rep:excerpt\".equals(pr.propertyName)) {\n          continue;\n        }\n        String first=null;\n        if (pr.first != null) {\n          first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n        }\n        String last=null;\n        if (pr.last != null) {\n          last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n        }\n        String prField=configuration.getFieldForPropertyRestriction(pr);\n        CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n        if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n          queryBuilder.append(configuration.getPathField());\n          queryBuilder.append(':');\n          queryBuilder.append(first);\n        }\n else {\n          if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(first);\n          }\n else           if (pr.first == null && pr.last == null) {\n            if (!queryBuilder.toString().contains(fieldName + \":\")) {\n              queryBuilder.append(fieldName).append(':');\n              queryBuilder.append('*');\n            }\n          }\n else           if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n          }\n else           if (pr.isLike) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n          }\n else {\n            throw new RuntimeException(\"[unexpected!] not handled case\");\n          }\n        }\n      }\n      queryBuilder.append(\" \");\n    }\n  }\n  String[] pts=filter.getPrimaryTypes().toArray(new String[filter.getPrimaryTypes().size()]);\n  for (int i=0; i < pts.length; i++) {\n    String pt=pts[i];\n    if (i == 0) {\n      queryBuilder.append(\"(\");\n    }\n    if (i > 0 && i < pts.length) {\n      queryBuilder.append(\"OR \");\n    }\n    queryBuilder.append(\"jcr\\\\:primaryType\").append(':').append(partialEscape(pt)).append(\" \");\n    if (i == pts.length - 1) {\n      queryBuilder.append(\")\");\n      queryBuilder.append(' ');\n    }\n  }\n  Filter.PathRestriction pathRestriction=filter.getPathRestriction();\n  if (pathRestriction != null) {\n    String path=purgePath(filter);\n    String fieldName=configuration.getFieldForPathRestriction(pathRestriction);\n    if (fieldName != null) {\n      queryBuilder.append(fieldName);\n      queryBuilder.append(':');\n      queryBuilder.append(path);\n    }\n  }\n  if (queryBuilder.length() == 0) {\n    queryBuilder.append(\"*:*\");\n  }\n  String escapedQuery=queryBuilder.toString();\n  solrQuery.setQuery(escapedQuery);\n  if (log.isDebugEnabled()) {\n    log.debug(\"JCR query {} has been converted to Solr query {}\",filter.getQueryStatement(),solrQuery.toString());\n  }\n  return solrQuery;\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 858,
                    "astHeight": 24
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.TypeDeclaration,bodyDeclarations]",
                    "nodePosition": {
                        "charLength": 8027,
                        "startLineNumber": 103,
                        "startColumnNumber": 4,
                        "endLineNumber": 255,
                        "endColumnNumber": 5
                    },
                    "nodeContext": "private SolrQuery getQuery(Filter filter){\n  SolrQuery solrQuery=new SolrQuery();\n  setDefaults(solrQuery);\n  StringBuilder queryBuilder=new StringBuilder();\n  if (filter.getFullTextConstraint() != null) {\n    queryBuilder.append(getFullTextQuery(filter.getFullTextConstraint()));\n    queryBuilder.append(' ');\n  }\n else   if (filter.getFulltextConditions() != null) {\n    Collection<String> fulltextConditions=filter.getFulltextConditions();\n    for (    String fulltextCondition : fulltextConditions) {\n      queryBuilder.append(fulltextCondition).append(\" \");\n    }\n  }\n  Collection<Filter.PropertyRestriction> propertyRestrictions=filter.getPropertyRestrictions();\n  if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n    for (    Filter.PropertyRestriction pr : propertyRestrictions) {\n      if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n        String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n        if (isSupportedHttpRequest(nativeQueryString)) {\n          String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n          if (!\"select\".equals(requestHandlerString)) {\n            if (requestHandlerString.charAt(0) != '/') {\n              requestHandlerString=\"/\" + requestHandlerString;\n            }\n            solrQuery.setRequestHandler(requestHandlerString);\n          }\n          String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n          for (          String param : parameterString.split(\"&\")) {\n            String[] kv=param.split(\"=\");\n            if (kv.length != 2) {\n              throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n            }\n else {\n              if (\"stream.body\".equals(kv[0])) {\n                kv[0]=\"q\";\n                String mltFlString=\"mlt.fl=\";\n                int mltFlIndex=parameterString.indexOf(mltFlString);\n                if (mltFlIndex > -1) {\n                  int beginIndex=mltFlIndex + mltFlString.length();\n                  int endIndex=parameterString.indexOf('&',beginIndex);\n                  String fields;\n                  if (endIndex > beginIndex) {\n                    fields=parameterString.substring(beginIndex,endIndex);\n                  }\n else {\n                    fields=parameterString.substring(beginIndex);\n                  }\n                  kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n                }\n              }\n              solrQuery.setParam(kv[0],kv[1]);\n            }\n          }\n          return solrQuery;\n        }\n else {\n          queryBuilder.append(nativeQueryString);\n        }\n      }\n else {\n        if (pr.propertyName.contains(\"/\")) {\n          continue;\n        }\n        if (\"rep:excerpt\".equals(pr.propertyName)) {\n          continue;\n        }\n        String first=null;\n        if (pr.first != null) {\n          first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n        }\n        String last=null;\n        if (pr.last != null) {\n          last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n        }\n        String prField=configuration.getFieldForPropertyRestriction(pr);\n        CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n        if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n          queryBuilder.append(configuration.getPathField());\n          queryBuilder.append(':');\n          queryBuilder.append(first);\n        }\n else {\n          if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(first);\n          }\n else           if (pr.first == null && pr.last == null) {\n            if (!queryBuilder.toString().contains(fieldName + \":\")) {\n              queryBuilder.append(fieldName).append(':');\n              queryBuilder.append('*');\n            }\n          }\n else           if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n          }\n else           if (pr.isLike) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n          }\n else {\n            throw new RuntimeException(\"[unexpected!] not handled case\");\n          }\n        }\n      }\n      queryBuilder.append(\" \");\n    }\n  }\n  String[] pts=filter.getPrimaryTypes().toArray(new String[filter.getPrimaryTypes().size()]);\n  for (int i=0; i < pts.length; i++) {\n    String pt=pts[i];\n    if (i == 0) {\n      queryBuilder.append(\"(\");\n    }\n    if (i > 0 && i < pts.length) {\n      queryBuilder.append(\"OR \");\n    }\n    queryBuilder.append(\"jcr\\\\:primaryType\").append(':').append(partialEscape(pt)).append(\" \");\n    if (i == pts.length - 1) {\n      queryBuilder.append(\")\");\n      queryBuilder.append(' ');\n    }\n  }\n  Filter.PathRestriction pathRestriction=filter.getPathRestriction();\n  if (pathRestriction != null) {\n    String path=purgePath(filter);\n    String fieldName=configuration.getFieldForPathRestriction(pathRestriction);\n    if (fieldName != null) {\n      queryBuilder.append(fieldName);\n      queryBuilder.append(':');\n      queryBuilder.append(path);\n    }\n  }\n  if (queryBuilder.length() == 0) {\n    queryBuilder.append(\"*:*\");\n  }\n  String escapedQuery=queryBuilder.toString();\n  solrQuery.setQuery(escapedQuery);\n  if (log.isDebugEnabled()) {\n    log.debug(\"JCR query {} has been converted to Solr query {}\",filter.getQueryStatement(),solrQuery.toString());\n  }\n  return solrQuery;\n}\n",
                    "nodeType": "MethodDeclaration",
                    "astNodeNumber": 867,
                    "astHeight": 25
                }
            ],
            "currentLineData": {
                "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,expression]",
                "nodePosition": {
                    "charLength": 9,
                    "startLineNumber": 203,
                    "startColumnNumber": 35,
                    "endLineNumber": 203,
                    "endColumnNumber": 44
                },
                "nodeContext": "pr.isLike",
                "nodeType": "QualifiedName",
                "astNodeNumber": 3,
                "astHeight": 2
            },
            "tokenLength": 1,
            "type": "org.apache.jackrabbit.oak.spi.query.Filter.PropertyRestriction"
        },
        {
            "nodeContext": "pr",
            "nodeType": "SimpleName",
            "nodePosition": {
                "charLength": 2,
                "startLineNumber": 206,
                "startColumnNumber": 77,
                "endLineNumber": 206,
                "endColumnNumber": 79
            },
            "astNodeNumber": 1,
            "astHeight": 1,
            "parentDataList": [
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.MethodInvocation,expression]",
                    "nodePosition": {
                        "charLength": 8,
                        "startLineNumber": 206,
                        "startColumnNumber": 77,
                        "endLineNumber": 206,
                        "endColumnNumber": 85
                    },
                    "nodeContext": "pr.first",
                    "nodeType": "QualifiedName",
                    "astNodeNumber": 3,
                    "astHeight": 2
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.MethodInvocation,arguments]",
                    "nodePosition": {
                        "charLength": 37,
                        "startLineNumber": 206,
                        "startColumnNumber": 77,
                        "endLineNumber": 206,
                        "endColumnNumber": 114
                    },
                    "nodeContext": "pr.first.getValue(pr.first.getType())",
                    "nodeType": "MethodInvocation",
                    "astNodeNumber": 10,
                    "astHeight": 4
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.MethodInvocation,expression]",
                    "nodePosition": {
                        "charLength": 53,
                        "startLineNumber": 206,
                        "startColumnNumber": 62,
                        "endLineNumber": 206,
                        "endColumnNumber": 115
                    },
                    "nodeContext": "String.valueOf(pr.first.getValue(pr.first.getType()))",
                    "nodeType": "MethodInvocation",
                    "astNodeNumber": 13,
                    "astHeight": 5
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.MethodInvocation,expression]",
                    "nodePosition": {
                        "charLength": 71,
                        "startLineNumber": 206,
                        "startColumnNumber": 62,
                        "endLineNumber": 206,
                        "endColumnNumber": 133
                    },
                    "nodeContext": "String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*')",
                    "nodeType": "MethodInvocation",
                    "astNodeNumber": 17,
                    "astHeight": 6
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.MethodInvocation,arguments]",
                    "nodePosition": {
                        "charLength": 89,
                        "startLineNumber": 206,
                        "startColumnNumber": 62,
                        "endLineNumber": 206,
                        "endColumnNumber": 151
                    },
                    "nodeContext": "String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')",
                    "nodeType": "MethodInvocation",
                    "astNodeNumber": 21,
                    "astHeight": 7
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.MethodInvocation,arguments]",
                    "nodePosition": {
                        "charLength": 104,
                        "startLineNumber": 206,
                        "startColumnNumber": 48,
                        "endLineNumber": 206,
                        "endColumnNumber": 152
                    },
                    "nodeContext": "partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?'))",
                    "nodeType": "MethodInvocation",
                    "astNodeNumber": 23,
                    "astHeight": 8
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.ExpressionStatement,expression]",
                    "nodePosition": {
                        "charLength": 125,
                        "startLineNumber": 206,
                        "startColumnNumber": 28,
                        "endLineNumber": 206,
                        "endColumnNumber": 153
                    },
                    "nodeContext": "queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')))",
                    "nodeType": "MethodInvocation",
                    "astNodeNumber": 26,
                    "astHeight": 9
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 126,
                        "startLineNumber": 206,
                        "startColumnNumber": 28,
                        "endLineNumber": 206,
                        "endColumnNumber": 154
                    },
                    "nodeContext": "queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n",
                    "nodeType": "ExpressionStatement",
                    "astNodeNumber": 27,
                    "astHeight": 10
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,thenStatement]",
                    "nodePosition": {
                        "charLength": 356,
                        "startLineNumber": 203,
                        "startColumnNumber": 46,
                        "endLineNumber": 207,
                        "endColumnNumber": 25
                    },
                    "nodeContext": "{\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 36,
                    "astHeight": 11
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 494,
                        "startLineNumber": 203,
                        "startColumnNumber": 31,
                        "endLineNumber": 209,
                        "endColumnNumber": 25
                    },
                    "nodeContext": "if (pr.isLike) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n}\n else {\n  throw new RuntimeException(\"[unexpected!] not handled case\");\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 46,
                    "astHeight": 12
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 936,
                        "startLineNumber": 199,
                        "startColumnNumber": 31,
                        "endLineNumber": 209,
                        "endColumnNumber": 25
                    },
                    "nodeContext": "if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n}\n else if (pr.isLike) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n}\n else {\n  throw new RuntimeException(\"[unexpected!] not handled case\");\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 105,
                    "astHeight": 13
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 1260,
                        "startLineNumber": 194,
                        "startColumnNumber": 31,
                        "endLineNumber": 209,
                        "endColumnNumber": 25
                    },
                    "nodeContext": "if (pr.first == null && pr.last == null) {\n  if (!queryBuilder.toString().contains(fieldName + \":\")) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append('*');\n  }\n}\n else if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n}\n else if (pr.isLike) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n}\n else {\n  throw new RuntimeException(\"[unexpected!] not handled case\");\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 142,
                    "astHeight": 14
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 1490,
                        "startLineNumber": 191,
                        "startColumnNumber": 24,
                        "endLineNumber": 209,
                        "endColumnNumber": 25
                    },
                    "nodeContext": "if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(first);\n}\n else if (pr.first == null && pr.last == null) {\n  if (!queryBuilder.toString().contains(fieldName + \":\")) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append('*');\n  }\n}\n else if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n}\n else if (pr.isLike) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n}\n else {\n  throw new RuntimeException(\"[unexpected!] not handled case\");\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 177,
                    "astHeight": 15
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 1538,
                        "startLineNumber": 190,
                        "startColumnNumber": 27,
                        "endLineNumber": 210,
                        "endColumnNumber": 21
                    },
                    "nodeContext": "{\n  if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(first);\n  }\n else   if (pr.first == null && pr.last == null) {\n    if (!queryBuilder.toString().contains(fieldName + \":\")) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append('*');\n    }\n  }\n else   if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n  }\n else   if (pr.isLike) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n  }\n else {\n    throw new RuntimeException(\"[unexpected!] not handled case\");\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 178,
                    "astHeight": 16
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 1791,
                        "startLineNumber": 186,
                        "startColumnNumber": 20,
                        "endLineNumber": 210,
                        "endColumnNumber": 21
                    },
                    "nodeContext": "if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n  queryBuilder.append(configuration.getPathField());\n  queryBuilder.append(':');\n  queryBuilder.append(first);\n}\n else {\n  if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(first);\n  }\n else   if (pr.first == null && pr.last == null) {\n    if (!queryBuilder.toString().contains(fieldName + \":\")) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append('*');\n    }\n  }\n else   if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n  }\n else   if (pr.isLike) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n  }\n else {\n    throw new RuntimeException(\"[unexpected!] not handled case\");\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 203,
                    "astHeight": 17
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 2798,
                        "startLineNumber": 164,
                        "startColumnNumber": 23,
                        "endLineNumber": 211,
                        "endColumnNumber": 17
                    },
                    "nodeContext": "{\n  if (pr.propertyName.contains(\"/\")) {\n    continue;\n  }\n  if (\"rep:excerpt\".equals(pr.propertyName)) {\n    continue;\n  }\n  String first=null;\n  if (pr.first != null) {\n    first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n  }\n  String last=null;\n  if (pr.last != null) {\n    last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n  }\n  String prField=configuration.getFieldForPropertyRestriction(pr);\n  CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n  if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n    queryBuilder.append(configuration.getPathField());\n    queryBuilder.append(':');\n    queryBuilder.append(first);\n  }\n else {\n    if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(first);\n    }\n else     if (pr.first == null && pr.last == null) {\n      if (!queryBuilder.toString().contains(fieldName + \":\")) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append('*');\n      }\n    }\n else     if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n    }\n else     if (pr.isLike) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n    }\n else {\n      throw new RuntimeException(\"[unexpected!] not handled case\");\n    }\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 312,
                    "astHeight": 18
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5508,
                        "startLineNumber": 124,
                        "startColumnNumber": 16,
                        "endLineNumber": 211,
                        "endColumnNumber": 17
                    },
                    "nodeContext": "if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n  String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n  if (isSupportedHttpRequest(nativeQueryString)) {\n    String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n    if (!\"select\".equals(requestHandlerString)) {\n      if (requestHandlerString.charAt(0) != '/') {\n        requestHandlerString=\"/\" + requestHandlerString;\n      }\n      solrQuery.setRequestHandler(requestHandlerString);\n    }\n    String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n    for (    String param : parameterString.split(\"&\")) {\n      String[] kv=param.split(\"=\");\n      if (kv.length != 2) {\n        throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n      }\n else {\n        if (\"stream.body\".equals(kv[0])) {\n          kv[0]=\"q\";\n          String mltFlString=\"mlt.fl=\";\n          int mltFlIndex=parameterString.indexOf(mltFlString);\n          if (mltFlIndex > -1) {\n            int beginIndex=mltFlIndex + mltFlString.length();\n            int endIndex=parameterString.indexOf('&',beginIndex);\n            String fields;\n            if (endIndex > beginIndex) {\n              fields=parameterString.substring(beginIndex,endIndex);\n            }\n else {\n              fields=parameterString.substring(beginIndex);\n            }\n            kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n          }\n        }\n        solrQuery.setParam(kv[0],kv[1]);\n      }\n    }\n    return solrQuery;\n  }\n else {\n    queryBuilder.append(nativeQueryString);\n  }\n}\n else {\n  if (pr.propertyName.contains(\"/\")) {\n    continue;\n  }\n  if (\"rep:excerpt\".equals(pr.propertyName)) {\n    continue;\n  }\n  String first=null;\n  if (pr.first != null) {\n    first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n  }\n  String last=null;\n  if (pr.last != null) {\n    last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n  }\n  String prField=configuration.getFieldForPropertyRestriction(pr);\n  CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n  if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n    queryBuilder.append(configuration.getPathField());\n    queryBuilder.append(':');\n    queryBuilder.append(first);\n  }\n else {\n    if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(first);\n    }\n else     if (pr.first == null && pr.last == null) {\n      if (!queryBuilder.toString().contains(fieldName + \":\")) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append('*');\n      }\n    }\n else     if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n    }\n else     if (pr.isLike) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n    }\n else {\n      throw new RuntimeException(\"[unexpected!] not handled case\");\n    }\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 546,
                    "astHeight": 19
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.EnhancedForStatement,body]",
                    "nodePosition": {
                        "charLength": 5622,
                        "startLineNumber": 122,
                        "startColumnNumber": 71,
                        "endLineNumber": 213,
                        "endColumnNumber": 13
                    },
                    "nodeContext": "{\n  if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n    String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n    if (isSupportedHttpRequest(nativeQueryString)) {\n      String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n      if (!\"select\".equals(requestHandlerString)) {\n        if (requestHandlerString.charAt(0) != '/') {\n          requestHandlerString=\"/\" + requestHandlerString;\n        }\n        solrQuery.setRequestHandler(requestHandlerString);\n      }\n      String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n      for (      String param : parameterString.split(\"&\")) {\n        String[] kv=param.split(\"=\");\n        if (kv.length != 2) {\n          throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n        }\n else {\n          if (\"stream.body\".equals(kv[0])) {\n            kv[0]=\"q\";\n            String mltFlString=\"mlt.fl=\";\n            int mltFlIndex=parameterString.indexOf(mltFlString);\n            if (mltFlIndex > -1) {\n              int beginIndex=mltFlIndex + mltFlString.length();\n              int endIndex=parameterString.indexOf('&',beginIndex);\n              String fields;\n              if (endIndex > beginIndex) {\n                fields=parameterString.substring(beginIndex,endIndex);\n              }\n else {\n                fields=parameterString.substring(beginIndex);\n              }\n              kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n            }\n          }\n          solrQuery.setParam(kv[0],kv[1]);\n        }\n      }\n      return solrQuery;\n    }\n else {\n      queryBuilder.append(nativeQueryString);\n    }\n  }\n else {\n    if (pr.propertyName.contains(\"/\")) {\n      continue;\n    }\n    if (\"rep:excerpt\".equals(pr.propertyName)) {\n      continue;\n    }\n    String first=null;\n    if (pr.first != null) {\n      first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n    }\n    String last=null;\n    if (pr.last != null) {\n      last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n    }\n    String prField=configuration.getFieldForPropertyRestriction(pr);\n    CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n    if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n      queryBuilder.append(configuration.getPathField());\n      queryBuilder.append(':');\n      queryBuilder.append(first);\n    }\n else {\n      if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(first);\n      }\n else       if (pr.first == null && pr.last == null) {\n        if (!queryBuilder.toString().contains(fieldName + \":\")) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append('*');\n        }\n      }\n else       if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n      }\n else       if (pr.isLike) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n      }\n else {\n        throw new RuntimeException(\"[unexpected!] not handled case\");\n      }\n    }\n  }\n  queryBuilder.append(\" \");\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 552,
                    "astHeight": 20
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5681,
                        "startLineNumber": 122,
                        "startColumnNumber": 12,
                        "endLineNumber": 213,
                        "endColumnNumber": 13
                    },
                    "nodeContext": "for (Filter.PropertyRestriction pr : propertyRestrictions) {\n  if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n    String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n    if (isSupportedHttpRequest(nativeQueryString)) {\n      String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n      if (!\"select\".equals(requestHandlerString)) {\n        if (requestHandlerString.charAt(0) != '/') {\n          requestHandlerString=\"/\" + requestHandlerString;\n        }\n        solrQuery.setRequestHandler(requestHandlerString);\n      }\n      String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n      for (      String param : parameterString.split(\"&\")) {\n        String[] kv=param.split(\"=\");\n        if (kv.length != 2) {\n          throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n        }\n else {\n          if (\"stream.body\".equals(kv[0])) {\n            kv[0]=\"q\";\n            String mltFlString=\"mlt.fl=\";\n            int mltFlIndex=parameterString.indexOf(mltFlString);\n            if (mltFlIndex > -1) {\n              int beginIndex=mltFlIndex + mltFlString.length();\n              int endIndex=parameterString.indexOf('&',beginIndex);\n              String fields;\n              if (endIndex > beginIndex) {\n                fields=parameterString.substring(beginIndex,endIndex);\n              }\n else {\n                fields=parameterString.substring(beginIndex);\n              }\n              kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n            }\n          }\n          solrQuery.setParam(kv[0],kv[1]);\n        }\n      }\n      return solrQuery;\n    }\n else {\n      queryBuilder.append(nativeQueryString);\n    }\n  }\n else {\n    if (pr.propertyName.contains(\"/\")) {\n      continue;\n    }\n    if (\"rep:excerpt\".equals(pr.propertyName)) {\n      continue;\n    }\n    String first=null;\n    if (pr.first != null) {\n      first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n    }\n    String last=null;\n    if (pr.last != null) {\n      last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n    }\n    String prField=configuration.getFieldForPropertyRestriction(pr);\n    CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n    if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n      queryBuilder.append(configuration.getPathField());\n      queryBuilder.append(':');\n      queryBuilder.append(first);\n    }\n else {\n      if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(first);\n      }\n else       if (pr.first == null && pr.last == null) {\n        if (!queryBuilder.toString().contains(fieldName + \":\")) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append('*');\n        }\n      }\n else       if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n      }\n else       if (pr.isLike) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n      }\n else {\n        throw new RuntimeException(\"[unexpected!] not handled case\");\n      }\n    }\n  }\n  queryBuilder.append(\" \");\n}\n",
                    "nodeType": "EnhancedForStatement",
                    "astNodeNumber": 560,
                    "astHeight": 21
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,thenStatement]",
                    "nodePosition": {
                        "charLength": 5705,
                        "startLineNumber": 121,
                        "startColumnNumber": 77,
                        "endLineNumber": 214,
                        "endColumnNumber": 9
                    },
                    "nodeContext": "{\n  for (  Filter.PropertyRestriction pr : propertyRestrictions) {\n    if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n      String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n      if (isSupportedHttpRequest(nativeQueryString)) {\n        String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n        if (!\"select\".equals(requestHandlerString)) {\n          if (requestHandlerString.charAt(0) != '/') {\n            requestHandlerString=\"/\" + requestHandlerString;\n          }\n          solrQuery.setRequestHandler(requestHandlerString);\n        }\n        String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n        for (        String param : parameterString.split(\"&\")) {\n          String[] kv=param.split(\"=\");\n          if (kv.length != 2) {\n            throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n          }\n else {\n            if (\"stream.body\".equals(kv[0])) {\n              kv[0]=\"q\";\n              String mltFlString=\"mlt.fl=\";\n              int mltFlIndex=parameterString.indexOf(mltFlString);\n              if (mltFlIndex > -1) {\n                int beginIndex=mltFlIndex + mltFlString.length();\n                int endIndex=parameterString.indexOf('&',beginIndex);\n                String fields;\n                if (endIndex > beginIndex) {\n                  fields=parameterString.substring(beginIndex,endIndex);\n                }\n else {\n                  fields=parameterString.substring(beginIndex);\n                }\n                kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n              }\n            }\n            solrQuery.setParam(kv[0],kv[1]);\n          }\n        }\n        return solrQuery;\n      }\n else {\n        queryBuilder.append(nativeQueryString);\n      }\n    }\n else {\n      if (pr.propertyName.contains(\"/\")) {\n        continue;\n      }\n      if (\"rep:excerpt\".equals(pr.propertyName)) {\n        continue;\n      }\n      String first=null;\n      if (pr.first != null) {\n        first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n      }\n      String last=null;\n      if (pr.last != null) {\n        last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n      }\n      String prField=configuration.getFieldForPropertyRestriction(pr);\n      CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n      if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n        queryBuilder.append(configuration.getPathField());\n        queryBuilder.append(':');\n        queryBuilder.append(first);\n      }\n else {\n        if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(first);\n        }\n else         if (pr.first == null && pr.last == null) {\n          if (!queryBuilder.toString().contains(fieldName + \":\")) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append('*');\n          }\n        }\n else         if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n        }\n else         if (pr.isLike) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n        }\n else {\n          throw new RuntimeException(\"[unexpected!] not handled case\");\n        }\n      }\n    }\n    queryBuilder.append(\" \");\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 561,
                    "astHeight": 22
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5774,
                        "startLineNumber": 121,
                        "startColumnNumber": 8,
                        "endLineNumber": 214,
                        "endColumnNumber": 9
                    },
                    "nodeContext": "if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n  for (  Filter.PropertyRestriction pr : propertyRestrictions) {\n    if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n      String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n      if (isSupportedHttpRequest(nativeQueryString)) {\n        String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n        if (!\"select\".equals(requestHandlerString)) {\n          if (requestHandlerString.charAt(0) != '/') {\n            requestHandlerString=\"/\" + requestHandlerString;\n          }\n          solrQuery.setRequestHandler(requestHandlerString);\n        }\n        String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n        for (        String param : parameterString.split(\"&\")) {\n          String[] kv=param.split(\"=\");\n          if (kv.length != 2) {\n            throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n          }\n else {\n            if (\"stream.body\".equals(kv[0])) {\n              kv[0]=\"q\";\n              String mltFlString=\"mlt.fl=\";\n              int mltFlIndex=parameterString.indexOf(mltFlString);\n              if (mltFlIndex > -1) {\n                int beginIndex=mltFlIndex + mltFlString.length();\n                int endIndex=parameterString.indexOf('&',beginIndex);\n                String fields;\n                if (endIndex > beginIndex) {\n                  fields=parameterString.substring(beginIndex,endIndex);\n                }\n else {\n                  fields=parameterString.substring(beginIndex);\n                }\n                kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n              }\n            }\n            solrQuery.setParam(kv[0],kv[1]);\n          }\n        }\n        return solrQuery;\n      }\n else {\n        queryBuilder.append(nativeQueryString);\n      }\n    }\n else {\n      if (pr.propertyName.contains(\"/\")) {\n        continue;\n      }\n      if (\"rep:excerpt\".equals(pr.propertyName)) {\n        continue;\n      }\n      String first=null;\n      if (pr.first != null) {\n        first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n      }\n      String last=null;\n      if (pr.last != null) {\n        last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n      }\n      String prField=configuration.getFieldForPropertyRestriction(pr);\n      CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n      if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n        queryBuilder.append(configuration.getPathField());\n        queryBuilder.append(':');\n        queryBuilder.append(first);\n      }\n else {\n        if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(first);\n        }\n else         if (pr.first == null && pr.last == null) {\n          if (!queryBuilder.toString().contains(fieldName + \":\")) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append('*');\n          }\n        }\n else         if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n        }\n else         if (pr.isLike) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n        }\n else {\n          throw new RuntimeException(\"[unexpected!] not handled case\");\n        }\n      }\n    }\n    queryBuilder.append(\" \");\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 570,
                    "astHeight": 23
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.MethodDeclaration,body]",
                    "nodePosition": {
                        "charLength": 7985,
                        "startLineNumber": 103,
                        "startColumnNumber": 46,
                        "endLineNumber": 255,
                        "endColumnNumber": 5
                    },
                    "nodeContext": "{\n  SolrQuery solrQuery=new SolrQuery();\n  setDefaults(solrQuery);\n  StringBuilder queryBuilder=new StringBuilder();\n  if (filter.getFullTextConstraint() != null) {\n    queryBuilder.append(getFullTextQuery(filter.getFullTextConstraint()));\n    queryBuilder.append(' ');\n  }\n else   if (filter.getFulltextConditions() != null) {\n    Collection<String> fulltextConditions=filter.getFulltextConditions();\n    for (    String fulltextCondition : fulltextConditions) {\n      queryBuilder.append(fulltextCondition).append(\" \");\n    }\n  }\n  Collection<Filter.PropertyRestriction> propertyRestrictions=filter.getPropertyRestrictions();\n  if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n    for (    Filter.PropertyRestriction pr : propertyRestrictions) {\n      if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n        String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n        if (isSupportedHttpRequest(nativeQueryString)) {\n          String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n          if (!\"select\".equals(requestHandlerString)) {\n            if (requestHandlerString.charAt(0) != '/') {\n              requestHandlerString=\"/\" + requestHandlerString;\n            }\n            solrQuery.setRequestHandler(requestHandlerString);\n          }\n          String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n          for (          String param : parameterString.split(\"&\")) {\n            String[] kv=param.split(\"=\");\n            if (kv.length != 2) {\n              throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n            }\n else {\n              if (\"stream.body\".equals(kv[0])) {\n                kv[0]=\"q\";\n                String mltFlString=\"mlt.fl=\";\n                int mltFlIndex=parameterString.indexOf(mltFlString);\n                if (mltFlIndex > -1) {\n                  int beginIndex=mltFlIndex + mltFlString.length();\n                  int endIndex=parameterString.indexOf('&',beginIndex);\n                  String fields;\n                  if (endIndex > beginIndex) {\n                    fields=parameterString.substring(beginIndex,endIndex);\n                  }\n else {\n                    fields=parameterString.substring(beginIndex);\n                  }\n                  kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n                }\n              }\n              solrQuery.setParam(kv[0],kv[1]);\n            }\n          }\n          return solrQuery;\n        }\n else {\n          queryBuilder.append(nativeQueryString);\n        }\n      }\n else {\n        if (pr.propertyName.contains(\"/\")) {\n          continue;\n        }\n        if (\"rep:excerpt\".equals(pr.propertyName)) {\n          continue;\n        }\n        String first=null;\n        if (pr.first != null) {\n          first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n        }\n        String last=null;\n        if (pr.last != null) {\n          last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n        }\n        String prField=configuration.getFieldForPropertyRestriction(pr);\n        CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n        if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n          queryBuilder.append(configuration.getPathField());\n          queryBuilder.append(':');\n          queryBuilder.append(first);\n        }\n else {\n          if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(first);\n          }\n else           if (pr.first == null && pr.last == null) {\n            if (!queryBuilder.toString().contains(fieldName + \":\")) {\n              queryBuilder.append(fieldName).append(':');\n              queryBuilder.append('*');\n            }\n          }\n else           if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n          }\n else           if (pr.isLike) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n          }\n else {\n            throw new RuntimeException(\"[unexpected!] not handled case\");\n          }\n        }\n      }\n      queryBuilder.append(\" \");\n    }\n  }\n  String[] pts=filter.getPrimaryTypes().toArray(new String[filter.getPrimaryTypes().size()]);\n  for (int i=0; i < pts.length; i++) {\n    String pt=pts[i];\n    if (i == 0) {\n      queryBuilder.append(\"(\");\n    }\n    if (i > 0 && i < pts.length) {\n      queryBuilder.append(\"OR \");\n    }\n    queryBuilder.append(\"jcr\\\\:primaryType\").append(':').append(partialEscape(pt)).append(\" \");\n    if (i == pts.length - 1) {\n      queryBuilder.append(\")\");\n      queryBuilder.append(' ');\n    }\n  }\n  Filter.PathRestriction pathRestriction=filter.getPathRestriction();\n  if (pathRestriction != null) {\n    String path=purgePath(filter);\n    String fieldName=configuration.getFieldForPathRestriction(pathRestriction);\n    if (fieldName != null) {\n      queryBuilder.append(fieldName);\n      queryBuilder.append(':');\n      queryBuilder.append(path);\n    }\n  }\n  if (queryBuilder.length() == 0) {\n    queryBuilder.append(\"*:*\");\n  }\n  String escapedQuery=queryBuilder.toString();\n  solrQuery.setQuery(escapedQuery);\n  if (log.isDebugEnabled()) {\n    log.debug(\"JCR query {} has been converted to Solr query {}\",filter.getQueryStatement(),solrQuery.toString());\n  }\n  return solrQuery;\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 858,
                    "astHeight": 24
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.TypeDeclaration,bodyDeclarations]",
                    "nodePosition": {
                        "charLength": 8027,
                        "startLineNumber": 103,
                        "startColumnNumber": 4,
                        "endLineNumber": 255,
                        "endColumnNumber": 5
                    },
                    "nodeContext": "private SolrQuery getQuery(Filter filter){\n  SolrQuery solrQuery=new SolrQuery();\n  setDefaults(solrQuery);\n  StringBuilder queryBuilder=new StringBuilder();\n  if (filter.getFullTextConstraint() != null) {\n    queryBuilder.append(getFullTextQuery(filter.getFullTextConstraint()));\n    queryBuilder.append(' ');\n  }\n else   if (filter.getFulltextConditions() != null) {\n    Collection<String> fulltextConditions=filter.getFulltextConditions();\n    for (    String fulltextCondition : fulltextConditions) {\n      queryBuilder.append(fulltextCondition).append(\" \");\n    }\n  }\n  Collection<Filter.PropertyRestriction> propertyRestrictions=filter.getPropertyRestrictions();\n  if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n    for (    Filter.PropertyRestriction pr : propertyRestrictions) {\n      if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n        String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n        if (isSupportedHttpRequest(nativeQueryString)) {\n          String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n          if (!\"select\".equals(requestHandlerString)) {\n            if (requestHandlerString.charAt(0) != '/') {\n              requestHandlerString=\"/\" + requestHandlerString;\n            }\n            solrQuery.setRequestHandler(requestHandlerString);\n          }\n          String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n          for (          String param : parameterString.split(\"&\")) {\n            String[] kv=param.split(\"=\");\n            if (kv.length != 2) {\n              throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n            }\n else {\n              if (\"stream.body\".equals(kv[0])) {\n                kv[0]=\"q\";\n                String mltFlString=\"mlt.fl=\";\n                int mltFlIndex=parameterString.indexOf(mltFlString);\n                if (mltFlIndex > -1) {\n                  int beginIndex=mltFlIndex + mltFlString.length();\n                  int endIndex=parameterString.indexOf('&',beginIndex);\n                  String fields;\n                  if (endIndex > beginIndex) {\n                    fields=parameterString.substring(beginIndex,endIndex);\n                  }\n else {\n                    fields=parameterString.substring(beginIndex);\n                  }\n                  kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n                }\n              }\n              solrQuery.setParam(kv[0],kv[1]);\n            }\n          }\n          return solrQuery;\n        }\n else {\n          queryBuilder.append(nativeQueryString);\n        }\n      }\n else {\n        if (pr.propertyName.contains(\"/\")) {\n          continue;\n        }\n        if (\"rep:excerpt\".equals(pr.propertyName)) {\n          continue;\n        }\n        String first=null;\n        if (pr.first != null) {\n          first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n        }\n        String last=null;\n        if (pr.last != null) {\n          last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n        }\n        String prField=configuration.getFieldForPropertyRestriction(pr);\n        CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n        if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n          queryBuilder.append(configuration.getPathField());\n          queryBuilder.append(':');\n          queryBuilder.append(first);\n        }\n else {\n          if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(first);\n          }\n else           if (pr.first == null && pr.last == null) {\n            if (!queryBuilder.toString().contains(fieldName + \":\")) {\n              queryBuilder.append(fieldName).append(':');\n              queryBuilder.append('*');\n            }\n          }\n else           if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n          }\n else           if (pr.isLike) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n          }\n else {\n            throw new RuntimeException(\"[unexpected!] not handled case\");\n          }\n        }\n      }\n      queryBuilder.append(\" \");\n    }\n  }\n  String[] pts=filter.getPrimaryTypes().toArray(new String[filter.getPrimaryTypes().size()]);\n  for (int i=0; i < pts.length; i++) {\n    String pt=pts[i];\n    if (i == 0) {\n      queryBuilder.append(\"(\");\n    }\n    if (i > 0 && i < pts.length) {\n      queryBuilder.append(\"OR \");\n    }\n    queryBuilder.append(\"jcr\\\\:primaryType\").append(':').append(partialEscape(pt)).append(\" \");\n    if (i == pts.length - 1) {\n      queryBuilder.append(\")\");\n      queryBuilder.append(' ');\n    }\n  }\n  Filter.PathRestriction pathRestriction=filter.getPathRestriction();\n  if (pathRestriction != null) {\n    String path=purgePath(filter);\n    String fieldName=configuration.getFieldForPathRestriction(pathRestriction);\n    if (fieldName != null) {\n      queryBuilder.append(fieldName);\n      queryBuilder.append(':');\n      queryBuilder.append(path);\n    }\n  }\n  if (queryBuilder.length() == 0) {\n    queryBuilder.append(\"*:*\");\n  }\n  String escapedQuery=queryBuilder.toString();\n  solrQuery.setQuery(escapedQuery);\n  if (log.isDebugEnabled()) {\n    log.debug(\"JCR query {} has been converted to Solr query {}\",filter.getQueryStatement(),solrQuery.toString());\n  }\n  return solrQuery;\n}\n",
                    "nodeType": "MethodDeclaration",
                    "astNodeNumber": 867,
                    "astHeight": 25
                }
            ],
            "currentLineData": {
                "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                "nodePosition": {
                    "charLength": 126,
                    "startLineNumber": 206,
                    "startColumnNumber": 28,
                    "endLineNumber": 206,
                    "endColumnNumber": 154
                },
                "nodeContext": "queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n",
                "nodeType": "ExpressionStatement",
                "astNodeNumber": 27,
                "astHeight": 10
            },
            "tokenLength": 1,
            "type": "org.apache.jackrabbit.oak.spi.query.Filter.PropertyRestriction"
        },
        {
            "nodeContext": "pr",
            "nodeType": "SimpleName",
            "nodePosition": {
                "charLength": 2,
                "startLineNumber": 206,
                "startColumnNumber": 95,
                "endLineNumber": 206,
                "endColumnNumber": 97
            },
            "astNodeNumber": 1,
            "astHeight": 1,
            "parentDataList": [
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.MethodInvocation,expression]",
                    "nodePosition": {
                        "charLength": 8,
                        "startLineNumber": 206,
                        "startColumnNumber": 95,
                        "endLineNumber": 206,
                        "endColumnNumber": 103
                    },
                    "nodeContext": "pr.first",
                    "nodeType": "QualifiedName",
                    "astNodeNumber": 3,
                    "astHeight": 2
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.MethodInvocation,arguments]",
                    "nodePosition": {
                        "charLength": 18,
                        "startLineNumber": 206,
                        "startColumnNumber": 95,
                        "endLineNumber": 206,
                        "endColumnNumber": 113
                    },
                    "nodeContext": "pr.first.getType()",
                    "nodeType": "MethodInvocation",
                    "astNodeNumber": 5,
                    "astHeight": 3
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.MethodInvocation,arguments]",
                    "nodePosition": {
                        "charLength": 37,
                        "startLineNumber": 206,
                        "startColumnNumber": 77,
                        "endLineNumber": 206,
                        "endColumnNumber": 114
                    },
                    "nodeContext": "pr.first.getValue(pr.first.getType())",
                    "nodeType": "MethodInvocation",
                    "astNodeNumber": 10,
                    "astHeight": 4
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.MethodInvocation,expression]",
                    "nodePosition": {
                        "charLength": 53,
                        "startLineNumber": 206,
                        "startColumnNumber": 62,
                        "endLineNumber": 206,
                        "endColumnNumber": 115
                    },
                    "nodeContext": "String.valueOf(pr.first.getValue(pr.first.getType()))",
                    "nodeType": "MethodInvocation",
                    "astNodeNumber": 13,
                    "astHeight": 5
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.MethodInvocation,expression]",
                    "nodePosition": {
                        "charLength": 71,
                        "startLineNumber": 206,
                        "startColumnNumber": 62,
                        "endLineNumber": 206,
                        "endColumnNumber": 133
                    },
                    "nodeContext": "String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*')",
                    "nodeType": "MethodInvocation",
                    "astNodeNumber": 17,
                    "astHeight": 6
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.MethodInvocation,arguments]",
                    "nodePosition": {
                        "charLength": 89,
                        "startLineNumber": 206,
                        "startColumnNumber": 62,
                        "endLineNumber": 206,
                        "endColumnNumber": 151
                    },
                    "nodeContext": "String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')",
                    "nodeType": "MethodInvocation",
                    "astNodeNumber": 21,
                    "astHeight": 7
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.MethodInvocation,arguments]",
                    "nodePosition": {
                        "charLength": 104,
                        "startLineNumber": 206,
                        "startColumnNumber": 48,
                        "endLineNumber": 206,
                        "endColumnNumber": 152
                    },
                    "nodeContext": "partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?'))",
                    "nodeType": "MethodInvocation",
                    "astNodeNumber": 23,
                    "astHeight": 8
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.ExpressionStatement,expression]",
                    "nodePosition": {
                        "charLength": 125,
                        "startLineNumber": 206,
                        "startColumnNumber": 28,
                        "endLineNumber": 206,
                        "endColumnNumber": 153
                    },
                    "nodeContext": "queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')))",
                    "nodeType": "MethodInvocation",
                    "astNodeNumber": 26,
                    "astHeight": 9
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 126,
                        "startLineNumber": 206,
                        "startColumnNumber": 28,
                        "endLineNumber": 206,
                        "endColumnNumber": 154
                    },
                    "nodeContext": "queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n",
                    "nodeType": "ExpressionStatement",
                    "astNodeNumber": 27,
                    "astHeight": 10
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,thenStatement]",
                    "nodePosition": {
                        "charLength": 356,
                        "startLineNumber": 203,
                        "startColumnNumber": 46,
                        "endLineNumber": 207,
                        "endColumnNumber": 25
                    },
                    "nodeContext": "{\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 36,
                    "astHeight": 11
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 494,
                        "startLineNumber": 203,
                        "startColumnNumber": 31,
                        "endLineNumber": 209,
                        "endColumnNumber": 25
                    },
                    "nodeContext": "if (pr.isLike) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n}\n else {\n  throw new RuntimeException(\"[unexpected!] not handled case\");\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 46,
                    "astHeight": 12
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 936,
                        "startLineNumber": 199,
                        "startColumnNumber": 31,
                        "endLineNumber": 209,
                        "endColumnNumber": 25
                    },
                    "nodeContext": "if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n}\n else if (pr.isLike) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n}\n else {\n  throw new RuntimeException(\"[unexpected!] not handled case\");\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 105,
                    "astHeight": 13
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 1260,
                        "startLineNumber": 194,
                        "startColumnNumber": 31,
                        "endLineNumber": 209,
                        "endColumnNumber": 25
                    },
                    "nodeContext": "if (pr.first == null && pr.last == null) {\n  if (!queryBuilder.toString().contains(fieldName + \":\")) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append('*');\n  }\n}\n else if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n}\n else if (pr.isLike) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n}\n else {\n  throw new RuntimeException(\"[unexpected!] not handled case\");\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 142,
                    "astHeight": 14
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 1490,
                        "startLineNumber": 191,
                        "startColumnNumber": 24,
                        "endLineNumber": 209,
                        "endColumnNumber": 25
                    },
                    "nodeContext": "if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(first);\n}\n else if (pr.first == null && pr.last == null) {\n  if (!queryBuilder.toString().contains(fieldName + \":\")) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append('*');\n  }\n}\n else if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n}\n else if (pr.isLike) {\n  queryBuilder.append(fieldName).append(':');\n  queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n}\n else {\n  throw new RuntimeException(\"[unexpected!] not handled case\");\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 177,
                    "astHeight": 15
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 1538,
                        "startLineNumber": 190,
                        "startColumnNumber": 27,
                        "endLineNumber": 210,
                        "endColumnNumber": 21
                    },
                    "nodeContext": "{\n  if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(first);\n  }\n else   if (pr.first == null && pr.last == null) {\n    if (!queryBuilder.toString().contains(fieldName + \":\")) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append('*');\n    }\n  }\n else   if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n  }\n else   if (pr.isLike) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n  }\n else {\n    throw new RuntimeException(\"[unexpected!] not handled case\");\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 178,
                    "astHeight": 16
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 1791,
                        "startLineNumber": 186,
                        "startColumnNumber": 20,
                        "endLineNumber": 210,
                        "endColumnNumber": 21
                    },
                    "nodeContext": "if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n  queryBuilder.append(configuration.getPathField());\n  queryBuilder.append(':');\n  queryBuilder.append(first);\n}\n else {\n  if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(first);\n  }\n else   if (pr.first == null && pr.last == null) {\n    if (!queryBuilder.toString().contains(fieldName + \":\")) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append('*');\n    }\n  }\n else   if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n  }\n else   if (pr.isLike) {\n    queryBuilder.append(fieldName).append(':');\n    queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n  }\n else {\n    throw new RuntimeException(\"[unexpected!] not handled case\");\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 203,
                    "astHeight": 17
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
                    "nodePosition": {
                        "charLength": 2798,
                        "startLineNumber": 164,
                        "startColumnNumber": 23,
                        "endLineNumber": 211,
                        "endColumnNumber": 17
                    },
                    "nodeContext": "{\n  if (pr.propertyName.contains(\"/\")) {\n    continue;\n  }\n  if (\"rep:excerpt\".equals(pr.propertyName)) {\n    continue;\n  }\n  String first=null;\n  if (pr.first != null) {\n    first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n  }\n  String last=null;\n  if (pr.last != null) {\n    last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n  }\n  String prField=configuration.getFieldForPropertyRestriction(pr);\n  CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n  if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n    queryBuilder.append(configuration.getPathField());\n    queryBuilder.append(':');\n    queryBuilder.append(first);\n  }\n else {\n    if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(first);\n    }\n else     if (pr.first == null && pr.last == null) {\n      if (!queryBuilder.toString().contains(fieldName + \":\")) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append('*');\n      }\n    }\n else     if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n    }\n else     if (pr.isLike) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n    }\n else {\n      throw new RuntimeException(\"[unexpected!] not handled case\");\n    }\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 312,
                    "astHeight": 18
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5508,
                        "startLineNumber": 124,
                        "startColumnNumber": 16,
                        "endLineNumber": 211,
                        "endColumnNumber": 17
                    },
                    "nodeContext": "if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n  String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n  if (isSupportedHttpRequest(nativeQueryString)) {\n    String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n    if (!\"select\".equals(requestHandlerString)) {\n      if (requestHandlerString.charAt(0) != '/') {\n        requestHandlerString=\"/\" + requestHandlerString;\n      }\n      solrQuery.setRequestHandler(requestHandlerString);\n    }\n    String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n    for (    String param : parameterString.split(\"&\")) {\n      String[] kv=param.split(\"=\");\n      if (kv.length != 2) {\n        throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n      }\n else {\n        if (\"stream.body\".equals(kv[0])) {\n          kv[0]=\"q\";\n          String mltFlString=\"mlt.fl=\";\n          int mltFlIndex=parameterString.indexOf(mltFlString);\n          if (mltFlIndex > -1) {\n            int beginIndex=mltFlIndex + mltFlString.length();\n            int endIndex=parameterString.indexOf('&',beginIndex);\n            String fields;\n            if (endIndex > beginIndex) {\n              fields=parameterString.substring(beginIndex,endIndex);\n            }\n else {\n              fields=parameterString.substring(beginIndex);\n            }\n            kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n          }\n        }\n        solrQuery.setParam(kv[0],kv[1]);\n      }\n    }\n    return solrQuery;\n  }\n else {\n    queryBuilder.append(nativeQueryString);\n  }\n}\n else {\n  if (pr.propertyName.contains(\"/\")) {\n    continue;\n  }\n  if (\"rep:excerpt\".equals(pr.propertyName)) {\n    continue;\n  }\n  String first=null;\n  if (pr.first != null) {\n    first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n  }\n  String last=null;\n  if (pr.last != null) {\n    last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n  }\n  String prField=configuration.getFieldForPropertyRestriction(pr);\n  CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n  if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n    queryBuilder.append(configuration.getPathField());\n    queryBuilder.append(':');\n    queryBuilder.append(first);\n  }\n else {\n    if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(first);\n    }\n else     if (pr.first == null && pr.last == null) {\n      if (!queryBuilder.toString().contains(fieldName + \":\")) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append('*');\n      }\n    }\n else     if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n    }\n else     if (pr.isLike) {\n      queryBuilder.append(fieldName).append(':');\n      queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n    }\n else {\n      throw new RuntimeException(\"[unexpected!] not handled case\");\n    }\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 546,
                    "astHeight": 19
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.EnhancedForStatement,body]",
                    "nodePosition": {
                        "charLength": 5622,
                        "startLineNumber": 122,
                        "startColumnNumber": 71,
                        "endLineNumber": 213,
                        "endColumnNumber": 13
                    },
                    "nodeContext": "{\n  if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n    String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n    if (isSupportedHttpRequest(nativeQueryString)) {\n      String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n      if (!\"select\".equals(requestHandlerString)) {\n        if (requestHandlerString.charAt(0) != '/') {\n          requestHandlerString=\"/\" + requestHandlerString;\n        }\n        solrQuery.setRequestHandler(requestHandlerString);\n      }\n      String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n      for (      String param : parameterString.split(\"&\")) {\n        String[] kv=param.split(\"=\");\n        if (kv.length != 2) {\n          throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n        }\n else {\n          if (\"stream.body\".equals(kv[0])) {\n            kv[0]=\"q\";\n            String mltFlString=\"mlt.fl=\";\n            int mltFlIndex=parameterString.indexOf(mltFlString);\n            if (mltFlIndex > -1) {\n              int beginIndex=mltFlIndex + mltFlString.length();\n              int endIndex=parameterString.indexOf('&',beginIndex);\n              String fields;\n              if (endIndex > beginIndex) {\n                fields=parameterString.substring(beginIndex,endIndex);\n              }\n else {\n                fields=parameterString.substring(beginIndex);\n              }\n              kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n            }\n          }\n          solrQuery.setParam(kv[0],kv[1]);\n        }\n      }\n      return solrQuery;\n    }\n else {\n      queryBuilder.append(nativeQueryString);\n    }\n  }\n else {\n    if (pr.propertyName.contains(\"/\")) {\n      continue;\n    }\n    if (\"rep:excerpt\".equals(pr.propertyName)) {\n      continue;\n    }\n    String first=null;\n    if (pr.first != null) {\n      first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n    }\n    String last=null;\n    if (pr.last != null) {\n      last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n    }\n    String prField=configuration.getFieldForPropertyRestriction(pr);\n    CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n    if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n      queryBuilder.append(configuration.getPathField());\n      queryBuilder.append(':');\n      queryBuilder.append(first);\n    }\n else {\n      if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(first);\n      }\n else       if (pr.first == null && pr.last == null) {\n        if (!queryBuilder.toString().contains(fieldName + \":\")) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append('*');\n        }\n      }\n else       if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n      }\n else       if (pr.isLike) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n      }\n else {\n        throw new RuntimeException(\"[unexpected!] not handled case\");\n      }\n    }\n  }\n  queryBuilder.append(\" \");\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 552,
                    "astHeight": 20
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5681,
                        "startLineNumber": 122,
                        "startColumnNumber": 12,
                        "endLineNumber": 213,
                        "endColumnNumber": 13
                    },
                    "nodeContext": "for (Filter.PropertyRestriction pr : propertyRestrictions) {\n  if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n    String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n    if (isSupportedHttpRequest(nativeQueryString)) {\n      String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n      if (!\"select\".equals(requestHandlerString)) {\n        if (requestHandlerString.charAt(0) != '/') {\n          requestHandlerString=\"/\" + requestHandlerString;\n        }\n        solrQuery.setRequestHandler(requestHandlerString);\n      }\n      String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n      for (      String param : parameterString.split(\"&\")) {\n        String[] kv=param.split(\"=\");\n        if (kv.length != 2) {\n          throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n        }\n else {\n          if (\"stream.body\".equals(kv[0])) {\n            kv[0]=\"q\";\n            String mltFlString=\"mlt.fl=\";\n            int mltFlIndex=parameterString.indexOf(mltFlString);\n            if (mltFlIndex > -1) {\n              int beginIndex=mltFlIndex + mltFlString.length();\n              int endIndex=parameterString.indexOf('&',beginIndex);\n              String fields;\n              if (endIndex > beginIndex) {\n                fields=parameterString.substring(beginIndex,endIndex);\n              }\n else {\n                fields=parameterString.substring(beginIndex);\n              }\n              kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n            }\n          }\n          solrQuery.setParam(kv[0],kv[1]);\n        }\n      }\n      return solrQuery;\n    }\n else {\n      queryBuilder.append(nativeQueryString);\n    }\n  }\n else {\n    if (pr.propertyName.contains(\"/\")) {\n      continue;\n    }\n    if (\"rep:excerpt\".equals(pr.propertyName)) {\n      continue;\n    }\n    String first=null;\n    if (pr.first != null) {\n      first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n    }\n    String last=null;\n    if (pr.last != null) {\n      last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n    }\n    String prField=configuration.getFieldForPropertyRestriction(pr);\n    CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n    if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n      queryBuilder.append(configuration.getPathField());\n      queryBuilder.append(':');\n      queryBuilder.append(first);\n    }\n else {\n      if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(first);\n      }\n else       if (pr.first == null && pr.last == null) {\n        if (!queryBuilder.toString().contains(fieldName + \":\")) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append('*');\n        }\n      }\n else       if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n      }\n else       if (pr.isLike) {\n        queryBuilder.append(fieldName).append(':');\n        queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n      }\n else {\n        throw new RuntimeException(\"[unexpected!] not handled case\");\n      }\n    }\n  }\n  queryBuilder.append(\" \");\n}\n",
                    "nodeType": "EnhancedForStatement",
                    "astNodeNumber": 560,
                    "astHeight": 21
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,thenStatement]",
                    "nodePosition": {
                        "charLength": 5705,
                        "startLineNumber": 121,
                        "startColumnNumber": 77,
                        "endLineNumber": 214,
                        "endColumnNumber": 9
                    },
                    "nodeContext": "{\n  for (  Filter.PropertyRestriction pr : propertyRestrictions) {\n    if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n      String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n      if (isSupportedHttpRequest(nativeQueryString)) {\n        String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n        if (!\"select\".equals(requestHandlerString)) {\n          if (requestHandlerString.charAt(0) != '/') {\n            requestHandlerString=\"/\" + requestHandlerString;\n          }\n          solrQuery.setRequestHandler(requestHandlerString);\n        }\n        String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n        for (        String param : parameterString.split(\"&\")) {\n          String[] kv=param.split(\"=\");\n          if (kv.length != 2) {\n            throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n          }\n else {\n            if (\"stream.body\".equals(kv[0])) {\n              kv[0]=\"q\";\n              String mltFlString=\"mlt.fl=\";\n              int mltFlIndex=parameterString.indexOf(mltFlString);\n              if (mltFlIndex > -1) {\n                int beginIndex=mltFlIndex + mltFlString.length();\n                int endIndex=parameterString.indexOf('&',beginIndex);\n                String fields;\n                if (endIndex > beginIndex) {\n                  fields=parameterString.substring(beginIndex,endIndex);\n                }\n else {\n                  fields=parameterString.substring(beginIndex);\n                }\n                kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n              }\n            }\n            solrQuery.setParam(kv[0],kv[1]);\n          }\n        }\n        return solrQuery;\n      }\n else {\n        queryBuilder.append(nativeQueryString);\n      }\n    }\n else {\n      if (pr.propertyName.contains(\"/\")) {\n        continue;\n      }\n      if (\"rep:excerpt\".equals(pr.propertyName)) {\n        continue;\n      }\n      String first=null;\n      if (pr.first != null) {\n        first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n      }\n      String last=null;\n      if (pr.last != null) {\n        last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n      }\n      String prField=configuration.getFieldForPropertyRestriction(pr);\n      CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n      if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n        queryBuilder.append(configuration.getPathField());\n        queryBuilder.append(':');\n        queryBuilder.append(first);\n      }\n else {\n        if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(first);\n        }\n else         if (pr.first == null && pr.last == null) {\n          if (!queryBuilder.toString().contains(fieldName + \":\")) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append('*');\n          }\n        }\n else         if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n        }\n else         if (pr.isLike) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n        }\n else {\n          throw new RuntimeException(\"[unexpected!] not handled case\");\n        }\n      }\n    }\n    queryBuilder.append(\" \");\n  }\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 561,
                    "astHeight": 22
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                    "nodePosition": {
                        "charLength": 5774,
                        "startLineNumber": 121,
                        "startColumnNumber": 8,
                        "endLineNumber": 214,
                        "endColumnNumber": 9
                    },
                    "nodeContext": "if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n  for (  Filter.PropertyRestriction pr : propertyRestrictions) {\n    if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n      String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n      if (isSupportedHttpRequest(nativeQueryString)) {\n        String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n        if (!\"select\".equals(requestHandlerString)) {\n          if (requestHandlerString.charAt(0) != '/') {\n            requestHandlerString=\"/\" + requestHandlerString;\n          }\n          solrQuery.setRequestHandler(requestHandlerString);\n        }\n        String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n        for (        String param : parameterString.split(\"&\")) {\n          String[] kv=param.split(\"=\");\n          if (kv.length != 2) {\n            throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n          }\n else {\n            if (\"stream.body\".equals(kv[0])) {\n              kv[0]=\"q\";\n              String mltFlString=\"mlt.fl=\";\n              int mltFlIndex=parameterString.indexOf(mltFlString);\n              if (mltFlIndex > -1) {\n                int beginIndex=mltFlIndex + mltFlString.length();\n                int endIndex=parameterString.indexOf('&',beginIndex);\n                String fields;\n                if (endIndex > beginIndex) {\n                  fields=parameterString.substring(beginIndex,endIndex);\n                }\n else {\n                  fields=parameterString.substring(beginIndex);\n                }\n                kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n              }\n            }\n            solrQuery.setParam(kv[0],kv[1]);\n          }\n        }\n        return solrQuery;\n      }\n else {\n        queryBuilder.append(nativeQueryString);\n      }\n    }\n else {\n      if (pr.propertyName.contains(\"/\")) {\n        continue;\n      }\n      if (\"rep:excerpt\".equals(pr.propertyName)) {\n        continue;\n      }\n      String first=null;\n      if (pr.first != null) {\n        first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n      }\n      String last=null;\n      if (pr.last != null) {\n        last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n      }\n      String prField=configuration.getFieldForPropertyRestriction(pr);\n      CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n      if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n        queryBuilder.append(configuration.getPathField());\n        queryBuilder.append(':');\n        queryBuilder.append(first);\n      }\n else {\n        if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(first);\n        }\n else         if (pr.first == null && pr.last == null) {\n          if (!queryBuilder.toString().contains(fieldName + \":\")) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append('*');\n          }\n        }\n else         if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n        }\n else         if (pr.isLike) {\n          queryBuilder.append(fieldName).append(':');\n          queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n        }\n else {\n          throw new RuntimeException(\"[unexpected!] not handled case\");\n        }\n      }\n    }\n    queryBuilder.append(\" \");\n  }\n}\n",
                    "nodeType": "IfStatement",
                    "astNodeNumber": 570,
                    "astHeight": 23
                },
                {
                    "locationInParent": "ChildProperty[org.eclipse.jdt.core.dom.MethodDeclaration,body]",
                    "nodePosition": {
                        "charLength": 7985,
                        "startLineNumber": 103,
                        "startColumnNumber": 46,
                        "endLineNumber": 255,
                        "endColumnNumber": 5
                    },
                    "nodeContext": "{\n  SolrQuery solrQuery=new SolrQuery();\n  setDefaults(solrQuery);\n  StringBuilder queryBuilder=new StringBuilder();\n  if (filter.getFullTextConstraint() != null) {\n    queryBuilder.append(getFullTextQuery(filter.getFullTextConstraint()));\n    queryBuilder.append(' ');\n  }\n else   if (filter.getFulltextConditions() != null) {\n    Collection<String> fulltextConditions=filter.getFulltextConditions();\n    for (    String fulltextCondition : fulltextConditions) {\n      queryBuilder.append(fulltextCondition).append(\" \");\n    }\n  }\n  Collection<Filter.PropertyRestriction> propertyRestrictions=filter.getPropertyRestrictions();\n  if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n    for (    Filter.PropertyRestriction pr : propertyRestrictions) {\n      if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n        String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n        if (isSupportedHttpRequest(nativeQueryString)) {\n          String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n          if (!\"select\".equals(requestHandlerString)) {\n            if (requestHandlerString.charAt(0) != '/') {\n              requestHandlerString=\"/\" + requestHandlerString;\n            }\n            solrQuery.setRequestHandler(requestHandlerString);\n          }\n          String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n          for (          String param : parameterString.split(\"&\")) {\n            String[] kv=param.split(\"=\");\n            if (kv.length != 2) {\n              throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n            }\n else {\n              if (\"stream.body\".equals(kv[0])) {\n                kv[0]=\"q\";\n                String mltFlString=\"mlt.fl=\";\n                int mltFlIndex=parameterString.indexOf(mltFlString);\n                if (mltFlIndex > -1) {\n                  int beginIndex=mltFlIndex + mltFlString.length();\n                  int endIndex=parameterString.indexOf('&',beginIndex);\n                  String fields;\n                  if (endIndex > beginIndex) {\n                    fields=parameterString.substring(beginIndex,endIndex);\n                  }\n else {\n                    fields=parameterString.substring(beginIndex);\n                  }\n                  kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n                }\n              }\n              solrQuery.setParam(kv[0],kv[1]);\n            }\n          }\n          return solrQuery;\n        }\n else {\n          queryBuilder.append(nativeQueryString);\n        }\n      }\n else {\n        if (pr.propertyName.contains(\"/\")) {\n          continue;\n        }\n        if (\"rep:excerpt\".equals(pr.propertyName)) {\n          continue;\n        }\n        String first=null;\n        if (pr.first != null) {\n          first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n        }\n        String last=null;\n        if (pr.last != null) {\n          last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n        }\n        String prField=configuration.getFieldForPropertyRestriction(pr);\n        CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n        if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n          queryBuilder.append(configuration.getPathField());\n          queryBuilder.append(':');\n          queryBuilder.append(first);\n        }\n else {\n          if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(first);\n          }\n else           if (pr.first == null && pr.last == null) {\n            if (!queryBuilder.toString().contains(fieldName + \":\")) {\n              queryBuilder.append(fieldName).append(':');\n              queryBuilder.append('*');\n            }\n          }\n else           if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n          }\n else           if (pr.isLike) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n          }\n else {\n            throw new RuntimeException(\"[unexpected!] not handled case\");\n          }\n        }\n      }\n      queryBuilder.append(\" \");\n    }\n  }\n  String[] pts=filter.getPrimaryTypes().toArray(new String[filter.getPrimaryTypes().size()]);\n  for (int i=0; i < pts.length; i++) {\n    String pt=pts[i];\n    if (i == 0) {\n      queryBuilder.append(\"(\");\n    }\n    if (i > 0 && i < pts.length) {\n      queryBuilder.append(\"OR \");\n    }\n    queryBuilder.append(\"jcr\\\\:primaryType\").append(':').append(partialEscape(pt)).append(\" \");\n    if (i == pts.length - 1) {\n      queryBuilder.append(\")\");\n      queryBuilder.append(' ');\n    }\n  }\n  Filter.PathRestriction pathRestriction=filter.getPathRestriction();\n  if (pathRestriction != null) {\n    String path=purgePath(filter);\n    String fieldName=configuration.getFieldForPathRestriction(pathRestriction);\n    if (fieldName != null) {\n      queryBuilder.append(fieldName);\n      queryBuilder.append(':');\n      queryBuilder.append(path);\n    }\n  }\n  if (queryBuilder.length() == 0) {\n    queryBuilder.append(\"*:*\");\n  }\n  String escapedQuery=queryBuilder.toString();\n  solrQuery.setQuery(escapedQuery);\n  if (log.isDebugEnabled()) {\n    log.debug(\"JCR query {} has been converted to Solr query {}\",filter.getQueryStatement(),solrQuery.toString());\n  }\n  return solrQuery;\n}\n",
                    "nodeType": "Block",
                    "astNodeNumber": 858,
                    "astHeight": 24
                },
                {
                    "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.TypeDeclaration,bodyDeclarations]",
                    "nodePosition": {
                        "charLength": 8027,
                        "startLineNumber": 103,
                        "startColumnNumber": 4,
                        "endLineNumber": 255,
                        "endColumnNumber": 5
                    },
                    "nodeContext": "private SolrQuery getQuery(Filter filter){\n  SolrQuery solrQuery=new SolrQuery();\n  setDefaults(solrQuery);\n  StringBuilder queryBuilder=new StringBuilder();\n  if (filter.getFullTextConstraint() != null) {\n    queryBuilder.append(getFullTextQuery(filter.getFullTextConstraint()));\n    queryBuilder.append(' ');\n  }\n else   if (filter.getFulltextConditions() != null) {\n    Collection<String> fulltextConditions=filter.getFulltextConditions();\n    for (    String fulltextCondition : fulltextConditions) {\n      queryBuilder.append(fulltextCondition).append(\" \");\n    }\n  }\n  Collection<Filter.PropertyRestriction> propertyRestrictions=filter.getPropertyRestrictions();\n  if (propertyRestrictions != null && !propertyRestrictions.isEmpty()) {\n    for (    Filter.PropertyRestriction pr : propertyRestrictions) {\n      if (NATIVE_SOLR_QUERY.equals(pr.propertyName) || NATIVE_LUCENE_QUERY.equals(pr.propertyName)) {\n        String nativeQueryString=String.valueOf(pr.first.getValue(pr.first.getType()));\n        if (isSupportedHttpRequest(nativeQueryString)) {\n          String requestHandlerString=nativeQueryString.substring(0,nativeQueryString.indexOf('?'));\n          if (!\"select\".equals(requestHandlerString)) {\n            if (requestHandlerString.charAt(0) != '/') {\n              requestHandlerString=\"/\" + requestHandlerString;\n            }\n            solrQuery.setRequestHandler(requestHandlerString);\n          }\n          String parameterString=nativeQueryString.substring(nativeQueryString.indexOf('?') + 1);\n          for (          String param : parameterString.split(\"&\")) {\n            String[] kv=param.split(\"=\");\n            if (kv.length != 2) {\n              throw new RuntimeException(\"Unparsable native HTTP Solr query\");\n            }\n else {\n              if (\"stream.body\".equals(kv[0])) {\n                kv[0]=\"q\";\n                String mltFlString=\"mlt.fl=\";\n                int mltFlIndex=parameterString.indexOf(mltFlString);\n                if (mltFlIndex > -1) {\n                  int beginIndex=mltFlIndex + mltFlString.length();\n                  int endIndex=parameterString.indexOf('&',beginIndex);\n                  String fields;\n                  if (endIndex > beginIndex) {\n                    fields=parameterString.substring(beginIndex,endIndex);\n                  }\n else {\n                    fields=parameterString.substring(beginIndex);\n                  }\n                  kv[1]=\"_query_:\\\"{!dismax qf=\" + fields + \" q.op=OR}\"+ kv[1]+ \"\\\"\";\n                }\n              }\n              solrQuery.setParam(kv[0],kv[1]);\n            }\n          }\n          return solrQuery;\n        }\n else {\n          queryBuilder.append(nativeQueryString);\n        }\n      }\n else {\n        if (pr.propertyName.contains(\"/\")) {\n          continue;\n        }\n        if (\"rep:excerpt\".equals(pr.propertyName)) {\n          continue;\n        }\n        String first=null;\n        if (pr.first != null) {\n          first=partialEscape(String.valueOf(pr.first.getValue(pr.first.getType()))).toString();\n        }\n        String last=null;\n        if (pr.last != null) {\n          last=partialEscape(String.valueOf(pr.last.getValue(pr.last.getType()))).toString();\n        }\n        String prField=configuration.getFieldForPropertyRestriction(pr);\n        CharSequence fieldName=partialEscape(prField != null ? prField : pr.propertyName);\n        if (\"jcr\\\\:path\".equals(fieldName.toString())) {\n          queryBuilder.append(configuration.getPathField());\n          queryBuilder.append(':');\n          queryBuilder.append(first);\n        }\n else {\n          if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(first);\n          }\n else           if (pr.first == null && pr.last == null) {\n            if (!queryBuilder.toString().contains(fieldName + \":\")) {\n              queryBuilder.append(fieldName).append(':');\n              queryBuilder.append('*');\n            }\n          }\n else           if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(createRangeQuery(first,last,pr.firstIncluding,pr.lastIncluding));\n          }\n else           if (pr.isLike) {\n            queryBuilder.append(fieldName).append(':');\n            queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n          }\n else {\n            throw new RuntimeException(\"[unexpected!] not handled case\");\n          }\n        }\n      }\n      queryBuilder.append(\" \");\n    }\n  }\n  String[] pts=filter.getPrimaryTypes().toArray(new String[filter.getPrimaryTypes().size()]);\n  for (int i=0; i < pts.length; i++) {\n    String pt=pts[i];\n    if (i == 0) {\n      queryBuilder.append(\"(\");\n    }\n    if (i > 0 && i < pts.length) {\n      queryBuilder.append(\"OR \");\n    }\n    queryBuilder.append(\"jcr\\\\:primaryType\").append(':').append(partialEscape(pt)).append(\" \");\n    if (i == pts.length - 1) {\n      queryBuilder.append(\")\");\n      queryBuilder.append(' ');\n    }\n  }\n  Filter.PathRestriction pathRestriction=filter.getPathRestriction();\n  if (pathRestriction != null) {\n    String path=purgePath(filter);\n    String fieldName=configuration.getFieldForPathRestriction(pathRestriction);\n    if (fieldName != null) {\n      queryBuilder.append(fieldName);\n      queryBuilder.append(':');\n      queryBuilder.append(path);\n    }\n  }\n  if (queryBuilder.length() == 0) {\n    queryBuilder.append(\"*:*\");\n  }\n  String escapedQuery=queryBuilder.toString();\n  solrQuery.setQuery(escapedQuery);\n  if (log.isDebugEnabled()) {\n    log.debug(\"JCR query {} has been converted to Solr query {}\",filter.getQueryStatement(),solrQuery.toString());\n  }\n  return solrQuery;\n}\n",
                    "nodeType": "MethodDeclaration",
                    "astNodeNumber": 867,
                    "astHeight": 25
                }
            ],
            "currentLineData": {
                "locationInParent": "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
                "nodePosition": {
                    "charLength": 126,
                    "startLineNumber": 206,
                    "startColumnNumber": 28,
                    "endLineNumber": 206,
                    "endColumnNumber": 154
                },
                "nodeContext": "queryBuilder.append(partialEscape(String.valueOf(pr.first.getValue(pr.first.getType())).replace('%','*').replace('_','?')));\n",
                "nodeType": "ExpressionStatement",
                "astNodeNumber": 27,
                "astHeight": 10
            },
            "tokenLength": 1,
            "type": "org.apache.jackrabbit.oak.spi.query.Filter.PropertyRestriction"
        }
    ],
    "positionList": [
        {
            "charLength": 2,
            "startLineNumber": 124,
            "startColumnNumber": 45,
            "endLineNumber": 124,
            "endColumnNumber": 47
        },
        {
            "charLength": 2,
            "startLineNumber": 124,
            "startColumnNumber": 92,
            "endLineNumber": 124,
            "endColumnNumber": 94
        },
        {
            "charLength": 2,
            "startLineNumber": 125,
            "startColumnNumber": 62,
            "endLineNumber": 125,
            "endColumnNumber": 64
        },
        {
            "charLength": 2,
            "startLineNumber": 125,
            "startColumnNumber": 80,
            "endLineNumber": 125,
            "endColumnNumber": 82
        },
        {
            "charLength": 2,
            "startLineNumber": 165,
            "startColumnNumber": 24,
            "endLineNumber": 165,
            "endColumnNumber": 26
        },
        {
            "charLength": 2,
            "startLineNumber": 170,
            "startColumnNumber": 45,
            "endLineNumber": 170,
            "endColumnNumber": 47
        },
        {
            "charLength": 2,
            "startLineNumber": 175,
            "startColumnNumber": 24,
            "endLineNumber": 175,
            "endColumnNumber": 26
        },
        {
            "charLength": 2,
            "startLineNumber": 176,
            "startColumnNumber": 61,
            "endLineNumber": 176,
            "endColumnNumber": 63
        },
        {
            "charLength": 2,
            "startLineNumber": 176,
            "startColumnNumber": 79,
            "endLineNumber": 176,
            "endColumnNumber": 81
        },
        {
            "charLength": 2,
            "startLineNumber": 179,
            "startColumnNumber": 24,
            "endLineNumber": 179,
            "endColumnNumber": 26
        },
        {
            "charLength": 2,
            "startLineNumber": 180,
            "startColumnNumber": 60,
            "endLineNumber": 180,
            "endColumnNumber": 62
        },
        {
            "charLength": 2,
            "startLineNumber": 180,
            "startColumnNumber": 77,
            "endLineNumber": 180,
            "endColumnNumber": 79
        },
        {
            "charLength": 2,
            "startLineNumber": 183,
            "startColumnNumber": 82,
            "endLineNumber": 183,
            "endColumnNumber": 84
        },
        {
            "charLength": 2,
            "startLineNumber": 185,
            "startColumnNumber": 38,
            "endLineNumber": 185,
            "endColumnNumber": 40
        },
        {
            "charLength": 2,
            "startLineNumber": 191,
            "startColumnNumber": 28,
            "endLineNumber": 191,
            "endColumnNumber": 30
        },
        {
            "charLength": 2,
            "startLineNumber": 191,
            "startColumnNumber": 48,
            "endLineNumber": 191,
            "endColumnNumber": 50
        },
        {
            "charLength": 2,
            "startLineNumber": 191,
            "startColumnNumber": 67,
            "endLineNumber": 191,
            "endColumnNumber": 69
        },
        {
            "charLength": 2,
            "startLineNumber": 191,
            "startColumnNumber": 83,
            "endLineNumber": 191,
            "endColumnNumber": 85
        },
        {
            "charLength": 2,
            "startLineNumber": 194,
            "startColumnNumber": 35,
            "endLineNumber": 194,
            "endColumnNumber": 37
        },
        {
            "charLength": 2,
            "startLineNumber": 194,
            "startColumnNumber": 55,
            "endLineNumber": 194,
            "endColumnNumber": 57
        },
        {
            "charLength": 2,
            "startLineNumber": 199,
            "startColumnNumber": 36,
            "endLineNumber": 199,
            "endColumnNumber": 38
        },
        {
            "charLength": 2,
            "startLineNumber": 199,
            "startColumnNumber": 56,
            "endLineNumber": 199,
            "endColumnNumber": 58
        },
        {
            "charLength": 2,
            "startLineNumber": 199,
            "startColumnNumber": 77,
            "endLineNumber": 199,
            "endColumnNumber": 79
        },
        {
            "charLength": 2,
            "startLineNumber": 199,
            "startColumnNumber": 96,
            "endLineNumber": 199,
            "endColumnNumber": 98
        },
        {
            "charLength": 2,
            "startLineNumber": 199,
            "startColumnNumber": 119,
            "endLineNumber": 199,
            "endColumnNumber": 121
        },
        {
            "charLength": 2,
            "startLineNumber": 199,
            "startColumnNumber": 135,
            "endLineNumber": 199,
            "endColumnNumber": 137
        },
        {
            "charLength": 2,
            "startLineNumber": 202,
            "startColumnNumber": 78,
            "endLineNumber": 202,
            "endColumnNumber": 80
        },
        {
            "charLength": 2,
            "startLineNumber": 202,
            "startColumnNumber": 97,
            "endLineNumber": 202,
            "endColumnNumber": 99
        },
        {
            "charLength": 2,
            "startLineNumber": 203,
            "startColumnNumber": 35,
            "endLineNumber": 203,
            "endColumnNumber": 37
        },
        {
            "charLength": 2,
            "startLineNumber": 206,
            "startColumnNumber": 77,
            "endLineNumber": 206,
            "endColumnNumber": 79
        },
        {
            "charLength": 2,
            "startLineNumber": 206,
            "startColumnNumber": 95,
            "endLineNumber": 206,
            "endColumnNumber": 97
        }
    ],
    "layoutRelationDataList": [
        {
            "firstKey": 0,
            "secondKey": 1,
            "layout": 2
        },
        {
            "firstKey": 0,
            "secondKey": 2,
            "layout": 3
        },
        {
            "firstKey": 0,
            "secondKey": 3,
            "layout": 3
        },
        {
            "firstKey": 0,
            "secondKey": 4,
            "layout": 3
        },
        {
            "firstKey": 0,
            "secondKey": 5,
            "layout": 3
        },
        {
            "firstKey": 0,
            "secondKey": 6,
            "layout": 3
        },
        {
            "firstKey": 0,
            "secondKey": 7,
            "layout": 3
        },
        {
            "firstKey": 0,
            "secondKey": 8,
            "layout": 3
        },
        {
            "firstKey": 0,
            "secondKey": 9,
            "layout": 3
        },
        {
            "firstKey": 0,
            "secondKey": 10,
            "layout": 3
        },
        {
            "firstKey": 0,
            "secondKey": 11,
            "layout": 3
        },
        {
            "firstKey": 0,
            "secondKey": 12,
            "layout": 3
        },
        {
            "firstKey": 0,
            "secondKey": 13,
            "layout": 3
        },
        {
            "firstKey": 0,
            "secondKey": 14,
            "layout": 3
        },
        {
            "firstKey": 0,
            "secondKey": 15,
            "layout": 3
        },
        {
            "firstKey": 0,
            "secondKey": 16,
            "layout": 3
        },
        {
            "firstKey": 0,
            "secondKey": 17,
            "layout": 3
        },
        {
            "firstKey": 0,
            "secondKey": 18,
            "layout": 3
        },
        {
            "firstKey": 0,
            "secondKey": 19,
            "layout": 3
        },
        {
            "firstKey": 0,
            "secondKey": 20,
            "layout": 3
        },
        {
            "firstKey": 0,
            "secondKey": 21,
            "layout": 3
        },
        {
            "firstKey": 0,
            "secondKey": 22,
            "layout": 3
        },
        {
            "firstKey": 0,
            "secondKey": 23,
            "layout": 3
        },
        {
            "firstKey": 0,
            "secondKey": 24,
            "layout": 3
        },
        {
            "firstKey": 0,
            "secondKey": 25,
            "layout": 3
        },
        {
            "firstKey": 0,
            "secondKey": 26,
            "layout": 3
        },
        {
            "firstKey": 0,
            "secondKey": 27,
            "layout": 3
        },
        {
            "firstKey": 0,
            "secondKey": 28,
            "layout": 3
        },
        {
            "firstKey": 0,
            "secondKey": 29,
            "layout": 3
        },
        {
            "firstKey": 0,
            "secondKey": 30,
            "layout": 3
        },
        {
            "firstKey": 1,
            "secondKey": 0,
            "layout": 2
        },
        {
            "firstKey": 1,
            "secondKey": 2,
            "layout": 3
        },
        {
            "firstKey": 1,
            "secondKey": 3,
            "layout": 3
        },
        {
            "firstKey": 1,
            "secondKey": 4,
            "layout": 3
        },
        {
            "firstKey": 1,
            "secondKey": 5,
            "layout": 3
        },
        {
            "firstKey": 1,
            "secondKey": 6,
            "layout": 3
        },
        {
            "firstKey": 1,
            "secondKey": 7,
            "layout": 3
        },
        {
            "firstKey": 1,
            "secondKey": 8,
            "layout": 3
        },
        {
            "firstKey": 1,
            "secondKey": 9,
            "layout": 3
        },
        {
            "firstKey": 1,
            "secondKey": 10,
            "layout": 3
        },
        {
            "firstKey": 1,
            "secondKey": 11,
            "layout": 3
        },
        {
            "firstKey": 1,
            "secondKey": 12,
            "layout": 3
        },
        {
            "firstKey": 1,
            "secondKey": 13,
            "layout": 3
        },
        {
            "firstKey": 1,
            "secondKey": 14,
            "layout": 3
        },
        {
            "firstKey": 1,
            "secondKey": 15,
            "layout": 3
        },
        {
            "firstKey": 1,
            "secondKey": 16,
            "layout": 3
        },
        {
            "firstKey": 1,
            "secondKey": 17,
            "layout": 3
        },
        {
            "firstKey": 1,
            "secondKey": 18,
            "layout": 3
        },
        {
            "firstKey": 1,
            "secondKey": 19,
            "layout": 3
        },
        {
            "firstKey": 1,
            "secondKey": 20,
            "layout": 3
        },
        {
            "firstKey": 1,
            "secondKey": 21,
            "layout": 3
        },
        {
            "firstKey": 1,
            "secondKey": 22,
            "layout": 3
        },
        {
            "firstKey": 1,
            "secondKey": 23,
            "layout": 3
        },
        {
            "firstKey": 1,
            "secondKey": 24,
            "layout": 3
        },
        {
            "firstKey": 1,
            "secondKey": 25,
            "layout": 3
        },
        {
            "firstKey": 1,
            "secondKey": 26,
            "layout": 3
        },
        {
            "firstKey": 1,
            "secondKey": 27,
            "layout": 3
        },
        {
            "firstKey": 1,
            "secondKey": 28,
            "layout": 3
        },
        {
            "firstKey": 1,
            "secondKey": 29,
            "layout": 3
        },
        {
            "firstKey": 1,
            "secondKey": 30,
            "layout": 3
        },
        {
            "firstKey": 2,
            "secondKey": 0,
            "layout": 6
        },
        {
            "firstKey": 2,
            "secondKey": 1,
            "layout": 6
        },
        {
            "firstKey": 2,
            "secondKey": 3,
            "layout": 1
        },
        {
            "firstKey": 2,
            "secondKey": 4,
            "layout": 6
        },
        {
            "firstKey": 2,
            "secondKey": 5,
            "layout": 6
        },
        {
            "firstKey": 2,
            "secondKey": 6,
            "layout": 6
        },
        {
            "firstKey": 2,
            "secondKey": 7,
            "layout": 6
        },
        {
            "firstKey": 2,
            "secondKey": 8,
            "layout": 6
        },
        {
            "firstKey": 2,
            "secondKey": 9,
            "layout": 6
        },
        {
            "firstKey": 2,
            "secondKey": 10,
            "layout": 6
        },
        {
            "firstKey": 2,
            "secondKey": 11,
            "layout": 6
        },
        {
            "firstKey": 2,
            "secondKey": 12,
            "layout": 6
        },
        {
            "firstKey": 2,
            "secondKey": 13,
            "layout": 6
        },
        {
            "firstKey": 2,
            "secondKey": 14,
            "layout": 6
        },
        {
            "firstKey": 2,
            "secondKey": 15,
            "layout": 6
        },
        {
            "firstKey": 2,
            "secondKey": 16,
            "layout": 6
        },
        {
            "firstKey": 2,
            "secondKey": 17,
            "layout": 6
        },
        {
            "firstKey": 2,
            "secondKey": 18,
            "layout": 6
        },
        {
            "firstKey": 2,
            "secondKey": 19,
            "layout": 6
        },
        {
            "firstKey": 2,
            "secondKey": 20,
            "layout": 6
        },
        {
            "firstKey": 2,
            "secondKey": 21,
            "layout": 6
        },
        {
            "firstKey": 2,
            "secondKey": 22,
            "layout": 6
        },
        {
            "firstKey": 2,
            "secondKey": 23,
            "layout": 6
        },
        {
            "firstKey": 2,
            "secondKey": 24,
            "layout": 6
        },
        {
            "firstKey": 2,
            "secondKey": 25,
            "layout": 6
        },
        {
            "firstKey": 2,
            "secondKey": 26,
            "layout": 6
        },
        {
            "firstKey": 2,
            "secondKey": 27,
            "layout": 6
        },
        {
            "firstKey": 2,
            "secondKey": 28,
            "layout": 6
        },
        {
            "firstKey": 2,
            "secondKey": 29,
            "layout": 6
        },
        {
            "firstKey": 2,
            "secondKey": 30,
            "layout": 6
        },
        {
            "firstKey": 3,
            "secondKey": 0,
            "layout": 7
        },
        {
            "firstKey": 3,
            "secondKey": 1,
            "layout": 7
        },
        {
            "firstKey": 3,
            "secondKey": 2,
            "layout": 2
        },
        {
            "firstKey": 3,
            "secondKey": 4,
            "layout": 7
        },
        {
            "firstKey": 3,
            "secondKey": 5,
            "layout": 7
        },
        {
            "firstKey": 3,
            "secondKey": 6,
            "layout": 7
        },
        {
            "firstKey": 3,
            "secondKey": 7,
            "layout": 7
        },
        {
            "firstKey": 3,
            "secondKey": 8,
            "layout": 7
        },
        {
            "firstKey": 3,
            "secondKey": 9,
            "layout": 7
        },
        {
            "firstKey": 3,
            "secondKey": 10,
            "layout": 7
        },
        {
            "firstKey": 3,
            "secondKey": 11,
            "layout": 7
        },
        {
            "firstKey": 3,
            "secondKey": 12,
            "layout": 7
        },
        {
            "firstKey": 3,
            "secondKey": 13,
            "layout": 7
        },
        {
            "firstKey": 3,
            "secondKey": 14,
            "layout": 7
        },
        {
            "firstKey": 3,
            "secondKey": 15,
            "layout": 7
        },
        {
            "firstKey": 3,
            "secondKey": 16,
            "layout": 7
        },
        {
            "firstKey": 3,
            "secondKey": 17,
            "layout": 7
        },
        {
            "firstKey": 3,
            "secondKey": 18,
            "layout": 7
        },
        {
            "firstKey": 3,
            "secondKey": 19,
            "layout": 7
        },
        {
            "firstKey": 3,
            "secondKey": 20,
            "layout": 7
        },
        {
            "firstKey": 3,
            "secondKey": 21,
            "layout": 7
        },
        {
            "firstKey": 3,
            "secondKey": 22,
            "layout": 7
        },
        {
            "firstKey": 3,
            "secondKey": 23,
            "layout": 7
        },
        {
            "firstKey": 3,
            "secondKey": 24,
            "layout": 7
        },
        {
            "firstKey": 3,
            "secondKey": 25,
            "layout": 7
        },
        {
            "firstKey": 3,
            "secondKey": 26,
            "layout": 7
        },
        {
            "firstKey": 3,
            "secondKey": 27,
            "layout": 7
        },
        {
            "firstKey": 3,
            "secondKey": 28,
            "layout": 7
        },
        {
            "firstKey": 3,
            "secondKey": 29,
            "layout": 7
        },
        {
            "firstKey": 3,
            "secondKey": 30,
            "layout": 7
        },
        {
            "firstKey": 4,
            "secondKey": 0,
            "layout": 4
        },
        {
            "firstKey": 4,
            "secondKey": 1,
            "layout": 4
        },
        {
            "firstKey": 4,
            "secondKey": 2,
            "layout": 4
        },
        {
            "firstKey": 4,
            "secondKey": 3,
            "layout": 4
        },
        {
            "firstKey": 4,
            "secondKey": 5,
            "layout": 3
        },
        {
            "firstKey": 4,
            "secondKey": 6,
            "layout": 3
        },
        {
            "firstKey": 4,
            "secondKey": 7,
            "layout": 3
        },
        {
            "firstKey": 4,
            "secondKey": 8,
            "layout": 3
        },
        {
            "firstKey": 4,
            "secondKey": 9,
            "layout": 3
        },
        {
            "firstKey": 4,
            "secondKey": 10,
            "layout": 3
        },
        {
            "firstKey": 4,
            "secondKey": 11,
            "layout": 3
        },
        {
            "firstKey": 4,
            "secondKey": 12,
            "layout": 3
        },
        {
            "firstKey": 4,
            "secondKey": 13,
            "layout": 3
        },
        {
            "firstKey": 4,
            "secondKey": 14,
            "layout": 3
        },
        {
            "firstKey": 4,
            "secondKey": 15,
            "layout": 3
        },
        {
            "firstKey": 4,
            "secondKey": 16,
            "layout": 3
        },
        {
            "firstKey": 4,
            "secondKey": 17,
            "layout": 3
        },
        {
            "firstKey": 4,
            "secondKey": 18,
            "layout": 3
        },
        {
            "firstKey": 4,
            "secondKey": 19,
            "layout": 3
        },
        {
            "firstKey": 4,
            "secondKey": 20,
            "layout": 3
        },
        {
            "firstKey": 4,
            "secondKey": 21,
            "layout": 3
        },
        {
            "firstKey": 4,
            "secondKey": 22,
            "layout": 3
        },
        {
            "firstKey": 4,
            "secondKey": 23,
            "layout": 3
        },
        {
            "firstKey": 4,
            "secondKey": 24,
            "layout": 3
        },
        {
            "firstKey": 4,
            "secondKey": 25,
            "layout": 3
        },
        {
            "firstKey": 4,
            "secondKey": 26,
            "layout": 3
        },
        {
            "firstKey": 4,
            "secondKey": 27,
            "layout": 3
        },
        {
            "firstKey": 4,
            "secondKey": 28,
            "layout": 3
        },
        {
            "firstKey": 4,
            "secondKey": 29,
            "layout": 3
        },
        {
            "firstKey": 4,
            "secondKey": 30,
            "layout": 3
        },
        {
            "firstKey": 5,
            "secondKey": 0,
            "layout": 4
        },
        {
            "firstKey": 5,
            "secondKey": 1,
            "layout": 4
        },
        {
            "firstKey": 5,
            "secondKey": 2,
            "layout": 4
        },
        {
            "firstKey": 5,
            "secondKey": 3,
            "layout": 4
        },
        {
            "firstKey": 5,
            "secondKey": 4,
            "layout": 3
        },
        {
            "firstKey": 5,
            "secondKey": 6,
            "layout": 3
        },
        {
            "firstKey": 5,
            "secondKey": 7,
            "layout": 3
        },
        {
            "firstKey": 5,
            "secondKey": 8,
            "layout": 3
        },
        {
            "firstKey": 5,
            "secondKey": 9,
            "layout": 3
        },
        {
            "firstKey": 5,
            "secondKey": 10,
            "layout": 3
        },
        {
            "firstKey": 5,
            "secondKey": 11,
            "layout": 3
        },
        {
            "firstKey": 5,
            "secondKey": 12,
            "layout": 3
        },
        {
            "firstKey": 5,
            "secondKey": 13,
            "layout": 3
        },
        {
            "firstKey": 5,
            "secondKey": 14,
            "layout": 3
        },
        {
            "firstKey": 5,
            "secondKey": 15,
            "layout": 3
        },
        {
            "firstKey": 5,
            "secondKey": 16,
            "layout": 3
        },
        {
            "firstKey": 5,
            "secondKey": 17,
            "layout": 3
        },
        {
            "firstKey": 5,
            "secondKey": 18,
            "layout": 3
        },
        {
            "firstKey": 5,
            "secondKey": 19,
            "layout": 3
        },
        {
            "firstKey": 5,
            "secondKey": 20,
            "layout": 3
        },
        {
            "firstKey": 5,
            "secondKey": 21,
            "layout": 3
        },
        {
            "firstKey": 5,
            "secondKey": 22,
            "layout": 3
        },
        {
            "firstKey": 5,
            "secondKey": 23,
            "layout": 3
        },
        {
            "firstKey": 5,
            "secondKey": 24,
            "layout": 3
        },
        {
            "firstKey": 5,
            "secondKey": 25,
            "layout": 3
        },
        {
            "firstKey": 5,
            "secondKey": 26,
            "layout": 3
        },
        {
            "firstKey": 5,
            "secondKey": 27,
            "layout": 3
        },
        {
            "firstKey": 5,
            "secondKey": 28,
            "layout": 3
        },
        {
            "firstKey": 5,
            "secondKey": 29,
            "layout": 3
        },
        {
            "firstKey": 5,
            "secondKey": 30,
            "layout": 3
        },
        {
            "firstKey": 6,
            "secondKey": 0,
            "layout": 4
        },
        {
            "firstKey": 6,
            "secondKey": 1,
            "layout": 4
        },
        {
            "firstKey": 6,
            "secondKey": 2,
            "layout": 4
        },
        {
            "firstKey": 6,
            "secondKey": 3,
            "layout": 4
        },
        {
            "firstKey": 6,
            "secondKey": 4,
            "layout": 3
        },
        {
            "firstKey": 6,
            "secondKey": 5,
            "layout": 3
        },
        {
            "firstKey": 6,
            "secondKey": 7,
            "layout": 2
        },
        {
            "firstKey": 6,
            "secondKey": 8,
            "layout": 2
        },
        {
            "firstKey": 6,
            "secondKey": 9,
            "layout": 3
        },
        {
            "firstKey": 6,
            "secondKey": 10,
            "layout": 3
        },
        {
            "firstKey": 6,
            "secondKey": 11,
            "layout": 3
        },
        {
            "firstKey": 6,
            "secondKey": 12,
            "layout": 3
        },
        {
            "firstKey": 6,
            "secondKey": 13,
            "layout": 3
        },
        {
            "firstKey": 6,
            "secondKey": 14,
            "layout": 3
        },
        {
            "firstKey": 6,
            "secondKey": 15,
            "layout": 3
        },
        {
            "firstKey": 6,
            "secondKey": 16,
            "layout": 3
        },
        {
            "firstKey": 6,
            "secondKey": 17,
            "layout": 3
        },
        {
            "firstKey": 6,
            "secondKey": 18,
            "layout": 3
        },
        {
            "firstKey": 6,
            "secondKey": 19,
            "layout": 3
        },
        {
            "firstKey": 6,
            "secondKey": 20,
            "layout": 3
        },
        {
            "firstKey": 6,
            "secondKey": 21,
            "layout": 3
        },
        {
            "firstKey": 6,
            "secondKey": 22,
            "layout": 3
        },
        {
            "firstKey": 6,
            "secondKey": 23,
            "layout": 3
        },
        {
            "firstKey": 6,
            "secondKey": 24,
            "layout": 3
        },
        {
            "firstKey": 6,
            "secondKey": 25,
            "layout": 3
        },
        {
            "firstKey": 6,
            "secondKey": 26,
            "layout": 3
        },
        {
            "firstKey": 6,
            "secondKey": 27,
            "layout": 3
        },
        {
            "firstKey": 6,
            "secondKey": 28,
            "layout": 3
        },
        {
            "firstKey": 6,
            "secondKey": 29,
            "layout": 3
        },
        {
            "firstKey": 6,
            "secondKey": 30,
            "layout": 3
        },
        {
            "firstKey": 7,
            "secondKey": 0,
            "layout": 10
        },
        {
            "firstKey": 7,
            "secondKey": 1,
            "layout": 10
        },
        {
            "firstKey": 7,
            "secondKey": 2,
            "layout": 10
        },
        {
            "firstKey": 7,
            "secondKey": 3,
            "layout": 10
        },
        {
            "firstKey": 7,
            "secondKey": 4,
            "layout": 9
        },
        {
            "firstKey": 7,
            "secondKey": 5,
            "layout": 9
        },
        {
            "firstKey": 7,
            "secondKey": 6,
            "layout": 8
        },
        {
            "firstKey": 7,
            "secondKey": 8,
            "layout": 1
        },
        {
            "firstKey": 7,
            "secondKey": 9,
            "layout": 9
        },
        {
            "firstKey": 7,
            "secondKey": 10,
            "layout": 9
        },
        {
            "firstKey": 7,
            "secondKey": 11,
            "layout": 9
        },
        {
            "firstKey": 7,
            "secondKey": 12,
            "layout": 9
        },
        {
            "firstKey": 7,
            "secondKey": 13,
            "layout": 9
        },
        {
            "firstKey": 7,
            "secondKey": 14,
            "layout": 9
        },
        {
            "firstKey": 7,
            "secondKey": 15,
            "layout": 9
        },
        {
            "firstKey": 7,
            "secondKey": 16,
            "layout": 9
        },
        {
            "firstKey": 7,
            "secondKey": 17,
            "layout": 9
        },
        {
            "firstKey": 7,
            "secondKey": 18,
            "layout": 9
        },
        {
            "firstKey": 7,
            "secondKey": 19,
            "layout": 9
        },
        {
            "firstKey": 7,
            "secondKey": 20,
            "layout": 9
        },
        {
            "firstKey": 7,
            "secondKey": 21,
            "layout": 9
        },
        {
            "firstKey": 7,
            "secondKey": 22,
            "layout": 9
        },
        {
            "firstKey": 7,
            "secondKey": 23,
            "layout": 9
        },
        {
            "firstKey": 7,
            "secondKey": 24,
            "layout": 9
        },
        {
            "firstKey": 7,
            "secondKey": 25,
            "layout": 9
        },
        {
            "firstKey": 7,
            "secondKey": 26,
            "layout": 9
        },
        {
            "firstKey": 7,
            "secondKey": 27,
            "layout": 9
        },
        {
            "firstKey": 7,
            "secondKey": 28,
            "layout": 9
        },
        {
            "firstKey": 7,
            "secondKey": 29,
            "layout": 9
        },
        {
            "firstKey": 7,
            "secondKey": 30,
            "layout": 9
        },
        {
            "firstKey": 8,
            "secondKey": 0,
            "layout": 11
        },
        {
            "firstKey": 8,
            "secondKey": 1,
            "layout": 11
        },
        {
            "firstKey": 8,
            "secondKey": 2,
            "layout": 11
        },
        {
            "firstKey": 8,
            "secondKey": 3,
            "layout": 11
        },
        {
            "firstKey": 8,
            "secondKey": 4,
            "layout": 10
        },
        {
            "firstKey": 8,
            "secondKey": 5,
            "layout": 10
        },
        {
            "firstKey": 8,
            "secondKey": 6,
            "layout": 9
        },
        {
            "firstKey": 8,
            "secondKey": 7,
            "layout": 2
        },
        {
            "firstKey": 8,
            "secondKey": 9,
            "layout": 10
        },
        {
            "firstKey": 8,
            "secondKey": 10,
            "layout": 10
        },
        {
            "firstKey": 8,
            "secondKey": 11,
            "layout": 10
        },
        {
            "firstKey": 8,
            "secondKey": 12,
            "layout": 10
        },
        {
            "firstKey": 8,
            "secondKey": 13,
            "layout": 10
        },
        {
            "firstKey": 8,
            "secondKey": 14,
            "layout": 10
        },
        {
            "firstKey": 8,
            "secondKey": 15,
            "layout": 10
        },
        {
            "firstKey": 8,
            "secondKey": 16,
            "layout": 10
        },
        {
            "firstKey": 8,
            "secondKey": 17,
            "layout": 10
        },
        {
            "firstKey": 8,
            "secondKey": 18,
            "layout": 10
        },
        {
            "firstKey": 8,
            "secondKey": 19,
            "layout": 10
        },
        {
            "firstKey": 8,
            "secondKey": 20,
            "layout": 10
        },
        {
            "firstKey": 8,
            "secondKey": 21,
            "layout": 10
        },
        {
            "firstKey": 8,
            "secondKey": 22,
            "layout": 10
        },
        {
            "firstKey": 8,
            "secondKey": 23,
            "layout": 10
        },
        {
            "firstKey": 8,
            "secondKey": 24,
            "layout": 10
        },
        {
            "firstKey": 8,
            "secondKey": 25,
            "layout": 10
        },
        {
            "firstKey": 8,
            "secondKey": 26,
            "layout": 10
        },
        {
            "firstKey": 8,
            "secondKey": 27,
            "layout": 10
        },
        {
            "firstKey": 8,
            "secondKey": 28,
            "layout": 10
        },
        {
            "firstKey": 8,
            "secondKey": 29,
            "layout": 10
        },
        {
            "firstKey": 8,
            "secondKey": 30,
            "layout": 10
        },
        {
            "firstKey": 9,
            "secondKey": 0,
            "layout": 4
        },
        {
            "firstKey": 9,
            "secondKey": 1,
            "layout": 4
        },
        {
            "firstKey": 9,
            "secondKey": 2,
            "layout": 4
        },
        {
            "firstKey": 9,
            "secondKey": 3,
            "layout": 4
        },
        {
            "firstKey": 9,
            "secondKey": 4,
            "layout": 3
        },
        {
            "firstKey": 9,
            "secondKey": 5,
            "layout": 3
        },
        {
            "firstKey": 9,
            "secondKey": 6,
            "layout": 3
        },
        {
            "firstKey": 9,
            "secondKey": 7,
            "layout": 3
        },
        {
            "firstKey": 9,
            "secondKey": 8,
            "layout": 3
        },
        {
            "firstKey": 9,
            "secondKey": 10,
            "layout": 2
        },
        {
            "firstKey": 9,
            "secondKey": 11,
            "layout": 2
        },
        {
            "firstKey": 9,
            "secondKey": 12,
            "layout": 3
        },
        {
            "firstKey": 9,
            "secondKey": 13,
            "layout": 3
        },
        {
            "firstKey": 9,
            "secondKey": 14,
            "layout": 3
        },
        {
            "firstKey": 9,
            "secondKey": 15,
            "layout": 3
        },
        {
            "firstKey": 9,
            "secondKey": 16,
            "layout": 3
        },
        {
            "firstKey": 9,
            "secondKey": 17,
            "layout": 3
        },
        {
            "firstKey": 9,
            "secondKey": 18,
            "layout": 3
        },
        {
            "firstKey": 9,
            "secondKey": 19,
            "layout": 3
        },
        {
            "firstKey": 9,
            "secondKey": 20,
            "layout": 3
        },
        {
            "firstKey": 9,
            "secondKey": 21,
            "layout": 3
        },
        {
            "firstKey": 9,
            "secondKey": 22,
            "layout": 3
        },
        {
            "firstKey": 9,
            "secondKey": 23,
            "layout": 3
        },
        {
            "firstKey": 9,
            "secondKey": 24,
            "layout": 3
        },
        {
            "firstKey": 9,
            "secondKey": 25,
            "layout": 3
        },
        {
            "firstKey": 9,
            "secondKey": 26,
            "layout": 3
        },
        {
            "firstKey": 9,
            "secondKey": 27,
            "layout": 3
        },
        {
            "firstKey": 9,
            "secondKey": 28,
            "layout": 3
        },
        {
            "firstKey": 9,
            "secondKey": 29,
            "layout": 3
        },
        {
            "firstKey": 9,
            "secondKey": 30,
            "layout": 3
        },
        {
            "firstKey": 10,
            "secondKey": 0,
            "layout": 10
        },
        {
            "firstKey": 10,
            "secondKey": 1,
            "layout": 10
        },
        {
            "firstKey": 10,
            "secondKey": 2,
            "layout": 10
        },
        {
            "firstKey": 10,
            "secondKey": 3,
            "layout": 10
        },
        {
            "firstKey": 10,
            "secondKey": 4,
            "layout": 9
        },
        {
            "firstKey": 10,
            "secondKey": 5,
            "layout": 9
        },
        {
            "firstKey": 10,
            "secondKey": 6,
            "layout": 9
        },
        {
            "firstKey": 10,
            "secondKey": 7,
            "layout": 9
        },
        {
            "firstKey": 10,
            "secondKey": 8,
            "layout": 9
        },
        {
            "firstKey": 10,
            "secondKey": 9,
            "layout": 8
        },
        {
            "firstKey": 10,
            "secondKey": 11,
            "layout": 1
        },
        {
            "firstKey": 10,
            "secondKey": 12,
            "layout": 9
        },
        {
            "firstKey": 10,
            "secondKey": 13,
            "layout": 9
        },
        {
            "firstKey": 10,
            "secondKey": 14,
            "layout": 9
        },
        {
            "firstKey": 10,
            "secondKey": 15,
            "layout": 9
        },
        {
            "firstKey": 10,
            "secondKey": 16,
            "layout": 9
        },
        {
            "firstKey": 10,
            "secondKey": 17,
            "layout": 9
        },
        {
            "firstKey": 10,
            "secondKey": 18,
            "layout": 9
        },
        {
            "firstKey": 10,
            "secondKey": 19,
            "layout": 9
        },
        {
            "firstKey": 10,
            "secondKey": 20,
            "layout": 9
        },
        {
            "firstKey": 10,
            "secondKey": 21,
            "layout": 9
        },
        {
            "firstKey": 10,
            "secondKey": 22,
            "layout": 9
        },
        {
            "firstKey": 10,
            "secondKey": 23,
            "layout": 9
        },
        {
            "firstKey": 10,
            "secondKey": 24,
            "layout": 9
        },
        {
            "firstKey": 10,
            "secondKey": 25,
            "layout": 9
        },
        {
            "firstKey": 10,
            "secondKey": 26,
            "layout": 9
        },
        {
            "firstKey": 10,
            "secondKey": 27,
            "layout": 9
        },
        {
            "firstKey": 10,
            "secondKey": 28,
            "layout": 9
        },
        {
            "firstKey": 10,
            "secondKey": 29,
            "layout": 9
        },
        {
            "firstKey": 10,
            "secondKey": 30,
            "layout": 9
        },
        {
            "firstKey": 11,
            "secondKey": 0,
            "layout": 11
        },
        {
            "firstKey": 11,
            "secondKey": 1,
            "layout": 11
        },
        {
            "firstKey": 11,
            "secondKey": 2,
            "layout": 11
        },
        {
            "firstKey": 11,
            "secondKey": 3,
            "layout": 11
        },
        {
            "firstKey": 11,
            "secondKey": 4,
            "layout": 10
        },
        {
            "firstKey": 11,
            "secondKey": 5,
            "layout": 10
        },
        {
            "firstKey": 11,
            "secondKey": 6,
            "layout": 10
        },
        {
            "firstKey": 11,
            "secondKey": 7,
            "layout": 10
        },
        {
            "firstKey": 11,
            "secondKey": 8,
            "layout": 10
        },
        {
            "firstKey": 11,
            "secondKey": 9,
            "layout": 9
        },
        {
            "firstKey": 11,
            "secondKey": 10,
            "layout": 2
        },
        {
            "firstKey": 11,
            "secondKey": 12,
            "layout": 10
        },
        {
            "firstKey": 11,
            "secondKey": 13,
            "layout": 10
        },
        {
            "firstKey": 11,
            "secondKey": 14,
            "layout": 10
        },
        {
            "firstKey": 11,
            "secondKey": 15,
            "layout": 10
        },
        {
            "firstKey": 11,
            "secondKey": 16,
            "layout": 10
        },
        {
            "firstKey": 11,
            "secondKey": 17,
            "layout": 10
        },
        {
            "firstKey": 11,
            "secondKey": 18,
            "layout": 10
        },
        {
            "firstKey": 11,
            "secondKey": 19,
            "layout": 10
        },
        {
            "firstKey": 11,
            "secondKey": 20,
            "layout": 10
        },
        {
            "firstKey": 11,
            "secondKey": 21,
            "layout": 10
        },
        {
            "firstKey": 11,
            "secondKey": 22,
            "layout": 10
        },
        {
            "firstKey": 11,
            "secondKey": 23,
            "layout": 10
        },
        {
            "firstKey": 11,
            "secondKey": 24,
            "layout": 10
        },
        {
            "firstKey": 11,
            "secondKey": 25,
            "layout": 10
        },
        {
            "firstKey": 11,
            "secondKey": 26,
            "layout": 10
        },
        {
            "firstKey": 11,
            "secondKey": 27,
            "layout": 10
        },
        {
            "firstKey": 11,
            "secondKey": 28,
            "layout": 10
        },
        {
            "firstKey": 11,
            "secondKey": 29,
            "layout": 10
        },
        {
            "firstKey": 11,
            "secondKey": 30,
            "layout": 10
        },
        {
            "firstKey": 12,
            "secondKey": 0,
            "layout": 4
        },
        {
            "firstKey": 12,
            "secondKey": 1,
            "layout": 4
        },
        {
            "firstKey": 12,
            "secondKey": 2,
            "layout": 4
        },
        {
            "firstKey": 12,
            "secondKey": 3,
            "layout": 4
        },
        {
            "firstKey": 12,
            "secondKey": 4,
            "layout": 3
        },
        {
            "firstKey": 12,
            "secondKey": 5,
            "layout": 3
        },
        {
            "firstKey": 12,
            "secondKey": 6,
            "layout": 3
        },
        {
            "firstKey": 12,
            "secondKey": 7,
            "layout": 3
        },
        {
            "firstKey": 12,
            "secondKey": 8,
            "layout": 3
        },
        {
            "firstKey": 12,
            "secondKey": 9,
            "layout": 3
        },
        {
            "firstKey": 12,
            "secondKey": 10,
            "layout": 3
        },
        {
            "firstKey": 12,
            "secondKey": 11,
            "layout": 3
        },
        {
            "firstKey": 12,
            "secondKey": 13,
            "layout": 3
        },
        {
            "firstKey": 12,
            "secondKey": 14,
            "layout": 3
        },
        {
            "firstKey": 12,
            "secondKey": 15,
            "layout": 3
        },
        {
            "firstKey": 12,
            "secondKey": 16,
            "layout": 3
        },
        {
            "firstKey": 12,
            "secondKey": 17,
            "layout": 3
        },
        {
            "firstKey": 12,
            "secondKey": 18,
            "layout": 3
        },
        {
            "firstKey": 12,
            "secondKey": 19,
            "layout": 3
        },
        {
            "firstKey": 12,
            "secondKey": 20,
            "layout": 3
        },
        {
            "firstKey": 12,
            "secondKey": 21,
            "layout": 3
        },
        {
            "firstKey": 12,
            "secondKey": 22,
            "layout": 3
        },
        {
            "firstKey": 12,
            "secondKey": 23,
            "layout": 3
        },
        {
            "firstKey": 12,
            "secondKey": 24,
            "layout": 3
        },
        {
            "firstKey": 12,
            "secondKey": 25,
            "layout": 3
        },
        {
            "firstKey": 12,
            "secondKey": 26,
            "layout": 3
        },
        {
            "firstKey": 12,
            "secondKey": 27,
            "layout": 3
        },
        {
            "firstKey": 12,
            "secondKey": 28,
            "layout": 3
        },
        {
            "firstKey": 12,
            "secondKey": 29,
            "layout": 3
        },
        {
            "firstKey": 12,
            "secondKey": 30,
            "layout": 3
        },
        {
            "firstKey": 13,
            "secondKey": 0,
            "layout": 6
        },
        {
            "firstKey": 13,
            "secondKey": 1,
            "layout": 6
        },
        {
            "firstKey": 13,
            "secondKey": 2,
            "layout": 6
        },
        {
            "firstKey": 13,
            "secondKey": 3,
            "layout": 6
        },
        {
            "firstKey": 13,
            "secondKey": 4,
            "layout": 5
        },
        {
            "firstKey": 13,
            "secondKey": 5,
            "layout": 5
        },
        {
            "firstKey": 13,
            "secondKey": 6,
            "layout": 5
        },
        {
            "firstKey": 13,
            "secondKey": 7,
            "layout": 5
        },
        {
            "firstKey": 13,
            "secondKey": 8,
            "layout": 5
        },
        {
            "firstKey": 13,
            "secondKey": 9,
            "layout": 5
        },
        {
            "firstKey": 13,
            "secondKey": 10,
            "layout": 5
        },
        {
            "firstKey": 13,
            "secondKey": 11,
            "layout": 5
        },
        {
            "firstKey": 13,
            "secondKey": 12,
            "layout": 5
        },
        {
            "firstKey": 13,
            "secondKey": 14,
            "layout": 5
        },
        {
            "firstKey": 13,
            "secondKey": 15,
            "layout": 5
        },
        {
            "firstKey": 13,
            "secondKey": 16,
            "layout": 5
        },
        {
            "firstKey": 13,
            "secondKey": 17,
            "layout": 5
        },
        {
            "firstKey": 13,
            "secondKey": 18,
            "layout": 5
        },
        {
            "firstKey": 13,
            "secondKey": 19,
            "layout": 5
        },
        {
            "firstKey": 13,
            "secondKey": 20,
            "layout": 5
        },
        {
            "firstKey": 13,
            "secondKey": 21,
            "layout": 5
        },
        {
            "firstKey": 13,
            "secondKey": 22,
            "layout": 5
        },
        {
            "firstKey": 13,
            "secondKey": 23,
            "layout": 5
        },
        {
            "firstKey": 13,
            "secondKey": 24,
            "layout": 5
        },
        {
            "firstKey": 13,
            "secondKey": 25,
            "layout": 5
        },
        {
            "firstKey": 13,
            "secondKey": 26,
            "layout": 5
        },
        {
            "firstKey": 13,
            "secondKey": 27,
            "layout": 5
        },
        {
            "firstKey": 13,
            "secondKey": 28,
            "layout": 5
        },
        {
            "firstKey": 13,
            "secondKey": 29,
            "layout": 5
        },
        {
            "firstKey": 13,
            "secondKey": 30,
            "layout": 5
        },
        {
            "firstKey": 14,
            "secondKey": 0,
            "layout": 8
        },
        {
            "firstKey": 14,
            "secondKey": 1,
            "layout": 8
        },
        {
            "firstKey": 14,
            "secondKey": 2,
            "layout": 8
        },
        {
            "firstKey": 14,
            "secondKey": 3,
            "layout": 8
        },
        {
            "firstKey": 14,
            "secondKey": 4,
            "layout": 7
        },
        {
            "firstKey": 14,
            "secondKey": 5,
            "layout": 7
        },
        {
            "firstKey": 14,
            "secondKey": 6,
            "layout": 7
        },
        {
            "firstKey": 14,
            "secondKey": 7,
            "layout": 7
        },
        {
            "firstKey": 14,
            "secondKey": 8,
            "layout": 7
        },
        {
            "firstKey": 14,
            "secondKey": 9,
            "layout": 7
        },
        {
            "firstKey": 14,
            "secondKey": 10,
            "layout": 7
        },
        {
            "firstKey": 14,
            "secondKey": 11,
            "layout": 7
        },
        {
            "firstKey": 14,
            "secondKey": 12,
            "layout": 7
        },
        {
            "firstKey": 14,
            "secondKey": 13,
            "layout": 7
        },
        {
            "firstKey": 14,
            "secondKey": 15,
            "layout": 2
        },
        {
            "firstKey": 14,
            "secondKey": 16,
            "layout": 3
        },
        {
            "firstKey": 14,
            "secondKey": 17,
            "layout": 3
        },
        {
            "firstKey": 14,
            "secondKey": 18,
            "layout": 4
        },
        {
            "firstKey": 14,
            "secondKey": 19,
            "layout": 4
        },
        {
            "firstKey": 14,
            "secondKey": 20,
            "layout": 4
        },
        {
            "firstKey": 14,
            "secondKey": 21,
            "layout": 4
        },
        {
            "firstKey": 14,
            "secondKey": 22,
            "layout": 4
        },
        {
            "firstKey": 14,
            "secondKey": 23,
            "layout": 4
        },
        {
            "firstKey": 14,
            "secondKey": 24,
            "layout": 4
        },
        {
            "firstKey": 14,
            "secondKey": 25,
            "layout": 4
        },
        {
            "firstKey": 14,
            "secondKey": 26,
            "layout": 4
        },
        {
            "firstKey": 14,
            "secondKey": 27,
            "layout": 4
        },
        {
            "firstKey": 14,
            "secondKey": 28,
            "layout": 4
        },
        {
            "firstKey": 14,
            "secondKey": 29,
            "layout": 4
        },
        {
            "firstKey": 14,
            "secondKey": 30,
            "layout": 4
        },
        {
            "firstKey": 15,
            "secondKey": 0,
            "layout": 8
        },
        {
            "firstKey": 15,
            "secondKey": 1,
            "layout": 8
        },
        {
            "firstKey": 15,
            "secondKey": 2,
            "layout": 8
        },
        {
            "firstKey": 15,
            "secondKey": 3,
            "layout": 8
        },
        {
            "firstKey": 15,
            "secondKey": 4,
            "layout": 7
        },
        {
            "firstKey": 15,
            "secondKey": 5,
            "layout": 7
        },
        {
            "firstKey": 15,
            "secondKey": 6,
            "layout": 7
        },
        {
            "firstKey": 15,
            "secondKey": 7,
            "layout": 7
        },
        {
            "firstKey": 15,
            "secondKey": 8,
            "layout": 7
        },
        {
            "firstKey": 15,
            "secondKey": 9,
            "layout": 7
        },
        {
            "firstKey": 15,
            "secondKey": 10,
            "layout": 7
        },
        {
            "firstKey": 15,
            "secondKey": 11,
            "layout": 7
        },
        {
            "firstKey": 15,
            "secondKey": 12,
            "layout": 7
        },
        {
            "firstKey": 15,
            "secondKey": 13,
            "layout": 7
        },
        {
            "firstKey": 15,
            "secondKey": 14,
            "layout": 2
        },
        {
            "firstKey": 15,
            "secondKey": 16,
            "layout": 3
        },
        {
            "firstKey": 15,
            "secondKey": 17,
            "layout": 3
        },
        {
            "firstKey": 15,
            "secondKey": 18,
            "layout": 4
        },
        {
            "firstKey": 15,
            "secondKey": 19,
            "layout": 4
        },
        {
            "firstKey": 15,
            "secondKey": 20,
            "layout": 4
        },
        {
            "firstKey": 15,
            "secondKey": 21,
            "layout": 4
        },
        {
            "firstKey": 15,
            "secondKey": 22,
            "layout": 4
        },
        {
            "firstKey": 15,
            "secondKey": 23,
            "layout": 4
        },
        {
            "firstKey": 15,
            "secondKey": 24,
            "layout": 4
        },
        {
            "firstKey": 15,
            "secondKey": 25,
            "layout": 4
        },
        {
            "firstKey": 15,
            "secondKey": 26,
            "layout": 4
        },
        {
            "firstKey": 15,
            "secondKey": 27,
            "layout": 4
        },
        {
            "firstKey": 15,
            "secondKey": 28,
            "layout": 4
        },
        {
            "firstKey": 15,
            "secondKey": 29,
            "layout": 4
        },
        {
            "firstKey": 15,
            "secondKey": 30,
            "layout": 4
        },
        {
            "firstKey": 16,
            "secondKey": 0,
            "layout": 7
        },
        {
            "firstKey": 16,
            "secondKey": 1,
            "layout": 7
        },
        {
            "firstKey": 16,
            "secondKey": 2,
            "layout": 7
        },
        {
            "firstKey": 16,
            "secondKey": 3,
            "layout": 7
        },
        {
            "firstKey": 16,
            "secondKey": 4,
            "layout": 6
        },
        {
            "firstKey": 16,
            "secondKey": 5,
            "layout": 6
        },
        {
            "firstKey": 16,
            "secondKey": 6,
            "layout": 6
        },
        {
            "firstKey": 16,
            "secondKey": 7,
            "layout": 6
        },
        {
            "firstKey": 16,
            "secondKey": 8,
            "layout": 6
        },
        {
            "firstKey": 16,
            "secondKey": 9,
            "layout": 6
        },
        {
            "firstKey": 16,
            "secondKey": 10,
            "layout": 6
        },
        {
            "firstKey": 16,
            "secondKey": 11,
            "layout": 6
        },
        {
            "firstKey": 16,
            "secondKey": 12,
            "layout": 6
        },
        {
            "firstKey": 16,
            "secondKey": 13,
            "layout": 6
        },
        {
            "firstKey": 16,
            "secondKey": 14,
            "layout": 2
        },
        {
            "firstKey": 16,
            "secondKey": 15,
            "layout": 2
        },
        {
            "firstKey": 16,
            "secondKey": 17,
            "layout": 1
        },
        {
            "firstKey": 16,
            "secondKey": 18,
            "layout": 3
        },
        {
            "firstKey": 16,
            "secondKey": 19,
            "layout": 3
        },
        {
            "firstKey": 16,
            "secondKey": 20,
            "layout": 3
        },
        {
            "firstKey": 16,
            "secondKey": 21,
            "layout": 3
        },
        {
            "firstKey": 16,
            "secondKey": 22,
            "layout": 3
        },
        {
            "firstKey": 16,
            "secondKey": 23,
            "layout": 3
        },
        {
            "firstKey": 16,
            "secondKey": 24,
            "layout": 3
        },
        {
            "firstKey": 16,
            "secondKey": 25,
            "layout": 3
        },
        {
            "firstKey": 16,
            "secondKey": 26,
            "layout": 3
        },
        {
            "firstKey": 16,
            "secondKey": 27,
            "layout": 3
        },
        {
            "firstKey": 16,
            "secondKey": 28,
            "layout": 3
        },
        {
            "firstKey": 16,
            "secondKey": 29,
            "layout": 3
        },
        {
            "firstKey": 16,
            "secondKey": 30,
            "layout": 3
        },
        {
            "firstKey": 17,
            "secondKey": 0,
            "layout": 7
        },
        {
            "firstKey": 17,
            "secondKey": 1,
            "layout": 7
        },
        {
            "firstKey": 17,
            "secondKey": 2,
            "layout": 7
        },
        {
            "firstKey": 17,
            "secondKey": 3,
            "layout": 7
        },
        {
            "firstKey": 17,
            "secondKey": 4,
            "layout": 6
        },
        {
            "firstKey": 17,
            "secondKey": 5,
            "layout": 6
        },
        {
            "firstKey": 17,
            "secondKey": 6,
            "layout": 6
        },
        {
            "firstKey": 17,
            "secondKey": 7,
            "layout": 6
        },
        {
            "firstKey": 17,
            "secondKey": 8,
            "layout": 6
        },
        {
            "firstKey": 17,
            "secondKey": 9,
            "layout": 6
        },
        {
            "firstKey": 17,
            "secondKey": 10,
            "layout": 6
        },
        {
            "firstKey": 17,
            "secondKey": 11,
            "layout": 6
        },
        {
            "firstKey": 17,
            "secondKey": 12,
            "layout": 6
        },
        {
            "firstKey": 17,
            "secondKey": 13,
            "layout": 6
        },
        {
            "firstKey": 17,
            "secondKey": 14,
            "layout": 2
        },
        {
            "firstKey": 17,
            "secondKey": 15,
            "layout": 2
        },
        {
            "firstKey": 17,
            "secondKey": 16,
            "layout": 1
        },
        {
            "firstKey": 17,
            "secondKey": 18,
            "layout": 3
        },
        {
            "firstKey": 17,
            "secondKey": 19,
            "layout": 3
        },
        {
            "firstKey": 17,
            "secondKey": 20,
            "layout": 3
        },
        {
            "firstKey": 17,
            "secondKey": 21,
            "layout": 3
        },
        {
            "firstKey": 17,
            "secondKey": 22,
            "layout": 3
        },
        {
            "firstKey": 17,
            "secondKey": 23,
            "layout": 3
        },
        {
            "firstKey": 17,
            "secondKey": 24,
            "layout": 3
        },
        {
            "firstKey": 17,
            "secondKey": 25,
            "layout": 3
        },
        {
            "firstKey": 17,
            "secondKey": 26,
            "layout": 3
        },
        {
            "firstKey": 17,
            "secondKey": 27,
            "layout": 3
        },
        {
            "firstKey": 17,
            "secondKey": 28,
            "layout": 3
        },
        {
            "firstKey": 17,
            "secondKey": 29,
            "layout": 3
        },
        {
            "firstKey": 17,
            "secondKey": 30,
            "layout": 3
        },
        {
            "firstKey": 18,
            "secondKey": 0,
            "layout": 8
        },
        {
            "firstKey": 18,
            "secondKey": 1,
            "layout": 8
        },
        {
            "firstKey": 18,
            "secondKey": 2,
            "layout": 8
        },
        {
            "firstKey": 18,
            "secondKey": 3,
            "layout": 8
        },
        {
            "firstKey": 18,
            "secondKey": 4,
            "layout": 7
        },
        {
            "firstKey": 18,
            "secondKey": 5,
            "layout": 7
        },
        {
            "firstKey": 18,
            "secondKey": 6,
            "layout": 7
        },
        {
            "firstKey": 18,
            "secondKey": 7,
            "layout": 7
        },
        {
            "firstKey": 18,
            "secondKey": 8,
            "layout": 7
        },
        {
            "firstKey": 18,
            "secondKey": 9,
            "layout": 7
        },
        {
            "firstKey": 18,
            "secondKey": 10,
            "layout": 7
        },
        {
            "firstKey": 18,
            "secondKey": 11,
            "layout": 7
        },
        {
            "firstKey": 18,
            "secondKey": 12,
            "layout": 7
        },
        {
            "firstKey": 18,
            "secondKey": 13,
            "layout": 7
        },
        {
            "firstKey": 18,
            "secondKey": 14,
            "layout": 4
        },
        {
            "firstKey": 18,
            "secondKey": 15,
            "layout": 4
        },
        {
            "firstKey": 18,
            "secondKey": 16,
            "layout": 4
        },
        {
            "firstKey": 18,
            "secondKey": 17,
            "layout": 4
        },
        {
            "firstKey": 18,
            "secondKey": 19,
            "layout": 2
        },
        {
            "firstKey": 18,
            "secondKey": 20,
            "layout": 3
        },
        {
            "firstKey": 18,
            "secondKey": 21,
            "layout": 3
        },
        {
            "firstKey": 18,
            "secondKey": 22,
            "layout": 3
        },
        {
            "firstKey": 18,
            "secondKey": 23,
            "layout": 3
        },
        {
            "firstKey": 18,
            "secondKey": 24,
            "layout": 3
        },
        {
            "firstKey": 18,
            "secondKey": 25,
            "layout": 3
        },
        {
            "firstKey": 18,
            "secondKey": 26,
            "layout": 3
        },
        {
            "firstKey": 18,
            "secondKey": 27,
            "layout": 3
        },
        {
            "firstKey": 18,
            "secondKey": 28,
            "layout": 3
        },
        {
            "firstKey": 18,
            "secondKey": 29,
            "layout": 3
        },
        {
            "firstKey": 18,
            "secondKey": 30,
            "layout": 3
        },
        {
            "firstKey": 19,
            "secondKey": 0,
            "layout": 8
        },
        {
            "firstKey": 19,
            "secondKey": 1,
            "layout": 8
        },
        {
            "firstKey": 19,
            "secondKey": 2,
            "layout": 8
        },
        {
            "firstKey": 19,
            "secondKey": 3,
            "layout": 8
        },
        {
            "firstKey": 19,
            "secondKey": 4,
            "layout": 7
        },
        {
            "firstKey": 19,
            "secondKey": 5,
            "layout": 7
        },
        {
            "firstKey": 19,
            "secondKey": 6,
            "layout": 7
        },
        {
            "firstKey": 19,
            "secondKey": 7,
            "layout": 7
        },
        {
            "firstKey": 19,
            "secondKey": 8,
            "layout": 7
        },
        {
            "firstKey": 19,
            "secondKey": 9,
            "layout": 7
        },
        {
            "firstKey": 19,
            "secondKey": 10,
            "layout": 7
        },
        {
            "firstKey": 19,
            "secondKey": 11,
            "layout": 7
        },
        {
            "firstKey": 19,
            "secondKey": 12,
            "layout": 7
        },
        {
            "firstKey": 19,
            "secondKey": 13,
            "layout": 7
        },
        {
            "firstKey": 19,
            "secondKey": 14,
            "layout": 4
        },
        {
            "firstKey": 19,
            "secondKey": 15,
            "layout": 4
        },
        {
            "firstKey": 19,
            "secondKey": 16,
            "layout": 4
        },
        {
            "firstKey": 19,
            "secondKey": 17,
            "layout": 4
        },
        {
            "firstKey": 19,
            "secondKey": 18,
            "layout": 2
        },
        {
            "firstKey": 19,
            "secondKey": 20,
            "layout": 3
        },
        {
            "firstKey": 19,
            "secondKey": 21,
            "layout": 3
        },
        {
            "firstKey": 19,
            "secondKey": 22,
            "layout": 3
        },
        {
            "firstKey": 19,
            "secondKey": 23,
            "layout": 3
        },
        {
            "firstKey": 19,
            "secondKey": 24,
            "layout": 3
        },
        {
            "firstKey": 19,
            "secondKey": 25,
            "layout": 3
        },
        {
            "firstKey": 19,
            "secondKey": 26,
            "layout": 3
        },
        {
            "firstKey": 19,
            "secondKey": 27,
            "layout": 3
        },
        {
            "firstKey": 19,
            "secondKey": 28,
            "layout": 3
        },
        {
            "firstKey": 19,
            "secondKey": 29,
            "layout": 3
        },
        {
            "firstKey": 19,
            "secondKey": 30,
            "layout": 3
        },
        {
            "firstKey": 20,
            "secondKey": 0,
            "layout": 11
        },
        {
            "firstKey": 20,
            "secondKey": 1,
            "layout": 11
        },
        {
            "firstKey": 20,
            "secondKey": 2,
            "layout": 11
        },
        {
            "firstKey": 20,
            "secondKey": 3,
            "layout": 11
        },
        {
            "firstKey": 20,
            "secondKey": 4,
            "layout": 10
        },
        {
            "firstKey": 20,
            "secondKey": 5,
            "layout": 10
        },
        {
            "firstKey": 20,
            "secondKey": 6,
            "layout": 10
        },
        {
            "firstKey": 20,
            "secondKey": 7,
            "layout": 10
        },
        {
            "firstKey": 20,
            "secondKey": 8,
            "layout": 10
        },
        {
            "firstKey": 20,
            "secondKey": 9,
            "layout": 10
        },
        {
            "firstKey": 20,
            "secondKey": 10,
            "layout": 10
        },
        {
            "firstKey": 20,
            "secondKey": 11,
            "layout": 10
        },
        {
            "firstKey": 20,
            "secondKey": 12,
            "layout": 10
        },
        {
            "firstKey": 20,
            "secondKey": 13,
            "layout": 10
        },
        {
            "firstKey": 20,
            "secondKey": 14,
            "layout": 7
        },
        {
            "firstKey": 20,
            "secondKey": 15,
            "layout": 7
        },
        {
            "firstKey": 20,
            "secondKey": 16,
            "layout": 7
        },
        {
            "firstKey": 20,
            "secondKey": 17,
            "layout": 7
        },
        {
            "firstKey": 20,
            "secondKey": 18,
            "layout": 6
        },
        {
            "firstKey": 20,
            "secondKey": 19,
            "layout": 6
        },
        {
            "firstKey": 20,
            "secondKey": 21,
            "layout": 2
        },
        {
            "firstKey": 20,
            "secondKey": 22,
            "layout": 4
        },
        {
            "firstKey": 20,
            "secondKey": 23,
            "layout": 4
        },
        {
            "firstKey": 20,
            "secondKey": 24,
            "layout": 4
        },
        {
            "firstKey": 20,
            "secondKey": 25,
            "layout": 4
        },
        {
            "firstKey": 20,
            "secondKey": 26,
            "layout": 5
        },
        {
            "firstKey": 20,
            "secondKey": 27,
            "layout": 5
        },
        {
            "firstKey": 20,
            "secondKey": 28,
            "layout": 5
        },
        {
            "firstKey": 20,
            "secondKey": 29,
            "layout": 5
        },
        {
            "firstKey": 20,
            "secondKey": 30,
            "layout": 5
        },
        {
            "firstKey": 21,
            "secondKey": 0,
            "layout": 11
        },
        {
            "firstKey": 21,
            "secondKey": 1,
            "layout": 11
        },
        {
            "firstKey": 21,
            "secondKey": 2,
            "layout": 11
        },
        {
            "firstKey": 21,
            "secondKey": 3,
            "layout": 11
        },
        {
            "firstKey": 21,
            "secondKey": 4,
            "layout": 10
        },
        {
            "firstKey": 21,
            "secondKey": 5,
            "layout": 10
        },
        {
            "firstKey": 21,
            "secondKey": 6,
            "layout": 10
        },
        {
            "firstKey": 21,
            "secondKey": 7,
            "layout": 10
        },
        {
            "firstKey": 21,
            "secondKey": 8,
            "layout": 10
        },
        {
            "firstKey": 21,
            "secondKey": 9,
            "layout": 10
        },
        {
            "firstKey": 21,
            "secondKey": 10,
            "layout": 10
        },
        {
            "firstKey": 21,
            "secondKey": 11,
            "layout": 10
        },
        {
            "firstKey": 21,
            "secondKey": 12,
            "layout": 10
        },
        {
            "firstKey": 21,
            "secondKey": 13,
            "layout": 10
        },
        {
            "firstKey": 21,
            "secondKey": 14,
            "layout": 7
        },
        {
            "firstKey": 21,
            "secondKey": 15,
            "layout": 7
        },
        {
            "firstKey": 21,
            "secondKey": 16,
            "layout": 7
        },
        {
            "firstKey": 21,
            "secondKey": 17,
            "layout": 7
        },
        {
            "firstKey": 21,
            "secondKey": 18,
            "layout": 6
        },
        {
            "firstKey": 21,
            "secondKey": 19,
            "layout": 6
        },
        {
            "firstKey": 21,
            "secondKey": 20,
            "layout": 2
        },
        {
            "firstKey": 21,
            "secondKey": 22,
            "layout": 4
        },
        {
            "firstKey": 21,
            "secondKey": 23,
            "layout": 4
        },
        {
            "firstKey": 21,
            "secondKey": 24,
            "layout": 4
        },
        {
            "firstKey": 21,
            "secondKey": 25,
            "layout": 4
        },
        {
            "firstKey": 21,
            "secondKey": 26,
            "layout": 5
        },
        {
            "firstKey": 21,
            "secondKey": 27,
            "layout": 5
        },
        {
            "firstKey": 21,
            "secondKey": 28,
            "layout": 5
        },
        {
            "firstKey": 21,
            "secondKey": 29,
            "layout": 5
        },
        {
            "firstKey": 21,
            "secondKey": 30,
            "layout": 5
        },
        {
            "firstKey": 22,
            "secondKey": 0,
            "layout": 11
        },
        {
            "firstKey": 22,
            "secondKey": 1,
            "layout": 11
        },
        {
            "firstKey": 22,
            "secondKey": 2,
            "layout": 11
        },
        {
            "firstKey": 22,
            "secondKey": 3,
            "layout": 11
        },
        {
            "firstKey": 22,
            "secondKey": 4,
            "layout": 10
        },
        {
            "firstKey": 22,
            "secondKey": 5,
            "layout": 10
        },
        {
            "firstKey": 22,
            "secondKey": 6,
            "layout": 10
        },
        {
            "firstKey": 22,
            "secondKey": 7,
            "layout": 10
        },
        {
            "firstKey": 22,
            "secondKey": 8,
            "layout": 10
        },
        {
            "firstKey": 22,
            "secondKey": 9,
            "layout": 10
        },
        {
            "firstKey": 22,
            "secondKey": 10,
            "layout": 10
        },
        {
            "firstKey": 22,
            "secondKey": 11,
            "layout": 10
        },
        {
            "firstKey": 22,
            "secondKey": 12,
            "layout": 10
        },
        {
            "firstKey": 22,
            "secondKey": 13,
            "layout": 10
        },
        {
            "firstKey": 22,
            "secondKey": 14,
            "layout": 7
        },
        {
            "firstKey": 22,
            "secondKey": 15,
            "layout": 7
        },
        {
            "firstKey": 22,
            "secondKey": 16,
            "layout": 7
        },
        {
            "firstKey": 22,
            "secondKey": 17,
            "layout": 7
        },
        {
            "firstKey": 22,
            "secondKey": 18,
            "layout": 6
        },
        {
            "firstKey": 22,
            "secondKey": 19,
            "layout": 6
        },
        {
            "firstKey": 22,
            "secondKey": 20,
            "layout": 4
        },
        {
            "firstKey": 22,
            "secondKey": 21,
            "layout": 4
        },
        {
            "firstKey": 22,
            "secondKey": 23,
            "layout": 2
        },
        {
            "firstKey": 22,
            "secondKey": 24,
            "layout": 4
        },
        {
            "firstKey": 22,
            "secondKey": 25,
            "layout": 4
        },
        {
            "firstKey": 22,
            "secondKey": 26,
            "layout": 5
        },
        {
            "firstKey": 22,
            "secondKey": 27,
            "layout": 5
        },
        {
            "firstKey": 22,
            "secondKey": 28,
            "layout": 5
        },
        {
            "firstKey": 22,
            "secondKey": 29,
            "layout": 5
        },
        {
            "firstKey": 22,
            "secondKey": 30,
            "layout": 5
        },
        {
            "firstKey": 23,
            "secondKey": 0,
            "layout": 11
        },
        {
            "firstKey": 23,
            "secondKey": 1,
            "layout": 11
        },
        {
            "firstKey": 23,
            "secondKey": 2,
            "layout": 11
        },
        {
            "firstKey": 23,
            "secondKey": 3,
            "layout": 11
        },
        {
            "firstKey": 23,
            "secondKey": 4,
            "layout": 10
        },
        {
            "firstKey": 23,
            "secondKey": 5,
            "layout": 10
        },
        {
            "firstKey": 23,
            "secondKey": 6,
            "layout": 10
        },
        {
            "firstKey": 23,
            "secondKey": 7,
            "layout": 10
        },
        {
            "firstKey": 23,
            "secondKey": 8,
            "layout": 10
        },
        {
            "firstKey": 23,
            "secondKey": 9,
            "layout": 10
        },
        {
            "firstKey": 23,
            "secondKey": 10,
            "layout": 10
        },
        {
            "firstKey": 23,
            "secondKey": 11,
            "layout": 10
        },
        {
            "firstKey": 23,
            "secondKey": 12,
            "layout": 10
        },
        {
            "firstKey": 23,
            "secondKey": 13,
            "layout": 10
        },
        {
            "firstKey": 23,
            "secondKey": 14,
            "layout": 7
        },
        {
            "firstKey": 23,
            "secondKey": 15,
            "layout": 7
        },
        {
            "firstKey": 23,
            "secondKey": 16,
            "layout": 7
        },
        {
            "firstKey": 23,
            "secondKey": 17,
            "layout": 7
        },
        {
            "firstKey": 23,
            "secondKey": 18,
            "layout": 6
        },
        {
            "firstKey": 23,
            "secondKey": 19,
            "layout": 6
        },
        {
            "firstKey": 23,
            "secondKey": 20,
            "layout": 4
        },
        {
            "firstKey": 23,
            "secondKey": 21,
            "layout": 4
        },
        {
            "firstKey": 23,
            "secondKey": 22,
            "layout": 2
        },
        {
            "firstKey": 23,
            "secondKey": 24,
            "layout": 4
        },
        {
            "firstKey": 23,
            "secondKey": 25,
            "layout": 4
        },
        {
            "firstKey": 23,
            "secondKey": 26,
            "layout": 5
        },
        {
            "firstKey": 23,
            "secondKey": 27,
            "layout": 5
        },
        {
            "firstKey": 23,
            "secondKey": 28,
            "layout": 5
        },
        {
            "firstKey": 23,
            "secondKey": 29,
            "layout": 5
        },
        {
            "firstKey": 23,
            "secondKey": 30,
            "layout": 5
        },
        {
            "firstKey": 24,
            "secondKey": 0,
            "layout": 11
        },
        {
            "firstKey": 24,
            "secondKey": 1,
            "layout": 11
        },
        {
            "firstKey": 24,
            "secondKey": 2,
            "layout": 11
        },
        {
            "firstKey": 24,
            "secondKey": 3,
            "layout": 11
        },
        {
            "firstKey": 24,
            "secondKey": 4,
            "layout": 10
        },
        {
            "firstKey": 24,
            "secondKey": 5,
            "layout": 10
        },
        {
            "firstKey": 24,
            "secondKey": 6,
            "layout": 10
        },
        {
            "firstKey": 24,
            "secondKey": 7,
            "layout": 10
        },
        {
            "firstKey": 24,
            "secondKey": 8,
            "layout": 10
        },
        {
            "firstKey": 24,
            "secondKey": 9,
            "layout": 10
        },
        {
            "firstKey": 24,
            "secondKey": 10,
            "layout": 10
        },
        {
            "firstKey": 24,
            "secondKey": 11,
            "layout": 10
        },
        {
            "firstKey": 24,
            "secondKey": 12,
            "layout": 10
        },
        {
            "firstKey": 24,
            "secondKey": 13,
            "layout": 10
        },
        {
            "firstKey": 24,
            "secondKey": 14,
            "layout": 7
        },
        {
            "firstKey": 24,
            "secondKey": 15,
            "layout": 7
        },
        {
            "firstKey": 24,
            "secondKey": 16,
            "layout": 7
        },
        {
            "firstKey": 24,
            "secondKey": 17,
            "layout": 7
        },
        {
            "firstKey": 24,
            "secondKey": 18,
            "layout": 6
        },
        {
            "firstKey": 24,
            "secondKey": 19,
            "layout": 6
        },
        {
            "firstKey": 24,
            "secondKey": 20,
            "layout": 4
        },
        {
            "firstKey": 24,
            "secondKey": 21,
            "layout": 4
        },
        {
            "firstKey": 24,
            "secondKey": 22,
            "layout": 4
        },
        {
            "firstKey": 24,
            "secondKey": 23,
            "layout": 4
        },
        {
            "firstKey": 24,
            "secondKey": 25,
            "layout": 1
        },
        {
            "firstKey": 24,
            "secondKey": 26,
            "layout": 5
        },
        {
            "firstKey": 24,
            "secondKey": 27,
            "layout": 5
        },
        {
            "firstKey": 24,
            "secondKey": 28,
            "layout": 5
        },
        {
            "firstKey": 24,
            "secondKey": 29,
            "layout": 5
        },
        {
            "firstKey": 24,
            "secondKey": 30,
            "layout": 5
        },
        {
            "firstKey": 25,
            "secondKey": 0,
            "layout": 11
        },
        {
            "firstKey": 25,
            "secondKey": 1,
            "layout": 11
        },
        {
            "firstKey": 25,
            "secondKey": 2,
            "layout": 11
        },
        {
            "firstKey": 25,
            "secondKey": 3,
            "layout": 11
        },
        {
            "firstKey": 25,
            "secondKey": 4,
            "layout": 10
        },
        {
            "firstKey": 25,
            "secondKey": 5,
            "layout": 10
        },
        {
            "firstKey": 25,
            "secondKey": 6,
            "layout": 10
        },
        {
            "firstKey": 25,
            "secondKey": 7,
            "layout": 10
        },
        {
            "firstKey": 25,
            "secondKey": 8,
            "layout": 10
        },
        {
            "firstKey": 25,
            "secondKey": 9,
            "layout": 10
        },
        {
            "firstKey": 25,
            "secondKey": 10,
            "layout": 10
        },
        {
            "firstKey": 25,
            "secondKey": 11,
            "layout": 10
        },
        {
            "firstKey": 25,
            "secondKey": 12,
            "layout": 10
        },
        {
            "firstKey": 25,
            "secondKey": 13,
            "layout": 10
        },
        {
            "firstKey": 25,
            "secondKey": 14,
            "layout": 7
        },
        {
            "firstKey": 25,
            "secondKey": 15,
            "layout": 7
        },
        {
            "firstKey": 25,
            "secondKey": 16,
            "layout": 7
        },
        {
            "firstKey": 25,
            "secondKey": 17,
            "layout": 7
        },
        {
            "firstKey": 25,
            "secondKey": 18,
            "layout": 6
        },
        {
            "firstKey": 25,
            "secondKey": 19,
            "layout": 6
        },
        {
            "firstKey": 25,
            "secondKey": 20,
            "layout": 4
        },
        {
            "firstKey": 25,
            "secondKey": 21,
            "layout": 4
        },
        {
            "firstKey": 25,
            "secondKey": 22,
            "layout": 4
        },
        {
            "firstKey": 25,
            "secondKey": 23,
            "layout": 4
        },
        {
            "firstKey": 25,
            "secondKey": 24,
            "layout": 1
        },
        {
            "firstKey": 25,
            "secondKey": 26,
            "layout": 5
        },
        {
            "firstKey": 25,
            "secondKey": 27,
            "layout": 5
        },
        {
            "firstKey": 25,
            "secondKey": 28,
            "layout": 5
        },
        {
            "firstKey": 25,
            "secondKey": 29,
            "layout": 5
        },
        {
            "firstKey": 25,
            "secondKey": 30,
            "layout": 5
        },
        {
            "firstKey": 26,
            "secondKey": 0,
            "layout": 11
        },
        {
            "firstKey": 26,
            "secondKey": 1,
            "layout": 11
        },
        {
            "firstKey": 26,
            "secondKey": 2,
            "layout": 11
        },
        {
            "firstKey": 26,
            "secondKey": 3,
            "layout": 11
        },
        {
            "firstKey": 26,
            "secondKey": 4,
            "layout": 10
        },
        {
            "firstKey": 26,
            "secondKey": 5,
            "layout": 10
        },
        {
            "firstKey": 26,
            "secondKey": 6,
            "layout": 10
        },
        {
            "firstKey": 26,
            "secondKey": 7,
            "layout": 10
        },
        {
            "firstKey": 26,
            "secondKey": 8,
            "layout": 10
        },
        {
            "firstKey": 26,
            "secondKey": 9,
            "layout": 10
        },
        {
            "firstKey": 26,
            "secondKey": 10,
            "layout": 10
        },
        {
            "firstKey": 26,
            "secondKey": 11,
            "layout": 10
        },
        {
            "firstKey": 26,
            "secondKey": 12,
            "layout": 10
        },
        {
            "firstKey": 26,
            "secondKey": 13,
            "layout": 10
        },
        {
            "firstKey": 26,
            "secondKey": 14,
            "layout": 7
        },
        {
            "firstKey": 26,
            "secondKey": 15,
            "layout": 7
        },
        {
            "firstKey": 26,
            "secondKey": 16,
            "layout": 7
        },
        {
            "firstKey": 26,
            "secondKey": 17,
            "layout": 7
        },
        {
            "firstKey": 26,
            "secondKey": 18,
            "layout": 6
        },
        {
            "firstKey": 26,
            "secondKey": 19,
            "layout": 6
        },
        {
            "firstKey": 26,
            "secondKey": 20,
            "layout": 5
        },
        {
            "firstKey": 26,
            "secondKey": 21,
            "layout": 5
        },
        {
            "firstKey": 26,
            "secondKey": 22,
            "layout": 5
        },
        {
            "firstKey": 26,
            "secondKey": 23,
            "layout": 5
        },
        {
            "firstKey": 26,
            "secondKey": 24,
            "layout": 5
        },
        {
            "firstKey": 26,
            "secondKey": 25,
            "layout": 5
        },
        {
            "firstKey": 26,
            "secondKey": 27,
            "layout": 1
        },
        {
            "firstKey": 26,
            "secondKey": 28,
            "layout": 5
        },
        {
            "firstKey": 26,
            "secondKey": 29,
            "layout": 5
        },
        {
            "firstKey": 26,
            "secondKey": 30,
            "layout": 5
        },
        {
            "firstKey": 27,
            "secondKey": 0,
            "layout": 11
        },
        {
            "firstKey": 27,
            "secondKey": 1,
            "layout": 11
        },
        {
            "firstKey": 27,
            "secondKey": 2,
            "layout": 11
        },
        {
            "firstKey": 27,
            "secondKey": 3,
            "layout": 11
        },
        {
            "firstKey": 27,
            "secondKey": 4,
            "layout": 10
        },
        {
            "firstKey": 27,
            "secondKey": 5,
            "layout": 10
        },
        {
            "firstKey": 27,
            "secondKey": 6,
            "layout": 10
        },
        {
            "firstKey": 27,
            "secondKey": 7,
            "layout": 10
        },
        {
            "firstKey": 27,
            "secondKey": 8,
            "layout": 10
        },
        {
            "firstKey": 27,
            "secondKey": 9,
            "layout": 10
        },
        {
            "firstKey": 27,
            "secondKey": 10,
            "layout": 10
        },
        {
            "firstKey": 27,
            "secondKey": 11,
            "layout": 10
        },
        {
            "firstKey": 27,
            "secondKey": 12,
            "layout": 10
        },
        {
            "firstKey": 27,
            "secondKey": 13,
            "layout": 10
        },
        {
            "firstKey": 27,
            "secondKey": 14,
            "layout": 7
        },
        {
            "firstKey": 27,
            "secondKey": 15,
            "layout": 7
        },
        {
            "firstKey": 27,
            "secondKey": 16,
            "layout": 7
        },
        {
            "firstKey": 27,
            "secondKey": 17,
            "layout": 7
        },
        {
            "firstKey": 27,
            "secondKey": 18,
            "layout": 6
        },
        {
            "firstKey": 27,
            "secondKey": 19,
            "layout": 6
        },
        {
            "firstKey": 27,
            "secondKey": 20,
            "layout": 5
        },
        {
            "firstKey": 27,
            "secondKey": 21,
            "layout": 5
        },
        {
            "firstKey": 27,
            "secondKey": 22,
            "layout": 5
        },
        {
            "firstKey": 27,
            "secondKey": 23,
            "layout": 5
        },
        {
            "firstKey": 27,
            "secondKey": 24,
            "layout": 5
        },
        {
            "firstKey": 27,
            "secondKey": 25,
            "layout": 5
        },
        {
            "firstKey": 27,
            "secondKey": 26,
            "layout": 1
        },
        {
            "firstKey": 27,
            "secondKey": 28,
            "layout": 5
        },
        {
            "firstKey": 27,
            "secondKey": 29,
            "layout": 5
        },
        {
            "firstKey": 27,
            "secondKey": 30,
            "layout": 5
        },
        {
            "firstKey": 28,
            "secondKey": 0,
            "layout": 8
        },
        {
            "firstKey": 28,
            "secondKey": 1,
            "layout": 8
        },
        {
            "firstKey": 28,
            "secondKey": 2,
            "layout": 8
        },
        {
            "firstKey": 28,
            "secondKey": 3,
            "layout": 8
        },
        {
            "firstKey": 28,
            "secondKey": 4,
            "layout": 7
        },
        {
            "firstKey": 28,
            "secondKey": 5,
            "layout": 7
        },
        {
            "firstKey": 28,
            "secondKey": 6,
            "layout": 7
        },
        {
            "firstKey": 28,
            "secondKey": 7,
            "layout": 7
        },
        {
            "firstKey": 28,
            "secondKey": 8,
            "layout": 7
        },
        {
            "firstKey": 28,
            "secondKey": 9,
            "layout": 7
        },
        {
            "firstKey": 28,
            "secondKey": 10,
            "layout": 7
        },
        {
            "firstKey": 28,
            "secondKey": 11,
            "layout": 7
        },
        {
            "firstKey": 28,
            "secondKey": 12,
            "layout": 7
        },
        {
            "firstKey": 28,
            "secondKey": 13,
            "layout": 7
        },
        {
            "firstKey": 28,
            "secondKey": 14,
            "layout": 4
        },
        {
            "firstKey": 28,
            "secondKey": 15,
            "layout": 4
        },
        {
            "firstKey": 28,
            "secondKey": 16,
            "layout": 4
        },
        {
            "firstKey": 28,
            "secondKey": 17,
            "layout": 4
        },
        {
            "firstKey": 28,
            "secondKey": 18,
            "layout": 3
        },
        {
            "firstKey": 28,
            "secondKey": 19,
            "layout": 3
        },
        {
            "firstKey": 28,
            "secondKey": 20,
            "layout": 2
        },
        {
            "firstKey": 28,
            "secondKey": 21,
            "layout": 2
        },
        {
            "firstKey": 28,
            "secondKey": 22,
            "layout": 2
        },
        {
            "firstKey": 28,
            "secondKey": 23,
            "layout": 2
        },
        {
            "firstKey": 28,
            "secondKey": 24,
            "layout": 2
        },
        {
            "firstKey": 28,
            "secondKey": 25,
            "layout": 2
        },
        {
            "firstKey": 28,
            "secondKey": 26,
            "layout": 2
        },
        {
            "firstKey": 28,
            "secondKey": 27,
            "layout": 2
        },
        {
            "firstKey": 28,
            "secondKey": 29,
            "layout": 1
        },
        {
            "firstKey": 28,
            "secondKey": 30,
            "layout": 1
        },
        {
            "firstKey": 29,
            "secondKey": 0,
            "layout": 16
        },
        {
            "firstKey": 29,
            "secondKey": 1,
            "layout": 16
        },
        {
            "firstKey": 29,
            "secondKey": 2,
            "layout": 16
        },
        {
            "firstKey": 29,
            "secondKey": 3,
            "layout": 16
        },
        {
            "firstKey": 29,
            "secondKey": 4,
            "layout": 15
        },
        {
            "firstKey": 29,
            "secondKey": 5,
            "layout": 15
        },
        {
            "firstKey": 29,
            "secondKey": 6,
            "layout": 15
        },
        {
            "firstKey": 29,
            "secondKey": 7,
            "layout": 15
        },
        {
            "firstKey": 29,
            "secondKey": 8,
            "layout": 15
        },
        {
            "firstKey": 29,
            "secondKey": 9,
            "layout": 15
        },
        {
            "firstKey": 29,
            "secondKey": 10,
            "layout": 15
        },
        {
            "firstKey": 29,
            "secondKey": 11,
            "layout": 15
        },
        {
            "firstKey": 29,
            "secondKey": 12,
            "layout": 15
        },
        {
            "firstKey": 29,
            "secondKey": 13,
            "layout": 15
        },
        {
            "firstKey": 29,
            "secondKey": 14,
            "layout": 12
        },
        {
            "firstKey": 29,
            "secondKey": 15,
            "layout": 12
        },
        {
            "firstKey": 29,
            "secondKey": 16,
            "layout": 12
        },
        {
            "firstKey": 29,
            "secondKey": 17,
            "layout": 12
        },
        {
            "firstKey": 29,
            "secondKey": 18,
            "layout": 11
        },
        {
            "firstKey": 29,
            "secondKey": 19,
            "layout": 11
        },
        {
            "firstKey": 29,
            "secondKey": 20,
            "layout": 10
        },
        {
            "firstKey": 29,
            "secondKey": 21,
            "layout": 10
        },
        {
            "firstKey": 29,
            "secondKey": 22,
            "layout": 10
        },
        {
            "firstKey": 29,
            "secondKey": 23,
            "layout": 10
        },
        {
            "firstKey": 29,
            "secondKey": 24,
            "layout": 10
        },
        {
            "firstKey": 29,
            "secondKey": 25,
            "layout": 10
        },
        {
            "firstKey": 29,
            "secondKey": 26,
            "layout": 10
        },
        {
            "firstKey": 29,
            "secondKey": 27,
            "layout": 10
        },
        {
            "firstKey": 29,
            "secondKey": 28,
            "layout": 9
        },
        {
            "firstKey": 29,
            "secondKey": 30,
            "layout": 1
        },
        {
            "firstKey": 30,
            "secondKey": 0,
            "layout": 17
        },
        {
            "firstKey": 30,
            "secondKey": 1,
            "layout": 17
        },
        {
            "firstKey": 30,
            "secondKey": 2,
            "layout": 17
        },
        {
            "firstKey": 30,
            "secondKey": 3,
            "layout": 17
        },
        {
            "firstKey": 30,
            "secondKey": 4,
            "layout": 16
        },
        {
            "firstKey": 30,
            "secondKey": 5,
            "layout": 16
        },
        {
            "firstKey": 30,
            "secondKey": 6,
            "layout": 16
        },
        {
            "firstKey": 30,
            "secondKey": 7,
            "layout": 16
        },
        {
            "firstKey": 30,
            "secondKey": 8,
            "layout": 16
        },
        {
            "firstKey": 30,
            "secondKey": 9,
            "layout": 16
        },
        {
            "firstKey": 30,
            "secondKey": 10,
            "layout": 16
        },
        {
            "firstKey": 30,
            "secondKey": 11,
            "layout": 16
        },
        {
            "firstKey": 30,
            "secondKey": 12,
            "layout": 16
        },
        {
            "firstKey": 30,
            "secondKey": 13,
            "layout": 16
        },
        {
            "firstKey": 30,
            "secondKey": 14,
            "layout": 13
        },
        {
            "firstKey": 30,
            "secondKey": 15,
            "layout": 13
        },
        {
            "firstKey": 30,
            "secondKey": 16,
            "layout": 13
        },
        {
            "firstKey": 30,
            "secondKey": 17,
            "layout": 13
        },
        {
            "firstKey": 30,
            "secondKey": 18,
            "layout": 12
        },
        {
            "firstKey": 30,
            "secondKey": 19,
            "layout": 12
        },
        {
            "firstKey": 30,
            "secondKey": 20,
            "layout": 11
        },
        {
            "firstKey": 30,
            "secondKey": 21,
            "layout": 11
        },
        {
            "firstKey": 30,
            "secondKey": 22,
            "layout": 11
        },
        {
            "firstKey": 30,
            "secondKey": 23,
            "layout": 11
        },
        {
            "firstKey": 30,
            "secondKey": 24,
            "layout": 11
        },
        {
            "firstKey": 30,
            "secondKey": 25,
            "layout": 11
        },
        {
            "firstKey": 30,
            "secondKey": 26,
            "layout": 11
        },
        {
            "firstKey": 30,
            "secondKey": 27,
            "layout": 11
        },
        {
            "firstKey": 30,
            "secondKey": 28,
            "layout": 10
        },
        {
            "firstKey": 30,
            "secondKey": 29,
            "layout": 2
        }
    ]
}