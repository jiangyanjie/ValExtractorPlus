9f77a6dff067df4f01b7edd91afe4444a9c9b1d3###/testcontainers_testcontainers-java/core/src/main/java/org/testcontainers/dockerclient/DockerClientProviderStrategy.java###/DockerClientProviderStrategy.java###org.testcontainers.dockerclient.DockerClientProviderStrategy###getFirstValidStrategy:List<DockerClientProviderStrategy> ###returnStream.concat(Stream.of(TestcontainersConfiguration.getInstance().getDockerClientStrategyClassName()).filter(Objects::nonNull).flatMap(it->{try{Class<?extendsDockerClientProviderStrategy>strategyClass=(Class)Thread.currentThread().getContextClassLoader().loadClass(it);returnStream.of(strategyClass.newInstance());}catch(ClassNotFoundExceptione){log.warn("Can'tinstantiateastrategyfrom{}(ClassNotFoundException)."+"Thisprobablymeansthatcachedconfigurationreferstoaclientprovider"+"classthatisnotavailableinthisversionofTestcontainers.Other"+"strategieswillbetriedinstead.",it);returnStream.empty();}catch(InstantiationException|IllegalAccessExceptione){log.warn("Can'tinstantiateastrategyfrom{}",it,e);returnStream.empty();}}).filter(DockerClientProviderStrategy::isPersistable).peek(strategy->log.info("Loaded{}from~/.testcontainers.properties,willtryitfirst",strategy.getClass().getName())),strategies.stream().filter(DockerClientProviderStrategy::isApplicable).sorted(Comparator.comparing(DockerClientProviderStrategy::getPriority).reversed())).flatMap(strategy->{try{DockerClientdockerClient=strategy.getDockerClient();Infoinfo;try{info=Unreliables.retryUntilSuccess(30,TimeUnit.SECONDS,()->{returnstrategy.PING_RATE_LIMITER.getWhenReady(()->{log.debug("Pingingdockerdaemon...");returndockerClient.infoCmd().exec();});});}catch(TimeoutExceptione){IOUtils.closeQuietly(dockerClient);throwe;}log.info("FoundDockerenvironmentwith{}",strategy.getDescription());log.debug("Transporttype:'{}',Dockerhost:'{}'",TestcontainersConfiguration.getInstance().getTransportType(),strategy.getTransportConfig().getDockerHost());log.debug("CheckingDockerOStypefor{}",strategy.getDescription());StringosType=info.getOsType();if(StringUtils.isBlank(osType)){log.warn("CouldnotdetermineDockerOStype");}elseif(!osType.equals("linux")){log.warn("{}iscurrentlynotsupported",osType);thrownewInvalidConfigurationException(osType+"containersarecurrentlynotsupported");}if(strategy.isPersistable()){TestcontainersConfiguration.getInstance().updateUserConfig("docker.client.strategy",strategy.getClass().getName());}returnStream.of(strategy);}catch(Exception|ExceptionInInitializerError|NoClassDefFoundErrore){@NullableStringthrowableMessage=e.getMessage();@SuppressWarnings("ThrowableResultOfMethodCallIgnored")ThrowablerootCause=Throwables.getRootCause(e);@NullableStringrootCauseMessage=rootCause.getMessage();StringfailureDescription;if(throwableMessage!=null&&throwableMessage.equals(rootCauseMessage)){failureDescription=String.format("%s:failedwithexception%s(%s)",strategy.getClass().getSimpleName(),e.getClass().getSimpleName(),throwableMessage);}else{failureDescription=String.format("%s:failedwithexception%s(%s).Rootcause%s(%s)",strategy.getClass().getSimpleName(),e.getClass().getSimpleName(),throwableMessage,rootCause.getClass().getSimpleName(),rootCauseMessage);}configurationFailures.add(failureDescription);log.debug(failureDescription);returnStream.empty();}}).findAny().orElseThrow(()->{log.error("CouldnotfindavalidDockerenvironment.Pleasecheckconfiguration.Attemptedconfigurationswere:");for(StringfailureMessage:configurationFailures){log.error(""+failureMessage);}log.error("Asnovalidconfigurationwasfound,executioncannotcontinue");FAIL_FAST_ALWAYS.set(true);returnnewIllegalStateException("CouldnotfindavalidDockerenvironment.Pleaseseelogsandcheckconfiguration");});###dockerClientStrategyClassName###TestcontainersConfiguration.getInstance().getDockerClientStrategyClassName()###114:9:216:20
c3a8ca76d0ed69f71c94e5bc2f7f1e0eef1a2259###/testcontainers_testcontainers-java/core/src/main/java/org/testcontainers/dockerclient/DockerClientProviderStrategy.java###/DockerClientProviderStrategy.java###org.testcontainers.dockerclient.DockerClientProviderStrategy###getClientForConfig:TransportConfig ###returnDockerClientImpl.getInstance(newAuthDelegatingDockerClientConfig(DefaultDockerClientConfig.createDefaultConfigBuilder().withDockerHost(transportConfig.getDockerHost().toString()).build()),dockerHttpClient);###configBuilder###DefaultDockerClientConfig.createDefaultConfigBuilder()###239:9:246:11
16c82a4ab24b2a4b9d530ccd566d3ee386a92e9c###/testcontainers_testcontainers-java/modules/mockserver/src/test/java/org/testcontainers/containers/MockServerContainerTest.java###/MockServerContainerTest.java###org.testcontainers.containers.MockServerContainerTest###shouldCallActualMockserverVersion:###newMockServerClient(mockServer.getHost(),mockServer.getServerPort()).when(request().withPath("/hello")).respond(response().withBody(expectedBody));###client###newMockServerClient(mockServer.getHost(),mockServer.getServerPort())###63:13:65:61
d5f15774187eac4e83346cb59fb00197f07ac5c4###/testcontainers_testcontainers-java/core/src/main/java/org/testcontainers/utility/RegistryAuthLocator.java###/RegistryAuthLocator.java###org.testcontainers.utility.RegistryAuthLocator###runCredentialProvider:String String ###returnnewAuthConfig().withRegistryAddress(helperResponse.at("/ServerURL").asText()).withUsername(helperResponse.at("/Username").asText()).withPassword(helperResponse.at("/Secret").asText());###username###helperResponse.at("/Username").asText()###254:9:257:66
fa2404edb3bf35ba21d7b54fd3fca6d28ed09c06###/testcontainers_testcontainers-java/core/src/main/java/org/testcontainers/utility/ResourceReaper.java###/ResourceReaper.java###org.testcontainers.utility.ResourceReaper###start:String DockerClient ###ryukLog.append(newString(frame.getPayload(),StandardCharsets.UTF_8));###payload###newString(frame.getPayload(),StandardCharsets.UTF_8)###106:21:106:92
257c89bea35901e4318704e883d27c08437d8911###/testcontainers_testcontainers-java/core/src/test/java/org/testcontainers/DockerClientFactoryTest.java###/DockerClientFactoryTest.java###org.testcontainers.DockerClientFactoryTest###failedChecksFailFast:###assertThat(DockerClientFactory.instance().client()).isNotNull();###instance###DockerClientFactory.instance()###71:9:71:73
62d646afbd3aa28da11ce572146b2ebafe71d942###/testcontainers_testcontainers-java/core/src/main/java/org/testcontainers/images/RemoteDockerImage.java###/RemoteDockerImage.java###org.testcontainers.images.RemoteDockerImage###resolve:###thrownewContainerFetchException("Failedtopullimage:"+imageName,e);###lastFailure###e###89:17:89:92
49a103ce6272a51c29119f19951e1d3c92d2ba1d###/testcontainers_testcontainers-java/core/src/main/java/org/testcontainers/containers/wait/internal/InternalCommandPortListeningCheck.java###/InternalCommandPortListeningCheck.java###org.testcontainers.containers.wait.internal.InternalCommandPortListeningCheck###call:###returnresult.getExitCode()==0;###exitCode###result.getExitCode()###44:13:44:46
12de2b407238835bdc06169a6ac4b7bdcc98e028###/testcontainers_testcontainers-java/modules/localstack/src/test/java/org/testcontainers/containers/localstack/LocalstackContainerTest.java###/LocalstackContainerTest.java###org.testcontainers.containers.localstack.LocalstackContainerTest.WithoutNetwork###s3TestOverBridgeNetwork:###s3.createBucket("foo");###bucketName###"foo"###70:13:70:36
b0dbd3190e20a09ed3d0030d3cf23174190c82f1###/testcontainers_testcontainers-java/modules/selenium/src/test/java/org/testcontainers/junit/ChromeRecordingWebDriverContainerTest.java###/ChromeRecordingWebDriverContainerTest.java###org.testcontainers.junit.ChromeRecordingWebDriverContainerTest.ChromeThatRecordsAllTests###recordingTestThatShouldBeRecordedAndRetained:###try(BrowserWebDriverContainerchrome=newBrowserWebDriverContainer().withCapabilities(newChromeOptions()).withRecordingMode(RECORD_ALL,vncRecordingDirectory.getRoot()).withRecordingFileFactory(newDefaultRecordingFileFactory()))###target###vncRecordingDirectory.getRoot()###29:13:52:14
d3e6aeafcdd880a49bde5ffdafdd77e0c3209d52###/testcontainers_testcontainers-java/core/src/main/java/org/testcontainers/containers/DockerComposeContainer.java###/DockerComposeContainer.java###org.testcontainers.containers.DockerComposeContainer###getServicePort:String Integer ###returnambassadorContainer.getMappedPort(ambassadorPortMappings.get(getServiceInstanceName(serviceName)).get(servicePort));###portMap###ambassadorPortMappings.get(getServiceInstanceName(serviceName))###450:9:450:132
780b8e33811f046e64c7cdf6a25b49fb0fe79ce8###/testcontainers_testcontainers-java/core/src/main/java/org/testcontainers/containers/ContainerState.java###/ContainerState.java###org.testcontainers.containers.ContainerState###copyFileFromContainer:String ThrowingFunction<InputStream,T> ###try(DockerClientdockerClient=DockerClientFactory.instance().client();InputStreaminputStream=dockerClient.copyArchiveFromContainerCmd(getContainerId(),containerPath).exec();TarArchiveInputStreamtarInputStream=newTarArchiveInputStream(inputStream))###dockerClient###DockerClientFactory.instance().client()###313:9:320:10
7e5adade117e94ac0ed4e825b35ac0bdaf45c8fa###/testcontainers_testcontainers-java/core/src/test/java/org/testcontainers/containers/ReusabilityUnitTests.java###/ReusabilityUnitTests.java###org.testcontainers.containers.ReusabilityUnitTests.HashTest###shouldReuseIfListReturnsID:###when(client.createContainerCmd(any())).then(createContainerAnswer(randomContainerId()));###containerId###randomContainerId()###146:13:146:101
5d6c7f59f824ae8504eb4b82aac1cc4a8c61fd09###/testcontainers_testcontainers-java/core/src/main/java/org/testcontainers/containers/wait/strategy/HttpWaitStrategy.java###/HttpWaitStrategy.java###org.testcontainers.containers.wait.strategy.HttpWaitStrategy###waitUntilReady:###finalStringuri=buildLivenessUri(livenessCheckPort).toString();###rawUri###buildLivenessUri(livenessCheckPort)###153:9:153:75
055f78323f584a9f8b3248196d5ca99fd3cc454f###/testcontainers_testcontainers-java/core/src/main/java/org/testcontainers/containers/DockerComposeContainer.java###/DockerComposeContainer.java###org.testcontainers.containers.DockerComposeContainer###stop:###runWithCompose("down-v");###cmd###"down-v"###329:21:329:47
3dc9d9dc3a1d03b87707d6bff6a95e0fbf0a4510###/testcontainers_testcontainers-java/modules/jdbc-test/src/test/java/org/testcontainers/jdbc/JDBCDriverTest.java###/JDBCDriverTest.java###org.testcontainers.jdbc.JDBCDriverTest###performSimpleTest:HikariDataSource ###booleanresult=newQueryRunner(dataSource,options.contains(Options.PmdKnownBroken)).query("SELECT1",rs->{rs.next();intresultSetInt=rs.getInt(1);assertEquals("AbasicSELECTquerysucceeds",1,resultSetInt);returntrue;});###query###"SELECT1"###112:9:117:12
71d2c1ec3e67a177a45cc568885234d39349a2f3###/testcontainers_testcontainers-java/modules/selenium/src/test/java/org/testcontainers/junit/BaseWebDriverContainerTest.java###/BaseWebDriverContainerTest.java###org.testcontainers.junit.BaseWebDriverContainerTest###doSimpleWebdriverTest:BrowserWebDriverContainer ###driver.findElement(By.name("q")).sendKeys("testcontainers");###search###driver.findElement(By.name("q"))###26:9:26:69
8f13e420f4d8934ad4c39b4104df1dac571b88a7###/testcontainers_testcontainers-java/core/src/main/java/org/testcontainers/containers/wait/strategy/HttpWaitStrategy.java###/HttpWaitStrategy.java###org.testcontainers.containers.wait.strategy.HttpWaitStrategy###waitUntilReady:###finalStringuri=buildLivenessUri(livenessCheckPort).toString();###rawUri###buildLivenessUri(livenessCheckPort)###165:9:165:75
b788c4e468281b74b1ec5faaaad77b9357760c04###/testcontainers_testcontainers-java/modules/jdbc-test/src/test/java/org/testcontainers/jdbc/JDBCDriverTest.java###/JDBCDriverTest.java###org.testcontainers.jdbc.JDBCDriverTest###performSimpleTest:String ###booleanresult=newQueryRunner(dataSource,options.contains(Options.PmdKnownBroken)).query("SELECT1",rs->{rs.next();intresultSetInt=rs.getInt(1);assertEquals("AbasicSELECTquerysucceeds",1,resultSetInt);returntrue;});###query###"SELECT1"###114:13:119:16
b788c4e468281b74b1ec5faaaad77b9357760c04###/testcontainers_testcontainers-java/core/src/main/java/org/testcontainers/containers/DockerComposeContainer.java###/DockerComposeContainer.java###org.testcontainers.containers.DockerComposeContainer###stop:###runWithCompose("down-v");###cmd###"down-v"###258:21:258:47
d5f15774187eac4e83346cb59fb00197f07ac5c4###/testcontainers_testcontainers-java/core/src/main/java/org/testcontainers/utility/RegistryAuthLocator.java###/RegistryAuthLocator.java###org.testcontainers.utility.RegistryAuthLocator###runCredentialProvider:String String ###returnnewAuthConfig().withRegistryAddress(helperResponse.at("/ServerURL").asText()).withUsername(helperResponse.at("/Username").asText()).withPassword(helperResponse.at("/Secret").asText());###password###helperResponse.at("/Secret").asText()###254:9:257:66
055f78323f584a9f8b3248196d5ca99fd3cc454f###/testcontainers_testcontainers-java/core/src/main/java/org/testcontainers/containers/DockerComposeContainer.java###/DockerComposeContainer.java###org.testcontainers.containers.DockerComposeContainer###createServices:###runWithCompose("up-d");###command###"up-d"###174:13:174:37
b788c4e468281b74b1ec5faaaad77b9357760c04###/testcontainers_testcontainers-java/core/src/main/java/org/testcontainers/utility/RegistryAuthLocator.java###/RegistryAuthLocator.java###org.testcontainers.utility.RegistryAuthLocator###runCredentialProvider:String String ###returnnewAuthConfig().withRegistryAddress(helperResponse.at("/ServerURL").asText()).withUsername(helperResponse.at("/Username").asText()).withPassword(helperResponse.at("/Secret").asText());###password###helperResponse.at("/Secret").asText()###250:9:253:66
f1565f1ba842ccfa9d8ed9ee00276f38b7a2546f###/testcontainers_testcontainers-java/modules/jdbc/src/main/java/org/testcontainers/containers/JdbcDatabaseContainer.java###/JdbcDatabaseContainer.java###org.testcontainers.containers.JdbcDatabaseContainer###createConnection:String ###thrownewSQLException("Couldnotcreatenewconnection",e);###lastException###e###194:13:194:74
71314ab78f7105a939d257e05ea2b335dfba7dbf###/testcontainers_testcontainers-java/core/src/main/java/org/testcontainers/DockerClientFactory.java###/DockerClientFactory.java###org.testcontainers.DockerClientFactory###checkAndPullImage:DockerClient String ###client.pullImageCmd(image).exec(newTimeLimitedLoggedPullImageResultCallback(log)).awaitCompletion();###pullImageCmd###client.pullImageCmd(image)###334:13:334:114
706a6697408ef3c9ca98e5d7ab559e4ccfdf8cff###/testcontainers_testcontainers-java/core/src/main/java/org/testcontainers/dockerclient/RootlessDockerClientProviderStrategy.java###/RootlessDockerClientProviderStrategy.java###org.testcontainers.dockerclient.RootlessDockerClientProviderStrategy###getSocketPath:###returnPaths.get(xdgRuntimeDir).resolve("docker.sock");###path###Paths.get(xdgRuntimeDir)###26:9:26:64
84c8d1e290b6f2c5be00477cc67d85dc5ac3b26c###/testcontainers_testcontainers-java/modules/junit-jupiter/src/main/java/org/testcontainers/junit/jupiter/TestcontainersExtension.java###/TestcontainersExtension.java###org.testcontainers.junit.jupiter.TestcontainersExtension###beforeEach:ExtensionContext ###context.getStore(NAMESPACE).getOrComputeIfAbsent(adapter.getKey(),k->adapter.start())###store###context.getStore(NAMESPACE)###49:33:50:78
b788c4e468281b74b1ec5faaaad77b9357760c04###/testcontainers_testcontainers-java/core/src/main/java/org/testcontainers/utility/RegistryAuthLocator.java###/RegistryAuthLocator.java###org.testcontainers.utility.RegistryAuthLocator###runCredentialProvider:String String ###returnnewAuthConfig().withRegistryAddress(helperResponse.at("/ServerURL").asText()).withUsername(helperResponse.at("/Username").asText()).withPassword(helperResponse.at("/Secret").asText());###username###helperResponse.at("/Username").asText()###250:9:253:66
3394c7c984eab6b8ae4f208c0cabaa5b4a097d89###/testcontainers_testcontainers-java/modules/localstack/src/test/java/org/testcontainers/containers/localstack/LocalstackContainerTest.java###/LocalstackContainerTest.java###org.testcontainers.containers.localstack.LocalstackContainerTest.WithoutNetwork###s3TestOverBridgeNetwork:###s3.createBucket("foo");###bucketName###"foo"###62:13:62:36
500fd7404c07712c1f8af2d5f6ba51a048b9f6da###/testcontainers_testcontainers-java/core/src/main/java/org/testcontainers/containers/DockerComposeContainer.java###/DockerComposeContainer.java###org.testcontainers.containers.DockerComposeContainer###getServicePort:String Integer ###returnambassadorContainer.getMappedPort(ambassadorPortMappings.get(getServiceInstanceName(serviceName)).get(servicePort));###portMap###ambassadorPortMappings.get(getServiceInstanceName(serviceName))###388:9:388:132
84c8d1e290b6f2c5be00477cc67d85dc5ac3b26c###/testcontainers_testcontainers-java/modules/junit-jupiter/src/main/java/org/testcontainers/junit/jupiter/TestcontainersExtension.java###/TestcontainersExtension.java###org.testcontainers.junit.jupiter.TestcontainersExtension###beforeAll:ExtensionContext ###findSharedContainers(testClass).forEach(adapter->store.getOrComputeIfAbsent(adapter.getKey(),k->adapter.start()));###sharedContainersStoreAdapters###findSharedContainers(testClass)###40:9:41:101
71314ab78f7105a939d257e05ea2b335dfba7dbf###/testcontainers_testcontainers-java/core/src/main/java/org/testcontainers/images/RemoteDockerImage.java###/RemoteDockerImage.java###org.testcontainers.images.RemoteDockerImage###resolve:###dockerClient.pullImageCmd(imageName.getUnversionedPart()).withTag(imageName.getVersionPart()).exec(newTimeLimitedLoggedPullImageResultCallback(logger)).awaitCompletion();###pullImageCmd###dockerClient.pullImageCmd(imageName.getUnversionedPart()).withTag(imageName.getVersionPart())###78:21:82:44
