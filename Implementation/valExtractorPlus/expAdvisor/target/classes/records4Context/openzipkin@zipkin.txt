b0f22b5bd0f29dd1539cb797129fb1d61dd7b3de###/openzipkin_zipkin/zipkin/src/main/java/zipkin/Span.java###/Span.java###zipkin.Span###idString:###writeHexLong(result,0,traceId);###pos###0###382:5:382:38
eeb17681af780e563b44503d5af1eadb3ca6abfc###/openzipkin_zipkin/zipkin-storage/cassandra-v1/src/main/java/zipkin2/storage/cassandra/v1/SelectTraceIdIndex.java###/SelectTraceIdIndex.java###zipkin2.storage.cassandra.v1.SelectTraceIdIndex###newFuture:###Statementbound=factory.bindPartitionKey(factory.preparedStatement.bind(),input.partitionKey()).setBytesUnsafe(1,TimestampCodec.serialize(input.start_ts())).setBytesUnsafe(2,TimestampCodec.serialize(input.end_ts())).setInt(3,input.limit_()).setFetchSize(Integer.MAX_VALUE);###bound###factory.preparedStatement.bind()###94:5:99:42
78ca75121d30ce631a9e8016e57c1793fd831c63###/openzipkin_zipkin/zipkin-storage/elasticsearch/src/test/java/zipkin2/elasticsearch/ElasticsearchStorageTest.java###/ElasticsearchStorageTest.java###zipkin2.elasticsearch.ElasticsearchStorageTest###check_unauthorized:###assertThat(storage.check().ok()).isFalse();###result###storage.check()###161:5:161:48
0cda9d39fb31ed407563c3aaaa0a6307a1c8c390###/openzipkin_zipkin/zipkin-storage/mysql/src/main/java/zipkin/storage/mysql/DependencyLinkV2SpanIterator.java###/DependencyLinkV2SpanIterator.java###zipkin.storage.mysql.DependencyLinkV2SpanIterator###next:###returnresult.kind(csService!=null?Span.Kind.CLIENT:null).localEndpoint(ep(caService)).remoteEndpoint(ep(saService)).build();###localEndpoint###ep(caService)###154:7:158:18
068d0f0f668384987741f077f81a119ac095ee29###/openzipkin_zipkin/zipkin-java-core/src/main/java/io/zipkin/QueryRequest.java###/QueryRequest.java###io.zipkin.QueryRequest.Builder###build:###returnnewQueryRequest(serviceName,spanName,annotations,binaryAnnotations,endTs==null?System.currentTimeMillis()*1000:endTs,limit==null?10:limit);###selectedEndTs###endTs==null?System.currentTimeMillis()*1000:endTs###134:7:140:39
dc9de8ba44ef6dd65efa5e298e175bae06e12cbf###/openzipkin_zipkin/zipkin/src/main/java/zipkin/internal/DetectingSpanDecoder.java###/DetectingSpanDecoder.java###zipkin.internal.DetectingSpanDecoder###readSpan:byte[] ###returndetectJsonFormat(span).readSpan(span);###decoder###detectJsonFormat(span)###36:7:36:52
1997326e277e4fb39d5c7999ab9c2a500c89e55f###/openzipkin_zipkin/zipkin-server/src/main/java/zipkin/server/ZipkinHttpCollector.java###/ZipkinHttpCollector.java###zipkin.server.ZipkinHttpCollector###gunzip:byte[] ###outputStream.write(GZIP_BUFFER.get(),0,count);###buf###GZIP_BUFFER.get()###115:9:115:57
12cae10958370b64fbbc450ae31c1a0a642114f4###/openzipkin_zipkin/zipkin-storage/cassandra/src/test/java/zipkin2/storage/cassandra/CassandraUtilTest.java###/CassandraUtilTest.java###zipkin2.storage.cassandra.CassandraUtilTest###annotationKeys_emptyRequest:###assertThat(CassandraUtil.annotationKeys(QueryRequest.newBuilder().endTs(System.currentTimeMillis()).limit(10).serviceName("test").lookback(86400000L).build())).isEmpty();###request###QueryRequest.newBuilder().endTs(System.currentTimeMillis()).limit(10).serviceName("test").lookback(86400000L).build()###34:5:42:20
5403c54eb34b5fcb26ad1126826af370810c65d7###/openzipkin_zipkin/zipkin-server/src/main/java/zipkin/server/ZipkinServer.java###/ZipkinServer.java###zipkin.server.ZipkinServer###main:String[] ###newSpringApplicationBuilder(ZipkinServer.class).banner(newZipkinBanner()).properties(EnableAutoConfiguration.ENABLED_OVERRIDE_PROPERTY+"=false","spring.config.name=zipkin-server").run(args);###builder###newSpringApplicationBuilder(ZipkinServer.class).banner(newZipkinBanner()).properties(EnableAutoConfiguration.ENABLED_OVERRIDE_PROPERTY+"=false","spring.config.name=zipkin-server")###46:5:50:55
ff4c073df242c93e8f6f65b6d757e74e4e5a2114###/openzipkin_zipkin/zipkin-java-core/src/main/java/io/zipkin/internal/CorrectForClockSkew.java###/CorrectForClockSkew.java###io.zipkin.internal.CorrectForClockSkew###adjustTimestamps:Span ClockSkew ###for(inti=0;i<span.annotations.size();i++)###length###span.annotations.size()###79:5:86:6
fd0376cdc4704053169901f4a18f9a125092f68b###/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/elasticsearch/LazyHttpClientImpl.java###/LazyHttpClientImpl.java###zipkin2.server.internal.elasticsearch.LazyHttpClientImpl###getEndpoint:###thrownewIllegalStateException("couldn'tconnectanyof"+endpointGroup.endpoints(),e);###thrown###e###90:9:90:100
eec7240bfa9fddbc286330707ecbda66a7175a5c###/openzipkin_zipkin/zipkin-java-core/src/main/java/io/zipkin/internal/JsonCodec.java###/JsonCodec.java###io.zipkin.internal.JsonCodec.ENDPOINT_ADAPTER.new JsonAdapter<Endpoint>###toJson:JsonWriter Endpoint ###writer.name("port").value(value.port&0xffff);###port###value.port&0xffff###110:9:110:56
8a6ae58ff09c7b227b8cdf403b0950e5b137edf2###/openzipkin_zipkin/zipkin2/src/main/java/zipkin2/internal/V2SpanWriter.java###/V2SpanWriter.java###zipkin2.internal.V2SpanWriter###writeEndpoint:Endpoint Buffer ###b.writeUtf8(jsonEscape(value.serviceName())).writeByte('"');###serviceName###value.serviceName()###175:7:175:67
78ca75121d30ce631a9e8016e57c1793fd831c63###/openzipkin_zipkin/zipkin-storage/elasticsearch/src/main/java/zipkin2/elasticsearch/internal/client/HttpCall.java###/HttpCall.java###zipkin2.elasticsearch.internal.client.HttpCall###parseResponse:AggregatedHttpResponse BodyConverter<V> ###if(response.status().codeClass().equals(HttpStatusClass.SUCCESS))###status###response.status()###130:7:134:8
ca0fc405b789434867b7382dcc3d0b6796b4382e###/openzipkin_zipkin/zipkin-storage/elasticsearch/src/main/java/zipkin2/elasticsearch/ElasticsearchStorage.java###/ElasticsearchStorage.java###zipkin2.elasticsearch.ElasticsearchStorage###ensureClusterReady:String ###returnhttp().newCall(request,ReadStatus.INSTANCE).execute();###http###http()###323:7:323:69
194fff881a542d35557f7cc5e9a5c9f4a1827438###/openzipkin_zipkin/zipkin-storage/cassandra3/src/main/java/zipkin/storage/cassandra3/CassandraSpanConsumer.java###/CassandraSpanConsumer.java###zipkin.storage.cassandra3.CassandraSpanConsumer###storeServiceSpanName:String String long Long BigInteger ###BoundStatementbound=bindWithName(insertServiceSpanName,"insert-service-span-name").setString("service_name",serviceName).setString("span_name",spanName).setInt("bucket",bucket).setUUID("ts",newUUID(UUIDs.startOf(timestamp_micro/1000).getMostSignificantBits(),UUIDs.random().getLeastSignificantBits())).setVarint("trace_id",traceId);###ts###newUUID(UUIDs.startOf(timestamp_micro/1000).getMostSignificantBits(),UUIDs.random().getLeastSignificantBits())###174:7:182:47
ef521594f47a10a7aa5052524318fce9005bbd31###/openzipkin_zipkin/zipkin/src/test/java/zipkin/collector/CollectorTest.java###/CollectorTest.java###zipkin.collector.CollectorTest###errorDecoding_onErrorWithMessage:###Stringmessage=collector.errorReading(newIllegalArgumentException("nobeer")).getMessage();###exception###newIllegalArgumentException("nobeer")###104:5:105:86
ad550ff6ee1bb81b3f3cdbadf90573aace32044d###/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/elasticsearch/ZipkinElasticsearchStorageConfiguration.java###/ZipkinElasticsearchStorageConfiguration.java###zipkin2.server.internal.elasticsearch.ZipkinElasticsearchStorageConfiguration###storage:ZipkinElasticsearchStorageProperties List<Consumer<ClientOptionsBuilder>> List<Consumer<ClientFactoryBuilder>> HostsSupplier int boolean boolean List<String> int int ###returnelasticsearch.toBuilder().hostsSupplier(hostsSupplier).clientCustomizer(newCompositeCustomizer<>(zipkinElasticsearchHttpCustomizers)).clientFactoryCustomizer(newCompositeCustomizer<>(zipkinElasticsearchClientFactoryCustomizers)).namesLookback(namesLookback).strictTraceId(strictTraceId).searchEnabled(searchEnabled).autocompleteKeys(autocompleteKeys).autocompleteTtl(autocompleteTtl).autocompleteCardinality(autocompleteCardinality).build();###builder###elasticsearch.toBuilder().hostsSupplier(hostsSupplier).clientCustomizer(newCompositeCustomizer<>(zipkinElasticsearchHttpCustomizers)).clientFactoryCustomizer(newCompositeCustomizer<>(zipkinElasticsearchClientFactoryCustomizers)).namesLookback(namesLookback).strictTraceId(strictTraceId).searchEnabled(searchEnabled).autocompleteKeys(autocompleteKeys).autocompleteTtl(autocompleteTtl).autocompleteCardinality(autocompleteCardinality)###182:5:193:65
3ffb8d029afee6f3055fc55ca2635de3966cccf1###/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/Schema.java###/Schema.java###zipkin2.storage.cassandra.Schema###ensureExists:String boolean Session ###session.getCluster().getMetadata().getAllHosts().forEach((host)->{Preconditions.checkState(0<=VersionNumber.parse("3.11.3").compareTo(host.getCassandraVersion()),"AllCassandranodesmustberunning3.11.3+");});###cluster###session.getCluster()###102:5:106:8
278904917e686c9f93aa2cbbd830e1e942141cdd###/openzipkin_zipkin/zipkin2/src/main/java/zipkin2/internal/DependencyLinker.java###/DependencyLinker.java###zipkin2.internal.DependencyLinker###putTrace:Iterator<Span> ###logger.fine("linkingtrace"+first.traceId());###traceId###first.traceId()###87:34:87:82
7e9855bcc26d3e5e7888be35c8d91b6cabeafe4d###/openzipkin_zipkin/zipkin-collector/core/src/test/java/zipkin2/collector/CollectorTest.java###/CollectorTest.java###zipkin2.collector.CollectorTest###storeSpansCallback_onErrorWithNullMessage:###callback.onError(newRuntimeException());###error###newRuntimeException()###169:5:169:46
1214e77c08b63529f4f3d7416d45bc09e24e3df3###/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/ITZipkinMetricsHealth.java###/ITZipkinMetricsHealth.java###zipkin2.server.internal.ITZipkinMetricsHealth###healthIsOK:###assertThat(get("/health").isSuccessful()).isTrue();###check###get("/health")###63:5:64:17
b8646142fa15c8c5f47ff2a2a48dc663c7bb65b3###/openzipkin_zipkin/zipkin/src/main/java/zipkin2/storage/InMemoryStorage.java###/InMemoryStorage.java###zipkin2.storage.InMemoryStorage###accept:List<Span> ###serviceToTraceIds.put(span.localServiceName(),lowTraceId);###serviceName###span.localServiceName()###193:9:193:68
f061c8b960e61030edcb356e29d91797f2750075###/openzipkin_zipkin/zipkin-storage/elasticsearch/src/main/java/zipkin2/elasticsearch/internal/client/HttpCall.java###/HttpCall.java###zipkin2.elasticsearch.internal.client.HttpCall###doEnqueue:Callback<V> ###callback.onSuccess(parseResponse(response,bodyConverter));###value###parseResponse(response,bodyConverter)###90:11:90:70
9674c46fa82b5f281fee30c23138aa09c18ee816###/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/SelectTraceIdsFromSpan.java###/SelectTraceIdsFromSpan.java###zipkin2.storage.cassandra.SelectTraceIdsFromSpan.Factory###newCall:String String TimestampRange int ###returnnewSelectTraceIdsFromSpan(this,serviceName!=null?withServiceAndAnnotationQuery:withAnnotationQuery,input).flatMap(AccumulateTraceIdTsLong.get());###preparedStatement###serviceName!=null?withServiceAndAnnotationQuery:withAnnotationQuery###105:7:109:49
dc9de8ba44ef6dd65efa5e298e175bae06e12cbf###/openzipkin_zipkin/zipkin/src/main/java/zipkin/internal/DetectingSpanDecoder.java###/DetectingSpanDecoder.java###zipkin.internal.DetectingSpanDecoder###readSpans:byte[] ###returndetectJsonFormat(span).readSpans(span);###decoder###detectJsonFormat(span)###46:7:46:53
85c485f0257735b2fe11ece52165e30f473da6a5###/openzipkin_zipkin/zipkin-storage/mysql/src/main/java/zipkin/storage/mysql/DependencyLinkSpanIterator.java###/DependencyLinkSpanIterator.java###zipkin.storage.mysql.DependencyLinkSpanIterator###next:###DependencyLinkSpan.Builderresult=DependencyLinkSpan.builder(traceIdHi!=null?traceIdHi:0L,traceIdLo,row.getValue(ZipkinSpans.ZIPKIN_SPANS.PARENT_ID),row.getValue(ZipkinSpans.ZIPKIN_SPANS.ID));###spanId###row.getValue(ZipkinSpans.ZIPKIN_SPANS.ID)###88:5:93:7
7e9855bcc26d3e5e7888be35c8d91b6cabeafe4d###/openzipkin_zipkin/zipkin-collector/core/src/test/java/zipkin2/collector/CollectorTest.java###/CollectorTest.java###zipkin2.collector.CollectorTest###storeSpansCallback_onErrorWithMessage:###callback.onError(newIllegalArgumentException("nobeer"));###error###newIllegalArgumentException("nobeer")###179:5:179:63
b49c1b223cb3471f819a10167c0071dbeff24d70###/openzipkin_zipkin/zipkin-server/src/main/java/zipkin/server/internal/MetricsHealthController.java###/MetricsHealthController.java###zipkin.server.internal.MetricsHealthController###fetchMetricsFromMicrometer:###metrics.put(meter.getId().getName(),meterRegistry.get(meter.getId().getName()).counter().count());###name###meter.getId().getName()###40:9:41:73
1696c5587bb8596b897effc611a276dd2a209538###/openzipkin_zipkin/zipkin-junit/src/main/java/zipkin/junit/ZipkinDispatcher.java###/ZipkinDispatcher.java###zipkin.junit.ZipkinDispatcher###dispatch:RecordedRequest ###List<Span>spans=codec.readSpans(request.getBody().readByteArray());###body###request.getBody().readByteArray()###70:9:70:79
a69877bf684a35ff3af0970687bbea115bc7fa31###/openzipkin_zipkin/zipkin/src/main/java/zipkin/internal/ThriftCodec.java###/ThriftCodec.java###zipkin.internal.ThriftCodec###writeList:ThriftWriter<T> List<T> Buffer ###writeListBegin(buffer,value.size());###length###value.size()###449:5:449:42
1bebd4a456d4fd7be07223bc1d8324f3d4b7ce4b###/openzipkin_zipkin/zipkin-storage/elasticsearch-http/src/test/java/zipkin/storage/elasticsearch/http/ElasticsearchHttpStorageTest.java###/ElasticsearchHttpStorageTest.java###zipkin.storage.elasticsearch.http.ElasticsearchHttpStorageTest###memoizesIndexTemplate:###assertThat(es.takeRequest().getPath()).startsWith("/zipkin-2016-10-01,zipkin-2016-10-02/dependencylink/_search");###request2###es.takeRequest().getPath()###54:5:55:82
f11f2c4af9105190c6ca5e961df54cf226301b0e###/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin/cassandra/internal/Repository.java###/Repository.java###zipkin.cassandra.internal.Repository###storeTraceIdByDuration:String String long long long int ###BoundStatementbound=insertTraceIdBySpanDuration.bind().setString("service_name",serviceName).setString("span_name",spanName).setInt("bucket",durationIndexBucket(timestamp)).setBytesUnsafe("ts",serializeTs(timestamp)).setLong("duration",duration).setLong("trace_id",traceId).setInt("ttl_",ttl);###bucket###durationIndexBucket(timestamp)###881:7:888:32
ef521594f47a10a7aa5052524318fce9005bbd31###/openzipkin_zipkin/zipkin/src/test/java/zipkin/collector/CollectorTest.java###/CollectorTest.java###zipkin.collector.CollectorTest###errorAcceptingSpans_onErrorWithMessage:###Stringmessage=collector.errorStoringSpans(asList(span1),newIllegalArgumentException("nobeer")).getMessage();###exception###newIllegalArgumentException("nobeer")###83:5:85:27
9674c46fa82b5f281fee30c23138aa09c18ee816###/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/SelectTraceIdsFromServiceSpan.java###/SelectTraceIdsFromServiceSpan.java###zipkin2.storage.cassandra.SelectTraceIdsFromServiceSpan.Factory###newCall:Input ###returnnewSelectTraceIdsFromServiceSpan(this,input.start_duration()!=null?selectTraceIdsByServiceSpanNameAndDuration:selectTraceIdsByServiceSpanName,input).flatMap(AccumulateTraceIdTsUuid.get());###preparedStatement###input.start_duration()!=null?selectTraceIdsByServiceSpanNameAndDuration:selectTraceIdsByServiceSpanName###140:7:146:49
d2ebec72639b685ae2a35c296c4872cb5328a88f###/openzipkin_zipkin/zipkin-server/src/test/java/zipkin2/server/internal/ITZipkinServer.java###/ITZipkinServer.java###zipkin2.server.internal.ITZipkinServer###infoEndpointIsAvailable:###assertThat(get("/info").isSuccessful()).isTrue();###info###get("/info")###215:5:215:54
12cae10958370b64fbbc450ae31c1a0a642114f4###/openzipkin_zipkin/zipkin-storage/cassandra/src/test/java/zipkin2/storage/cassandra/CassandraUtilTest.java###/CassandraUtilTest.java###zipkin2.storage.cassandra.CassandraUtilTest###annotationKeys:###assertThat(CassandraUtil.annotationKeys(QueryRequest.newBuilder().endTs(System.currentTimeMillis()).limit(10).lookback(86400000L).serviceName("service").parseAnnotationQuery("errorandhttp.method=GET").build())).containsExactly("error","http.method=GET");###request###QueryRequest.newBuilder().endTs(System.currentTimeMillis()).limit(10).lookback(86400000L).serviceName("service").parseAnnotationQuery("errorandhttp.method=GET").build()###47:5:56:54
7bd40d01e7ddc416c8689426b822ad2c980e61c1###/openzipkin_zipkin/zipkin-storage/cassandra-v1/src/test/java/zipkin2/storage/cassandra/v1/ITSpanConsumer.java###/ITSpanConsumer.java###zipkin2.storage.cassandra.v1.ITSpanConsumer###skipsRedundantIndexingInATrace:###trace[i+1]=Span.newBuilder().traceId(trace[0].traceId()).parentId(trace[0].id()).id(i+1).name(String.valueOf(i+1)).timestamp(trace[0].timestampAsLong()+i*1000).addAnnotation(trace[0].annotations().get(0).timestamp()+i*1000,"bar").build();###rootTimestamp###trace[0].timestampAsLong()###79:7:87:20
ee95e4b7f48c1c0755fce26757d0890a253951e4###/openzipkin_zipkin/zipkin/src/main/java/zipkin/internal/JsonCodec.java###/JsonCodec.java###zipkin.internal.JsonCodec.BINARY_ANNOTATION_ADAPTER.new JsonAdapter<BinaryAnnotation>###sizeInBytes:BinaryAnnotation ###sizeInBytes+=asciiSizeInBytes(ByteBuffer.wrap(value.value).getLong());###number###ByteBuffer.wrap(value.value).getLong()###265:11:265:83
f0eabc049aaedead7bfe73d6b79f30f9a55e825b###/openzipkin_zipkin/zipkin-storage/elasticsearch-http/src/main/java/zipkin/storage/elasticsearch/http/internal/client/SearchCallFactory.java###/SearchCallFactory.java###zipkin.storage.elasticsearch.http.internal.client.SearchCallFactory###lenientSearch:List<String> String ###returnhttp.baseUrl.newBuilder().addPathSegment(join(indices)).addPathSegment(type).addPathSegment("_search").addQueryParameter("allow_no_indices","true").addQueryParameter("expand_wildcards","open").addQueryParameter("ignore_unavailable","true").build();###builder###http.baseUrl.newBuilder().addPathSegment(join(indices))###45:5:52:66
f88ae5c8dcdc8dee3bcff5863cf3c7df9731a67b###/openzipkin_zipkin/zipkin-storage/zipkin2_cassandra/src/main/java/zipkin2/storage/cassandra/CassandraSpanConsumer.java###/CassandraSpanConsumer.java###zipkin2.storage.cassandra.CassandraSpanConsumer###accept:List<Span> ###storeTraceServiceSpanName(s.localServiceName(),s.name(),timestamp,s.duration(),s.traceId());###localServiceName###s.localServiceName()###101:7:101:103
ef521594f47a10a7aa5052524318fce9005bbd31###/openzipkin_zipkin/zipkin/src/test/java/zipkin/collector/CollectorTest.java###/CollectorTest.java###zipkin.collector.CollectorTest###errorDecoding_doesntWrapMalformedException:###Stringmessage=collector.errorReading(newIllegalArgumentException("Malformedreadingspans")).getMessage();###exception###newIllegalArgumentException("Malformedreadingspans")###114:5:115:102
ef521594f47a10a7aa5052524318fce9005bbd31###/openzipkin_zipkin/zipkin/src/test/java/zipkin/collector/CollectorTest.java###/CollectorTest.java###zipkin.collector.CollectorTest###acceptSpansCallback_onErrorWithNullMessage:###callback.onError(newRuntimeException());###exception###newRuntimeException()###55:5:55:46
64abfdd7b6d0da4339bef6e437d1c16dac487746###/openzipkin_zipkin/zipkin-storage/cassandra3/src/main/java/zipkin/storage/cassandra3/CassandraSpanConsumer.java###/CassandraSpanConsumer.java###zipkin.storage.cassandra3.CassandraSpanConsumer###storeServiceSpanName:String String long Long BigInteger ###BoundStatementbound=bindWithName(insertServiceSpanName,"insert-service-span-name").setString("service_name",serviceName).setString("span_name",spanName).setInt("bucket",bucket).setUUID("ts",newUUID(UUIDs.startOf(timestamp_micro/1000).getMostSignificantBits(),UUIDs.random().getLeastSignificantBits())).setVarint("trace_id",traceId);###ts###newUUID(UUIDs.startOf(timestamp_micro/1000).getMostSignificantBits(),UUIDs.random().getLeastSignificantBits())###174:7:182:47
12cae10958370b64fbbc450ae31c1a0a642114f4###/openzipkin_zipkin/zipkin-storage/cassandra/src/test/java/zipkin2/storage/cassandra/CassandraUtilTest.java###/CassandraUtilTest.java###zipkin2.storage.cassandra.CassandraUtilTest###annotationKeys_dedupes:###assertThat(CassandraUtil.annotationKeys(QueryRequest.newBuilder().endTs(System.currentTimeMillis()).limit(10).lookback(86400000L).serviceName("service").parseAnnotationQuery("erroranderror").build())).containsExactly("error");###request###QueryRequest.newBuilder().endTs(System.currentTimeMillis()).limit(10).lookback(86400000L).serviceName("service").parseAnnotationQuery("erroranderror").build()###61:5:70:35
23beae1ae71d4b4d12397645aadb129984357511###/openzipkin_zipkin/zipkin/src/main/java/zipkin/internal/CorrectForClockSkew.java###/CorrectForClockSkew.java###zipkin.internal.CorrectForClockSkew###adjustTimestamps:Span ClockSkew ###returnspan.toBuilder().timestamp(span.timestamp-skew.skew).build();###spanTimestamp###span.timestamp###182:9:182:79
2fe5142e08b4d74bd38da4ff5837e969777755da###/openzipkin_zipkin/zipkin/src/main/java/zipkin/internal/JsonCodec.java###/JsonCodec.java###zipkin.internal.JsonCodec###overheadInBytes:List<T> ###sizeInBytes+=value.size()-1;###length###value.size()###718:27:718:59
78ca75121d30ce631a9e8016e57c1793fd831c63###/openzipkin_zipkin/zipkin-storage/elasticsearch/src/test/java/zipkin2/elasticsearch/JsonReadersTest.java###/JsonReadersTest.java###zipkin2.elasticsearch.JsonReadersTest###enterPath_nested:###assertThat(JsonReaders.enterPath(jsonParser("{\n"+"\"name\":\"Kamal\",\n"+"\"cluster_name\":\"elasticsearch\",\n"+"\"version\":{\n"+"\"number\":\"2.4.0\",\n"+"\"build_hash\":\"ce9f0c7394dee074091dd1bc4e9469251181fc55\",\n"+"\"build_timestamp\":\"2016-08-29T09:14:17Z\",\n"+"\"build_snapshot\":false,\n"+"\"lucene_version\":\"5.5.2\"\n"+"},\n"+"\"tagline\":\"YouKnow,forSearch\"\n"+"}"),"version","number").getText()).isEqualTo("2.4.0");###content###"{\n"+"\"name\":\"Kamal\",\n"+"\"cluster_name\":\"elasticsearch\",\n"+"\"version\":{\n"+"\"number\":\"2.4.0\",\n"+"\"build_hash\":\"ce9f0c7394dee074091dd1bc4e9469251181fc55\",\n"+"\"build_timestamp\":\"2016-08-29T09:14:17Z\",\n"+"\"build_snapshot\":false,\n"+"\"lucene_version\":\"5.5.2\"\n"+"},\n"+"\"tagline\":\"YouKnow,forSearch\"\n"+"}"###30:5:48:29
d1345b92740824e442e68a10f9ef44adcb43eef0###/openzipkin_zipkin/zipkin-storage/zipkin2_cassandra/src/main/java/zipkin2/storage/cassandra/internal/call/AggregateCall.java###/AggregateCall.java###zipkin2.storage.cassandra.internal.call.AggregateCall###doEnqueue:Callback<O> ###AtomicIntegerremaining=newAtomicInteger(calls.size());###length###calls.size()###83:5:83:63
fd9054c0a283203ef0d0108aaf0693ca35bee025###/openzipkin_zipkin/zipkin-storage/elasticsearch/src/main/java/zipkin2/elasticsearch/ElasticsearchStorage.java###/ElasticsearchStorage.java###zipkin2.elasticsearch.ElasticsearchStorage###httpClient:###staticEndpoints.add(Endpoint.parse(url.getAuthority()));###endpoint###Endpoint.parse(url.getAuthority())###434:11:434:67
f309c19345069eb09604f09858d427bdb1d3e18a###/openzipkin_zipkin/zipkin-storage/zipkin2_cassandra/src/main/java/zipkin2/storage/cassandra/DefaultSessionFactory.java###/DefaultSessionFactory.java###zipkin2.storage.cassandra.DefaultSessionFactory###create:CassandraStorage ###Schema.ensureExists(cassandra.keyspace(),cassandra.searchEnabled(),session);###keyspace###cassandra.keyspace()###60:9:60:87
1bebd4a456d4fd7be07223bc1d8324f3d4b7ce4b###/openzipkin_zipkin/zipkin-storage/elasticsearch-http/src/test/java/zipkin/storage/elasticsearch/http/ElasticsearchHttpStorageTest.java###/ElasticsearchHttpStorageTest.java###zipkin.storage.elasticsearch.http.ElasticsearchHttpStorageTest###memoizesIndexTemplate:###assertThat(es.takeRequest().getPath()).startsWith("/zipkin-2016-10-01,zipkin-2016-10-02/dependencylink/_search");###legacyRequest###"/zipkin-2016-10-01,zipkin-2016-10-02/dependencylink/_search"###56:5:57:82
a485efed550f838070b8ce6eef1230dfed9b27da###/openzipkin_zipkin/zipkin/src/main/java/zipkin/internal/Span2Converter.java###/Span2Converter.java###zipkin.internal.Span2Converter###toSpan:Span2 ###switch(in.kind())###kind###in.kind()###290:7:329:8
9eef58720fda56875b69bcd42e90e2968a95923b###/openzipkin_zipkin/zipkin-spanstores/jdbc/src/main/java/zipkin/jdbc/JDBCSpanStore.java###/JDBCSpanStore.java###zipkin.jdbc.JDBCSpanStore###accept:List<Span> ###updateFields.put(ZIPKIN_SPANS.START_TS,span.timestamp);###authoritativeTimestamp###span.timestamp###113:11:113:67
fc8cc19a78d01c472b4b79412f378a43f179b772###/openzipkin_zipkin/zipkin-storage/elasticsearch/src/main/java/zipkin2/elasticsearch/internal/IndexNameFormatter.java###/IndexNameFormatter.java###zipkin2.elasticsearch.internal.IndexNameFormatter.Builder.build.autoBuild.dateFormat.new ThreadLocal<SimpleDateFormat>###initialValue:###SimpleDateFormatresult=newSimpleDateFormat(separator==0?"yyyyMMdd":"yyyy-MM-dd".replace('-',separator));###format###separator==0?"yyyyMMdd":"yyyy-MM-dd".replace('-',separator)###101:19:103:95
196d58ae7d12934f294fbd06feebe9774db07f3a###/openzipkin_zipkin/zipkin/src/main/java/zipkin/storage/QueryRequest.java###/QueryRequest.java###zipkin.storage.QueryRequest.Builder###parseAnnotationQuery:String ###if(ann.indexOf('=')==-1)###idx###ann.indexOf('=')###223:11:228:12
7fe4f00ebedf34890e41155570c1eb241939f5e6###/openzipkin_zipkin/zipkin-storage/elasticsearch/src/main/java/zipkin2/elasticsearch/ElasticsearchSpanConsumer.java###/ElasticsearchSpanConsumer.java###zipkin2.elasticsearch.ElasticsearchSpanConsumer###prefixWithTimestampMillisAndQuery:Span long ###if(tag.getKey().length()+tag.getValue().length()+1>255)###length###tag.getKey().length()+tag.getValue().length()+1###126:11:126:83
7caed1c428798f55a0d99310d203e879d822ab3c###/openzipkin_zipkin/zipkin-server/src/main/java/zipkin/server/internal/MetricsHealthController.java###/MetricsHealthController.java###zipkin.server.internal.MetricsHealthController###fetchMetricsFromMicrometer:###metrics.put(meter.getId().getName(),meterRegistry.get(meter.getId().getName()).counter().count());###name###meter.getId().getName()###52:9:53:73
3ffb8d029afee6f3055fc55ca2635de3966cccf1###/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/Schema.java###/Schema.java###zipkin2.storage.cassandra.Schema###getKeyspaceMetadata:Session ###KeyspaceMetadatakeyspaceMetadata=cluster.getMetadata().getKeyspace(keyspace);###metadata###cluster.getMetadata()###90:5:90:85
ef521594f47a10a7aa5052524318fce9005bbd31###/openzipkin_zipkin/zipkin/src/test/java/zipkin/collector/CollectorTest.java###/CollectorTest.java###zipkin.collector.CollectorTest###acceptSpansCallback_onErrorWithMessage:###callback.onError(newIllegalArgumentException("nobeer"));###exception###newIllegalArgumentException("nobeer")###64:5:64:63
8a6ae58ff09c7b227b8cdf403b0950e5b137edf2###/openzipkin_zipkin/zipkin2/src/main/java/zipkin2/internal/V2SpanWriter.java###/V2SpanWriter.java###zipkin2.internal.V2SpanWriter###endpointSizeInBytes:Endpoint ###sizeInBytes+=jsonEscapedSizeInBytes(value.serviceName());###serviceName###value.serviceName()###149:7:149:66
bc9e282e44f95f08f071eb2592d8d189cf29755a###/openzipkin_zipkin/zipkin-storage/zipkin2_cassandra/src/main/java/zipkin2/storage/cassandra/CassandraSpanStore.java###/CassandraSpanStore.java###zipkin2.storage.cassandra.CassandraSpanStore.getTrace.new ListenableFutureCall<List<Span>>###newFuture:###returngetSpansByTraceIds(Collections.singleton(traceId),maxTraceCols);###traceIds###Collections.singleton(traceId)###292:9:292:81
4624229c5f6023c0fb9751ac2b49fccf36b9f76a###/openzipkin_zipkin/zipkin/src/main/java/zipkin/internal/DependencyLinker.java###/DependencyLinker.java###zipkin.internal.DependencyLinker###putTrace:Iterator<DependencyLinkSpan> ###logger.fine("processing"+current.value());###currentSpan###current.value()###72:9:72:54
a18f31c075e5d25cccba5d06ffc06b221bbfa0d8###/openzipkin_zipkin/zipkin-storage/cassandra/src/test/java/zipkin/storage/cassandra/DeduplicatingExecutorTest.java###/DeduplicatingExecutorTest.java###zipkin.storage.cassandra.DeduplicatingExecutorTest###expiresWhenTtlPasses_initiallyNegative:###assertThat(executor.maybeExecuteAsync(first,"foo").get()).isEqualTo(first);###firstFuture###executor.maybeExecuteAsync(first,"foo")###180:5:181:27
8a6ae58ff09c7b227b8cdf403b0950e5b137edf2###/openzipkin_zipkin/zipkin2/src/main/java/zipkin2/internal/V1Metadata.java###/V1Metadata.java###zipkin2.internal.V1Metadata###parse:Span ###switch(in.kind())###kind###in.kind()###39:7:66:8
09db702e666a9af65dca00f742f524fdd10f13b1###/openzipkin_zipkin/zipkin-storage/elasticsearch-http/src/main/java/zipkin/storage/elasticsearch/http/JsonAdapters.java###/JsonAdapters.java###zipkin.storage.elasticsearch.http.JsonAdapters.ENDPOINT_ADAPTER.nullSafe.new JsonAdapter<Endpoint>###fromJson:JsonReader ###switch(reader.nextName())###nextName###reader.nextName()###150:9:163:10
686e0b68aa5a65be3f9d3984b5dc59709cb6bddd###/openzipkin_zipkin/zipkin-java-server/src/main/java/io/zipkin/server/brave/ApiTracerConfiguration.java###/ApiTracerConfiguration.java###io.zipkin.server.brave.ApiTracerConfiguration###addInterceptors:InterceptorRegistry ###registry.addInterceptor(newServletHandlerInterceptor(newServerRequestInterceptor(tracer),newServerResponseInterceptor(tracer),newDefaultSpanNameProvider(),brave.serverSpanThreadBinder()));###traceInterceptor###newServletHandlerInterceptor(newServerRequestInterceptor(tracer),newServerResponseInterceptor(tracer),newDefaultSpanNameProvider(),brave.serverSpanThreadBinder())###36:5:38:73
0047038b4936970716645d35a558e1286db7afcd###/openzipkin_zipkin/zipkin-storage/elasticsearch-http/src/main/java/zipkin/storage/elasticsearch/http/ElasticsearchHttpSpanConsumer.java###/ElasticsearchHttpSpanConsumer.java###zipkin.storage.elasticsearch.http.ElasticsearchHttpSpanConsumer###indexSpans:HttpBulkIndexer List<Span> ###index=indexNameFormatter.indexNameForTimestamp(System.currentTimeMillis());###indexTimestamp###System.currentTimeMillis()###77:9:77:86
ee95e4b7f48c1c0755fce26757d0890a253951e4###/openzipkin_zipkin/zipkin/src/main/java/zipkin/internal/JsonCodec.java###/JsonCodec.java###zipkin.internal.JsonCodec.BINARY_ANNOTATION_ADAPTER.new JsonAdapter<BinaryAnnotation>###write:BinaryAnnotation Buffer ###b.writeAscii(ByteBuffer.wrap(value.value).getLong());###number###ByteBuffer.wrap(value.value).getLong()###302:11:302:64
0ccb2d696a7aa54230473231f713941b07e26881###/openzipkin_zipkin/zipkin-collector/rabbitmq/src/main/java/zipkin2/collector/rabbitmq/RabbitMQCollector.java###/RabbitMQCollector.java###zipkin2.collector.rabbitmq.RabbitMQCollector.LazyInit###declareQueueIfMissing:Connection ###if(maybeQueueDoesNotExist.getCause()!=null&&maybeQueueDoesNotExist.getCause().getMessage().contains("NOT_FOUND"))###cause###maybeQueueDoesNotExist.getCause()###215:9:221:10
9674c46fa82b5f281fee30c23138aa09c18ee816###/openzipkin_zipkin/zipkin-storage/cassandra/src/main/java/zipkin2/storage/cassandra/SelectFromSpan.java###/SelectFromSpan.java###zipkin2.storage.cassandra.SelectFromSpan.ReadSpans###accumulator:###Span.Builderbuilder=Span.newBuilder().traceId(traceId).parentId(row.getString("parent_id")).id(row.getString("id")).name(row.getString("span")).timestamp(row.getLong("ts"));###builder###Span.newBuilder().traceId(traceId).parentId(row.getString("parent_id")).id(row.getString("id")).name(row.getString("span"))###197:9:202:41
b0f22b5bd0f29dd1539cb797129fb1d61dd7b3de###/openzipkin_zipkin/zipkin/src/main/java/zipkin/internal/JsonCodec.java###/JsonCodec.java###zipkin.internal.JsonCodec.SPAN_ADAPTER.new JsonAdapter<Span>###fromJson:JsonReader ###result.traceId(lowerHexToUnsignedLong(reader.nextString()));###traceId###reader.nextString()###329:11:329:71
c91aeccff395659943c8f115550e1e9311a7f11a###/openzipkin_zipkin/zipkin/src/main/java/zipkin/internal/Util.java###/Util.java###zipkin.internal.Util###lowerHexToUnsignedLong:String ###for(c:lowerHex.toCharArray())###array###lowerHex.toCharArray()###92:5:95:6
5637db07b3d824647760cf9751da956f1fbd7bd9###/openzipkin_zipkin/zipkin-server/src/main/java/zipkin2/server/internal/elasticsearch/ZipkinElasticsearchStorageConfiguration.java###/ZipkinElasticsearchStorageConfiguration.java###zipkin2.server.internal.elasticsearch.ZipkinElasticsearchStorageConfiguration###esTracing:Optional<HttpTracing> ###spanCustomizer.name(ctx.attr(HttpCall.NAME).get());###name###ctx.attr(HttpCall.NAME).get()###138:11:138:62
a18f31c075e5d25cccba5d06ffc06b221bbfa0d8###/openzipkin_zipkin/zipkin-storage/cassandra/src/test/java/zipkin/storage/cassandra/DeduplicatingExecutorTest.java###/DeduplicatingExecutorTest.java###zipkin.storage.cassandra.DeduplicatingExecutorTest###expiresWhenTtlPasses:###assertThat(executor.maybeExecuteAsync(first,"foo").get()).isEqualTo(first);###firstFoo###executor.maybeExecuteAsync(first,"foo")###50:5:51:27
